"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@blocknote";
exports.ids = ["vendor-chunks/@blocknote"];
exports.modules = {

/***/ "(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/regex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/regex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWMsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRyx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5ib2FyZC8uL25vZGVfbW9kdWxlcy9AYmxvY2tub3RlL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9yZWdleC5qcz9lNDdlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/rng.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/rng.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcm5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QjtBQUM1Qix1Q0FBdUM7O0FBRXZDO0FBQ2U7QUFDZjtBQUNBLElBQUksNERBQXFCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbmJvYXJkLy4vbm9kZV9tb2R1bGVzL0BibG9ja25vdGUvY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JuZy5qcz9hM2I0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmNvbnN0IHJuZHM4UG9vbCA9IG5ldyBVaW50OEFycmF5KDI1Nik7IC8vICMgb2YgcmFuZG9tIHZhbHVlcyB0byBwcmUtYWxsb2NhdGVcblxubGV0IHBvb2xQdHIgPSBybmRzOFBvb2wubGVuZ3RoO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAocG9vbFB0ciA+IHJuZHM4UG9vbC5sZW5ndGggLSAxNikge1xuICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhybmRzOFBvb2wpO1xuICAgIHBvb2xQdHIgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHJuZHM4UG9vbC5zbGljZShwb29sUHRyLCBwb29sUHRyICs9IDE2KTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/stringify.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/stringify.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/validate.js\");\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvc3RyaW5naWZ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNGdCQUE0Z0I7QUFDNWdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU8sd0RBQVE7QUFDZjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUVBQWUsU0FBUyIsInNvdXJjZXMiOlsid2VicGFjazovL3plbmJvYXJkLy4vbm9kZV9tb2R1bGVzL0BibG9ja25vdGUvY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3N0cmluZ2lmeS5qcz81NGFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgY29uc3QgdXVpZCA9IChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/v4.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/v4.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ \"(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(rnds);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJCO0FBQ1k7O0FBRXZDO0FBQ0E7QUFDQSxpREFBaUQsK0NBQUcsS0FBSzs7QUFFekQ7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7O0FBRUEsb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFNBQVMseURBQVM7QUFDbEI7O0FBRUEsaUVBQWUsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbmJvYXJkLy4vbm9kZV9tb2R1bGVzL0BibG9ja25vdGUvY29yZS9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3Y0LmpzP2JhNzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gc3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/v4.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/validate.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/validate.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/regex.js\");\n\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdmFsaWRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0I7O0FBRS9CO0FBQ0EscUNBQXFDLGlEQUFLO0FBQzFDOztBQUVBLGlFQUFlLFFBQVEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5ib2FyZC8uL25vZGVfbW9kdWxlcy9AYmxvY2tub3RlL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92YWxpZGF0ZS5qcz85MjgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSRUdFWCBmcm9tICcuL3JlZ2V4LmpzJztcblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIFJFR0VYLnRlc3QodXVpZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/core/dist/style.css":
/*!*****************************************************!*\
  !*** ./node_modules/@blocknote/core/dist/style.css ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"730a64dbb042\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL2Rpc3Qvc3R5bGUuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVuYm9hcmQvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL2Rpc3Qvc3R5bGUuY3NzPzVmZDMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI3MzBhNjRkYmIwNDJcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/dist/style.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/core/dist/blocknote.js":
/*!********************************************************!*\
  !*** ./node_modules/@blocknote/core/dist/blocknote.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockNoteEditor: () => (/* binding */ xn),\n/* harmony export */   CustomBlockSerializerExtension: () => (/* binding */ qe),\n/* harmony export */   FormattingToolbarProsemirrorPlugin: () => (/* binding */ Ro),\n/* harmony export */   FormattingToolbarView: () => (/* binding */ Do),\n/* harmony export */   HyperlinkToolbarProsemirrorPlugin: () => (/* binding */ Uo),\n/* harmony export */   ImageToolbarProsemirrorPlugin: () => (/* binding */ Ho),\n/* harmony export */   ImageToolbarView: () => (/* binding */ _o),\n/* harmony export */   SideMenuProsemirrorPlugin: () => (/* binding */ Xo),\n/* harmony export */   SideMenuView: () => (/* binding */ jo),\n/* harmony export */   SlashMenuProsemirrorPlugin: () => (/* binding */ Je),\n/* harmony export */   UnreachableCaseError: () => (/* binding */ Pe),\n/* harmony export */   blockStyles: () => (/* binding */ Bn),\n/* harmony export */   camelToDataKebab: () => (/* binding */ dt),\n/* harmony export */   createBlockSpec: () => (/* binding */ go),\n/* harmony export */   createTipTapBlock: () => (/* binding */ F),\n/* harmony export */   defaultBlockSchema: () => (/* binding */ jt),\n/* harmony export */   defaultProps: () => (/* binding */ C),\n/* harmony export */   formatKeyboardShortcut: () => (/* binding */ Mn),\n/* harmony export */   formattingToolbarPluginKey: () => (/* binding */ Oo),\n/* harmony export */   getBlockNoteExtensions: () => (/* binding */ ro),\n/* harmony export */   getDefaultSlashMenuItems: () => (/* binding */ Ko),\n/* harmony export */   hyperlinkToolbarPluginKey: () => (/* binding */ Vo),\n/* harmony export */   imageToolbarPluginKey: () => (/* binding */ z),\n/* harmony export */   isAppleOS: () => (/* binding */ Ne),\n/* harmony export */   mergeCSSClasses: () => (/* binding */ S),\n/* harmony export */   parse: () => (/* binding */ mo),\n/* harmony export */   propsToAttributes: () => (/* binding */ ho),\n/* harmony export */   render: () => (/* binding */ fo),\n/* harmony export */   setupSuggestionsMenu: () => (/* binding */ Ye),\n/* harmony export */   sideMenuPluginKey: () => (/* binding */ qo),\n/* harmony export */   slashMenuPluginKey: () => (/* binding */ tt),\n/* harmony export */   uploadToTmpFilesDotOrg_DEV_ONLY: () => (/* binding */ In)\n/* harmony export */ });\n/* harmony import */ var _tiptap_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @tiptap/core */ \"(ssr)/./node_modules/@tiptap/core/dist/index.js\");\n/* harmony import */ var _tiptap_extension_bold__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tiptap/extension-bold */ \"(ssr)/./node_modules/@tiptap/extension-bold/dist/index.js\");\n/* harmony import */ var _tiptap_extension_code__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tiptap/extension-code */ \"(ssr)/./node_modules/@tiptap/extension-code/dist/index.js\");\n/* harmony import */ var _tiptap_extension_collaboration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tiptap/extension-collaboration */ \"(ssr)/./node_modules/@tiptap/extension-collaboration/dist/index.js\");\n/* harmony import */ var _tiptap_extension_collaboration_cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tiptap/extension-collaboration-cursor */ \"(ssr)/./node_modules/@tiptap/extension-collaboration-cursor/dist/index.js\");\n/* harmony import */ var _tiptap_extension_dropcursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @tiptap/extension-dropcursor */ \"(ssr)/./node_modules/@tiptap/extension-dropcursor/dist/index.js\");\n/* harmony import */ var _tiptap_extension_gapcursor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @tiptap/extension-gapcursor */ \"(ssr)/./node_modules/@tiptap/extension-gapcursor/dist/index.js\");\n/* harmony import */ var _tiptap_extension_hard_break__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @tiptap/extension-hard-break */ \"(ssr)/./node_modules/@tiptap/extension-hard-break/dist/index.js\");\n/* harmony import */ var _tiptap_extension_history__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @tiptap/extension-history */ \"(ssr)/./node_modules/@tiptap/extension-history/dist/index.js\");\n/* harmony import */ var _tiptap_extension_italic__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @tiptap/extension-italic */ \"(ssr)/./node_modules/@tiptap/extension-italic/dist/index.js\");\n/* harmony import */ var _tiptap_extension_link__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @tiptap/extension-link */ \"(ssr)/./node_modules/@tiptap/extension-link/dist/index.js\");\n/* harmony import */ var _tiptap_extension_strike__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @tiptap/extension-strike */ \"(ssr)/./node_modules/@tiptap/extension-strike/dist/index.js\");\n/* harmony import */ var _tiptap_extension_text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @tiptap/extension-text */ \"(ssr)/./node_modules/@tiptap/extension-text/dist/index.js\");\n/* harmony import */ var _tiptap_extension_underline__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @tiptap/extension-underline */ \"(ssr)/./node_modules/@tiptap/extension-underline/dist/index.js\");\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! prosemirror-model */ \"(ssr)/./node_modules/prosemirror-model/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! prosemirror-state */ \"(ssr)/./node_modules/prosemirror-state/dist/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@blocknote/core/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! prosemirror-view */ \"(ssr)/./node_modules/prosemirror-view/dist/index.js\");\n/* harmony import */ var rehype_parse__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rehype-parse */ \"(ssr)/./node_modules/rehype-parse/lib/index.js\");\n/* harmony import */ var rehype_remark__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rehype-remark */ \"(ssr)/./node_modules/rehype-remark/lib/index.js\");\n/* harmony import */ var rehype_stringify__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rehype-stringify */ \"(ssr)/./node_modules/rehype-stringify/lib/index.js\");\n/* harmony import */ var remark_gfm__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! remark-gfm */ \"(ssr)/./node_modules/remark-gfm/index.js\");\n/* harmony import */ var remark_parse__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! remark-parse */ \"(ssr)/./node_modules/remark-parse/lib/index.js\");\n/* harmony import */ var remark_rehype__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! remark-rehype */ \"(ssr)/./node_modules/remark-rehype/lib/index.js\");\n/* harmony import */ var remark_rehype__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! remark-rehype */ \"(ssr)/./node_modules/mdast-util-to-hast/lib/handlers/index.js\");\n/* harmony import */ var remark_stringify__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! remark-stringify */ \"(ssr)/./node_modules/remark-stringify/lib/index.js\");\n/* harmony import */ var unified__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! unified */ \"(ssr)/./node_modules/unified/lib/index.js\");\n/* harmony import */ var hast_util_from_dom__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! hast-util-from-dom */ \"(ssr)/./node_modules/hast-util-from-dom/lib/index.js\");\nvar Yt = Object.defineProperty;\nvar Jt = (n, e, t) => e in n ? Yt(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;\nvar u = (n, e, t) => (Jt(n, typeof e != \"symbol\" ? e + \"\" : e, t), t);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Me = \"_bnEditor_12je0_3\", Be = \"_bnRoot_12je0_19\", xe = \"_defaultStyles_12je0_34\", Ie = \"_dragPreview_12je0_57\", D = {\n  bnEditor: Me,\n  bnRoot: Be,\n  defaultStyles: xe,\n  dragPreview: Ie,\n  \"collaboration-cursor__caret\": \"_collaboration-cursor__caret_12je0_63\",\n  \"collaboration-cursor__label\": \"_collaboration-cursor__label_12je0_74\"\n};\nfunction bt(n) {\n  const e = n.attrs.id, t = n.firstChild, o = t.type, r = n.childCount === 2 ? n.lastChild.childCount : 0;\n  return {\n    id: e,\n    node: n,\n    contentNode: t,\n    contentType: o,\n    numChildBlocks: r\n  };\n}\nfunction b(n, e) {\n  const o = n.nodeSize - 2;\n  if (e <= 1)\n    for (e = 1 + 1; n.resolve(e).parent.type.name !== \"blockContainer\" && e < o; )\n      e++;\n  else if (e >= o)\n    for (e = o - 1; n.resolve(e).parent.type.name !== \"blockContainer\" && e > 1; )\n      e--;\n  n.resolve(e).parent.type.name === \"blockGroup\" && e++;\n  const r = n.resolve(e), i = r.depth;\n  let s = r.node(i), l = i;\n  for (; ; ) {\n    if (l < 0)\n      throw new Error(\n        \"Could not find blockContainer node. This can only happen if the underlying BlockNote schema has been edited.\"\n      );\n    if (s.type.name === \"blockContainer\")\n      break;\n    l -= 1, s = r.node(l);\n  }\n  const { id: a, contentNode: d, contentType: c, numChildBlocks: m } = bt(s), h = r.start(l), p = r.end(l);\n  return {\n    id: a,\n    node: s,\n    contentNode: d,\n    contentType: c,\n    numChildBlocks: m,\n    startPos: h,\n    endPos: p,\n    depth: l\n  };\n}\nconst C = {\n  backgroundColor: {\n    default: \"default\"\n  },\n  textColor: {\n    default: \"default\"\n  },\n  textAlignment: {\n    default: \"left\",\n    values: [\"left\", \"center\", \"right\", \"justify\"]\n  }\n}, Ae = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  name: \"blockBackgroundColor\",\n  addGlobalAttributes() {\n    return [\n      {\n        types: [\"blockContainer\"],\n        attributes: {\n          backgroundColor: {\n            default: C.backgroundColor.default,\n            parseHTML: (n) => n.hasAttribute(\"data-background-color\") ? n.getAttribute(\"data-background-color\") : C.backgroundColor.default,\n            renderHTML: (n) => n.backgroundColor !== C.backgroundColor.default && {\n              \"data-background-color\": n.backgroundColor\n            }\n          }\n        }\n      }\n    ];\n  },\n  addCommands() {\n    return {\n      setBlockBackgroundColor: (n, e) => ({ state: t, view: o }) => {\n        const r = b(t.doc, n);\n        return r === void 0 ? !1 : (t.tr.setNodeAttribute(\n          r.startPos - 1,\n          \"backgroundColor\",\n          e\n        ), o.focus(), !0);\n      }\n    };\n  }\n}), _e = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Mark.create({\n  name: \"backgroundColor\",\n  addAttributes() {\n    return {\n      color: {\n        default: void 0,\n        parseHTML: (n) => n.getAttribute(\"data-background-color\"),\n        renderHTML: (n) => ({\n          \"data-background-color\": n.color\n        })\n      }\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: \"span\",\n        getAttrs: (n) => typeof n == \"string\" ? !1 : n.hasAttribute(\"data-background-color\") ? { color: n.getAttribute(\"data-background-color\") } : !1\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    return [\"span\", n, 0];\n  },\n  addCommands() {\n    return {\n      setBackgroundColor: (n) => ({ commands: e }) => n !== C.backgroundColor.default ? e.setMark(this.name, { color: n }) : e.unsetMark(this.name)\n    };\n  }\n});\nfunction He(n, e = JSON.stringify) {\n  const t = {};\n  return n.filter((o) => {\n    const r = e(o);\n    return Object.prototype.hasOwnProperty.call(t, r) ? !1 : t[r] = !0;\n  });\n}\nfunction Le(n) {\n  const e = n.filter(\n    (o, r) => n.indexOf(o) !== r\n  );\n  return He(e);\n}\nconst j = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  name: \"uniqueID\",\n  // we’ll set a very high priority to make sure this runs first\n  // and is compatible with `appendTransaction` hooks of other extensions\n  priority: 1e4,\n  addOptions() {\n    return {\n      attributeName: \"id\",\n      types: [],\n      generateID: () => {\n        if (typeof window < \"u\" && window.__TEST_OPTIONS) {\n          const n = window.__TEST_OPTIONS;\n          return n.mockID === void 0 ? n.mockID = 0 : n.mockID++, n.mockID.toString();\n        }\n        return (0,uuid__WEBPACK_IMPORTED_MODULE_14__[\"default\"])();\n      },\n      filterTransaction: null\n    };\n  },\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          [this.options.attributeName]: {\n            default: null,\n            parseHTML: (n) => n.getAttribute(`data-${this.options.attributeName}`),\n            renderHTML: (n) => ({\n              [`data-${this.options.attributeName}`]: n[this.options.attributeName]\n            })\n          }\n        }\n      }\n    ];\n  },\n  // check initial content for missing ids\n  // onCreate() {\n  //   // Don’t do this when the collaboration extension is active\n  //   // because this may update the content, so Y.js tries to merge these changes.\n  //   // This leads to empty block nodes.\n  //   // See: https://github.com/ueberdosis/tiptap/issues/2400\n  //   if (\n  //     this.editor.extensionManager.extensions.find(\n  //       (extension) => extension.name === \"collaboration\"\n  //     )\n  //   ) {\n  //     return;\n  //   }\n  //   const { view, state } = this.editor;\n  //   const { tr, doc } = state;\n  //   const { types, attributeName, generateID } = this.options;\n  //   const nodesWithoutId = findChildren(doc, (node) => {\n  //     return (\n  //       types.includes(node.type.name) && node.attrs[attributeName] === null\n  //     );\n  //   });\n  //   nodesWithoutId.forEach(({ node, pos }) => {\n  //     tr.setNodeMarkup(pos, undefined, {\n  //       ...node.attrs,\n  //       [attributeName]: generateID(),\n  //     });\n  //   });\n  //   tr.setMeta(\"addToHistory\", false);\n  //   view.dispatch(tr);\n  // },\n  addProseMirrorPlugins() {\n    let n = null, e = !1;\n    return [\n      new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n        key: new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"uniqueID\"),\n        appendTransaction: (t, o, r) => {\n          const i = t.some((f) => f.docChanged) && !o.doc.eq(r.doc), s = this.options.filterTransaction && t.some((f) => {\n            let k, v;\n            return !(!((v = (k = this.options).filterTransaction) === null || v === void 0) && v.call(k, f));\n          });\n          if (!i || s)\n            return;\n          const { tr: l } = r, { types: a, attributeName: d, generateID: c } = this.options, m = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.combineTransactionSteps)(\n            o.doc,\n            t\n          ), { mapping: h } = m;\n          if ((0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.getChangedRanges)(m).forEach(({ newRange: f }) => {\n            const k = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.findChildrenInRange)(\n              r.doc,\n              f,\n              (E) => a.includes(E.type.name)\n            ), v = k.map(({ node: E }) => E.attrs[d]).filter((E) => E !== null), w = Le(v);\n            k.forEach(({ node: E, pos: _ }) => {\n              let y;\n              const M = (y = l.doc.nodeAt(_)) === null || y === void 0 ? void 0 : y.attrs[d];\n              if (M === null) {\n                l.setNodeMarkup(_, void 0, {\n                  ...E.attrs,\n                  [d]: c()\n                });\n                return;\n              }\n              const { deleted: ot } = h.invert().mapResult(_);\n              ot && w.includes(M) && l.setNodeMarkup(_, void 0, {\n                ...E.attrs,\n                [d]: c()\n              });\n            });\n          }), !!l.steps.length)\n            return l;\n        },\n        // we register a global drag handler to track the current drag source element\n        view(t) {\n          const o = (r) => {\n            let i;\n            n = !((i = t.dom.parentElement) === null || i === void 0) && i.contains(r.target) ? t.dom.parentElement : null;\n          };\n          return window.addEventListener(\"dragstart\", o), {\n            destroy() {\n              window.removeEventListener(\"dragstart\", o);\n            }\n          };\n        },\n        props: {\n          // `handleDOMEvents` is called before `transformPasted`\n          // so we can do some checks before\n          handleDOMEvents: {\n            // only create new ids for dropped content while holding `alt`\n            // or content is dragged from another editor\n            drop: (t, o) => {\n              let r;\n              return (n !== t.dom.parentElement || ((r = o.dataTransfer) === null || r === void 0 ? void 0 : r.effectAllowed) === \"copy\") && (n = null, e = !0), !1;\n            },\n            // always create new ids on pasted content\n            paste: () => (e = !0, !1)\n          },\n          // we’ll remove ids for every pasted node\n          // so we can create a new one within `appendTransaction`\n          transformPasted: (t) => {\n            if (!e)\n              return t;\n            const { types: o, attributeName: r } = this.options, i = (s) => {\n              const l = [];\n              return s.forEach((a) => {\n                if (a.isText) {\n                  l.push(a);\n                  return;\n                }\n                if (!o.includes(a.type.name)) {\n                  l.push(a.copy(i(a.content)));\n                  return;\n                }\n                const d = a.type.create(\n                  {\n                    ...a.attrs,\n                    [r]: null\n                  },\n                  i(a.content),\n                  a.marks\n                );\n                l.push(d);\n              }), prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Fragment.from(l);\n            };\n            return e = !1, new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(\n              i(t.content),\n              t.openStart,\n              t.openEnd\n            );\n          }\n        }\n      })\n    ];\n  }\n}), Ne = () => /Mac/.test(navigator.platform) || /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent);\nfunction Mn(n) {\n  return Ne() ? n.replace(\"Mod\", \"⌘\") : n.replace(\"Mod\", \"Ctrl\");\n}\nfunction S(...n) {\n  return n.filter((e) => e).join(\" \");\n}\nclass Pe extends Error {\n  constructor(e) {\n    super(`Unreachable case: ${e}`);\n  }\n}\nconst yt = /* @__PURE__ */ new Set([\n  \"bold\",\n  \"italic\",\n  \"underline\",\n  \"strike\",\n  \"code\"\n]), vt = /* @__PURE__ */ new Set([\"textColor\", \"backgroundColor\"]);\nfunction at(n, e) {\n  const t = [];\n  for (const [o, r] of Object.entries(n.styles))\n    yt.has(o) ? t.push(e.mark(o)) : vt.has(o) && t.push(e.mark(o, { color: r }));\n  return n.text.split(/(\\n)/g).filter((o) => o.length > 0).map((o) => o === `\n` ? e.nodes.hardBreak.create() : e.text(o, t));\n}\nfunction De(n, e) {\n  const t = e.marks.link.create({\n    href: n.href\n  });\n  return wt(n.content, e).map((o) => {\n    if (o.type.name === \"text\")\n      return o.mark([...o.marks, t]);\n    if (o.type.name === \"hardBreak\")\n      return o;\n    throw new Error(\"unexpected node type\");\n  });\n}\nfunction wt(n, e) {\n  const t = [];\n  if (typeof n == \"string\")\n    return t.push(\n      ...at({ type: \"text\", text: n, styles: {} }, e)\n    ), t;\n  for (const o of n)\n    t.push(...at(o, e));\n  return t;\n}\nfunction Ct(n, e) {\n  const t = [];\n  for (const o of n)\n    if (o.type === \"link\")\n      t.push(...De(o, e));\n    else if (o.type === \"text\")\n      t.push(...wt([o], e));\n    else\n      throw new Pe(o);\n  return t;\n}\nfunction V(n, e) {\n  let t = n.id;\n  t === void 0 && (t = j.options.generateID());\n  let o = n.type;\n  o === void 0 && (o = \"paragraph\");\n  let r;\n  if (!n.content)\n    r = e.nodes[o].create(n.props);\n  else if (typeof n.content == \"string\")\n    r = e.nodes[o].create(\n      n.props,\n      e.text(n.content)\n    );\n  else {\n    const l = Ct(n.content, e);\n    r = e.nodes[o].create(n.props, l);\n  }\n  const i = [];\n  if (n.children)\n    for (const l of n.children)\n      i.push(V(l, e));\n  const s = e.nodes.blockGroup.create({}, i);\n  return e.nodes.blockContainer.create(\n    {\n      id: t,\n      ...n.props\n    },\n    i.length > 0 ? [r, s] : r\n  );\n}\nfunction Oe(n) {\n  const e = [];\n  let t;\n  return n.content.forEach((o) => {\n    if (o.type.name === \"hardBreak\") {\n      t ? t.type === \"text\" ? t.text += `\n` : t.type === \"link\" && (t.content[t.content.length - 1].text += `\n`) : t = {\n        type: \"text\",\n        text: `\n`,\n        styles: {}\n      };\n      return;\n    }\n    const r = {};\n    let i;\n    for (const s of o.marks)\n      if (s.type.name === \"link\")\n        i = s;\n      else if (yt.has(s.type.name))\n        r[s.type.name] = !0;\n      else if (vt.has(s.type.name))\n        r[s.type.name] = s.attrs.color;\n      else\n        throw Error(\"Mark is of an unrecognized type: \" + s.type.name);\n    t ? t.type === \"text\" ? i ? (e.push(t), t = {\n      type: \"link\",\n      href: i.attrs.href,\n      content: [\n        {\n          type: \"text\",\n          text: o.textContent,\n          styles: r\n        }\n      ]\n    }) : JSON.stringify(t.styles) === JSON.stringify(r) ? t.text += o.textContent : (e.push(t), t = {\n      type: \"text\",\n      text: o.textContent,\n      styles: r\n    }) : t.type === \"link\" && (i ? t.href === i.attrs.href ? JSON.stringify(\n      t.content[t.content.length - 1].styles\n    ) === JSON.stringify(r) ? t.content[t.content.length - 1].text += o.textContent : t.content.push({\n      type: \"text\",\n      text: o.textContent,\n      styles: r\n    }) : (e.push(t), t = {\n      type: \"link\",\n      href: i.attrs.href,\n      content: [\n        {\n          type: \"text\",\n          text: o.textContent,\n          styles: r\n        }\n      ]\n    }) : (e.push(t), t = {\n      type: \"text\",\n      text: o.textContent,\n      styles: r\n    })) : i ? t = {\n      type: \"link\",\n      href: i.attrs.href,\n      content: [\n        {\n          type: \"text\",\n          text: o.textContent,\n          styles: r\n        }\n      ]\n    } : t = {\n      type: \"text\",\n      text: o.textContent,\n      styles: r\n    };\n  }), t && e.push(t), e;\n}\nfunction x(n, e, t) {\n  if (n.type.name !== \"blockContainer\")\n    throw Error(\n      \"Node must be of type blockContainer, but is of type\" + n.type.name + \".\"\n    );\n  const o = t == null ? void 0 : t.get(n);\n  if (o)\n    return o;\n  const r = bt(n);\n  let i = r.id;\n  i === null && (i = j.options.generateID());\n  const s = {};\n  for (const [c, m] of Object.entries({\n    ...n.attrs,\n    ...r.contentNode.attrs\n  })) {\n    const h = e[r.contentType.name];\n    if (!h)\n      throw Error(\n        \"Block is of an unrecognized type: \" + r.contentType.name\n      );\n    const p = h.propSchema;\n    c in p ? s[c] = m : c !== \"id\" && !(c in C) && console.warn(\"Block has an unrecognized attribute: \" + c);\n  }\n  const l = e[r.contentType.name], a = [];\n  for (let c = 0; c < r.numChildBlocks; c++)\n    a.push(\n      x(n.lastChild.child(c), e, t)\n    );\n  const d = {\n    id: i,\n    type: l.node.name,\n    props: s,\n    content: l.node.config.content === \"inline*\" ? Oe(r.contentNode) : void 0,\n    children: a\n  };\n  return t == null || t.set(n, d), d;\n}\nconst lt = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"previous-blocks\"), Re = {\n  // Numbered List Items\n  index: \"index\",\n  // Headings\n  level: \"level\",\n  // All Blocks\n  type: \"type\",\n  depth: \"depth\",\n  \"depth-change\": \"depth-change\"\n}, ze = () => {\n  let n;\n  return new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n    key: lt,\n    view(e) {\n      return {\n        update: async (t, o) => {\n          var r;\n          ((r = this.key) == null ? void 0 : r.getState(t.state).updatedBlocks.size) > 0 && (n = setTimeout(() => {\n            t.dispatch(\n              t.state.tr.setMeta(lt, { clearUpdate: !0 })\n            );\n          }, 0));\n        },\n        destroy: () => {\n          n && clearTimeout(n);\n        }\n      };\n    },\n    state: {\n      init() {\n        return {\n          // Block attributes, by block ID, from just before the previous transaction.\n          prevTransactionOldBlockAttrs: {},\n          // Block attributes, by block ID, from just before the current transaction.\n          currentTransactionOldBlockAttrs: {},\n          // Set of IDs of blocks whose attributes changed from the current transaction.\n          updatedBlocks: /* @__PURE__ */ new Set()\n        };\n      },\n      apply(e, t, o, r) {\n        if (t.currentTransactionOldBlockAttrs = {}, t.updatedBlocks.clear(), !e.docChanged || o.doc.eq(r.doc))\n          return t;\n        const i = {}, s = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.findChildren)(o.doc, (d) => d.attrs.id), l = new Map(\n          s.map((d) => [d.node.attrs.id, d])\n        ), a = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.findChildren)(r.doc, (d) => d.attrs.id);\n        for (const d of a) {\n          const c = l.get(d.node.attrs.id), m = c == null ? void 0 : c.node.firstChild, h = d.node.firstChild;\n          if (c && m && h) {\n            const p = {\n              index: h.attrs.index,\n              level: h.attrs.level,\n              type: h.type.name,\n              depth: r.doc.resolve(d.pos).depth\n            };\n            let f = {\n              index: m.attrs.index,\n              level: m.attrs.level,\n              type: m.type.name,\n              depth: o.doc.resolve(c.pos).depth\n            };\n            i[d.node.attrs.id] = f, e.getMeta(\"numberedListIndexing\") && (d.node.attrs.id in t.prevTransactionOldBlockAttrs && (f = t.prevTransactionOldBlockAttrs[d.node.attrs.id]), p.type === \"numberedListItem\" && (f.index = p.index)), t.currentTransactionOldBlockAttrs[d.node.attrs.id] = f, JSON.stringify(f) !== JSON.stringify(p) && (f[\"depth-change\"] = f.depth - p.depth, t.updatedBlocks.add(d.node.attrs.id));\n          }\n        }\n        return t.prevTransactionOldBlockAttrs = i, t;\n      }\n    },\n    props: {\n      decorations(e) {\n        const t = this.getState(e);\n        if (t.updatedBlocks.size === 0)\n          return;\n        const o = [];\n        return e.doc.descendants((r, i) => {\n          if (!r.attrs.id || !t.updatedBlocks.has(r.attrs.id))\n            return;\n          const s = t.currentTransactionOldBlockAttrs[r.attrs.id], l = {};\n          for (const [d, c] of Object.entries(s))\n            l[\"data-prev-\" + Re[d]] = c || \"none\";\n          const a = prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.Decoration.node(i, i + r.nodeSize, {\n            ...l\n          });\n          o.push(a);\n        }), prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.DecorationSet.create(e.doc, o);\n      }\n    }\n  });\n}, Et = \"_blockOuter_xo7pf_5\", St = \"_block_xo7pf_5\", Tt = \"_reactNodeViewRenderer_xo7pf_17\", Mt = \"_blockContent_xo7pf_22\", Bt = \"_blockGroup_xo7pf_42\", xt = \"_wrapper_xo7pf_226\", It = \"_addImageButton_xo7pf_234\", At = \"_addImageButtonIcon_xo7pf_250\", _t = \"_addImageButtonText_xo7pf_256\", Ht = \"_imageAndCaptionWrapper_xo7pf_260\", Lt = \"_imageWrapper_xo7pf_266\", Nt = \"_image_xo7pf_260\", Pt = \"_resizeHandle_xo7pf_279\", Dt = \"_caption_xo7pf_294\", Ot = \"_isEmpty_xo7pf_300\", Rt = \"_inlineContent_xo7pf_300\", zt = \"_isFilter_xo7pf_301\", Vt = \"_hasAnchor_xo7pf_313\", g = {\n  blockOuter: Et,\n  block: St,\n  reactNodeViewRenderer: Tt,\n  blockContent: Mt,\n  blockGroup: Bt,\n  wrapper: xt,\n  addImageButton: It,\n  addImageButtonIcon: At,\n  addImageButtonText: _t,\n  imageAndCaptionWrapper: Ht,\n  imageWrapper: Lt,\n  image: Nt,\n  resizeHandle: Pt,\n  caption: Dt,\n  isEmpty: Ot,\n  inlineContent: Rt,\n  isFilter: zt,\n  hasAnchor: Vt\n}, Bn = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  addImageButton: It,\n  addImageButtonIcon: At,\n  addImageButtonText: _t,\n  block: St,\n  blockContent: Mt,\n  blockGroup: Bt,\n  blockOuter: Et,\n  caption: Dt,\n  default: g,\n  hasAnchor: Vt,\n  image: Nt,\n  imageAndCaptionWrapper: Ht,\n  imageWrapper: Lt,\n  inlineContent: Rt,\n  isEmpty: Ot,\n  isFilter: zt,\n  reactNodeViewRenderer: Tt,\n  resizeHandle: Pt,\n  wrapper: xt\n}, Symbol.toStringTag, { value: \"Module\" })), Ve = {\n  blockColor: \"data-block-color\",\n  blockStyle: \"data-block-style\",\n  id: \"data-id\",\n  depth: \"data-depth\",\n  depthChange: \"data-depth-change\"\n}, Ue = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"non-editable-block\"), Fe = () => new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n  key: Ue,\n  props: {\n    handleKeyDown: (n, e) => {\n      \"node\" in n.state.selection && e.preventDefault();\n    }\n  }\n}), We = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Node.create({\n  name: \"blockContainer\",\n  group: \"blockContainer\",\n  // A block always contains content, and optionally a blockGroup which contains nested blocks\n  content: \"blockContent blockGroup?\",\n  // Ensures content-specific keyboard handlers trigger first.\n  priority: 50,\n  defining: !0,\n  parseHTML() {\n    return [\n      {\n        tag: \"div\",\n        getAttrs: (n) => {\n          if (typeof n == \"string\")\n            return !1;\n          const e = {};\n          for (const [t, o] of Object.entries(Ve))\n            n.getAttribute(o) && (e[t] = n.getAttribute(o));\n          return n.getAttribute(\"data-node-type\") === \"blockContainer\" ? e : !1;\n        }\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    var t;\n    const e = ((t = this.options.domAttributes) == null ? void 0 : t.blockContainer) || {};\n    return [\n      \"div\",\n      (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(n, {\n        class: g.blockOuter,\n        \"data-node-type\": \"block-outer\"\n      }),\n      [\n        \"div\",\n        (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(\n          {\n            ...e,\n            class: S(g.block, e.class),\n            \"data-node-type\": this.name\n          },\n          n\n        ),\n        0\n      ]\n    ];\n  },\n  addCommands() {\n    return {\n      // Creates a new text block at a given position.\n      BNCreateBlock: (n) => ({ state: e, dispatch: t }) => {\n        const o = e.schema.nodes.blockContainer.createAndFill();\n        return t && e.tr.insert(n, o), !0;\n      },\n      // Deletes a block at a given position.\n      BNDeleteBlock: (n) => ({ state: e, dispatch: t }) => {\n        const o = b(e.doc, n);\n        if (o === void 0)\n          return !1;\n        const { startPos: r, endPos: i } = o;\n        return t && e.tr.deleteRange(r, i), !0;\n      },\n      // Updates a block at a given position.\n      BNUpdateBlock: (n, e) => ({ state: t, dispatch: o }) => {\n        const r = b(t.doc, n);\n        if (r === void 0)\n          return !1;\n        const { startPos: i, endPos: s, node: l, contentNode: a } = r;\n        if (o) {\n          if (e.children !== void 0) {\n            const p = [];\n            for (const f of e.children)\n              p.push(V(f, t.schema));\n            l.childCount === 2 ? t.tr.replace(\n              i + a.nodeSize + 1,\n              s - 1,\n              new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Fragment.from(p), 0, 0)\n            ) : t.tr.insert(\n              i + a.nodeSize,\n              t.schema.nodes.blockGroup.create({}, p)\n            );\n          }\n          if (e.content !== void 0) {\n            let p = [];\n            typeof e.content == \"string\" ? p.push(t.schema.text(e.content)) : p = Ct(e.content, t.schema), t.tr.replace(\n              i + 1,\n              i + a.nodeSize - 1,\n              new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Fragment.from(p), 0, 0)\n            );\n          }\n          const d = a.type.name, c = e.type || d, m = t.schema.nodes[d].spec.content, h = t.schema.nodes[c].spec.content;\n          m === \"inline*\" && h === \"\" ? t.tr.replaceWith(\n            i,\n            s,\n            t.schema.nodes[c].create({\n              ...a.attrs,\n              ...e.props\n            })\n          ).setSelection(\n            new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.NodeSelection(t.tr.doc.resolve(i))\n          ) : t.tr.setNodeMarkup(\n            i,\n            e.type === void 0 ? void 0 : t.schema.nodes[e.type],\n            {\n              ...a.attrs,\n              ...e.props\n            }\n          ), t.tr.setNodeMarkup(i - 1, void 0, {\n            ...l.attrs,\n            ...e.props\n          });\n        }\n        return !0;\n      },\n      // Appends the text contents of a block to the nearest previous block, given a position between them. Children of\n      // the merged block are moved out of it first, rather than also being merged.\n      //\n      // In the example below, the position passed into the function is between Block1 and Block2.\n      //\n      // Block1\n      //    Block2\n      // Block3\n      //    Block4\n      //        Block5\n      //\n      // Becomes:\n      //\n      // Block1\n      //    Block2Block3\n      // Block4\n      //     Block5\n      BNMergeBlocks: (n) => ({ state: e, dispatch: t }) => {\n        const o = e.doc.resolve(n + 1).node().type.name === \"blockContainer\", r = e.doc.resolve(n - 1).node().type.name === \"blockContainer\";\n        if (!o || !r)\n          return !1;\n        const i = b(\n          e.doc,\n          n + 1\n        ), { node: s, contentNode: l, startPos: a, endPos: d, depth: c } = i;\n        if (s.childCount === 2) {\n          const p = e.doc.resolve(\n            a + l.nodeSize + 1\n          ), f = e.doc.resolve(d - 1), k = p.blockRange(f);\n          t && e.tr.lift(k, c - 1);\n        }\n        let m = n - 1, h = b(e.doc, m);\n        for (; h.numChildBlocks > 0; )\n          if (m--, h = b(e.doc, m), h === void 0)\n            return !1;\n        return t && (t(\n          e.tr.deleteRange(a, a + l.nodeSize).replace(\n            m - 1,\n            a,\n            new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(l.content, 0, 0)\n          ).scrollIntoView()\n        ), e.tr.setSelection(\n          new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.TextSelection(e.doc.resolve(m - 1))\n        )), !0;\n      },\n      // Splits a block at a given position. Content after the position is moved to a new block below, at the same\n      // nesting level.\n      BNSplitBlock: (n, e) => ({ state: t, dispatch: o }) => {\n        const r = b(t.doc, n);\n        if (r === void 0)\n          return !1;\n        const { contentNode: i, contentType: s, startPos: l, endPos: a, depth: d } = r, c = t.doc.cut(l + 1, n), m = t.doc.cut(n, a - 1), h = t.schema.nodes.blockContainer.createAndFill(), p = a + 1, f = p + 2;\n        return o && (t.tr.insert(p, h), t.tr.replace(\n          f,\n          f + 1,\n          m.content.size > 0 ? new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(\n            prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Fragment.from(m),\n            d + 2,\n            d + 2\n          ) : void 0\n        ), e && t.tr.setBlockType(\n          f,\n          f,\n          t.schema.node(s).type,\n          i.attrs\n        ), t.tr.setSelection(\n          new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.TextSelection(t.doc.resolve(f))\n        ), t.tr.replace(\n          l + 1,\n          a - 1,\n          c.content.size > 0 ? new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(\n            prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Fragment.from(c),\n            d + 2,\n            d + 2\n          ) : void 0\n        )), !0;\n      }\n    };\n  },\n  addProseMirrorPlugins() {\n    return [ze(), Fe()];\n  },\n  addKeyboardShortcuts() {\n    return {\n      Backspace: () => this.editor.commands.first(({ commands: t }) => [\n        // Deletes the selection if it's not empty.\n        () => t.deleteSelection(),\n        // Undoes an input rule if one was triggered in the last editor state change.\n        () => t.undoInputRule(),\n        // Reverts block content type to a paragraph if the selection is at the start of the block.\n        () => t.command(({ state: o }) => {\n          const { contentType: r } = b(\n            o.doc,\n            o.selection.from\n          ), i = o.selection.$anchor.parentOffset === 0, s = r.name === \"paragraph\";\n          return i && !s ? t.BNUpdateBlock(o.selection.from, {\n            type: \"paragraph\",\n            props: {}\n          }) : !1;\n        }),\n        // Removes a level of nesting if the block is indented if the selection is at the start of the block.\n        () => t.command(({ state: o }) => o.selection.$anchor.parentOffset === 0 ? t.liftListItem(\"blockContainer\") : !1),\n        // Merges block with the previous one if it isn't indented, isn't the first block in the doc, and the selection\n        // is at the start of the block.\n        () => t.command(({ state: o }) => {\n          const { depth: r, startPos: i } = b(\n            o.doc,\n            o.selection.from\n          ), s = o.selection.$anchor.parentOffset === 0, l = o.selection.anchor === o.selection.head, a = i === 2, d = i - 1;\n          return !a && s && l && r === 2 ? t.BNMergeBlocks(d) : !1;\n        })\n      ]),\n      Enter: () => this.editor.commands.first(({ commands: t }) => [\n        // Removes a level of nesting if the block is empty & indented, while the selection is also empty & at the start\n        // of the block.\n        () => t.command(({ state: o }) => {\n          const { node: r, depth: i } = b(\n            o.doc,\n            o.selection.from\n          ), s = o.selection.$anchor.parentOffset === 0, l = o.selection.anchor === o.selection.head, a = r.textContent.length === 0, d = i > 2;\n          return s && l && a && d ? t.liftListItem(\"blockContainer\") : !1;\n        }),\n        // Creates a new block and moves the selection to it if the current one is empty, while the selection is also\n        // empty & at the start of the block.\n        () => t.command(({ state: o, chain: r }) => {\n          const { node: i, endPos: s } = b(\n            o.doc,\n            o.selection.from\n          ), l = o.selection.$anchor.parentOffset === 0, a = o.selection.anchor === o.selection.head, d = i.textContent.length === 0;\n          if (l && a && d) {\n            const c = s + 1, m = c + 2;\n            return r().BNCreateBlock(c).setTextSelection(m).run(), !0;\n          }\n          return !1;\n        }),\n        // Splits the current block, moving content inside that's after the cursor to a new text block below. Also\n        // deletes the selection beforehand, if it's not empty.\n        () => t.command(({ state: o, chain: r }) => {\n          const { node: i } = b(\n            o.doc,\n            o.selection.from\n          );\n          return i.textContent.length === 0 ? !1 : (r().deleteSelection().BNSplitBlock(o.selection.from, !1).run(), !0);\n        })\n      ]),\n      // Always returning true for tab key presses ensures they're not captured by the browser. Otherwise, they blur the\n      // editor since the browser will try to use tab for keyboard navigation.\n      Tab: () => (this.editor.commands.sinkListItem(\"blockContainer\"), !0),\n      \"Shift-Tab\": () => (this.editor.commands.liftListItem(\"blockContainer\"), !0),\n      \"Mod-Alt-0\": () => this.editor.commands.BNCreateBlock(\n        this.editor.state.selection.anchor + 2\n      )\n    };\n  }\n}), $e = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Node.create({\n  name: \"blockGroup\",\n  group: \"blockGroup\",\n  content: \"blockContainer+\",\n  parseHTML() {\n    return [\n      {\n        tag: \"div\",\n        getAttrs: (n) => typeof n == \"string\" ? !1 : n.getAttribute(\"data-node-type\") === \"blockGroup\" ? null : !1\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    var t;\n    const e = ((t = this.options.domAttributes) == null ? void 0 : t.blockGroup) || {};\n    return [\n      \"div\",\n      (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(\n        {\n          ...e,\n          class: S(\n            g.blockGroup,\n            e.class\n          ),\n          \"data-node-type\": \"blockGroup\"\n        },\n        n\n      ),\n      0\n    ];\n  }\n}), Ge = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Node.create({\n  name: \"doc\",\n  topNode: !0,\n  content: \"blockGroup\"\n}), je = (n) => {\n  const e = prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.DOMSerializer.fromSchema(n);\n  return new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.DOMSerializer(\n    {\n      ...e.nodes\n      // TODO: If a serializer is defined in the config for a custom block, it\n      //  should be added here. We still need to figure out how the serializer\n      //  should be defined in the custom blocks API though, and implement that,\n      //  before we can do this.\n    },\n    e.marks\n  );\n}, qe = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  addProseMirrorPlugins() {\n    return [\n      new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n        props: {\n          clipboardSerializer: je(this.editor.schema)\n        }\n      })\n    ];\n  }\n});\nclass U {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    u(this, \"callbacks\", {});\n  }\n  on(e, t) {\n    return this.callbacks[e] || (this.callbacks[e] = []), this.callbacks[e].push(t), () => this.off(e, t);\n  }\n  emit(e, ...t) {\n    const o = this.callbacks[e];\n    o && o.forEach((r) => r.apply(this, t));\n  }\n  off(e, t) {\n    const o = this.callbacks[e];\n    o && (t ? this.callbacks[e] = o.filter((r) => r !== t) : delete this.callbacks[e]);\n  }\n  removeAllListeners() {\n    this.callbacks = {};\n  }\n}\nconst Xe = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.findParentNode)(\n  (n) => n.type.name === \"blockContainer\"\n);\nclass Ke {\n  constructor(e, t, o = () => {\n  }) {\n    u(this, \"suggestionsMenuState\");\n    u(this, \"updateSuggestionsMenu\");\n    u(this, \"pluginState\");\n    u(this, \"handleScroll\", () => {\n      var e;\n      if ((e = this.suggestionsMenuState) != null && e.show) {\n        const t = document.querySelector(\n          `[data-decoration-id=\"${this.pluginState.decorationId}\"]`\n        );\n        this.suggestionsMenuState.referencePos = t.getBoundingClientRect(), this.updateSuggestionsMenu();\n      }\n    });\n    this.editor = e, this.pluginKey = t, this.pluginState = J(), this.updateSuggestionsMenu = () => {\n      if (!this.suggestionsMenuState)\n        throw new Error(\"Attempting to update uninitialized suggestions menu\");\n      o(this.suggestionsMenuState);\n    }, document.addEventListener(\"scroll\", this.handleScroll);\n  }\n  update(e, t) {\n    const o = this.pluginKey.getState(t), r = this.pluginKey.getState(e.state), i = !o.active && r.active, s = o.active && !r.active, l = o.active && r.active;\n    if (!i && !l && !s)\n      return;\n    if (this.pluginState = s ? o : r, s || !this.editor.isEditable) {\n      this.suggestionsMenuState.show = !1, this.updateSuggestionsMenu();\n      return;\n    }\n    const a = document.querySelector(\n      `[data-decoration-id=\"${this.pluginState.decorationId}\"]`\n    );\n    this.editor.isEditable && (this.suggestionsMenuState = {\n      show: !0,\n      referencePos: a.getBoundingClientRect(),\n      filteredItems: this.pluginState.items,\n      keyboardHoveredItemIndex: this.pluginState.keyboardHoveredItemIndex\n    }, this.updateSuggestionsMenu());\n  }\n  destroy() {\n    document.removeEventListener(\"scroll\", this.handleScroll);\n  }\n}\nfunction J() {\n  return {\n    active: !1,\n    triggerCharacter: void 0,\n    queryStartPos: void 0,\n    items: [],\n    keyboardHoveredItemIndex: void 0,\n    notFoundCount: 0,\n    decorationId: void 0\n  };\n}\nconst Ye = (n, e, t, o, r = () => [], i = () => {\n}) => {\n  if (o.length !== 1)\n    throw new Error(\"'char' should be a single character\");\n  let s;\n  const l = (a) => {\n    a.dispatch(a.state.tr.setMeta(t, { deactivate: !0 }));\n  };\n  return {\n    plugin: new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n      key: t,\n      view: () => (s = new Ke(\n        n,\n        t,\n        e\n      ), s),\n      state: {\n        // Initialize the plugin's internal state.\n        init() {\n          return J();\n        },\n        // Apply changes to the plugin state from an editor transaction.\n        apply(a, d, c, m) {\n          var p, f, k, v;\n          if (a.getMeta(\"orderedListIndexing\") !== void 0)\n            return d;\n          if ((p = a.getMeta(t)) != null && p.activate)\n            return {\n              active: !0,\n              triggerCharacter: ((f = a.getMeta(t)) == null ? void 0 : f.triggerCharacter) || \"\",\n              queryStartPos: m.selection.from,\n              items: r(\"\"),\n              keyboardHoveredItemIndex: 0,\n              // TODO: Maybe should be 1 if the menu has no possible items? Probably redundant since a menu with no items\n              //  is useless in practice.\n              notFoundCount: 0,\n              decorationId: `id_${Math.floor(Math.random() * 4294967295)}`\n            };\n          if (!d.active)\n            return d;\n          const h = { ...d };\n          if (h.items = r(\n            m.doc.textBetween(\n              d.queryStartPos,\n              m.selection.from\n            )\n          ), h.notFoundCount = 0, h.items.length === 0 && (h.notFoundCount = Math.max(\n            0,\n            d.notFoundCount + (m.selection.from - c.selection.from)\n          )), // Highlighting text should hide the menu.\n          m.selection.from !== m.selection.to || // Transactions with plugin metadata {deactivate: true} should hide the menu.\n          (k = a.getMeta(t)) != null && k.deactivate || // Certain mouse events should hide the menu.\n          // TODO: Change to global mousedown listener.\n          a.getMeta(\"focus\") || a.getMeta(\"blur\") || a.getMeta(\"pointer\") || // Moving the caret before the character which triggered the menu should hide it.\n          d.active && m.selection.from < d.queryStartPos || // Entering more than 3 characters, after the last query that matched with at least 1 menu item, should hide\n          // the menu.\n          h.notFoundCount > 3)\n            return J();\n          if (((v = a.getMeta(t)) == null ? void 0 : v.selectedItemIndexChanged) !== void 0) {\n            let w = a.getMeta(t).selectedItemIndexChanged;\n            w < 0 ? w = d.items.length - 1 : w >= d.items.length && (w = 0), h.keyboardHoveredItemIndex = w;\n          } else\n            c.selection.from !== m.selection.from && (h.keyboardHoveredItemIndex = 0);\n          return h;\n        }\n      },\n      props: {\n        handleKeyDown(a, d) {\n          const c = this.getState(a.state).active;\n          if (d.key === o && !c)\n            return a.dispatch(\n              a.state.tr.insertText(o).scrollIntoView().setMeta(t, {\n                activate: !0,\n                triggerCharacter: o\n              })\n            ), !0;\n          if (!c)\n            return !1;\n          const {\n            triggerCharacter: m,\n            queryStartPos: h,\n            items: p,\n            keyboardHoveredItemIndex: f\n          } = t.getState(a.state);\n          return d.key === \"ArrowUp\" ? (a.dispatch(\n            a.state.tr.setMeta(t, {\n              selectedItemIndexChanged: f - 1\n            })\n          ), !0) : d.key === \"ArrowDown\" ? (a.dispatch(\n            a.state.tr.setMeta(t, {\n              selectedItemIndexChanged: f + 1\n            })\n          ), !0) : d.key === \"Enter\" ? (l(a), n._tiptapEditor.chain().focus().deleteRange({\n            from: h - m.length,\n            to: n._tiptapEditor.state.selection.from\n          }).run(), i({\n            item: p[f],\n            editor: n\n          }), !0) : d.key === \"Escape\" ? (l(a), !0) : !1;\n        },\n        // Setup decorator on the currently active suggestion.\n        decorations(a) {\n          const { active: d, decorationId: c, queryStartPos: m, triggerCharacter: h } = this.getState(a);\n          if (!d)\n            return null;\n          if (h === \"\") {\n            const p = Xe(a.selection);\n            if (p)\n              return prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.DecorationSet.create(a.doc, [\n                prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.Decoration.node(\n                  p.pos,\n                  p.pos + p.node.nodeSize,\n                  {\n                    nodeName: \"span\",\n                    class: \"suggestion-decorator\",\n                    \"data-decoration-id\": c\n                  }\n                )\n              ]);\n          }\n          return prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.DecorationSet.create(a.doc, [\n            prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.Decoration.inline(\n              m - h.length,\n              m,\n              {\n                nodeName: \"span\",\n                class: \"suggestion-decorator\",\n                \"data-decoration-id\": c\n              }\n            )\n          ]);\n        }\n      }\n    }),\n    itemCallback: (a) => {\n      l(n._tiptapEditor.view), n._tiptapEditor.chain().focus().deleteRange({\n        from: s.pluginState.queryStartPos - s.pluginState.triggerCharacter.length,\n        to: n._tiptapEditor.state.selection.from\n      }).run(), i({\n        item: a,\n        editor: n\n      });\n    }\n  };\n}, tt = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"SlashMenuPlugin\");\nclass Je extends U {\n  constructor(t, o) {\n    super();\n    u(this, \"plugin\");\n    u(this, \"itemCallback\");\n    const r = Ye(\n      t,\n      (i) => {\n        this.emit(\"update\", i);\n      },\n      tt,\n      \"/\",\n      (i) => o.filter(\n        ({ name: s, aliases: l }) => s.toLowerCase().startsWith(i.toLowerCase()) || l && l.filter(\n          (a) => a.toLowerCase().startsWith(i.toLowerCase())\n        ).length !== 0\n      ),\n      ({ item: i, editor: s }) => i.execute(s)\n    );\n    this.plugin = r.plugin, this.itemCallback = r.itemCallback;\n  }\n  onUpdate(t) {\n    return this.on(\"update\", t);\n  }\n}\nconst Ze = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"blocknote-placeholder\"), Qe = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  name: \"placeholder\",\n  addOptions() {\n    return {\n      emptyEditorClass: \"is-editor-empty\",\n      emptyNodeClass: \"is-empty\",\n      isFilterClass: \"is-filter\",\n      hasAnchorClass: \"has-anchor\",\n      placeholder: \"Write something …\",\n      showOnlyWhenEditable: !0,\n      showOnlyCurrent: !0,\n      includeChildren: !1\n    };\n  },\n  addProseMirrorPlugins() {\n    return [\n      new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n        key: Ze,\n        props: {\n          decorations: (n) => {\n            const { doc: e, selection: t } = n, o = tt.getState(n), r = this.editor.isEditable || !this.options.showOnlyWhenEditable, { anchor: i } = t, s = [];\n            if (r)\n              return e.descendants((l, a) => {\n                const d = i >= a && i <= a + l.nodeSize, c = !l.isLeaf && !l.childCount;\n                if ((d || !this.options.showOnlyCurrent) && c) {\n                  const m = [this.options.emptyNodeClass];\n                  this.editor.isEmpty && m.push(this.options.emptyEditorClass), d && m.push(this.options.hasAnchorClass), (o == null ? void 0 : o.triggerCharacter) === \"\" && (o != null && o.active) && m.push(this.options.isFilterClass);\n                  const h = prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.Decoration.node(a, a + l.nodeSize, {\n                    class: m.join(\" \")\n                  });\n                  s.push(h);\n                }\n                return this.options.includeChildren;\n              }), prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.DecorationSet.create(e, s);\n          }\n        }\n      })\n    ];\n  }\n}), to = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  name: \"textAlignment\",\n  addGlobalAttributes() {\n    return [\n      {\n        // Attribute is applied to block content instead of container so that child blocks don't inherit the text\n        // alignment styling.\n        types: [\"paragraph\", \"heading\", \"bulletListItem\", \"numberedListItem\"],\n        attributes: {\n          textAlignment: {\n            default: \"left\",\n            parseHTML: (n) => n.getAttribute(\"data-text-alignment\"),\n            renderHTML: (n) => n.textAlignment !== \"left\" && {\n              \"data-text-alignment\": n.textAlignment\n            }\n          }\n        }\n      }\n    ];\n  },\n  addCommands() {\n    return {\n      setTextAlignment: (n) => ({ state: e }) => {\n        const t = [], o = b(\n          e.doc,\n          e.selection.from\n        );\n        if (o === void 0)\n          return !1;\n        let r = o.startPos;\n        for (; r < e.selection.to; )\n          e.doc.resolve(r).node().type.spec.group === \"blockContent\" ? (t.push(r - 1), r += e.doc.resolve(r).node().nodeSize - 1) : r += 1;\n        for (const i of t)\n          e.tr.setNodeAttribute(i, \"textAlignment\", n);\n        return !0;\n      }\n    };\n  }\n}), eo = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  name: \"blockTextColor\",\n  addGlobalAttributes() {\n    return [\n      {\n        types: [\"blockContainer\"],\n        attributes: {\n          textColor: {\n            default: C.textColor.default,\n            parseHTML: (n) => n.hasAttribute(\"data-text-color\") ? n.getAttribute(\"data-text-color\") : C.textColor.default,\n            renderHTML: (n) => n.textColor !== C.textColor.default && {\n              \"data-text-color\": n.textColor\n            }\n          }\n        }\n      }\n    ];\n  },\n  addCommands() {\n    return {\n      setBlockTextColor: (n, e) => ({ state: t, view: o }) => {\n        const r = b(t.doc, n);\n        return r === void 0 ? !1 : (t.tr.setNodeAttribute(r.startPos - 1, \"textColor\", e), o.focus(), !0);\n      }\n    };\n  }\n}), oo = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Mark.create({\n  name: \"textColor\",\n  addAttributes() {\n    return {\n      color: {\n        default: void 0,\n        parseHTML: (n) => n.getAttribute(\"data-text-color\"),\n        renderHTML: (n) => ({\n          \"data-text-color\": n.color\n        })\n      }\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: \"span\",\n        getAttrs: (n) => typeof n == \"string\" ? !1 : n.hasAttribute(\"data-text-color\") ? { color: n.getAttribute(\"data-text-color\") } : !1\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    return [\"span\", n, 0];\n  },\n  addCommands() {\n    return {\n      setTextColor: (n) => ({ commands: e }) => n !== C.textColor.default ? e.setMark(this.name, { color: n }) : e.unsetMark(this.name)\n    };\n  }\n}), no = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n  name: \"trailingNode\",\n  addProseMirrorPlugins() {\n    const n = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(this.name);\n    return [\n      new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n        key: n,\n        appendTransaction: (e, t, o) => {\n          const { doc: r, tr: i, schema: s } = o, l = n.getState(o), a = r.content.size - 2, d = s.nodes.blockContainer, c = s.nodes.paragraph;\n          if (l)\n            return i.insert(\n              a,\n              d.create(void 0, c.create())\n            );\n        },\n        state: {\n          init: (e, t) => {\n          },\n          apply: (e, t) => {\n            if (!e.docChanged)\n              return t;\n            let o = e.doc.lastChild;\n            if (!o || o.type.name !== \"blockGroup\")\n              throw new Error(\"Expected blockGroup\");\n            if (o = o.lastChild, !o || o.type.name !== \"blockContainer\")\n              throw new Error(\"Expected blockContainer\");\n            const r = o.firstChild;\n            if (!r)\n              throw new Error(\"Expected blockContent\");\n            return o.nodeSize > 4 || r.type.spec.content !== \"inline*\";\n          }\n        }\n      })\n    ];\n  }\n}), ro = (n) => {\n  var t;\n  const e = [\n    _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.extensions.ClipboardTextSerializer,\n    _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.extensions.Commands,\n    _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.extensions.Editable,\n    _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.extensions.FocusEvents,\n    _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.extensions.Tabindex,\n    // DevTools,\n    _tiptap_extension_gapcursor__WEBPACK_IMPORTED_MODULE_5__.Gapcursor,\n    // DropCursor,\n    Qe.configure({\n      emptyNodeClass: g.isEmpty,\n      hasAnchorClass: g.hasAnchor,\n      isFilterClass: g.isFilter,\n      includeChildren: !0,\n      showOnlyCurrent: !1\n    }),\n    j.configure({\n      types: [\"blockContainer\"]\n    }),\n    _tiptap_extension_hard_break__WEBPACK_IMPORTED_MODULE_6__.HardBreak,\n    // Comments,\n    // basics:\n    _tiptap_extension_text__WEBPACK_IMPORTED_MODULE_11__.Text,\n    // marks:\n    _tiptap_extension_bold__WEBPACK_IMPORTED_MODULE_0__.Bold,\n    _tiptap_extension_code__WEBPACK_IMPORTED_MODULE_1__.Code,\n    _tiptap_extension_italic__WEBPACK_IMPORTED_MODULE_8__.Italic,\n    _tiptap_extension_strike__WEBPACK_IMPORTED_MODULE_10__.Strike,\n    _tiptap_extension_underline__WEBPACK_IMPORTED_MODULE_12__.Underline,\n    _tiptap_extension_link__WEBPACK_IMPORTED_MODULE_9__.Link,\n    oo,\n    eo,\n    _e,\n    Ae,\n    to,\n    // nodes\n    Ge,\n    We.configure({\n      domAttributes: n.domAttributes\n    }),\n    $e.configure({\n      domAttributes: n.domAttributes\n    }),\n    ...Object.values(n.blockSchema).map(\n      (o) => o.node.configure({\n        editor: n.editor,\n        domAttributes: n.domAttributes\n      })\n    ),\n    qe,\n    _tiptap_extension_dropcursor__WEBPACK_IMPORTED_MODULE_4__.Dropcursor.configure({ width: 5, color: \"#ddeeff\" }),\n    // This needs to be at the bottom of this list, because Key events (such as enter, when selecting a /command),\n    // should be handled before Enter handlers in other components like splitListItem\n    no\n  ];\n  if (n.collaboration) {\n    if (e.push(\n      _tiptap_extension_collaboration__WEBPACK_IMPORTED_MODULE_2__[\"default\"].configure({\n        fragment: n.collaboration.fragment\n      })\n    ), (t = n.collaboration.provider) != null && t.awareness) {\n      const o = (r) => {\n        const i = document.createElement(\"span\");\n        i.classList.add(D[\"collaboration-cursor__caret\"]), i.setAttribute(\"style\", `border-color: ${r.color}`);\n        const s = document.createElement(\"span\");\n        s.classList.add(D[\"collaboration-cursor__label\"]), s.setAttribute(\"style\", `background-color: ${r.color}`), s.insertBefore(document.createTextNode(r.name), null);\n        const l = document.createTextNode(\"⁠\"), a = document.createTextNode(\"⁠\");\n        return i.insertBefore(l, null), i.insertBefore(s, null), i.insertBefore(a, null), i;\n      };\n      e.push(\n        _tiptap_extension_collaboration_cursor__WEBPACK_IMPORTED_MODULE_3__[\"default\"].configure({\n          user: n.collaboration.user,\n          render: n.collaboration.renderCursor || o,\n          provider: n.collaboration.provider\n        })\n      );\n    }\n  } else\n    e.push(_tiptap_extension_history__WEBPACK_IMPORTED_MODULE_7__.History);\n  return e;\n};\nfunction et(n, e) {\n  let t, o;\n  if (e.firstChild.descendants((r, i) => t ? !1 : r.type.name !== \"blockContainer\" || r.attrs.id !== n ? !0 : (t = r, o = i + 1, !1)), t === void 0 || o === void 0)\n    throw Error(\"Could not find block in the editor with matching ID.\");\n  return {\n    node: t,\n    posBeforeNode: o\n  };\n}\nfunction Ut(n, e, t = \"before\", o) {\n  const r = typeof e == \"string\" ? e : e.id, i = [];\n  for (const d of n)\n    i.push(V(d, o.schema));\n  let s = -1;\n  const { node: l, posBeforeNode: a } = et(r, o.state.doc);\n  if (t === \"before\" && (s = a), t === \"after\" && (s = a + l.nodeSize), t === \"nested\") {\n    if (l.childCount < 2) {\n      s = a + l.firstChild.nodeSize + 1;\n      const d = o.state.schema.nodes.blockGroup.create(\n        {},\n        i\n      );\n      o.view.dispatch(\n        o.state.tr.insert(s, d)\n      );\n      return;\n    }\n    s = a + l.firstChild.nodeSize + 2;\n  }\n  o.view.dispatch(o.state.tr.insert(s, i));\n}\nfunction io(n, e, t) {\n  const o = typeof n == \"string\" ? n : n.id, { posBeforeNode: r } = et(o, t.state.doc);\n  t.commands.BNUpdateBlock(r + 1, e);\n}\nfunction Ft(n, e) {\n  const t = new Set(\n    n.map(\n      (r) => typeof r == \"string\" ? r : r.id\n    )\n  );\n  let o = 0;\n  if (e.state.doc.descendants((r, i) => {\n    if (t.size === 0)\n      return !1;\n    if (r.type.name !== \"blockContainer\" || !t.has(r.attrs.id))\n      return !0;\n    t.delete(r.attrs.id);\n    const s = e.state.doc.nodeSize;\n    e.commands.BNDeleteBlock(i - o + 1);\n    const l = e.state.doc.nodeSize;\n    return o += s - l, !1;\n  }), t.size > 0) {\n    const r = [...t].join(`\n`);\n    throw Error(\n      \"Blocks with the following IDs could not be found in the editor: \" + r\n    );\n  }\n}\nfunction so(n, e, t) {\n  Ut(e, n[0], \"before\", t), Ft(n, t);\n}\nfunction ao() {\n  const n = (e) => {\n    let t = e.children.length;\n    for (let o = 0; o < t; o++) {\n      const r = e.children[o];\n      if (r.type === \"element\" && (n(r), r.tagName === \"u\"))\n        if (r.children.length > 0) {\n          e.children.splice(o, 1, ...r.children);\n          const i = r.children.length - 1;\n          t += i, o += i;\n        } else\n          e.children.splice(o, 1), t--, o--;\n    }\n  };\n  return n;\n}\nfunction lo(n) {\n  const e = /* @__PURE__ */ new Set([\n    ...n.orderedListItemBlockTypes,\n    ...n.unorderedListItemBlockTypes\n  ]), t = (o) => {\n    let r = o.children.length, i;\n    for (let s = 0; s < r; s++) {\n      const a = o.children[s].children[0], d = a.children[0], c = a.children.length === 2 ? a.children[1] : null, m = e.has(\n        d.properties.dataContentType\n      ), h = m ? n.orderedListItemBlockTypes.has(\n        d.properties.dataContentType\n      ) ? \"ol\" : \"ul\" : null;\n      if (c !== null && t(c), i && i.tagName !== h) {\n        o.children.splice(\n          s - i.children.length,\n          i.children.length,\n          i\n        );\n        const p = i.children.length - 1;\n        s -= p, r -= p, i = void 0;\n      }\n      if (m) {\n        i || (i = (0,hast_util_from_dom__WEBPACK_IMPORTED_MODULE_18__.fromDom)(\n          document.createElement(h)\n        ));\n        const p = (0,hast_util_from_dom__WEBPACK_IMPORTED_MODULE_18__.fromDom)(\n          document.createElement(\"li\")\n        );\n        p.children.push(d.children[0]), c !== null && p.children.push(...c.children), i.children.push(p);\n      } else if (c !== null) {\n        o.children.splice(s + 1, 0, ...c.children), o.children[s] = d.children[0];\n        const p = c.children.length;\n        s += p, r += p;\n      } else\n        o.children[s] = d.children[0];\n    }\n    i && o.children.splice(\n      r - i.children.length,\n      i.children.length,\n      i\n    );\n  };\n  return t;\n}\nasync function Wt(n, e) {\n  const t = document.createElement(\"div\"), o = prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.DOMSerializer.fromSchema(e);\n  for (const i of n) {\n    const s = V(i, e), l = o.serializeNode(s);\n    t.appendChild(l);\n  }\n  return (await (0,unified__WEBPACK_IMPORTED_MODULE_19__.unified)().use(rehype_parse__WEBPACK_IMPORTED_MODULE_20__[\"default\"], { fragment: !0 }).use(lo, {\n    orderedListItemBlockTypes: /* @__PURE__ */ new Set([\"numberedListItem\"]),\n    unorderedListItemBlockTypes: /* @__PURE__ */ new Set([\"bulletListItem\"])\n  }).use(rehype_stringify__WEBPACK_IMPORTED_MODULE_21__[\"default\"]).process(t.innerHTML)).value;\n}\nasync function $t(n, e, t) {\n  const o = document.createElement(\"div\");\n  o.innerHTML = n.trim();\n  const i = prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.DOMParser.fromSchema(t).parse(o), s = [];\n  for (let l = 0; l < i.firstChild.childCount; l++)\n    s.push(x(i.firstChild.child(l), e));\n  return s;\n}\nasync function co(n, e) {\n  return (await (0,unified__WEBPACK_IMPORTED_MODULE_19__.unified)().use(rehype_parse__WEBPACK_IMPORTED_MODULE_20__[\"default\"], { fragment: !0 }).use(ao).use(rehype_remark__WEBPACK_IMPORTED_MODULE_22__[\"default\"]).use(remark_gfm__WEBPACK_IMPORTED_MODULE_23__[\"default\"]).use(remark_stringify__WEBPACK_IMPORTED_MODULE_24__[\"default\"]).process(await Wt(n, e))).value;\n}\nfunction uo(n, e) {\n  const t = e.value ? e.value + `\n` : \"\", o = {};\n  e.lang && (o[\"data-language\"] = e.lang);\n  let r = {\n    type: \"element\",\n    tagName: \"code\",\n    properties: o,\n    children: [{ type: \"text\", value: t }]\n  };\n  return e.meta && (r.data = { meta: e.meta }), n.patch(e, r), r = n.applyData(e, r), r = {\n    type: \"element\",\n    tagName: \"pre\",\n    properties: {},\n    children: [r]\n  }, n.patch(e, r), r;\n}\nasync function po(n, e, t) {\n  const o = await (0,unified__WEBPACK_IMPORTED_MODULE_19__.unified)().use(remark_parse__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).use(remark_gfm__WEBPACK_IMPORTED_MODULE_23__[\"default\"]).use(remark_rehype__WEBPACK_IMPORTED_MODULE_26__[\"default\"], {\n    handlers: {\n      ...remark_rehype__WEBPACK_IMPORTED_MODULE_27__.handlers,\n      code: uo\n    }\n  }).use(rehype_stringify__WEBPACK_IMPORTED_MODULE_21__[\"default\"]).process(n);\n  return $t(o.value, e, t);\n}\nfunction dt(n) {\n  return \"data-\" + n.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\nfunction ho(n) {\n  const e = {};\n  return Object.entries(n.propSchema).forEach(([t, o]) => {\n    e[t] = {\n      default: o.default,\n      keepOnSplit: !0,\n      // Props are displayed in kebab-case as HTML attributes. If a prop's\n      // value is the same as its default, we don't display an HTML\n      // attribute for it.\n      parseHTML: (r) => r.getAttribute(dt(t)),\n      renderHTML: (r) => r[t] !== o.default ? {\n        [dt(t)]: r[t]\n      } : {}\n    };\n  }), e;\n}\nfunction mo(n) {\n  return [\n    {\n      tag: \"div[data-content-type=\" + n.type + \"]\"\n    }\n  ];\n}\nfunction fo(n, e) {\n  const t = document.createElement(\"div\");\n  t.setAttribute(\"data-content-type\", n.type);\n  for (const [r, i] of Object.entries(e))\n    t.setAttribute(r, i);\n  let o;\n  return n.containsInlineContent ? (o = document.createElement(\"div\"), t.appendChild(o)) : o = void 0, o !== void 0 ? {\n    dom: t,\n    contentDOM: o\n  } : {\n    dom: t\n  };\n}\nfunction go(n) {\n  return {\n    node: F({\n      name: n.type,\n      content: n.containsInlineContent ? \"inline*\" : \"\",\n      selectable: !0,\n      addAttributes() {\n        return ho(n);\n      },\n      parseHTML() {\n        return mo(n);\n      },\n      renderHTML({ HTMLAttributes: t }) {\n        return fo(n, t);\n      },\n      addNodeView() {\n        return ({ HTMLAttributes: t, getPos: o }) => {\n          var p, f;\n          const r = document.createElement(\"div\"), i = ((p = this.options.domAttributes) == null ? void 0 : p.blockContent) || {};\n          for (const [k, v] of Object.entries(\n            i\n          ))\n            k !== \"class\" && r.setAttribute(k, v);\n          r.className = S(\n            g.blockContent,\n            i.class\n          ), r.setAttribute(\"data-content-type\", n.type);\n          for (const [k, v] of Object.entries(t))\n            r.setAttribute(k, v);\n          const s = this.options.editor;\n          if (typeof o == \"boolean\")\n            throw new Error(\n              \"Cannot find node position as getPos is a boolean, not a function.\"\n            );\n          const l = o(), c = s._tiptapEditor.state.doc.resolve(l).node().attrs.id, m = s.getBlock(c);\n          if (m.type !== n.type)\n            throw new Error(\"Block type does not match\");\n          const h = n.render(m, s);\n          if (n.containsInlineContent) {\n            const k = h.contentDOM, v = ((f = this.options.domAttributes) == null ? void 0 : f.inlineContent) || {};\n            for (const [w, E] of Object.entries(\n              v\n            ))\n              w !== \"class\" && k.setAttribute(w, E);\n            k.className = S(\n              k.className,\n              g.inlineContent,\n              v.class\n            );\n          }\n          return r.appendChild(h.dom), \"contentDOM\" in h ? {\n            dom: r,\n            contentDOM: h.contentDOM,\n            destroy: h.destroy\n          } : {\n            dom: r,\n            destroy: h.destroy\n          };\n        };\n      }\n    }),\n    propSchema: n.propSchema\n  };\n}\nfunction F(n) {\n  return _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Node.create({\n    ...n,\n    group: \"blockContent\",\n    content: n.content\n  });\n}\nconst ko = {\n  ...C,\n  level: { default: 1, values: [1, 2, 3] }\n}, bo = F({\n  name: \"heading\",\n  content: \"inline*\",\n  addAttributes() {\n    return {\n      level: {\n        default: 1,\n        // instead of \"level\" attributes, use \"data-level\"\n        parseHTML: (n) => n.getAttribute(\"data-level\"),\n        renderHTML: (n) => ({\n          \"data-level\": n.level.toString()\n        })\n      }\n    };\n  },\n  addInputRules() {\n    return [\n      ...[1, 2, 3].map((n) => new _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.InputRule({\n        find: new RegExp(`^(#{${n}})\\\\s$`),\n        handler: ({ state: e, chain: t, range: o }) => {\n          t().BNUpdateBlock(e.selection.from, {\n            type: \"heading\",\n            props: {\n              level: n\n            }\n          }).deleteRange({ from: o.from, to: o.to });\n        }\n      }))\n    ];\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-Alt-1\": () => this.editor.commands.BNUpdateBlock(this.editor.state.selection.anchor, {\n        type: \"heading\",\n        props: {\n          level: 1\n        }\n      }),\n      \"Mod-Alt-2\": () => this.editor.commands.BNUpdateBlock(this.editor.state.selection.anchor, {\n        type: \"heading\",\n        props: {\n          level: 2\n        }\n      }),\n      \"Mod-Alt-3\": () => this.editor.commands.BNUpdateBlock(this.editor.state.selection.anchor, {\n        type: \"heading\",\n        props: {\n          level: 3\n        }\n      })\n    };\n  },\n  parseHTML() {\n    return [\n      {\n        tag: \"h1\",\n        attrs: { level: 1 },\n        node: \"heading\"\n      },\n      {\n        tag: \"h2\",\n        attrs: { level: 2 },\n        node: \"heading\"\n      },\n      {\n        tag: \"h3\",\n        attrs: { level: 3 },\n        node: \"heading\"\n      }\n    ];\n  },\n  renderHTML({ node: n, HTMLAttributes: e }) {\n    var r, i;\n    const t = ((r = this.options.domAttributes) == null ? void 0 : r.blockContent) || {}, o = ((i = this.options.domAttributes) == null ? void 0 : i.inlineContent) || {};\n    return [\n      \"div\",\n      (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(e, {\n        ...t,\n        class: S(\n          g.blockContent,\n          t.class\n        ),\n        \"data-content-type\": this.name\n      }),\n      [\n        `h${n.attrs.level}`,\n        {\n          ...o,\n          class: S(\n            g.inlineContent,\n            o.class\n          )\n        },\n        0\n      ]\n    ];\n  }\n}), yo = {\n  node: bo,\n  propSchema: ko\n}, Gt = (n) => {\n  const { node: e, contentType: t } = b(\n    n.state.doc,\n    n.state.selection.from\n  ), o = n.state.selection.anchor === n.state.selection.head;\n  return !t.name.endsWith(\"ListItem\") || !o ? !1 : n.commands.first(({ state: r, chain: i, commands: s }) => [\n    () => (\n      // Changes list item block to a text block if the content is empty.\n      s.command(() => e.textContent.length === 0 ? s.BNUpdateBlock(r.selection.from, {\n        type: \"paragraph\",\n        props: {}\n      }) : !1)\n    ),\n    () => (\n      // Splits the current block, moving content inside that's after the cursor to a new block of the same type\n      // below.\n      s.command(() => e.textContent.length > 0 ? (i().deleteSelection().BNSplitBlock(r.selection.from, !0).run(), !0) : !1)\n    )\n  ]);\n}, vo = {\n  ...C\n}, wo = F({\n  name: \"bulletListItem\",\n  content: \"inline*\",\n  addInputRules() {\n    return [\n      // Creates an unordered list when starting with \"-\", \"+\", or \"*\".\n      new _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.InputRule({\n        find: new RegExp(\"^[-+*]\\\\s$\"),\n        handler: ({ state: n, chain: e, range: t }) => {\n          e().BNUpdateBlock(n.selection.from, {\n            type: \"bulletListItem\",\n            props: {}\n          }).deleteRange({ from: t.from, to: t.to });\n        }\n      })\n    ];\n  },\n  addKeyboardShortcuts() {\n    return {\n      Enter: () => Gt(this.editor),\n      \"Mod-Shift-7\": () => this.editor.commands.BNUpdateBlock(this.editor.state.selection.anchor, {\n        type: \"bulletListItem\",\n        props: {}\n      })\n    };\n  },\n  parseHTML() {\n    return [\n      // Case for regular HTML list structure.\n      {\n        tag: \"li\",\n        getAttrs: (n) => {\n          if (typeof n == \"string\")\n            return !1;\n          const e = n.parentElement;\n          return e === null ? !1 : e.tagName === \"UL\" ? {} : !1;\n        },\n        node: \"bulletListItem\"\n      },\n      // Case for BlockNote list structure.\n      {\n        tag: \"p\",\n        getAttrs: (n) => {\n          if (typeof n == \"string\")\n            return !1;\n          const e = n.parentElement;\n          return e === null ? !1 : e.getAttribute(\"data-content-type\") === \"bulletListItem\" ? {} : !1;\n        },\n        priority: 300,\n        node: \"bulletListItem\"\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    var o, r;\n    const e = ((o = this.options.domAttributes) == null ? void 0 : o.blockContent) || {}, t = ((r = this.options.domAttributes) == null ? void 0 : r.inlineContent) || {};\n    return [\n      \"div\",\n      (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(n, {\n        ...e,\n        class: S(\n          g.blockContent,\n          e.class\n        ),\n        \"data-content-type\": this.name\n      }),\n      [\n        \"p\",\n        {\n          ...t,\n          class: S(\n            g.inlineContent,\n            t.class\n          )\n        },\n        0\n      ]\n    ];\n  }\n}), Co = {\n  node: wo,\n  propSchema: vo\n}, Eo = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"numbered-list-indexing\"), So = () => new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n  key: Eo,\n  appendTransaction: (n, e, t) => {\n    const o = t.tr;\n    o.setMeta(\"numberedListIndexing\", !0);\n    let r = !1;\n    return t.doc.descendants((i, s) => {\n      if (i.type.name === \"blockContainer\" && i.firstChild.type.name === \"numberedListItem\") {\n        let l = \"1\";\n        const a = s === 1, d = b(o.doc, s + 1);\n        if (d === void 0)\n          return;\n        if (!a) {\n          const h = b(o.doc, s - 2);\n          if (h === void 0)\n            return;\n          if (!(d.depth !== h.depth)) {\n            const f = h.contentNode;\n            if (h.contentType.name === \"numberedListItem\") {\n              const w = f.attrs.index;\n              l = (parseInt(w) + 1).toString();\n            }\n          }\n        }\n        d.contentNode.attrs.index !== l && (r = !0, o.setNodeMarkup(s + 1, void 0, {\n          index: l\n        }));\n      }\n    }), r ? o : null;\n  }\n}), To = {\n  ...C\n}, Mo = F({\n  name: \"numberedListItem\",\n  content: \"inline*\",\n  addAttributes() {\n    return {\n      index: {\n        default: null,\n        parseHTML: (n) => n.getAttribute(\"data-index\"),\n        renderHTML: (n) => ({\n          \"data-index\": n.index\n        })\n      }\n    };\n  },\n  addInputRules() {\n    return [\n      // Creates an ordered list when starting with \"1.\".\n      new _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.InputRule({\n        find: new RegExp(\"^1\\\\.\\\\s$\"),\n        handler: ({ state: n, chain: e, range: t }) => {\n          e().BNUpdateBlock(n.selection.from, {\n            type: \"numberedListItem\",\n            props: {}\n          }).deleteRange({ from: t.from, to: t.to });\n        }\n      })\n    ];\n  },\n  addKeyboardShortcuts() {\n    return {\n      Enter: () => Gt(this.editor),\n      \"Mod-Shift-8\": () => this.editor.commands.BNUpdateBlock(this.editor.state.selection.anchor, {\n        type: \"numberedListItem\",\n        props: {}\n      })\n    };\n  },\n  addProseMirrorPlugins() {\n    return [So()];\n  },\n  parseHTML() {\n    return [\n      // Case for regular HTML list structure.\n      // (e.g.: when pasting from other apps)\n      {\n        tag: \"li\",\n        getAttrs: (n) => {\n          if (typeof n == \"string\")\n            return !1;\n          const e = n.parentElement;\n          return e === null ? !1 : e.tagName === \"OL\" ? {} : !1;\n        },\n        node: \"numberedListItem\"\n      },\n      // Case for BlockNote list structure.\n      // (e.g.: when pasting from blocknote)\n      {\n        tag: \"p\",\n        getAttrs: (n) => {\n          if (typeof n == \"string\")\n            return !1;\n          const e = n.parentElement;\n          return e === null ? !1 : e.getAttribute(\"data-content-type\") === \"numberedListItem\" ? {} : !1;\n        },\n        priority: 300,\n        node: \"numberedListItem\"\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    var o, r;\n    const e = ((o = this.options.domAttributes) == null ? void 0 : o.blockContent) || {}, t = ((r = this.options.domAttributes) == null ? void 0 : r.inlineContent) || {};\n    return [\n      \"div\",\n      (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(n, {\n        ...e,\n        class: S(\n          g.blockContent,\n          e.class\n        ),\n        \"data-content-type\": this.name\n      }),\n      // we use a <p> tag, because for <li> tags we'd need to add a <ul> parent for around siblings to be semantically correct,\n      // which would be quite cumbersome\n      [\n        \"p\",\n        {\n          ...t,\n          class: S(\n            g.inlineContent,\n            t.class\n          )\n        },\n        0\n      ]\n    ];\n  }\n}), Bo = {\n  node: Mo,\n  propSchema: To\n}, xo = {\n  ...C\n}, Io = F({\n  name: \"paragraph\",\n  content: \"inline*\",\n  parseHTML() {\n    return [\n      {\n        tag: \"p\",\n        priority: 200,\n        node: \"paragraph\"\n      }\n    ];\n  },\n  renderHTML({ HTMLAttributes: n }) {\n    var o, r;\n    const e = ((o = this.options.domAttributes) == null ? void 0 : o.blockContent) || {}, t = ((r = this.options.domAttributes) == null ? void 0 : r.inlineContent) || {};\n    return [\n      \"div\",\n      (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.mergeAttributes)(\n        {\n          ...e,\n          class: S(\n            g.blockContent,\n            e.class\n          ),\n          \"data-content-type\": this.name\n        },\n        n\n      ),\n      [\n        \"p\",\n        {\n          ...t,\n          class: S(\n            g.inlineContent,\n            t.class\n          )\n        },\n        0\n      ]\n    ];\n  }\n}), Ao = {\n  node: Io,\n  propSchema: xo\n};\nclass _o {\n  constructor(e, t, o) {\n    u(this, \"imageToolbarState\");\n    u(this, \"updateImageToolbar\");\n    u(this, \"prevWasEditable\", null);\n    u(this, \"shouldShow\", (e) => \"node\" in e.selection && e.selection.node.type.name === \"image\" && e.selection.node.attrs.src === \"\");\n    u(this, \"mouseDownHandler\", () => {\n      var e;\n      (e = this.imageToolbarState) != null && e.show && (this.imageToolbarState.show = !1, this.updateImageToolbar());\n    });\n    // For dragging the whole editor.\n    u(this, \"dragstartHandler\", () => {\n      var e;\n      (e = this.imageToolbarState) != null && e.show && (this.imageToolbarState.show = !1, this.updateImageToolbar());\n    });\n    u(this, \"blurHandler\", (e) => {\n      var o;\n      const t = this.pmView.dom.parentElement;\n      // An element is clicked.\n      e && e.relatedTarget && // Element is inside the editor.\n      (t === e.relatedTarget || t.contains(e.relatedTarget)) || (o = this.imageToolbarState) != null && o.show && (this.imageToolbarState.show = !1, this.updateImageToolbar());\n    });\n    u(this, \"scrollHandler\", () => {\n      var e;\n      if ((e = this.imageToolbarState) != null && e.show) {\n        const t = document.querySelector(\n          `[data-node-type=\"blockContainer\"][data-id=\"${this.imageToolbarState.block.id}\"]`\n        );\n        this.imageToolbarState.referencePos = t.getBoundingClientRect(), this.updateImageToolbar();\n      }\n    });\n    this.pluginKey = e, this.pmView = t, this.updateImageToolbar = () => {\n      if (!this.imageToolbarState)\n        throw new Error(\"Attempting to update uninitialized image toolbar\");\n      o(this.imageToolbarState);\n    }, t.dom.addEventListener(\"mousedown\", this.mouseDownHandler), t.dom.addEventListener(\"dragstart\", this.dragstartHandler), t.dom.addEventListener(\"blur\", this.blurHandler), document.addEventListener(\"scroll\", this.scrollHandler);\n  }\n  update(e, t) {\n    var r, i;\n    const o = this.pluginKey.getState(e.state);\n    if (!((r = this.imageToolbarState) != null && r.show) && o.block) {\n      const s = document.querySelector(\n        `[data-node-type=\"blockContainer\"][data-id=\"${o.block.id}\"]`\n      );\n      this.imageToolbarState = {\n        show: !0,\n        referencePos: s.getBoundingClientRect(),\n        block: o.block\n      }, this.updateImageToolbar();\n      return;\n    }\n    (!e.state.selection.eq(t.selection) || !e.state.doc.eq(t.doc)) && (i = this.imageToolbarState) != null && i.show && (this.imageToolbarState.show = !1, this.updateImageToolbar());\n  }\n  destroy() {\n    this.pmView.dom.removeEventListener(\"mousedown\", this.mouseDownHandler), this.pmView.dom.removeEventListener(\"dragstart\", this.dragstartHandler), this.pmView.dom.removeEventListener(\"blur\", this.blurHandler), document.removeEventListener(\"scroll\", this.scrollHandler);\n  }\n}\nconst z = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"ImageToolbarPlugin\");\nclass Ho extends U {\n  constructor(t) {\n    super();\n    u(this, \"view\");\n    u(this, \"plugin\");\n    this.plugin = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n      key: z,\n      view: (o) => (this.view = new _o(\n        // editor,\n        z,\n        o,\n        (r) => {\n          this.emit(\"update\", r);\n        }\n      ), this.view),\n      state: {\n        init: () => ({\n          block: void 0\n        }),\n        apply: (o) => {\n          var i;\n          return {\n            block: (i = o.getMeta(z)) == null ? void 0 : i.block\n          };\n        }\n      }\n    });\n  }\n  onUpdate(t) {\n    return this.on(\"update\", t);\n  }\n}\nconst Lo = {\n  textAlignment: C.textAlignment,\n  backgroundColor: C.backgroundColor,\n  // Image url.\n  url: {\n    default: \"\"\n  },\n  // Image caption.\n  caption: {\n    default: \"\"\n  },\n  // Image width in px.\n  width: {\n    default: 512\n  }\n}, ct = (n) => {\n  switch (n) {\n    case \"left\":\n      return \"flex-start\";\n    case \"center\":\n      return \"center\";\n    case \"right\":\n      return \"flex-end\";\n    default:\n      return \"flex-start\";\n  }\n}, ut = 64, No = (n, e) => {\n  const t = document.createElement(\"div\");\n  t.className = g.wrapper, t.style.alignItems = ct(\n    n.props.textAlignment\n  );\n  const o = document.createElement(\"div\");\n  o.className = g.addImageButton, o.style.display = n.props.url === \"\" ? \"\" : \"none\";\n  const r = document.createElement(\"div\");\n  r.className = g.addImageButtonIcon;\n  const i = document.createElement(\"p\");\n  i.className = g.addImageButtonText, i.innerText = \"Add Image\";\n  const s = document.createElement(\"div\");\n  s.className = g.imageAndCaptionWrapper, s.style.display = n.props.url !== \"\" ? \"\" : \"none\";\n  const l = document.createElement(\"div\");\n  l.className = g.imageWrapper, l.style.display = n.props.url !== \"\" ? \"\" : \"none\";\n  const a = document.createElement(\"img\");\n  a.className = g.image, a.src = n.props.url, a.alt = \"placeholder\", a.contentEditable = \"false\", a.draggable = !1, a.style.width = `${Math.min(\n    n.props.width,\n    e.domElement.firstElementChild.clientWidth\n  )}px`;\n  const d = document.createElement(\"div\");\n  d.className = g.resizeHandle, d.style.left = \"4px\";\n  const c = document.createElement(\"div\");\n  c.className = g.resizeHandle, c.style.right = \"4px\";\n  const m = document.createElement(\"p\");\n  m.className = g.caption, m.innerText = n.props.caption, m.style.padding = n.props.caption ? \"4px\" : \"\";\n  const h = () => {\n    var q;\n    const y = ((q = e.getSelection()) == null ? void 0 : q.blocks) || [];\n    [e.getTextCursorPosition().block, ...y].find(\n      (Kt) => Kt.id === n.id\n    ) !== void 0 ? (o.style.outline = \"4px solid rgb(100, 160, 255)\", s.style.outline = \"4px solid rgb(100, 160, 255)\") : (o.style.outline = \"\", s.style.outline = \"\");\n  };\n  e.onEditorContentChange(h), e.onEditorSelectionChange(h);\n  let p;\n  const f = (y) => {\n    if (!p)\n      return;\n    let M;\n    ct(n.props.textAlignment) === \"center\" ? p.handleUsed === \"left\" ? M = p.initialWidth + (p.initialClientX - y.clientX) * 2 : M = p.initialWidth + (y.clientX - p.initialClientX) * 2 : p.handleUsed === \"left\" ? M = p.initialWidth + p.initialClientX - y.clientX : M = p.initialWidth + y.clientX - p.initialClientX, M < ut ? a.style.width = `${ut}px` : M > e.domElement.firstElementChild.clientWidth ? a.style.width = `${e.domElement.firstElementChild.clientWidth}px` : a.style.width = `${M}px`;\n  }, k = (y) => {\n    p && ((!y.target || !l.contains(y.target)) && l.contains(d) && l.contains(c) && (d.style.display = \"none\", c.style.display = \"none\"), p = void 0, e.updateBlock(n, {\n      type: \"image\",\n      props: {\n        // Removes \"px\" from the end of the width string and converts to float.\n        width: parseFloat(a.style.width.slice(0, -2))\n      }\n    }));\n  }, v = (y) => {\n    y.preventDefault();\n  }, w = () => {\n    e._tiptapEditor.view.dispatch(\n      e._tiptapEditor.state.tr.setMeta(z, {\n        block: n\n      })\n    );\n  }, E = (y) => {\n    y.preventDefault(), d.style.display = \"block\", c.style.display = \"block\", p = {\n      handleUsed: \"left\",\n      initialWidth: n.props.width,\n      initialClientX: y.clientX\n    };\n  }, _ = (y) => {\n    y.preventDefault(), d.style.display = \"block\", c.style.display = \"block\", p = {\n      handleUsed: \"right\",\n      initialWidth: n.props.width,\n      initialClientX: y.clientX\n    };\n  };\n  return t.appendChild(o), o.appendChild(r), o.appendChild(i), t.appendChild(s), s.appendChild(l), l.appendChild(a), l.appendChild(d), l.appendChild(c), s.appendChild(m), window.addEventListener(\"mousemove\", f), window.addEventListener(\"mouseup\", k), o.addEventListener(\"mousedown\", v), o.addEventListener(\"click\", w), d.addEventListener(\n    \"mousedown\",\n    E\n  ), c.addEventListener(\n    \"mousedown\",\n    _\n  ), {\n    dom: t,\n    destroy: () => {\n      window.removeEventListener(\"mousemove\", f), window.removeEventListener(\"mouseup\", k), o.removeEventListener(\n        \"mousedown\",\n        v\n      ), o.removeEventListener(\"click\", w), d.removeEventListener(\n        \"mousedown\",\n        E\n      ), c.removeEventListener(\n        \"mousedown\",\n        _\n      );\n    }\n  };\n}, Po = go({\n  type: \"image\",\n  propSchema: Lo,\n  containsInlineContent: !1,\n  render: No\n}), jt = {\n  paragraph: Ao,\n  heading: yo,\n  bulletListItem: Co,\n  numberedListItem: Bo,\n  image: Po\n};\nclass Do {\n  constructor(e, t, o) {\n    u(this, \"formattingToolbarState\");\n    u(this, \"updateFormattingToolbar\");\n    u(this, \"preventHide\", !1);\n    u(this, \"preventShow\", !1);\n    u(this, \"prevWasEditable\", null);\n    u(this, \"shouldShow\", ({ view: e, state: t, from: o, to: r }) => {\n      const { doc: i, selection: s } = t, { empty: l } = s, a = !i.textBetween(o, r).length && (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.isTextSelection)(t.selection);\n      return !(!e.hasFocus() || l || a);\n    });\n    u(this, \"viewMousedownHandler\", () => {\n      this.preventShow = !0;\n    });\n    u(this, \"viewMouseupHandler\", () => {\n      this.preventShow = !1, setTimeout(() => this.update(this.pmView));\n    });\n    // For dragging the whole editor.\n    u(this, \"dragstartHandler\", () => {\n      var e;\n      (e = this.formattingToolbarState) != null && e.show && (this.formattingToolbarState.show = !1, this.updateFormattingToolbar());\n    });\n    u(this, \"focusHandler\", () => {\n      setTimeout(() => this.update(this.pmView));\n    });\n    u(this, \"blurHandler\", (e) => {\n      var o;\n      if (this.preventHide) {\n        this.preventHide = !1;\n        return;\n      }\n      const t = this.pmView.dom.parentElement;\n      // An element is clicked.\n      e && e.relatedTarget && // Element is inside the editor.\n      (t === e.relatedTarget || t.contains(e.relatedTarget)) || (o = this.formattingToolbarState) != null && o.show && (this.formattingToolbarState.show = !1, this.updateFormattingToolbar());\n    });\n    u(this, \"scrollHandler\", () => {\n      var e;\n      (e = this.formattingToolbarState) != null && e.show && (this.formattingToolbarState.referencePos = this.getSelectionBoundingBox(), this.updateFormattingToolbar());\n    });\n    this.editor = e, this.pmView = t, this.updateFormattingToolbar = () => {\n      if (!this.formattingToolbarState)\n        throw new Error(\n          \"Attempting to update uninitialized formatting toolbar\"\n        );\n      o(this.formattingToolbarState);\n    }, t.dom.addEventListener(\"mousedown\", this.viewMousedownHandler), t.dom.addEventListener(\"mouseup\", this.viewMouseupHandler), t.dom.addEventListener(\"dragstart\", this.dragstartHandler), t.dom.addEventListener(\"focus\", this.focusHandler), t.dom.addEventListener(\"blur\", this.blurHandler), document.addEventListener(\"scroll\", this.scrollHandler);\n  }\n  update(e, t) {\n    var h, p;\n    const { state: o, composing: r } = e, { doc: i, selection: s } = o, l = t && t.doc.eq(i) && t.selection.eq(s);\n    if ((this.prevWasEditable === null || this.prevWasEditable === this.editor.isEditable) && (r || l))\n      return;\n    this.prevWasEditable = this.editor.isEditable;\n    const { ranges: a } = s, d = Math.min(...a.map((f) => f.$from.pos)), c = Math.max(...a.map((f) => f.$to.pos)), m = (h = this.shouldShow) == null ? void 0 : h.call(this, {\n      view: e,\n      state: o,\n      from: d,\n      to: c\n    });\n    if (this.editor.isEditable && !this.preventShow && (m || this.preventHide)) {\n      this.formattingToolbarState = {\n        show: !0,\n        referencePos: this.getSelectionBoundingBox()\n      }, this.updateFormattingToolbar();\n      return;\n    }\n    if ((p = this.formattingToolbarState) != null && p.show && !this.preventHide && (!m || this.preventShow || !this.editor.isEditable)) {\n      this.formattingToolbarState.show = !1, this.updateFormattingToolbar();\n      return;\n    }\n  }\n  destroy() {\n    this.pmView.dom.removeEventListener(\"mousedown\", this.viewMousedownHandler), this.pmView.dom.removeEventListener(\"mouseup\", this.viewMouseupHandler), this.pmView.dom.removeEventListener(\"dragstart\", this.dragstartHandler), this.pmView.dom.removeEventListener(\"focus\", this.focusHandler), this.pmView.dom.removeEventListener(\"blur\", this.blurHandler), document.removeEventListener(\"scroll\", this.scrollHandler);\n  }\n  getSelectionBoundingBox() {\n    const { state: e } = this.pmView, { selection: t } = e, { ranges: o } = t, r = Math.min(...o.map((s) => s.$from.pos)), i = Math.max(...o.map((s) => s.$to.pos));\n    if ((0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.isNodeSelection)(t)) {\n      const s = this.pmView.nodeDOM(r);\n      if (s)\n        return s.getBoundingClientRect();\n    }\n    return (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.posToDOMRect)(this.pmView, r, i);\n  }\n}\nconst Oo = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\n  \"FormattingToolbarPlugin\"\n);\nclass Ro extends U {\n  constructor(t) {\n    super();\n    u(this, \"view\");\n    u(this, \"plugin\");\n    this.plugin = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n      key: Oo,\n      view: (o) => (this.view = new Do(t, o, (r) => {\n        this.emit(\"update\", r);\n      }), this.view)\n    });\n  }\n  onUpdate(t) {\n    return this.on(\"update\", t);\n  }\n}\nclass zo {\n  constructor(e, t, o) {\n    u(this, \"hyperlinkToolbarState\");\n    u(this, \"updateHyperlinkToolbar\");\n    u(this, \"menuUpdateTimer\");\n    u(this, \"startMenuUpdateTimer\");\n    u(this, \"stopMenuUpdateTimer\");\n    u(this, \"mouseHoveredHyperlinkMark\");\n    u(this, \"mouseHoveredHyperlinkMarkRange\");\n    u(this, \"keyboardHoveredHyperlinkMark\");\n    u(this, \"keyboardHoveredHyperlinkMarkRange\");\n    u(this, \"hyperlinkMark\");\n    u(this, \"hyperlinkMarkRange\");\n    u(this, \"mouseOverHandler\", (e) => {\n      if (this.mouseHoveredHyperlinkMark = void 0, this.mouseHoveredHyperlinkMarkRange = void 0, this.stopMenuUpdateTimer(), e.target instanceof HTMLAnchorElement && e.target.nodeName === \"A\") {\n        const t = e.target, o = this.pmView.posAtDOM(t, 0) + 1, r = this.pmView.state.doc.resolve(\n          o\n        ), i = r.marks();\n        for (const s of i)\n          if (s.type.name === this.pmView.state.schema.mark(\"link\").type.name) {\n            this.mouseHoveredHyperlinkMark = s, this.mouseHoveredHyperlinkMarkRange = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.getMarkRange)(\n              r,\n              s.type,\n              s.attrs\n            ) || void 0;\n            break;\n          }\n      }\n      return this.startMenuUpdateTimer(), !1;\n    });\n    u(this, \"clickHandler\", (e) => {\n      var o;\n      const t = this.pmView.dom.parentElement;\n      // Toolbar is open.\n      this.hyperlinkMark && // An element is clicked.\n      e && e.target && // The clicked element is not the editor.\n      !(t === e.target || t.contains(e.target)) && (o = this.hyperlinkToolbarState) != null && o.show && (this.hyperlinkToolbarState.show = !1, this.updateHyperlinkToolbar());\n    });\n    u(this, \"scrollHandler\", () => {\n      var e;\n      this.hyperlinkMark !== void 0 && (e = this.hyperlinkToolbarState) != null && e.show && (this.hyperlinkToolbarState.referencePos = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.posToDOMRect)(\n        this.pmView,\n        this.hyperlinkMarkRange.from,\n        this.hyperlinkMarkRange.to\n      ), this.updateHyperlinkToolbar());\n    });\n    this.editor = e, this.pmView = t, this.updateHyperlinkToolbar = () => {\n      if (!this.hyperlinkToolbarState)\n        throw new Error(\"Attempting to update uninitialized hyperlink toolbar\");\n      o(this.hyperlinkToolbarState);\n    }, this.startMenuUpdateTimer = () => {\n      this.menuUpdateTimer = setTimeout(() => {\n        this.update();\n      }, 250);\n    }, this.stopMenuUpdateTimer = () => (this.menuUpdateTimer && (clearTimeout(this.menuUpdateTimer), this.menuUpdateTimer = void 0), !1), this.pmView.dom.addEventListener(\"mouseover\", this.mouseOverHandler), document.addEventListener(\"click\", this.clickHandler, !0), document.addEventListener(\"scroll\", this.scrollHandler);\n  }\n  editHyperlink(e, t) {\n    var r;\n    const o = this.pmView.state.tr.insertText(\n      t,\n      this.hyperlinkMarkRange.from,\n      this.hyperlinkMarkRange.to\n    );\n    o.addMark(\n      this.hyperlinkMarkRange.from,\n      this.hyperlinkMarkRange.from + t.length,\n      this.pmView.state.schema.mark(\"link\", { href: e })\n    ), this.pmView.dispatch(o), this.pmView.focus(), (r = this.hyperlinkToolbarState) != null && r.show && (this.hyperlinkToolbarState.show = !1, this.updateHyperlinkToolbar());\n  }\n  deleteHyperlink() {\n    var e;\n    this.pmView.dispatch(\n      this.pmView.state.tr.removeMark(\n        this.hyperlinkMarkRange.from,\n        this.hyperlinkMarkRange.to,\n        this.hyperlinkMark.type\n      ).setMeta(\"preventAutolink\", !0)\n    ), this.pmView.focus(), (e = this.hyperlinkToolbarState) != null && e.show && (this.hyperlinkToolbarState.show = !1, this.updateHyperlinkToolbar());\n  }\n  update() {\n    var t;\n    if (!this.pmView.hasFocus())\n      return;\n    const e = this.hyperlinkMark;\n    if (this.hyperlinkMark = void 0, this.hyperlinkMarkRange = void 0, this.keyboardHoveredHyperlinkMark = void 0, this.keyboardHoveredHyperlinkMarkRange = void 0, this.pmView.state.selection.empty) {\n      const o = this.pmView.state.selection.$from.marks();\n      for (const r of o)\n        if (r.type.name === this.pmView.state.schema.mark(\"link\").type.name) {\n          this.keyboardHoveredHyperlinkMark = r, this.keyboardHoveredHyperlinkMarkRange = (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.getMarkRange)(\n            this.pmView.state.selection.$from,\n            r.type,\n            r.attrs\n          ) || void 0;\n          break;\n        }\n    }\n    if (this.mouseHoveredHyperlinkMark && (this.hyperlinkMark = this.mouseHoveredHyperlinkMark, this.hyperlinkMarkRange = this.mouseHoveredHyperlinkMarkRange), this.keyboardHoveredHyperlinkMark && (this.hyperlinkMark = this.keyboardHoveredHyperlinkMark, this.hyperlinkMarkRange = this.keyboardHoveredHyperlinkMarkRange), this.hyperlinkMark && this.editor.isEditable) {\n      this.hyperlinkToolbarState = {\n        show: !0,\n        referencePos: (0,_tiptap_core__WEBPACK_IMPORTED_MODULE_13__.posToDOMRect)(\n          this.pmView,\n          this.hyperlinkMarkRange.from,\n          this.hyperlinkMarkRange.to\n        ),\n        url: this.hyperlinkMark.attrs.href,\n        text: this.pmView.state.doc.textBetween(\n          this.hyperlinkMarkRange.from,\n          this.hyperlinkMarkRange.to\n        )\n      }, this.updateHyperlinkToolbar();\n      return;\n    }\n    if ((t = this.hyperlinkToolbarState) != null && t.show && e && (!this.hyperlinkMark || !this.editor.isEditable)) {\n      this.hyperlinkToolbarState.show = !1, this.updateHyperlinkToolbar();\n      return;\n    }\n  }\n  destroy() {\n    this.pmView.dom.removeEventListener(\"mouseover\", this.mouseOverHandler), document.removeEventListener(\"scroll\", this.scrollHandler), document.removeEventListener(\"click\", this.clickHandler, !0);\n  }\n}\nconst Vo = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\n  \"HyperlinkToolbarPlugin\"\n);\nclass Uo extends U {\n  constructor(t) {\n    super();\n    u(this, \"view\");\n    u(this, \"plugin\");\n    /**\n     * Edit the currently hovered hyperlink.\n     */\n    u(this, \"editHyperlink\", (t, o) => {\n      this.view.editHyperlink(t, o);\n    });\n    /**\n     * Delete the currently hovered hyperlink.\n     */\n    u(this, \"deleteHyperlink\", () => {\n      this.view.deleteHyperlink();\n    });\n    /**\n     * When hovering on/off hyperlinks using the mouse cursor, the hyperlink\n     * toolbar will open & close with a delay.\n     *\n     * This function starts the delay timer, and should be used for when the mouse cursor enters the hyperlink toolbar.\n     */\n    u(this, \"startHideTimer\", () => {\n      this.view.startMenuUpdateTimer();\n    });\n    /**\n     * When hovering on/off hyperlinks using the mouse cursor, the hyperlink\n     * toolbar will open & close with a delay.\n     *\n     * This function stops the delay timer, and should be used for when the mouse cursor exits the hyperlink toolbar.\n     */\n    u(this, \"stopHideTimer\", () => {\n      this.view.stopMenuUpdateTimer();\n    });\n    this.plugin = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n      key: Vo,\n      view: (o) => (this.view = new zo(t, o, (r) => {\n        this.emit(\"update\", r);\n      }), this.view)\n    });\n  }\n  onUpdate(t) {\n    return this.on(\"update\", t);\n  }\n}\nclass O extends prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Selection {\n  constructor(t, o) {\n    super(t, o);\n    u(this, \"nodes\");\n    const r = t.node();\n    this.nodes = [], t.doc.nodesBetween(t.pos, o.pos, (i, s, l) => {\n      if (l !== null && l.eq(r))\n        return this.nodes.push(i), !1;\n    });\n  }\n  static create(t, o, r = o) {\n    return new O(t.resolve(o), t.resolve(r));\n  }\n  content() {\n    return new prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_16__.Fragment.from(this.nodes), 0, 0);\n  }\n  eq(t) {\n    if (!(t instanceof O) || this.nodes.length !== t.nodes.length || this.from !== t.from || this.to !== t.to)\n      return !1;\n    for (let o = 0; o < this.nodes.length; o++)\n      if (!this.nodes[o].eq(t.nodes[o]))\n        return !1;\n    return !0;\n  }\n  map(t, o) {\n    const r = o.mapResult(this.from), i = o.mapResult(this.to);\n    return i.deleted ? prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Selection.near(t.resolve(r.pos)) : r.deleted ? prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Selection.near(t.resolve(i.pos)) : new O(\n      t.resolve(r.pos),\n      t.resolve(i.pos)\n    );\n  }\n  toJSON() {\n    return { type: \"node\", anchor: this.anchor, head: this.head };\n  }\n}\nconst Fo = prosemirror_view__WEBPACK_IMPORTED_MODULE_17__.__serializeForClipboard;\nlet I;\nfunction qt(n, e) {\n  var r;\n  if (!e.dom.isConnected)\n    return;\n  const t = e.posAtCoords(n);\n  if (!t)\n    return;\n  let o = e.domAtPos(t.pos).node;\n  if (o !== e.dom) {\n    for (; o && o.parentNode && o.parentNode !== e.dom && !((r = o.hasAttribute) != null && r.call(o, \"data-id\")); )\n      o = o.parentNode;\n    if (o)\n      return { node: o, id: o.getAttribute(\"data-id\") };\n  }\n}\nfunction Wo(n, e) {\n  const t = qt(n, e);\n  if (t && t.node.nodeType === 1) {\n    const o = e.docView, r = o.nearestDesc(t.node, !0);\n    return !r || r === o ? null : r.posBefore;\n  }\n  return null;\n}\nfunction $o(n, e) {\n  let t, o;\n  const r = e.resolve(n.from).node().type.spec.group === \"blockContent\", i = e.resolve(n.to).node().type.spec.group === \"blockContent\", s = Math.min(n.$anchor.depth, n.$head.depth);\n  if (r && i) {\n    const l = n.$from.start(s - 1), a = n.$to.end(s - 1);\n    t = e.resolve(l - 1).pos, o = e.resolve(a + 1).pos;\n  } else\n    t = n.from, o = n.to;\n  return { from: t, to: o };\n}\nfunction pt(n, e, t = e) {\n  e === t && (t += n.state.doc.resolve(e + 1).node().nodeSize);\n  const o = n.domAtPos(e).node.cloneNode(!0), r = n.domAtPos(e).node, i = (c, m) => Array.prototype.indexOf.call(c.children, m), s = i(\n    r,\n    // Expects from position to be just before the first selected block.\n    n.domAtPos(e + 1).node.parentElement\n  ), l = i(\n    r,\n    // Expects to position to be just after the last selected block.\n    n.domAtPos(t - 1).node.parentElement\n  );\n  for (let c = r.childElementCount - 1; c >= 0; c--)\n    (c > l || c < s) && o.removeChild(o.children[c]);\n  Xt(), I = o;\n  const d = n.dom.className.split(\" \").filter(\n    (c) => !c.includes(\"bn\") && !c.includes(\"ProseMirror\") && !c.includes(\"editor\")\n  ).join(\" \");\n  I.className = I.className + \" \" + D.dragPreview + \" \" + d, document.body.appendChild(I);\n}\nfunction Xt() {\n  I !== void 0 && (document.body.removeChild(I), I = void 0);\n}\nfunction Go(n, e) {\n  if (!n.dataTransfer)\n    return;\n  const t = e.dom.getBoundingClientRect(), o = {\n    left: t.left + t.width / 2,\n    // take middle of editor\n    top: n.clientY\n  }, r = Wo(o, e);\n  if (r != null) {\n    const i = e.state.selection, s = e.state.doc, { from: l, to: a } = $o(i, s), d = l <= r && r < a, c = i.$anchor.node() !== i.$head.node() || i instanceof O;\n    d && c ? (e.dispatch(\n      e.state.tr.setSelection(O.create(s, l, a))\n    ), pt(e, l, a)) : (e.dispatch(\n      e.state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.NodeSelection.create(e.state.doc, r))\n    ), pt(e, r));\n    const m = e.state.selection.content(), { dom: h, text: p } = Fo(e, m);\n    n.dataTransfer.clearData(), n.dataTransfer.setData(\"text/html\", h.innerHTML), n.dataTransfer.setData(\"text/plain\", p), n.dataTransfer.effectAllowed = \"move\", n.dataTransfer.setDragImage(I, 0, 0), e.dragging = { slice: m, move: !0 };\n  }\n}\nclass jo {\n  constructor(e, t, o) {\n    u(this, \"sideMenuState\");\n    // When true, the drag handle with be anchored at the same level as root elements\n    // When false, the drag handle with be just to the left of the element\n    // TODO: Is there any case where we want this to be false?\n    u(this, \"horizontalPosAnchoredAtRoot\");\n    u(this, \"horizontalPosAnchor\");\n    u(this, \"hoveredBlock\");\n    // Used to check if currently dragged content comes from this editor instance.\n    u(this, \"isDragging\", !1);\n    u(this, \"menuFrozen\", !1);\n    /**\n     * Sets isDragging when dragging text.\n     */\n    u(this, \"onDragStart\", () => {\n      this.isDragging = !0;\n    });\n    /**\n     * If the event is outside the editor contents,\n     * we dispatch a fake event, so that we can still drop the content\n     * when dragging / dropping to the side of the editor\n     */\n    u(this, \"onDrop\", (e) => {\n      if (this.editor._tiptapEditor.commands.blur(), e.synthetic || !this.isDragging)\n        return;\n      const t = this.pmView.posAtCoords({\n        left: e.clientX,\n        top: e.clientY\n      });\n      if (this.isDragging = !1, !t || t.inside === -1) {\n        const o = new Event(\"drop\", e), r = this.pmView.dom.firstChild.getBoundingClientRect();\n        o.clientX = r.left + r.width / 2, o.clientY = e.clientY, o.dataTransfer = e.dataTransfer, o.preventDefault = () => e.preventDefault(), o.synthetic = !0, this.pmView.dom.dispatchEvent(o);\n      }\n    });\n    /**\n     * If the event is outside the editor contents,\n     * we dispatch a fake event, so that we can still drop the content\n     * when dragging / dropping to the side of the editor\n     */\n    u(this, \"onDragOver\", (e) => {\n      if (e.synthetic || !this.isDragging)\n        return;\n      const t = this.pmView.posAtCoords({\n        left: e.clientX,\n        top: e.clientY\n      });\n      if (!t || t.inside === -1) {\n        const o = new Event(\"dragover\", e), r = this.pmView.dom.firstChild.getBoundingClientRect();\n        o.clientX = r.left + r.width / 2, o.clientY = e.clientY, o.dataTransfer = e.dataTransfer, o.preventDefault = () => e.preventDefault(), o.synthetic = !0, this.pmView.dom.dispatchEvent(o);\n      }\n    });\n    u(this, \"onKeyDown\", (e) => {\n      var t;\n      (t = this.sideMenuState) != null && t.show && (this.sideMenuState.show = !1, this.updateSideMenu(this.sideMenuState)), this.menuFrozen = !1;\n    });\n    u(this, \"onMouseMove\", (e) => {\n      var d, c, m, h, p;\n      if (this.menuFrozen)\n        return;\n      const t = this.pmView.dom.firstChild.getBoundingClientRect(), o = this.pmView.dom.getBoundingClientRect(), r = e.clientX >= o.left && e.clientX <= o.right && e.clientY >= o.top && e.clientY <= o.bottom, i = this.pmView.dom.parentElement;\n      if (\n        // Cursor is within the editor area\n        r && // An element is hovered\n        e && e.target && // Element is outside the editor\n        !(i === e.target || i.contains(e.target))\n      ) {\n        (d = this.sideMenuState) != null && d.show && (this.sideMenuState.show = !1, this.updateSideMenu(this.sideMenuState));\n        return;\n      }\n      this.horizontalPosAnchor = t.x;\n      const s = {\n        left: t.left + t.width / 2,\n        // take middle of editor\n        top: e.clientY\n      }, l = qt(s, this.pmView);\n      if (!l || !this.editor.isEditable) {\n        (c = this.sideMenuState) != null && c.show && (this.sideMenuState.show = !1, this.updateSideMenu(this.sideMenuState));\n        return;\n      }\n      if ((m = this.sideMenuState) != null && m.show && ((h = this.hoveredBlock) != null && h.hasAttribute(\"data-id\")) && ((p = this.hoveredBlock) == null ? void 0 : p.getAttribute(\"data-id\")) === l.id)\n        return;\n      this.hoveredBlock = l.node;\n      const a = l.node.firstChild;\n      if (a && this.editor.isEditable) {\n        const f = a.getBoundingClientRect();\n        this.sideMenuState = {\n          show: !0,\n          referencePos: new DOMRect(\n            this.horizontalPosAnchoredAtRoot ? this.horizontalPosAnchor : f.x,\n            f.y,\n            f.width,\n            f.height\n          ),\n          block: this.editor.getBlock(\n            this.hoveredBlock.getAttribute(\"data-id\")\n          )\n        }, this.updateSideMenu(this.sideMenuState);\n      }\n    });\n    u(this, \"onScroll\", () => {\n      var e;\n      if ((e = this.sideMenuState) != null && e.show) {\n        const o = this.hoveredBlock.firstChild.getBoundingClientRect();\n        this.sideMenuState.referencePos = new DOMRect(\n          this.horizontalPosAnchoredAtRoot ? this.horizontalPosAnchor : o.x,\n          o.y,\n          o.width,\n          o.height\n        ), this.updateSideMenu(this.sideMenuState);\n      }\n    });\n    this.editor = e, this.pmView = t, this.updateSideMenu = o, this.horizontalPosAnchoredAtRoot = !0, this.horizontalPosAnchor = this.pmView.dom.firstChild.getBoundingClientRect().x, document.body.addEventListener(\"drop\", this.onDrop, !0), document.body.addEventListener(\"dragover\", this.onDragOver), this.pmView.dom.addEventListener(\"dragstart\", this.onDragStart), document.body.addEventListener(\"mousemove\", this.onMouseMove, !0), document.addEventListener(\"scroll\", this.onScroll), document.body.addEventListener(\"keydown\", this.onKeyDown, !0);\n  }\n  destroy() {\n    var e;\n    (e = this.sideMenuState) != null && e.show && (this.sideMenuState.show = !1, this.updateSideMenu(this.sideMenuState)), document.body.removeEventListener(\"mousemove\", this.onMouseMove), document.body.removeEventListener(\"dragover\", this.onDragOver), this.pmView.dom.removeEventListener(\"dragstart\", this.onDragStart), document.body.removeEventListener(\"drop\", this.onDrop, !0), document.removeEventListener(\"scroll\", this.onScroll), document.body.removeEventListener(\"keydown\", this.onKeyDown, !0);\n  }\n  addBlock() {\n    var l;\n    (l = this.sideMenuState) != null && l.show && (this.sideMenuState.show = !1, this.updateSideMenu(this.sideMenuState)), this.menuFrozen = !0;\n    const t = this.hoveredBlock.firstChild.getBoundingClientRect(), o = this.pmView.posAtCoords({\n      left: t.left + t.width / 2,\n      top: t.top + t.height / 2\n    });\n    if (!o)\n      return;\n    const r = b(\n      this.editor._tiptapEditor.state.doc,\n      o.pos\n    );\n    if (r === void 0)\n      return;\n    const { contentNode: i, endPos: s } = r;\n    if (i.textContent.length !== 0) {\n      const a = s + 1, d = a + 2;\n      this.editor._tiptapEditor.chain().BNCreateBlock(a).BNUpdateBlock(d, { type: \"paragraph\", props: {} }).setTextSelection(d).run();\n    } else\n      this.editor._tiptapEditor.commands.setTextSelection(s);\n    this.pmView.focus(), this.pmView.dispatch(\n      this.pmView.state.tr.scrollIntoView().setMeta(tt, {\n        // TODO import suggestion plugin key\n        activate: !0,\n        type: \"drag\"\n      })\n    );\n  }\n}\nconst qo = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.PluginKey(\"SideMenuPlugin\");\nclass Xo extends U {\n  constructor(t) {\n    super();\n    u(this, \"sideMenuView\");\n    u(this, \"plugin\");\n    /**\n     * If the block is empty, opens the slash menu. If the block has content,\n     * creates a new block below and opens the slash menu in it.\n     */\n    u(this, \"addBlock\", () => this.sideMenuView.addBlock());\n    /**\n     * Handles drag & drop events for blocks.\n     */\n    u(this, \"blockDragStart\", (t) => {\n      this.sideMenuView.isDragging = !0, Go(t, this.editor.prosemirrorView);\n    });\n    /**\n     * Handles drag & drop events for blocks.\n     */\n    u(this, \"blockDragEnd\", () => Xt());\n    /**\n     * Freezes the side menu. When frozen, the side menu will stay\n     * attached to the same block regardless of which block is hovered by the\n     * mouse cursor.\n     */\n    u(this, \"freezeMenu\", () => this.sideMenuView.menuFrozen = !0);\n    /**\n     * Unfreezes the side menu. When frozen, the side menu will stay\n     * attached to the same block regardless of which block is hovered by the\n     * mouse cursor.\n     */\n    u(this, \"unfreezeMenu\", () => this.sideMenuView.menuFrozen = !1);\n    this.editor = t, this.plugin = new prosemirror_state__WEBPACK_IMPORTED_MODULE_15__.Plugin({\n      key: qo,\n      view: (o) => (this.sideMenuView = new jo(\n        t,\n        o,\n        (r) => {\n          this.emit(\"update\", r);\n        }\n      ), this.sideMenuView)\n    });\n  }\n  onUpdate(t) {\n    return this.on(\"update\", t);\n  }\n}\nfunction H(n, e) {\n  const t = n.getTextCursorPosition().block;\n  if (t.content === void 0)\n    throw new Error(\n      \"Slash Menu open in a block that doesn't contain inline content.\"\n    );\n  t.content.length === 1 && t.content[0].type === \"text\" && t.content[0].text === \"/\" || t.content.length === 0 ? n.updateBlock(t, e) : (n.insertBlocks([e], t, \"after\"), n.setTextCursorPosition(n.getTextCursorPosition().nextBlock));\n}\nconst Ko = (n = jt) => {\n  var t, o, r;\n  const e = [];\n  return \"heading\" in n && \"level\" in n.heading.propSchema && ((t = n.heading.propSchema.level.values) != null && t.includes(1) && e.push({\n    name: \"Heading\",\n    aliases: [\"h\", \"heading1\", \"h1\"],\n    execute: (i) => H(i, {\n      type: \"heading\",\n      props: { level: 1 }\n    })\n  }), (o = n.heading.propSchema.level.values) != null && o.includes(2) && e.push({\n    name: \"Heading 2\",\n    aliases: [\"h2\", \"heading2\", \"subheading\"],\n    execute: (i) => H(i, {\n      type: \"heading\",\n      props: { level: 2 }\n    })\n  }), (r = n.heading.propSchema.level.values) != null && r.includes(3) && e.push({\n    name: \"Heading 3\",\n    aliases: [\"h3\", \"heading3\", \"subheading\"],\n    execute: (i) => H(i, {\n      type: \"heading\",\n      props: { level: 3 }\n    })\n  })), \"bulletListItem\" in n && e.push({\n    name: \"Bullet List\",\n    aliases: [\"ul\", \"list\", \"bulletlist\", \"bullet list\"],\n    execute: (i) => H(i, {\n      type: \"bulletListItem\"\n    })\n  }), \"numberedListItem\" in n && e.push({\n    name: \"Numbered List\",\n    aliases: [\"li\", \"list\", \"numberedlist\", \"numbered list\"],\n    execute: (i) => H(i, {\n      type: \"numberedListItem\"\n    })\n  }), \"paragraph\" in n && e.push({\n    name: \"Paragraph\",\n    aliases: [\"p\"],\n    execute: (i) => H(i, {\n      type: \"paragraph\"\n    })\n  }), \"image\" in n && e.push({\n    name: \"Image\",\n    aliases: [\n      \"image\",\n      \"imageUpload\",\n      \"upload\",\n      \"img\",\n      \"picture\",\n      \"media\",\n      \"url\",\n      \"drive\",\n      \"dropbox\"\n    ],\n    execute: (i) => {\n      H(i, {\n        type: \"image\"\n      }), i.setTextCursorPosition(\n        i.getTextCursorPosition().nextBlock,\n        \"start\"\n      ), i._tiptapEditor.view.dispatch(\n        i._tiptapEditor.state.tr.setMeta(z, {\n          block: i.getTextCursorPosition().prevBlock\n        })\n      );\n    }\n  }), e;\n}, Yo = {\n  enableInputRules: !0,\n  enablePasteRules: !0,\n  enableCoreExtensions: !1\n};\nclass xn {\n  constructor(e = {}) {\n    u(this, \"_tiptapEditor\");\n    u(this, \"blockCache\", /* @__PURE__ */ new WeakMap());\n    u(this, \"schema\");\n    u(this, \"ready\", !1);\n    u(this, \"sideMenu\");\n    u(this, \"formattingToolbar\");\n    u(this, \"slashMenu\");\n    u(this, \"hyperlinkToolbar\");\n    u(this, \"imageToolbar\");\n    u(this, \"uploadFile\");\n    var l, a, d, c, m;\n    this.options = e;\n    const t = {\n      defaultStyles: !0,\n      // TODO: There's a lot of annoying typing stuff to deal with here. If\n      //  BSchema is specified, then options.blockSchema should also be required.\n      //  If BSchema is not specified, then options.blockSchema should also not\n      //  be defined. Unfortunately, trying to implement these constraints seems\n      //  to be a huge pain, hence the `as any` casts.\n      blockSchema: e.blockSchema || jt,\n      ...e\n    };\n    this.sideMenu = new Xo(this), this.formattingToolbar = new Ro(this), this.slashMenu = new Je(\n      this,\n      t.slashMenuItems || Ko(t.blockSchema)\n    ), this.hyperlinkToolbar = new Uo(this), this.imageToolbar = new Ho(this);\n    const o = ro({\n      editor: this,\n      domAttributes: t.domAttributes || {},\n      blockSchema: t.blockSchema,\n      collaboration: t.collaboration\n    }), r = _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Extension.create({\n      name: \"BlockNoteUIExtension\",\n      addProseMirrorPlugins: () => [\n        this.sideMenu.plugin,\n        this.formattingToolbar.plugin,\n        this.slashMenu.plugin,\n        this.hyperlinkToolbar.plugin,\n        this.imageToolbar.plugin\n      ]\n    });\n    o.push(r), this.schema = t.blockSchema, this.uploadFile = t.uploadFile;\n    const i = t.initialContent || (e.collaboration ? void 0 : [\n      {\n        type: \"paragraph\",\n        id: j.options.generateID()\n      }\n    ]), s = {\n      ...Yo,\n      ...t._tiptapOptions,\n      onBeforeCreate(h) {\n        if (!i)\n          return;\n        const p = h.editor.schema, f = p.node(\n          \"doc\",\n          void 0,\n          p.node(\"blockGroup\", void 0, [\n            V({ id: \"initialBlock\", type: \"paragraph\" }, p)\n          ])\n        );\n        h.editor.options.content = f.toJSON();\n      },\n      onCreate: () => {\n        var h;\n        i !== void 0 && this.replaceBlocks(this.topLevelBlocks, i), (h = t.onEditorReady) == null || h.call(t, this), this.ready = !0;\n      },\n      onUpdate: () => {\n        var h;\n        this.ready && ((h = t.onEditorContentChange) == null || h.call(t, this));\n      },\n      onSelectionUpdate: () => {\n        var h;\n        this.ready && ((h = t.onTextCursorPositionChange) == null || h.call(t, this));\n      },\n      editable: e.editable === void 0 ? !0 : e.editable,\n      extensions: t.enableBlockNoteExtensions === !1 ? (l = t._tiptapOptions) == null ? void 0 : l.extensions : [...((a = t._tiptapOptions) == null ? void 0 : a.extensions) || [], ...o],\n      editorProps: {\n        attributes: {\n          ...(d = t.domAttributes) == null ? void 0 : d.editor,\n          class: S(\n            D.bnEditor,\n            D.bnRoot,\n            t.defaultStyles ? D.defaultStyles : \"\",\n            ((m = (c = t.domAttributes) == null ? void 0 : c.editor) == null ? void 0 : m.class) || \"\"\n          )\n        }\n      }\n    };\n    t.parentElement && (s.element = t.parentElement), this._tiptapEditor = new _tiptap_core__WEBPACK_IMPORTED_MODULE_13__.Editor(s);\n  }\n  get prosemirrorView() {\n    return this._tiptapEditor.view;\n  }\n  get domElement() {\n    return this._tiptapEditor.view.dom;\n  }\n  isFocused() {\n    return this._tiptapEditor.view.hasFocus();\n  }\n  focus() {\n    this._tiptapEditor.view.focus();\n  }\n  /**\n   * Gets a snapshot of all top-level (non-nested) blocks in the editor.\n   * @returns A snapshot of all top-level (non-nested) blocks in the editor.\n   */\n  get topLevelBlocks() {\n    const e = [];\n    return this._tiptapEditor.state.doc.firstChild.descendants((t) => (e.push(x(t, this.schema, this.blockCache)), !1)), e;\n  }\n  /**\n   * Gets a snapshot of an existing block from the editor.\n   * @param blockIdentifier The identifier of an existing block that should be retrieved.\n   * @returns The block that matches the identifier, or `undefined` if no matching block was found.\n   */\n  getBlock(e) {\n    const t = typeof e == \"string\" ? e : e.id;\n    let o;\n    return this._tiptapEditor.state.doc.firstChild.descendants((r) => typeof o < \"u\" ? !1 : r.type.name !== \"blockContainer\" || r.attrs.id !== t ? !0 : (o = x(r, this.schema, this.blockCache), !1)), o;\n  }\n  /**\n   * Traverses all blocks in the editor depth-first, and executes a callback for each.\n   * @param callback The callback to execute for each block. Returning `false` stops the traversal.\n   * @param reverse Whether the blocks should be traversed in reverse order.\n   */\n  forEachBlock(e, t = !1) {\n    const o = this.topLevelBlocks.slice();\n    t && o.reverse();\n    function r(i) {\n      for (const s of i) {\n        if (!e(s))\n          return !1;\n        const l = t ? s.children.slice().reverse() : s.children;\n        if (!r(l))\n          return !1;\n      }\n      return !0;\n    }\n    r(o);\n  }\n  /**\n   * Executes a callback whenever the editor's contents change.\n   * @param callback The callback to execute.\n   */\n  onEditorContentChange(e) {\n    this._tiptapEditor.on(\"update\", e);\n  }\n  /**\n   * Executes a callback whenever the editor's selection changes.\n   * @param callback The callback to execute.\n   */\n  onEditorSelectionChange(e) {\n    this._tiptapEditor.on(\"selectionUpdate\", e);\n  }\n  /**\n   * Gets a snapshot of the current text cursor position.\n   * @returns A snapshot of the current text cursor position.\n   */\n  getTextCursorPosition() {\n    const { node: e, depth: t, startPos: o, endPos: r } = b(\n      this._tiptapEditor.state.doc,\n      this._tiptapEditor.state.selection.from\n    ), i = this._tiptapEditor.state.doc.resolve(r).index(t - 1), s = this._tiptapEditor.state.doc.resolve(r + 1).node().childCount;\n    let l;\n    i > 0 && (l = this._tiptapEditor.state.doc.resolve(o - 2).node());\n    let a;\n    return i < s - 1 && (a = this._tiptapEditor.state.doc.resolve(r + 2).node()), {\n      block: x(e, this.schema, this.blockCache),\n      prevBlock: l === void 0 ? void 0 : x(l, this.schema, this.blockCache),\n      nextBlock: a === void 0 ? void 0 : x(a, this.schema, this.blockCache)\n    };\n  }\n  /**\n   * Sets the text cursor position to the start or end of an existing block. Throws an error if the target block could\n   * not be found.\n   * @param targetBlock The identifier of an existing block that the text cursor should be moved to.\n   * @param placement Whether the text cursor should be placed at the start or end of the block.\n   */\n  setTextCursorPosition(e, t = \"start\") {\n    const o = typeof e == \"string\" ? e : e.id, { posBeforeNode: r } = et(o, this._tiptapEditor.state.doc), { startPos: i, contentNode: s } = b(\n      this._tiptapEditor.state.doc,\n      r + 2\n    );\n    if (s.type.spec.content === \"\") {\n      this._tiptapEditor.commands.setNodeSelection(i);\n      return;\n    }\n    t === \"start\" ? this._tiptapEditor.commands.setTextSelection(i + 1) : this._tiptapEditor.commands.setTextSelection(\n      i + s.nodeSize - 1\n    );\n  }\n  /**\n   * Gets a snapshot of the current selection.\n   */\n  getSelection() {\n    if (this._tiptapEditor.state.selection.from === this._tiptapEditor.state.selection.to || \"node\" in this._tiptapEditor.state.selection)\n      return;\n    const e = [];\n    return this._tiptapEditor.state.doc.descendants((t, o) => t.type.spec.group !== \"blockContent\" || o + t.nodeSize < this._tiptapEditor.state.selection.from || o > this._tiptapEditor.state.selection.to ? !0 : (e.push(\n      x(\n        this._tiptapEditor.state.doc.resolve(o).node(),\n        this.schema,\n        this.blockCache\n      )\n    ), !1)), { blocks: e };\n  }\n  /**\n   * Checks if the editor is currently editable, or if it's locked.\n   * @returns True if the editor is editable, false otherwise.\n   */\n  get isEditable() {\n    return this._tiptapEditor.isEditable;\n  }\n  /**\n   * Makes the editor editable or locks it, depending on the argument passed.\n   * @param editable True to make the editor editable, or false to lock it.\n   */\n  set isEditable(e) {\n    this._tiptapEditor.setEditable(e);\n  }\n  /**\n   * Inserts new blocks into the editor. If a block's `id` is undefined, BlockNote generates one automatically. Throws an\n   * error if the reference block could not be found.\n   * @param blocksToInsert An array of partial blocks that should be inserted.\n   * @param referenceBlock An identifier for an existing block, at which the new blocks should be inserted.\n   * @param placement Whether the blocks should be inserted just before, just after, or nested inside the\n   * `referenceBlock`. Inserts the blocks at the start of the existing block's children if \"nested\" is used.\n   */\n  insertBlocks(e, t, o = \"before\") {\n    Ut(e, t, o, this._tiptapEditor);\n  }\n  /**\n   * Updates an existing block in the editor. Since updatedBlock is a PartialBlock object, some fields might not be\n   * defined. These undefined fields are kept as-is from the existing block. Throws an error if the block to update could\n   * not be found.\n   * @param blockToUpdate The block that should be updated.\n   * @param update A partial block which defines how the existing block should be changed.\n   */\n  updateBlock(e, t) {\n    io(e, t, this._tiptapEditor);\n  }\n  /**\n   * Removes existing blocks from the editor. Throws an error if any of the blocks could not be found.\n   * @param blocksToRemove An array of identifiers for existing blocks that should be removed.\n   */\n  removeBlocks(e) {\n    Ft(e, this._tiptapEditor);\n  }\n  /**\n   * Replaces existing blocks in the editor with new blocks. If the blocks that should be removed are not adjacent or\n   * are at different nesting levels, `blocksToInsert` will be inserted at the position of the first block in\n   * `blocksToRemove`. Throws an error if any of the blocks to remove could not be found.\n   * @param blocksToRemove An array of blocks that should be replaced.\n   * @param blocksToInsert An array of partial blocks to replace the old ones with.\n   */\n  replaceBlocks(e, t) {\n    so(e, t, this._tiptapEditor);\n  }\n  /**\n   * Gets the active text styles at the text cursor position or at the end of the current selection if it's active.\n   */\n  getActiveStyles() {\n    const e = {}, t = this._tiptapEditor.state.selection.$to.marks(), o = /* @__PURE__ */ new Set([\n      \"bold\",\n      \"italic\",\n      \"underline\",\n      \"strike\",\n      \"code\"\n    ]), r = /* @__PURE__ */ new Set([\"textColor\", \"backgroundColor\"]);\n    for (const i of t)\n      o.has(i.type.name) ? e[i.type.name] = !0 : r.has(i.type.name) && (e[i.type.name] = i.attrs.color);\n    return e;\n  }\n  /**\n   * Adds styles to the currently selected content.\n   * @param styles The styles to add.\n   */\n  addStyles(e) {\n    const t = /* @__PURE__ */ new Set([\n      \"bold\",\n      \"italic\",\n      \"underline\",\n      \"strike\",\n      \"code\"\n    ]), o = /* @__PURE__ */ new Set([\"textColor\", \"backgroundColor\"]);\n    this._tiptapEditor.view.focus();\n    for (const [r, i] of Object.entries(e))\n      t.has(r) ? this._tiptapEditor.commands.setMark(r) : o.has(r) && this._tiptapEditor.commands.setMark(r, { color: i });\n  }\n  /**\n   * Removes styles from the currently selected content.\n   * @param styles The styles to remove.\n   */\n  removeStyles(e) {\n    this._tiptapEditor.view.focus();\n    for (const t of Object.keys(e))\n      this._tiptapEditor.commands.unsetMark(t);\n  }\n  /**\n   * Toggles styles on the currently selected content.\n   * @param styles The styles to toggle.\n   */\n  toggleStyles(e) {\n    const t = /* @__PURE__ */ new Set([\n      \"bold\",\n      \"italic\",\n      \"underline\",\n      \"strike\",\n      \"code\"\n    ]), o = /* @__PURE__ */ new Set([\"textColor\", \"backgroundColor\"]);\n    this._tiptapEditor.view.focus();\n    for (const [r, i] of Object.entries(e))\n      t.has(r) ? this._tiptapEditor.commands.toggleMark(r) : o.has(r) && this._tiptapEditor.commands.toggleMark(r, { color: i });\n  }\n  /**\n   * Gets the currently selected text.\n   */\n  getSelectedText() {\n    return this._tiptapEditor.state.doc.textBetween(\n      this._tiptapEditor.state.selection.from,\n      this._tiptapEditor.state.selection.to\n    );\n  }\n  /**\n   * Gets the URL of the last link in the current selection, or `undefined` if there are no links in the selection.\n   */\n  getSelectedLinkUrl() {\n    return this._tiptapEditor.getAttributes(\"link\").href;\n  }\n  /**\n   * Creates a new link to replace the selected content.\n   * @param url The link URL.\n   * @param text The text to display the link with.\n   */\n  createLink(e, t) {\n    if (e === \"\")\n      return;\n    const { from: o, to: r } = this._tiptapEditor.state.selection;\n    t || (t = this._tiptapEditor.state.doc.textBetween(o, r));\n    const i = this._tiptapEditor.schema.mark(\"link\", { href: e });\n    this._tiptapEditor.view.dispatch(\n      this._tiptapEditor.view.state.tr.insertText(t, o, r).addMark(o, o + t.length, i)\n    );\n  }\n  /**\n   * Checks if the block containing the text cursor can be nested.\n   */\n  canNestBlock() {\n    const { startPos: e, depth: t } = b(\n      this._tiptapEditor.state.doc,\n      this._tiptapEditor.state.selection.from\n    );\n    return this._tiptapEditor.state.doc.resolve(e).index(t - 1) > 0;\n  }\n  /**\n   * Nests the block containing the text cursor into the block above it.\n   */\n  nestBlock() {\n    this._tiptapEditor.commands.sinkListItem(\"blockContainer\");\n  }\n  /**\n   * Checks if the block containing the text cursor is nested.\n   */\n  canUnnestBlock() {\n    const { depth: e } = b(\n      this._tiptapEditor.state.doc,\n      this._tiptapEditor.state.selection.from\n    );\n    return e > 2;\n  }\n  /**\n   * Lifts the block containing the text cursor out of its parent.\n   */\n  unnestBlock() {\n    this._tiptapEditor.commands.liftListItem(\"blockContainer\");\n  }\n  /**\n   * Serializes blocks into an HTML string. To better conform to HTML standards, children of blocks which aren't list\n   * items are un-nested in the output HTML.\n   * @param blocks An array of blocks that should be serialized into HTML.\n   * @returns The blocks, serialized as an HTML string.\n   */\n  async blocksToHTML(e) {\n    return Wt(e, this._tiptapEditor.schema);\n  }\n  /**\n   * Parses blocks from an HTML string. Tries to create `Block` objects out of any HTML block-level elements, and\n   * `InlineNode` objects from any HTML inline elements, though not all element types are recognized. If BlockNote\n   * doesn't recognize an HTML element's tag, it will parse it as a paragraph or plain text.\n   * @param html The HTML string to parse blocks from.\n   * @returns The blocks parsed from the HTML string.\n   */\n  async HTMLToBlocks(e) {\n    return $t(e, this.schema, this._tiptapEditor.schema);\n  }\n  /**\n   * Serializes blocks into a Markdown string. The output is simplified as Markdown does not support all features of\n   * BlockNote - children of blocks which aren't list items are un-nested and certain styles are removed.\n   * @param blocks An array of blocks that should be serialized into Markdown.\n   * @returns The blocks, serialized as a Markdown string.\n   */\n  async blocksToMarkdown(e) {\n    return co(e, this._tiptapEditor.schema);\n  }\n  /**\n   * Creates a list of blocks from a Markdown string. Tries to create `Block` and `InlineNode` objects based on\n   * Markdown syntax, though not all symbols are recognized. If BlockNote doesn't recognize a symbol, it will parse it\n   * as text.\n   * @param markdown The Markdown string to parse blocks from.\n   * @returns The blocks parsed from the Markdown string.\n   */\n  async markdownToBlocks(e) {\n    return po(e, this.schema, this._tiptapEditor.schema);\n  }\n  /**\n   * Updates the user info for the current user that's shown to other collaborators.\n   */\n  updateCollaborationUserInfo(e) {\n    if (!this.options.collaboration)\n      throw new Error(\n        \"Cannot update collaboration user info when collaboration is disabled.\"\n      );\n    this._tiptapEditor.commands.updateUser(e);\n  }\n}\nconst In = async (n) => {\n  const e = new FormData();\n  return e.append(\"file\", n), (await (await fetch(\"https://tmpfiles.org/api/v1/upload\", {\n    method: \"POST\",\n    body: e\n  })).json()).data.url.replace(\n    \"tmpfiles.org/\",\n    \"tmpfiles.org/dl/\"\n  );\n};\n\n//# sourceMappingURL=blocknote.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9jb3JlL2Rpc3QvYmxvY2tub3RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0EsMENBQTBDLDBEQUEwRDtBQUNwRztBQUMyVjtBQUN2UztBQUNBO0FBQ0g7QUFDTztBQUNRO0FBQ0Y7QUFDQztBQUNMO0FBQ0Y7QUFDSjtBQUNJO0FBQ0o7QUFDVTtBQUNxQztBQUN1QjtBQUMxRjtBQUNPO0FBQ2dDO0FBQ3pDO0FBQ0M7QUFDRztBQUNOO0FBQ0U7QUFDNEI7QUFDeEI7QUFDSztBQUNZO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBNkQ7QUFDakY7QUFDQTtBQUNBLG9CQUFvQiw2REFBNkQ7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMkRBQTJEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsT0FBTyxvREFBQztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0Q0FBNEMsbUJBQW1CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsUUFBUSwrQ0FB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QztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlEQUFDO0FBQ2hCO0FB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QTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBLDRFQUE0RSw4QkFBOEI7QUFDMUcsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlEQUFDO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxzREFBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQSxLQUFLLE9BQU8sb0RBQUM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVDQUF1QztBQUN2RDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxpREFBRTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNENBQTRDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELG1CQUFtQix5Q0FBeUMsOEJBQThCO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0dBQStHLFVBQVU7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUhBQXFILFVBQVU7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQSx1REFBdUQsU0FBUztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3QkFBd0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFrQ0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3plbmJvYXJkLy4vbm9kZV9tb2R1bGVzL0BibG9ja25vdGUvY29yZS9kaXN0L2Jsb2Nrbm90ZS5qcz9iOTQxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBZdCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBKdCA9IChuLCBlLCB0KSA9PiBlIGluIG4gPyBZdChuLCBlLCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiB0IH0pIDogbltlXSA9IHQ7XG52YXIgdSA9IChuLCBlLCB0KSA9PiAoSnQobiwgdHlwZW9mIGUgIT0gXCJzeW1ib2xcIiA/IGUgKyBcIlwiIDogZSwgdCksIHQpO1xuaW1wb3J0IHsgRXh0ZW5zaW9uIGFzIEEsIE1hcmsgYXMgaHQsIGNvbWJpbmVUcmFuc2FjdGlvblN0ZXBzIGFzIFp0LCBnZXRDaGFuZ2VkUmFuZ2VzIGFzIFF0LCBmaW5kQ2hpbGRyZW5JblJhbmdlIGFzIHRlLCBmaW5kQ2hpbGRyZW4gYXMgbnQsIE5vZGUgYXMgRywgbWVyZ2VBdHRyaWJ1dGVzIGFzIE4sIGZpbmRQYXJlbnROb2RlIGFzIGVlLCBleHRlbnNpb25zIGFzIFIsIElucHV0UnVsZSBhcyBaLCBpc1RleHRTZWxlY3Rpb24gYXMgb2UsIGlzTm9kZVNlbGVjdGlvbiBhcyBuZSwgcG9zVG9ET01SZWN0IGFzIEssIGdldE1hcmtSYW5nZSBhcyBydCwgRWRpdG9yIGFzIHJlIH0gZnJvbSBcIkB0aXB0YXAvY29yZVwiO1xuaW1wb3J0IHsgQm9sZCBhcyBpZSB9IGZyb20gXCJAdGlwdGFwL2V4dGVuc2lvbi1ib2xkXCI7XG5pbXBvcnQgeyBDb2RlIGFzIHNlIH0gZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWNvZGVcIjtcbmltcG9ydCBhZSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tY29sbGFib3JhdGlvblwiO1xuaW1wb3J0IGxlIGZyb20gXCJAdGlwdGFwL2V4dGVuc2lvbi1jb2xsYWJvcmF0aW9uLWN1cnNvclwiO1xuaW1wb3J0IHsgRHJvcGN1cnNvciBhcyBkZSB9IGZyb20gXCJAdGlwdGFwL2V4dGVuc2lvbi1kcm9wY3Vyc29yXCI7XG5pbXBvcnQgeyBHYXBjdXJzb3IgYXMgY2UgfSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tZ2FwY3Vyc29yXCI7XG5pbXBvcnQgeyBIYXJkQnJlYWsgYXMgdWUgfSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24taGFyZC1icmVha1wiO1xuaW1wb3J0IHsgSGlzdG9yeSBhcyBwZSB9IGZyb20gXCJAdGlwdGFwL2V4dGVuc2lvbi1oaXN0b3J5XCI7XG5pbXBvcnQgeyBJdGFsaWMgYXMgaGUgfSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24taXRhbGljXCI7XG5pbXBvcnQgeyBMaW5rIGFzIG1lIH0gZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWxpbmtcIjtcbmltcG9ydCB7IFN0cmlrZSBhcyBmZSB9IGZyb20gXCJAdGlwdGFwL2V4dGVuc2lvbi1zdHJpa2VcIjtcbmltcG9ydCB7IFRleHQgYXMgZ2UgfSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tdGV4dFwiO1xuaW1wb3J0IHsgVW5kZXJsaW5lIGFzIGtlIH0gZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLXVuZGVybGluZVwiO1xuaW1wb3J0IHsgU2xpY2UgYXMgTCwgRnJhZ21lbnQgYXMgUCwgRE9NU2VyaWFsaXplciBhcyBZLCBET01QYXJzZXIgYXMgYmUgfSBmcm9tIFwicHJvc2VtaXJyb3ItbW9kZWxcIjtcbmltcG9ydCB7IFBsdWdpbiBhcyBULCBQbHVnaW5LZXkgYXMgQiwgTm9kZVNlbGVjdGlvbiBhcyBtdCwgVGV4dFNlbGVjdGlvbiBhcyBpdCwgU2VsZWN0aW9uIGFzIFggfSBmcm9tIFwicHJvc2VtaXJyb3Itc3RhdGVcIjtcbmltcG9ydCB7IHY0IGFzIHllIH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCAqIGFzIHZlIGZyb20gXCJwcm9zZW1pcnJvci12aWV3XCI7XG5pbXBvcnQgeyBEZWNvcmF0aW9uIGFzIFcsIERlY29yYXRpb25TZXQgYXMgJCB9IGZyb20gXCJwcm9zZW1pcnJvci12aWV3XCI7XG5pbXBvcnQgZnQgZnJvbSBcInJlaHlwZS1wYXJzZVwiO1xuaW1wb3J0IHdlIGZyb20gXCJyZWh5cGUtcmVtYXJrXCI7XG5pbXBvcnQgZ3QgZnJvbSBcInJlaHlwZS1zdHJpbmdpZnlcIjtcbmltcG9ydCBrdCBmcm9tIFwicmVtYXJrLWdmbVwiO1xuaW1wb3J0IENlIGZyb20gXCJyZW1hcmstcGFyc2VcIjtcbmltcG9ydCBFZSwgeyBkZWZhdWx0SGFuZGxlcnMgYXMgU2UgfSBmcm9tIFwicmVtYXJrLXJlaHlwZVwiO1xuaW1wb3J0IFRlIGZyb20gXCJyZW1hcmstc3RyaW5naWZ5XCI7XG5pbXBvcnQgeyB1bmlmaWVkIGFzIFEgfSBmcm9tIFwidW5pZmllZFwiO1xuaW1wb3J0IHsgZnJvbURvbSBhcyBzdCB9IGZyb20gXCJoYXN0LXV0aWwtZnJvbS1kb21cIjtcbmNvbnN0IE1lID0gXCJfYm5FZGl0b3JfMTJqZTBfM1wiLCBCZSA9IFwiX2JuUm9vdF8xMmplMF8xOVwiLCB4ZSA9IFwiX2RlZmF1bHRTdHlsZXNfMTJqZTBfMzRcIiwgSWUgPSBcIl9kcmFnUHJldmlld18xMmplMF81N1wiLCBEID0ge1xuICBibkVkaXRvcjogTWUsXG4gIGJuUm9vdDogQmUsXG4gIGRlZmF1bHRTdHlsZXM6IHhlLFxuICBkcmFnUHJldmlldzogSWUsXG4gIFwiY29sbGFib3JhdGlvbi1jdXJzb3JfX2NhcmV0XCI6IFwiX2NvbGxhYm9yYXRpb24tY3Vyc29yX19jYXJldF8xMmplMF82M1wiLFxuICBcImNvbGxhYm9yYXRpb24tY3Vyc29yX19sYWJlbFwiOiBcIl9jb2xsYWJvcmF0aW9uLWN1cnNvcl9fbGFiZWxfMTJqZTBfNzRcIlxufTtcbmZ1bmN0aW9uIGJ0KG4pIHtcbiAgY29uc3QgZSA9IG4uYXR0cnMuaWQsIHQgPSBuLmZpcnN0Q2hpbGQsIG8gPSB0LnR5cGUsIHIgPSBuLmNoaWxkQ291bnQgPT09IDIgPyBuLmxhc3RDaGlsZC5jaGlsZENvdW50IDogMDtcbiAgcmV0dXJuIHtcbiAgICBpZDogZSxcbiAgICBub2RlOiBuLFxuICAgIGNvbnRlbnROb2RlOiB0LFxuICAgIGNvbnRlbnRUeXBlOiBvLFxuICAgIG51bUNoaWxkQmxvY2tzOiByXG4gIH07XG59XG5mdW5jdGlvbiBiKG4sIGUpIHtcbiAgY29uc3QgbyA9IG4ubm9kZVNpemUgLSAyO1xuICBpZiAoZSA8PSAxKVxuICAgIGZvciAoZSA9IDEgKyAxOyBuLnJlc29sdmUoZSkucGFyZW50LnR5cGUubmFtZSAhPT0gXCJibG9ja0NvbnRhaW5lclwiICYmIGUgPCBvOyApXG4gICAgICBlKys7XG4gIGVsc2UgaWYgKGUgPj0gbylcbiAgICBmb3IgKGUgPSBvIC0gMTsgbi5yZXNvbHZlKGUpLnBhcmVudC50eXBlLm5hbWUgIT09IFwiYmxvY2tDb250YWluZXJcIiAmJiBlID4gMTsgKVxuICAgICAgZS0tO1xuICBuLnJlc29sdmUoZSkucGFyZW50LnR5cGUubmFtZSA9PT0gXCJibG9ja0dyb3VwXCIgJiYgZSsrO1xuICBjb25zdCByID0gbi5yZXNvbHZlKGUpLCBpID0gci5kZXB0aDtcbiAgbGV0IHMgPSByLm5vZGUoaSksIGwgPSBpO1xuICBmb3IgKDsgOyApIHtcbiAgICBpZiAobCA8IDApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiQ291bGQgbm90IGZpbmQgYmxvY2tDb250YWluZXIgbm9kZS4gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIHVuZGVybHlpbmcgQmxvY2tOb3RlIHNjaGVtYSBoYXMgYmVlbiBlZGl0ZWQuXCJcbiAgICAgICk7XG4gICAgaWYgKHMudHlwZS5uYW1lID09PSBcImJsb2NrQ29udGFpbmVyXCIpXG4gICAgICBicmVhaztcbiAgICBsIC09IDEsIHMgPSByLm5vZGUobCk7XG4gIH1cbiAgY29uc3QgeyBpZDogYSwgY29udGVudE5vZGU6IGQsIGNvbnRlbnRUeXBlOiBjLCBudW1DaGlsZEJsb2NrczogbSB9ID0gYnQocyksIGggPSByLnN0YXJ0KGwpLCBwID0gci5lbmQobCk7XG4gIHJldHVybiB7XG4gICAgaWQ6IGEsXG4gICAgbm9kZTogcyxcbiAgICBjb250ZW50Tm9kZTogZCxcbiAgICBjb250ZW50VHlwZTogYyxcbiAgICBudW1DaGlsZEJsb2NrczogbSxcbiAgICBzdGFydFBvczogaCxcbiAgICBlbmRQb3M6IHAsXG4gICAgZGVwdGg6IGxcbiAgfTtcbn1cbmNvbnN0IEMgPSB7XG4gIGJhY2tncm91bmRDb2xvcjoge1xuICAgIGRlZmF1bHQ6IFwiZGVmYXVsdFwiXG4gIH0sXG4gIHRleHRDb2xvcjoge1xuICAgIGRlZmF1bHQ6IFwiZGVmYXVsdFwiXG4gIH0sXG4gIHRleHRBbGlnbm1lbnQ6IHtcbiAgICBkZWZhdWx0OiBcImxlZnRcIixcbiAgICB2YWx1ZXM6IFtcImxlZnRcIiwgXCJjZW50ZXJcIiwgXCJyaWdodFwiLCBcImp1c3RpZnlcIl1cbiAgfVxufSwgQWUgPSBBLmNyZWF0ZSh7XG4gIG5hbWU6IFwiYmxvY2tCYWNrZ3JvdW5kQ29sb3JcIixcbiAgYWRkR2xvYmFsQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0eXBlczogW1wiYmxvY2tDb250YWluZXJcIl0sXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IEMuYmFja2dyb3VuZENvbG9yLmRlZmF1bHQsXG4gICAgICAgICAgICBwYXJzZUhUTUw6IChuKSA9PiBuLmhhc0F0dHJpYnV0ZShcImRhdGEtYmFja2dyb3VuZC1jb2xvclwiKSA/IG4uZ2V0QXR0cmlidXRlKFwiZGF0YS1iYWNrZ3JvdW5kLWNvbG9yXCIpIDogQy5iYWNrZ3JvdW5kQ29sb3IuZGVmYXVsdCxcbiAgICAgICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiBuLmJhY2tncm91bmRDb2xvciAhPT0gQy5iYWNrZ3JvdW5kQ29sb3IuZGVmYXVsdCAmJiB7XG4gICAgICAgICAgICAgIFwiZGF0YS1iYWNrZ3JvdW5kLWNvbG9yXCI6IG4uYmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgXTtcbiAgfSxcbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldEJsb2NrQmFja2dyb3VuZENvbG9yOiAobiwgZSkgPT4gKHsgc3RhdGU6IHQsIHZpZXc6IG8gfSkgPT4ge1xuICAgICAgICBjb25zdCByID0gYih0LmRvYywgbik7XG4gICAgICAgIHJldHVybiByID09PSB2b2lkIDAgPyAhMSA6ICh0LnRyLnNldE5vZGVBdHRyaWJ1dGUoXG4gICAgICAgICAgci5zdGFydFBvcyAtIDEsXG4gICAgICAgICAgXCJiYWNrZ3JvdW5kQ29sb3JcIixcbiAgICAgICAgICBlXG4gICAgICAgICksIG8uZm9jdXMoKSwgITApO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn0pLCBfZSA9IGh0LmNyZWF0ZSh7XG4gIG5hbWU6IFwiYmFja2dyb3VuZENvbG9yXCIsXG4gIGFkZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiB7XG4gICAgICAgIGRlZmF1bHQ6IHZvaWQgMCxcbiAgICAgICAgcGFyc2VIVE1MOiAobikgPT4gbi5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhY2tncm91bmQtY29sb3JcIiksXG4gICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiAoe1xuICAgICAgICAgIFwiZGF0YS1iYWNrZ3JvdW5kLWNvbG9yXCI6IG4uY29sb3JcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiBcInNwYW5cIixcbiAgICAgICAgZ2V0QXR0cnM6IChuKSA9PiB0eXBlb2YgbiA9PSBcInN0cmluZ1wiID8gITEgOiBuLmhhc0F0dHJpYnV0ZShcImRhdGEtYmFja2dyb3VuZC1jb2xvclwiKSA/IHsgY29sb3I6IG4uZ2V0QXR0cmlidXRlKFwiZGF0YS1iYWNrZ3JvdW5kLWNvbG9yXCIpIH0gOiAhMVxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlczogbiB9KSB7XG4gICAgcmV0dXJuIFtcInNwYW5cIiwgbiwgMF07XG4gIH0sXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRCYWNrZ3JvdW5kQ29sb3I6IChuKSA9PiAoeyBjb21tYW5kczogZSB9KSA9PiBuICE9PSBDLmJhY2tncm91bmRDb2xvci5kZWZhdWx0ID8gZS5zZXRNYXJrKHRoaXMubmFtZSwgeyBjb2xvcjogbiB9KSA6IGUudW5zZXRNYXJrKHRoaXMubmFtZSlcbiAgICB9O1xuICB9XG59KTtcbmZ1bmN0aW9uIEhlKG4sIGUgPSBKU09OLnN0cmluZ2lmeSkge1xuICBjb25zdCB0ID0ge307XG4gIHJldHVybiBuLmZpbHRlcigobykgPT4ge1xuICAgIGNvbnN0IHIgPSBlKG8pO1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgcikgPyAhMSA6IHRbcl0gPSAhMDtcbiAgfSk7XG59XG5mdW5jdGlvbiBMZShuKSB7XG4gIGNvbnN0IGUgPSBuLmZpbHRlcihcbiAgICAobywgcikgPT4gbi5pbmRleE9mKG8pICE9PSByXG4gICk7XG4gIHJldHVybiBIZShlKTtcbn1cbmNvbnN0IGogPSBBLmNyZWF0ZSh7XG4gIG5hbWU6IFwidW5pcXVlSURcIixcbiAgLy8gd2XigJlsbCBzZXQgYSB2ZXJ5IGhpZ2ggcHJpb3JpdHkgdG8gbWFrZSBzdXJlIHRoaXMgcnVucyBmaXJzdFxuICAvLyBhbmQgaXMgY29tcGF0aWJsZSB3aXRoIGBhcHBlbmRUcmFuc2FjdGlvbmAgaG9va3Mgb2Ygb3RoZXIgZXh0ZW5zaW9uc1xuICBwcmlvcml0eTogMWU0LFxuICBhZGRPcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRyaWJ1dGVOYW1lOiBcImlkXCIsXG4gICAgICB0eXBlczogW10sXG4gICAgICBnZW5lcmF0ZUlEOiAoKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93IDwgXCJ1XCIgJiYgd2luZG93Ll9fVEVTVF9PUFRJT05TKSB7XG4gICAgICAgICAgY29uc3QgbiA9IHdpbmRvdy5fX1RFU1RfT1BUSU9OUztcbiAgICAgICAgICByZXR1cm4gbi5tb2NrSUQgPT09IHZvaWQgMCA/IG4ubW9ja0lEID0gMCA6IG4ubW9ja0lEKyssIG4ubW9ja0lELnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHllKCk7XG4gICAgICB9LFxuICAgICAgZmlsdGVyVHJhbnNhY3Rpb246IG51bGxcbiAgICB9O1xuICB9LFxuICBhZGRHbG9iYWxBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHR5cGVzOiB0aGlzLm9wdGlvbnMudHlwZXMsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBbdGhpcy5vcHRpb25zLmF0dHJpYnV0ZU5hbWVdOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgcGFyc2VIVE1MOiAobikgPT4gbi5nZXRBdHRyaWJ1dGUoYGRhdGEtJHt0aGlzLm9wdGlvbnMuYXR0cmlidXRlTmFtZX1gKSxcbiAgICAgICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiAoe1xuICAgICAgICAgICAgICBbYGRhdGEtJHt0aGlzLm9wdGlvbnMuYXR0cmlidXRlTmFtZX1gXTogblt0aGlzLm9wdGlvbnMuYXR0cmlidXRlTmFtZV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgXTtcbiAgfSxcbiAgLy8gY2hlY2sgaW5pdGlhbCBjb250ZW50IGZvciBtaXNzaW5nIGlkc1xuICAvLyBvbkNyZWF0ZSgpIHtcbiAgLy8gICAvLyBEb27igJl0IGRvIHRoaXMgd2hlbiB0aGUgY29sbGFib3JhdGlvbiBleHRlbnNpb24gaXMgYWN0aXZlXG4gIC8vICAgLy8gYmVjYXVzZSB0aGlzIG1heSB1cGRhdGUgdGhlIGNvbnRlbnQsIHNvIFkuanMgdHJpZXMgdG8gbWVyZ2UgdGhlc2UgY2hhbmdlcy5cbiAgLy8gICAvLyBUaGlzIGxlYWRzIHRvIGVtcHR5IGJsb2NrIG5vZGVzLlxuICAvLyAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3VlYmVyZG9zaXMvdGlwdGFwL2lzc3Vlcy8yNDAwXG4gIC8vICAgaWYgKFxuICAvLyAgICAgdGhpcy5lZGl0b3IuZXh0ZW5zaW9uTWFuYWdlci5leHRlbnNpb25zLmZpbmQoXG4gIC8vICAgICAgIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5uYW1lID09PSBcImNvbGxhYm9yYXRpb25cIlxuICAvLyAgICAgKVxuICAvLyAgICkge1xuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgLy8gICBjb25zdCB7IHZpZXcsIHN0YXRlIH0gPSB0aGlzLmVkaXRvcjtcbiAgLy8gICBjb25zdCB7IHRyLCBkb2MgfSA9IHN0YXRlO1xuICAvLyAgIGNvbnN0IHsgdHlwZXMsIGF0dHJpYnV0ZU5hbWUsIGdlbmVyYXRlSUQgfSA9IHRoaXMub3B0aW9ucztcbiAgLy8gICBjb25zdCBub2Rlc1dpdGhvdXRJZCA9IGZpbmRDaGlsZHJlbihkb2MsIChub2RlKSA9PiB7XG4gIC8vICAgICByZXR1cm4gKFxuICAvLyAgICAgICB0eXBlcy5pbmNsdWRlcyhub2RlLnR5cGUubmFtZSkgJiYgbm9kZS5hdHRyc1thdHRyaWJ1dGVOYW1lXSA9PT0gbnVsbFxuICAvLyAgICAgKTtcbiAgLy8gICB9KTtcbiAgLy8gICBub2Rlc1dpdGhvdXRJZC5mb3JFYWNoKCh7IG5vZGUsIHBvcyB9KSA9PiB7XG4gIC8vICAgICB0ci5zZXROb2RlTWFya3VwKHBvcywgdW5kZWZpbmVkLCB7XG4gIC8vICAgICAgIC4uLm5vZGUuYXR0cnMsXG4gIC8vICAgICAgIFthdHRyaWJ1dGVOYW1lXTogZ2VuZXJhdGVJRCgpLFxuICAvLyAgICAgfSk7XG4gIC8vICAgfSk7XG4gIC8vICAgdHIuc2V0TWV0YShcImFkZFRvSGlzdG9yeVwiLCBmYWxzZSk7XG4gIC8vICAgdmlldy5kaXNwYXRjaCh0cik7XG4gIC8vIH0sXG4gIGFkZFByb3NlTWlycm9yUGx1Z2lucygpIHtcbiAgICBsZXQgbiA9IG51bGwsIGUgPSAhMTtcbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFQoe1xuICAgICAgICBrZXk6IG5ldyBCKFwidW5pcXVlSURcIiksXG4gICAgICAgIGFwcGVuZFRyYW5zYWN0aW9uOiAodCwgbywgcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGkgPSB0LnNvbWUoKGYpID0+IGYuZG9jQ2hhbmdlZCkgJiYgIW8uZG9jLmVxKHIuZG9jKSwgcyA9IHRoaXMub3B0aW9ucy5maWx0ZXJUcmFuc2FjdGlvbiAmJiB0LnNvbWUoKGYpID0+IHtcbiAgICAgICAgICAgIGxldCBrLCB2O1xuICAgICAgICAgICAgcmV0dXJuICEoISgodiA9IChrID0gdGhpcy5vcHRpb25zKS5maWx0ZXJUcmFuc2FjdGlvbikgPT09IG51bGwgfHwgdiA9PT0gdm9pZCAwKSAmJiB2LmNhbGwoaywgZikpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghaSB8fCBzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHsgdHI6IGwgfSA9IHIsIHsgdHlwZXM6IGEsIGF0dHJpYnV0ZU5hbWU6IGQsIGdlbmVyYXRlSUQ6IGMgfSA9IHRoaXMub3B0aW9ucywgbSA9IFp0KFxuICAgICAgICAgICAgby5kb2MsXG4gICAgICAgICAgICB0XG4gICAgICAgICAgKSwgeyBtYXBwaW5nOiBoIH0gPSBtO1xuICAgICAgICAgIGlmIChRdChtKS5mb3JFYWNoKCh7IG5ld1JhbmdlOiBmIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGsgPSB0ZShcbiAgICAgICAgICAgICAgci5kb2MsXG4gICAgICAgICAgICAgIGYsXG4gICAgICAgICAgICAgIChFKSA9PiBhLmluY2x1ZGVzKEUudHlwZS5uYW1lKVxuICAgICAgICAgICAgKSwgdiA9IGsubWFwKCh7IG5vZGU6IEUgfSkgPT4gRS5hdHRyc1tkXSkuZmlsdGVyKChFKSA9PiBFICE9PSBudWxsKSwgdyA9IExlKHYpO1xuICAgICAgICAgICAgay5mb3JFYWNoKCh7IG5vZGU6IEUsIHBvczogXyB9KSA9PiB7XG4gICAgICAgICAgICAgIGxldCB5O1xuICAgICAgICAgICAgICBjb25zdCBNID0gKHkgPSBsLmRvYy5ub2RlQXQoXykpID09PSBudWxsIHx8IHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHkuYXR0cnNbZF07XG4gICAgICAgICAgICAgIGlmIChNID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbC5zZXROb2RlTWFya3VwKF8sIHZvaWQgMCwge1xuICAgICAgICAgICAgICAgICAgLi4uRS5hdHRycyxcbiAgICAgICAgICAgICAgICAgIFtkXTogYygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHsgZGVsZXRlZDogb3QgfSA9IGguaW52ZXJ0KCkubWFwUmVzdWx0KF8pO1xuICAgICAgICAgICAgICBvdCAmJiB3LmluY2x1ZGVzKE0pICYmIGwuc2V0Tm9kZU1hcmt1cChfLCB2b2lkIDAsIHtcbiAgICAgICAgICAgICAgICAuLi5FLmF0dHJzLFxuICAgICAgICAgICAgICAgIFtkXTogYygpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSksICEhbC5zdGVwcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbDtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gd2UgcmVnaXN0ZXIgYSBnbG9iYWwgZHJhZyBoYW5kbGVyIHRvIHRyYWNrIHRoZSBjdXJyZW50IGRyYWcgc291cmNlIGVsZW1lbnRcbiAgICAgICAgdmlldyh0KSB7XG4gICAgICAgICAgY29uc3QgbyA9IChyKSA9PiB7XG4gICAgICAgICAgICBsZXQgaTtcbiAgICAgICAgICAgIG4gPSAhKChpID0gdC5kb20ucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgaSA9PT0gdm9pZCAwKSAmJiBpLmNvbnRhaW5zKHIudGFyZ2V0KSA/IHQuZG9tLnBhcmVudEVsZW1lbnQgOiBudWxsO1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIG8pLCB7XG4gICAgICAgICAgICBkZXN0cm95KCkge1xuICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCBvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIC8vIGBoYW5kbGVET01FdmVudHNgIGlzIGNhbGxlZCBiZWZvcmUgYHRyYW5zZm9ybVBhc3RlZGBcbiAgICAgICAgICAvLyBzbyB3ZSBjYW4gZG8gc29tZSBjaGVja3MgYmVmb3JlXG4gICAgICAgICAgaGFuZGxlRE9NRXZlbnRzOiB7XG4gICAgICAgICAgICAvLyBvbmx5IGNyZWF0ZSBuZXcgaWRzIGZvciBkcm9wcGVkIGNvbnRlbnQgd2hpbGUgaG9sZGluZyBgYWx0YFxuICAgICAgICAgICAgLy8gb3IgY29udGVudCBpcyBkcmFnZ2VkIGZyb20gYW5vdGhlciBlZGl0b3JcbiAgICAgICAgICAgIGRyb3A6ICh0LCBvKSA9PiB7XG4gICAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgICByZXR1cm4gKG4gIT09IHQuZG9tLnBhcmVudEVsZW1lbnQgfHwgKChyID0gby5kYXRhVHJhbnNmZXIpID09PSBudWxsIHx8IHIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHIuZWZmZWN0QWxsb3dlZCkgPT09IFwiY29weVwiKSAmJiAobiA9IG51bGwsIGUgPSAhMCksICExO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGFsd2F5cyBjcmVhdGUgbmV3IGlkcyBvbiBwYXN0ZWQgY29udGVudFxuICAgICAgICAgICAgcGFzdGU6ICgpID0+IChlID0gITAsICExKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gd2XigJlsbCByZW1vdmUgaWRzIGZvciBldmVyeSBwYXN0ZWQgbm9kZVxuICAgICAgICAgIC8vIHNvIHdlIGNhbiBjcmVhdGUgYSBuZXcgb25lIHdpdGhpbiBgYXBwZW5kVHJhbnNhY3Rpb25gXG4gICAgICAgICAgdHJhbnNmb3JtUGFzdGVkOiAodCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKVxuICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZXM6IG8sIGF0dHJpYnV0ZU5hbWU6IHIgfSA9IHRoaXMub3B0aW9ucywgaSA9IChzKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGwgPSBbXTtcbiAgICAgICAgICAgICAgcmV0dXJuIHMuZm9yRWFjaCgoYSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhLmlzVGV4dCkge1xuICAgICAgICAgICAgICAgICAgbC5wdXNoKGEpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIW8uaW5jbHVkZXMoYS50eXBlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICBsLnB1c2goYS5jb3B5KGkoYS5jb250ZW50KSkpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkID0gYS50eXBlLmNyZWF0ZShcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYS5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgW3JdOiBudWxsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgaShhLmNvbnRlbnQpLFxuICAgICAgICAgICAgICAgICAgYS5tYXJrc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbC5wdXNoKGQpO1xuICAgICAgICAgICAgICB9KSwgUC5mcm9tKGwpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlID0gITEsIG5ldyBMKFxuICAgICAgICAgICAgICBpKHQuY29udGVudCksXG4gICAgICAgICAgICAgIHQub3BlblN0YXJ0LFxuICAgICAgICAgICAgICB0Lm9wZW5FbmRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIF07XG4gIH1cbn0pLCBOZSA9ICgpID0+IC9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSB8fCAvQXBwbGVXZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgL01vYmlsZVxcL1xcdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5mdW5jdGlvbiBNbihuKSB7XG4gIHJldHVybiBOZSgpID8gbi5yZXBsYWNlKFwiTW9kXCIsIFwi4oyYXCIpIDogbi5yZXBsYWNlKFwiTW9kXCIsIFwiQ3RybFwiKTtcbn1cbmZ1bmN0aW9uIFMoLi4ubikge1xuICByZXR1cm4gbi5maWx0ZXIoKGUpID0+IGUpLmpvaW4oXCIgXCIpO1xufVxuY2xhc3MgUGUgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGUpIHtcbiAgICBzdXBlcihgVW5yZWFjaGFibGUgY2FzZTogJHtlfWApO1xuICB9XG59XG5jb25zdCB5dCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJib2xkXCIsXG4gIFwiaXRhbGljXCIsXG4gIFwidW5kZXJsaW5lXCIsXG4gIFwic3RyaWtlXCIsXG4gIFwiY29kZVwiXG5dKSwgdnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJ0ZXh0Q29sb3JcIiwgXCJiYWNrZ3JvdW5kQ29sb3JcIl0pO1xuZnVuY3Rpb24gYXQobiwgZSkge1xuICBjb25zdCB0ID0gW107XG4gIGZvciAoY29uc3QgW28sIHJdIG9mIE9iamVjdC5lbnRyaWVzKG4uc3R5bGVzKSlcbiAgICB5dC5oYXMobykgPyB0LnB1c2goZS5tYXJrKG8pKSA6IHZ0LmhhcyhvKSAmJiB0LnB1c2goZS5tYXJrKG8sIHsgY29sb3I6IHIgfSkpO1xuICByZXR1cm4gbi50ZXh0LnNwbGl0KC8oXFxuKS9nKS5maWx0ZXIoKG8pID0+IG8ubGVuZ3RoID4gMCkubWFwKChvKSA9PiBvID09PSBgXG5gID8gZS5ub2Rlcy5oYXJkQnJlYWsuY3JlYXRlKCkgOiBlLnRleHQobywgdCkpO1xufVxuZnVuY3Rpb24gRGUobiwgZSkge1xuICBjb25zdCB0ID0gZS5tYXJrcy5saW5rLmNyZWF0ZSh7XG4gICAgaHJlZjogbi5ocmVmXG4gIH0pO1xuICByZXR1cm4gd3Qobi5jb250ZW50LCBlKS5tYXAoKG8pID0+IHtcbiAgICBpZiAoby50eXBlLm5hbWUgPT09IFwidGV4dFwiKVxuICAgICAgcmV0dXJuIG8ubWFyayhbLi4uby5tYXJrcywgdF0pO1xuICAgIGlmIChvLnR5cGUubmFtZSA9PT0gXCJoYXJkQnJlYWtcIilcbiAgICAgIHJldHVybiBvO1xuICAgIHRocm93IG5ldyBFcnJvcihcInVuZXhwZWN0ZWQgbm9kZSB0eXBlXCIpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHd0KG4sIGUpIHtcbiAgY29uc3QgdCA9IFtdO1xuICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gdC5wdXNoKFxuICAgICAgLi4uYXQoeyB0eXBlOiBcInRleHRcIiwgdGV4dDogbiwgc3R5bGVzOiB7fSB9LCBlKVxuICAgICksIHQ7XG4gIGZvciAoY29uc3QgbyBvZiBuKVxuICAgIHQucHVzaCguLi5hdChvLCBlKSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gQ3QobiwgZSkge1xuICBjb25zdCB0ID0gW107XG4gIGZvciAoY29uc3QgbyBvZiBuKVxuICAgIGlmIChvLnR5cGUgPT09IFwibGlua1wiKVxuICAgICAgdC5wdXNoKC4uLkRlKG8sIGUpKTtcbiAgICBlbHNlIGlmIChvLnR5cGUgPT09IFwidGV4dFwiKVxuICAgICAgdC5wdXNoKC4uLnd0KFtvXSwgZSkpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBQZShvKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBWKG4sIGUpIHtcbiAgbGV0IHQgPSBuLmlkO1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSBqLm9wdGlvbnMuZ2VuZXJhdGVJRCgpKTtcbiAgbGV0IG8gPSBuLnR5cGU7XG4gIG8gPT09IHZvaWQgMCAmJiAobyA9IFwicGFyYWdyYXBoXCIpO1xuICBsZXQgcjtcbiAgaWYgKCFuLmNvbnRlbnQpXG4gICAgciA9IGUubm9kZXNbb10uY3JlYXRlKG4ucHJvcHMpO1xuICBlbHNlIGlmICh0eXBlb2Ygbi5jb250ZW50ID09IFwic3RyaW5nXCIpXG4gICAgciA9IGUubm9kZXNbb10uY3JlYXRlKFxuICAgICAgbi5wcm9wcyxcbiAgICAgIGUudGV4dChuLmNvbnRlbnQpXG4gICAgKTtcbiAgZWxzZSB7XG4gICAgY29uc3QgbCA9IEN0KG4uY29udGVudCwgZSk7XG4gICAgciA9IGUubm9kZXNbb10uY3JlYXRlKG4ucHJvcHMsIGwpO1xuICB9XG4gIGNvbnN0IGkgPSBbXTtcbiAgaWYgKG4uY2hpbGRyZW4pXG4gICAgZm9yIChjb25zdCBsIG9mIG4uY2hpbGRyZW4pXG4gICAgICBpLnB1c2goVihsLCBlKSk7XG4gIGNvbnN0IHMgPSBlLm5vZGVzLmJsb2NrR3JvdXAuY3JlYXRlKHt9LCBpKTtcbiAgcmV0dXJuIGUubm9kZXMuYmxvY2tDb250YWluZXIuY3JlYXRlKFxuICAgIHtcbiAgICAgIGlkOiB0LFxuICAgICAgLi4ubi5wcm9wc1xuICAgIH0sXG4gICAgaS5sZW5ndGggPiAwID8gW3IsIHNdIDogclxuICApO1xufVxuZnVuY3Rpb24gT2Uobikge1xuICBjb25zdCBlID0gW107XG4gIGxldCB0O1xuICByZXR1cm4gbi5jb250ZW50LmZvckVhY2goKG8pID0+IHtcbiAgICBpZiAoby50eXBlLm5hbWUgPT09IFwiaGFyZEJyZWFrXCIpIHtcbiAgICAgIHQgPyB0LnR5cGUgPT09IFwidGV4dFwiID8gdC50ZXh0ICs9IGBcbmAgOiB0LnR5cGUgPT09IFwibGlua1wiICYmICh0LmNvbnRlbnRbdC5jb250ZW50Lmxlbmd0aCAtIDFdLnRleHQgKz0gYFxuYCkgOiB0ID0ge1xuICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgdGV4dDogYFxuYCxcbiAgICAgICAgc3R5bGVzOiB7fVxuICAgICAgfTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgciA9IHt9O1xuICAgIGxldCBpO1xuICAgIGZvciAoY29uc3QgcyBvZiBvLm1hcmtzKVxuICAgICAgaWYgKHMudHlwZS5uYW1lID09PSBcImxpbmtcIilcbiAgICAgICAgaSA9IHM7XG4gICAgICBlbHNlIGlmICh5dC5oYXMocy50eXBlLm5hbWUpKVxuICAgICAgICByW3MudHlwZS5uYW1lXSA9ICEwO1xuICAgICAgZWxzZSBpZiAodnQuaGFzKHMudHlwZS5uYW1lKSlcbiAgICAgICAgcltzLnR5cGUubmFtZV0gPSBzLmF0dHJzLmNvbG9yO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBFcnJvcihcIk1hcmsgaXMgb2YgYW4gdW5yZWNvZ25pemVkIHR5cGU6IFwiICsgcy50eXBlLm5hbWUpO1xuICAgIHQgPyB0LnR5cGUgPT09IFwidGV4dFwiID8gaSA/IChlLnB1c2godCksIHQgPSB7XG4gICAgICB0eXBlOiBcImxpbmtcIixcbiAgICAgIGhyZWY6IGkuYXR0cnMuaHJlZixcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIHRleHQ6IG8udGV4dENvbnRlbnQsXG4gICAgICAgICAgc3R5bGVzOiByXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KSA6IEpTT04uc3RyaW5naWZ5KHQuc3R5bGVzKSA9PT0gSlNPTi5zdHJpbmdpZnkocikgPyB0LnRleHQgKz0gby50ZXh0Q29udGVudCA6IChlLnB1c2godCksIHQgPSB7XG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIHRleHQ6IG8udGV4dENvbnRlbnQsXG4gICAgICBzdHlsZXM6IHJcbiAgICB9KSA6IHQudHlwZSA9PT0gXCJsaW5rXCIgJiYgKGkgPyB0LmhyZWYgPT09IGkuYXR0cnMuaHJlZiA/IEpTT04uc3RyaW5naWZ5KFxuICAgICAgdC5jb250ZW50W3QuY29udGVudC5sZW5ndGggLSAxXS5zdHlsZXNcbiAgICApID09PSBKU09OLnN0cmluZ2lmeShyKSA/IHQuY29udGVudFt0LmNvbnRlbnQubGVuZ3RoIC0gMV0udGV4dCArPSBvLnRleHRDb250ZW50IDogdC5jb250ZW50LnB1c2goe1xuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICB0ZXh0OiBvLnRleHRDb250ZW50LFxuICAgICAgc3R5bGVzOiByXG4gICAgfSkgOiAoZS5wdXNoKHQpLCB0ID0ge1xuICAgICAgdHlwZTogXCJsaW5rXCIsXG4gICAgICBocmVmOiBpLmF0dHJzLmhyZWYsXG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICB0ZXh0OiBvLnRleHRDb250ZW50LFxuICAgICAgICAgIHN0eWxlczogclxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSkgOiAoZS5wdXNoKHQpLCB0ID0ge1xuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICB0ZXh0OiBvLnRleHRDb250ZW50LFxuICAgICAgc3R5bGVzOiByXG4gICAgfSkpIDogaSA/IHQgPSB7XG4gICAgICB0eXBlOiBcImxpbmtcIixcbiAgICAgIGhyZWY6IGkuYXR0cnMuaHJlZixcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIHRleHQ6IG8udGV4dENvbnRlbnQsXG4gICAgICAgICAgc3R5bGVzOiByXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9IDogdCA9IHtcbiAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgdGV4dDogby50ZXh0Q29udGVudCxcbiAgICAgIHN0eWxlczogclxuICAgIH07XG4gIH0pLCB0ICYmIGUucHVzaCh0KSwgZTtcbn1cbmZ1bmN0aW9uIHgobiwgZSwgdCkge1xuICBpZiAobi50eXBlLm5hbWUgIT09IFwiYmxvY2tDb250YWluZXJcIilcbiAgICB0aHJvdyBFcnJvcihcbiAgICAgIFwiTm9kZSBtdXN0IGJlIG9mIHR5cGUgYmxvY2tDb250YWluZXIsIGJ1dCBpcyBvZiB0eXBlXCIgKyBuLnR5cGUubmFtZSArIFwiLlwiXG4gICAgKTtcbiAgY29uc3QgbyA9IHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuZ2V0KG4pO1xuICBpZiAobylcbiAgICByZXR1cm4gbztcbiAgY29uc3QgciA9IGJ0KG4pO1xuICBsZXQgaSA9IHIuaWQ7XG4gIGkgPT09IG51bGwgJiYgKGkgPSBqLm9wdGlvbnMuZ2VuZXJhdGVJRCgpKTtcbiAgY29uc3QgcyA9IHt9O1xuICBmb3IgKGNvbnN0IFtjLCBtXSBvZiBPYmplY3QuZW50cmllcyh7XG4gICAgLi4ubi5hdHRycyxcbiAgICAuLi5yLmNvbnRlbnROb2RlLmF0dHJzXG4gIH0pKSB7XG4gICAgY29uc3QgaCA9IGVbci5jb250ZW50VHlwZS5uYW1lXTtcbiAgICBpZiAoIWgpXG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgXCJCbG9jayBpcyBvZiBhbiB1bnJlY29nbml6ZWQgdHlwZTogXCIgKyByLmNvbnRlbnRUeXBlLm5hbWVcbiAgICAgICk7XG4gICAgY29uc3QgcCA9IGgucHJvcFNjaGVtYTtcbiAgICBjIGluIHAgPyBzW2NdID0gbSA6IGMgIT09IFwiaWRcIiAmJiAhKGMgaW4gQykgJiYgY29uc29sZS53YXJuKFwiQmxvY2sgaGFzIGFuIHVucmVjb2duaXplZCBhdHRyaWJ1dGU6IFwiICsgYyk7XG4gIH1cbiAgY29uc3QgbCA9IGVbci5jb250ZW50VHlwZS5uYW1lXSwgYSA9IFtdO1xuICBmb3IgKGxldCBjID0gMDsgYyA8IHIubnVtQ2hpbGRCbG9ja3M7IGMrKylcbiAgICBhLnB1c2goXG4gICAgICB4KG4ubGFzdENoaWxkLmNoaWxkKGMpLCBlLCB0KVxuICAgICk7XG4gIGNvbnN0IGQgPSB7XG4gICAgaWQ6IGksXG4gICAgdHlwZTogbC5ub2RlLm5hbWUsXG4gICAgcHJvcHM6IHMsXG4gICAgY29udGVudDogbC5ub2RlLmNvbmZpZy5jb250ZW50ID09PSBcImlubGluZSpcIiA/IE9lKHIuY29udGVudE5vZGUpIDogdm9pZCAwLFxuICAgIGNoaWxkcmVuOiBhXG4gIH07XG4gIHJldHVybiB0ID09IG51bGwgfHwgdC5zZXQobiwgZCksIGQ7XG59XG5jb25zdCBsdCA9IG5ldyBCKFwicHJldmlvdXMtYmxvY2tzXCIpLCBSZSA9IHtcbiAgLy8gTnVtYmVyZWQgTGlzdCBJdGVtc1xuICBpbmRleDogXCJpbmRleFwiLFxuICAvLyBIZWFkaW5nc1xuICBsZXZlbDogXCJsZXZlbFwiLFxuICAvLyBBbGwgQmxvY2tzXG4gIHR5cGU6IFwidHlwZVwiLFxuICBkZXB0aDogXCJkZXB0aFwiLFxuICBcImRlcHRoLWNoYW5nZVwiOiBcImRlcHRoLWNoYW5nZVwiXG59LCB6ZSA9ICgpID0+IHtcbiAgbGV0IG47XG4gIHJldHVybiBuZXcgVCh7XG4gICAga2V5OiBsdCxcbiAgICB2aWV3KGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVwZGF0ZTogYXN5bmMgKHQsIG8pID0+IHtcbiAgICAgICAgICB2YXIgcjtcbiAgICAgICAgICAoKHIgPSB0aGlzLmtleSkgPT0gbnVsbCA/IHZvaWQgMCA6IHIuZ2V0U3RhdGUodC5zdGF0ZSkudXBkYXRlZEJsb2Nrcy5zaXplKSA+IDAgJiYgKG4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHQuZGlzcGF0Y2goXG4gICAgICAgICAgICAgIHQuc3RhdGUudHIuc2V0TWV0YShsdCwgeyBjbGVhclVwZGF0ZTogITAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgMCkpO1xuICAgICAgICB9LFxuICAgICAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICAgICAgbiAmJiBjbGVhclRpbWVvdXQobik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBzdGF0ZToge1xuICAgICAgaW5pdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAvLyBCbG9jayBhdHRyaWJ1dGVzLCBieSBibG9jayBJRCwgZnJvbSBqdXN0IGJlZm9yZSB0aGUgcHJldmlvdXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgcHJldlRyYW5zYWN0aW9uT2xkQmxvY2tBdHRyczoge30sXG4gICAgICAgICAgLy8gQmxvY2sgYXR0cmlidXRlcywgYnkgYmxvY2sgSUQsIGZyb20ganVzdCBiZWZvcmUgdGhlIGN1cnJlbnQgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgY3VycmVudFRyYW5zYWN0aW9uT2xkQmxvY2tBdHRyczoge30sXG4gICAgICAgICAgLy8gU2V0IG9mIElEcyBvZiBibG9ja3Mgd2hvc2UgYXR0cmlidXRlcyBjaGFuZ2VkIGZyb20gdGhlIGN1cnJlbnQgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgdXBkYXRlZEJsb2NrczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGFwcGx5KGUsIHQsIG8sIHIpIHtcbiAgICAgICAgaWYgKHQuY3VycmVudFRyYW5zYWN0aW9uT2xkQmxvY2tBdHRycyA9IHt9LCB0LnVwZGF0ZWRCbG9ja3MuY2xlYXIoKSwgIWUuZG9jQ2hhbmdlZCB8fCBvLmRvYy5lcShyLmRvYykpXG4gICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIGNvbnN0IGkgPSB7fSwgcyA9IG50KG8uZG9jLCAoZCkgPT4gZC5hdHRycy5pZCksIGwgPSBuZXcgTWFwKFxuICAgICAgICAgIHMubWFwKChkKSA9PiBbZC5ub2RlLmF0dHJzLmlkLCBkXSlcbiAgICAgICAgKSwgYSA9IG50KHIuZG9jLCAoZCkgPT4gZC5hdHRycy5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgZCBvZiBhKSB7XG4gICAgICAgICAgY29uc3QgYyA9IGwuZ2V0KGQubm9kZS5hdHRycy5pZCksIG0gPSBjID09IG51bGwgPyB2b2lkIDAgOiBjLm5vZGUuZmlyc3RDaGlsZCwgaCA9IGQubm9kZS5maXJzdENoaWxkO1xuICAgICAgICAgIGlmIChjICYmIG0gJiYgaCkge1xuICAgICAgICAgICAgY29uc3QgcCA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGguYXR0cnMuaW5kZXgsXG4gICAgICAgICAgICAgIGxldmVsOiBoLmF0dHJzLmxldmVsLFxuICAgICAgICAgICAgICB0eXBlOiBoLnR5cGUubmFtZSxcbiAgICAgICAgICAgICAgZGVwdGg6IHIuZG9jLnJlc29sdmUoZC5wb3MpLmRlcHRoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGYgPSB7XG4gICAgICAgICAgICAgIGluZGV4OiBtLmF0dHJzLmluZGV4LFxuICAgICAgICAgICAgICBsZXZlbDogbS5hdHRycy5sZXZlbCxcbiAgICAgICAgICAgICAgdHlwZTogbS50eXBlLm5hbWUsXG4gICAgICAgICAgICAgIGRlcHRoOiBvLmRvYy5yZXNvbHZlKGMucG9zKS5kZXB0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlbZC5ub2RlLmF0dHJzLmlkXSA9IGYsIGUuZ2V0TWV0YShcIm51bWJlcmVkTGlzdEluZGV4aW5nXCIpICYmIChkLm5vZGUuYXR0cnMuaWQgaW4gdC5wcmV2VHJhbnNhY3Rpb25PbGRCbG9ja0F0dHJzICYmIChmID0gdC5wcmV2VHJhbnNhY3Rpb25PbGRCbG9ja0F0dHJzW2Qubm9kZS5hdHRycy5pZF0pLCBwLnR5cGUgPT09IFwibnVtYmVyZWRMaXN0SXRlbVwiICYmIChmLmluZGV4ID0gcC5pbmRleCkpLCB0LmN1cnJlbnRUcmFuc2FjdGlvbk9sZEJsb2NrQXR0cnNbZC5ub2RlLmF0dHJzLmlkXSA9IGYsIEpTT04uc3RyaW5naWZ5KGYpICE9PSBKU09OLnN0cmluZ2lmeShwKSAmJiAoZltcImRlcHRoLWNoYW5nZVwiXSA9IGYuZGVwdGggLSBwLmRlcHRoLCB0LnVwZGF0ZWRCbG9ja3MuYWRkKGQubm9kZS5hdHRycy5pZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5wcmV2VHJhbnNhY3Rpb25PbGRCbG9ja0F0dHJzID0gaSwgdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHByb3BzOiB7XG4gICAgICBkZWNvcmF0aW9ucyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldFN0YXRlKGUpO1xuICAgICAgICBpZiAodC51cGRhdGVkQmxvY2tzLnNpemUgPT09IDApXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIHJldHVybiBlLmRvYy5kZXNjZW5kYW50cygociwgaSkgPT4ge1xuICAgICAgICAgIGlmICghci5hdHRycy5pZCB8fCAhdC51cGRhdGVkQmxvY2tzLmhhcyhyLmF0dHJzLmlkKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICBjb25zdCBzID0gdC5jdXJyZW50VHJhbnNhY3Rpb25PbGRCbG9ja0F0dHJzW3IuYXR0cnMuaWRdLCBsID0ge307XG4gICAgICAgICAgZm9yIChjb25zdCBbZCwgY10gb2YgT2JqZWN0LmVudHJpZXMocykpXG4gICAgICAgICAgICBsW1wiZGF0YS1wcmV2LVwiICsgUmVbZF1dID0gYyB8fCBcIm5vbmVcIjtcbiAgICAgICAgICBjb25zdCBhID0gVy5ub2RlKGksIGkgKyByLm5vZGVTaXplLCB7XG4gICAgICAgICAgICAuLi5sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgby5wdXNoKGEpO1xuICAgICAgICB9KSwgJC5jcmVhdGUoZS5kb2MsIG8pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59LCBFdCA9IFwiX2Jsb2NrT3V0ZXJfeG83cGZfNVwiLCBTdCA9IFwiX2Jsb2NrX3hvN3BmXzVcIiwgVHQgPSBcIl9yZWFjdE5vZGVWaWV3UmVuZGVyZXJfeG83cGZfMTdcIiwgTXQgPSBcIl9ibG9ja0NvbnRlbnRfeG83cGZfMjJcIiwgQnQgPSBcIl9ibG9ja0dyb3VwX3hvN3BmXzQyXCIsIHh0ID0gXCJfd3JhcHBlcl94bzdwZl8yMjZcIiwgSXQgPSBcIl9hZGRJbWFnZUJ1dHRvbl94bzdwZl8yMzRcIiwgQXQgPSBcIl9hZGRJbWFnZUJ1dHRvbkljb25feG83cGZfMjUwXCIsIF90ID0gXCJfYWRkSW1hZ2VCdXR0b25UZXh0X3hvN3BmXzI1NlwiLCBIdCA9IFwiX2ltYWdlQW5kQ2FwdGlvbldyYXBwZXJfeG83cGZfMjYwXCIsIEx0ID0gXCJfaW1hZ2VXcmFwcGVyX3hvN3BmXzI2NlwiLCBOdCA9IFwiX2ltYWdlX3hvN3BmXzI2MFwiLCBQdCA9IFwiX3Jlc2l6ZUhhbmRsZV94bzdwZl8yNzlcIiwgRHQgPSBcIl9jYXB0aW9uX3hvN3BmXzI5NFwiLCBPdCA9IFwiX2lzRW1wdHlfeG83cGZfMzAwXCIsIFJ0ID0gXCJfaW5saW5lQ29udGVudF94bzdwZl8zMDBcIiwgenQgPSBcIl9pc0ZpbHRlcl94bzdwZl8zMDFcIiwgVnQgPSBcIl9oYXNBbmNob3JfeG83cGZfMzEzXCIsIGcgPSB7XG4gIGJsb2NrT3V0ZXI6IEV0LFxuICBibG9jazogU3QsXG4gIHJlYWN0Tm9kZVZpZXdSZW5kZXJlcjogVHQsXG4gIGJsb2NrQ29udGVudDogTXQsXG4gIGJsb2NrR3JvdXA6IEJ0LFxuICB3cmFwcGVyOiB4dCxcbiAgYWRkSW1hZ2VCdXR0b246IEl0LFxuICBhZGRJbWFnZUJ1dHRvbkljb246IEF0LFxuICBhZGRJbWFnZUJ1dHRvblRleHQ6IF90LFxuICBpbWFnZUFuZENhcHRpb25XcmFwcGVyOiBIdCxcbiAgaW1hZ2VXcmFwcGVyOiBMdCxcbiAgaW1hZ2U6IE50LFxuICByZXNpemVIYW5kbGU6IFB0LFxuICBjYXB0aW9uOiBEdCxcbiAgaXNFbXB0eTogT3QsXG4gIGlubGluZUNvbnRlbnQ6IFJ0LFxuICBpc0ZpbHRlcjogenQsXG4gIGhhc0FuY2hvcjogVnRcbn0sIEJuID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYWRkSW1hZ2VCdXR0b246IEl0LFxuICBhZGRJbWFnZUJ1dHRvbkljb246IEF0LFxuICBhZGRJbWFnZUJ1dHRvblRleHQ6IF90LFxuICBibG9jazogU3QsXG4gIGJsb2NrQ29udGVudDogTXQsXG4gIGJsb2NrR3JvdXA6IEJ0LFxuICBibG9ja091dGVyOiBFdCxcbiAgY2FwdGlvbjogRHQsXG4gIGRlZmF1bHQ6IGcsXG4gIGhhc0FuY2hvcjogVnQsXG4gIGltYWdlOiBOdCxcbiAgaW1hZ2VBbmRDYXB0aW9uV3JhcHBlcjogSHQsXG4gIGltYWdlV3JhcHBlcjogTHQsXG4gIGlubGluZUNvbnRlbnQ6IFJ0LFxuICBpc0VtcHR5OiBPdCxcbiAgaXNGaWx0ZXI6IHp0LFxuICByZWFjdE5vZGVWaWV3UmVuZGVyZXI6IFR0LFxuICByZXNpemVIYW5kbGU6IFB0LFxuICB3cmFwcGVyOiB4dFxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKSwgVmUgPSB7XG4gIGJsb2NrQ29sb3I6IFwiZGF0YS1ibG9jay1jb2xvclwiLFxuICBibG9ja1N0eWxlOiBcImRhdGEtYmxvY2stc3R5bGVcIixcbiAgaWQ6IFwiZGF0YS1pZFwiLFxuICBkZXB0aDogXCJkYXRhLWRlcHRoXCIsXG4gIGRlcHRoQ2hhbmdlOiBcImRhdGEtZGVwdGgtY2hhbmdlXCJcbn0sIFVlID0gbmV3IEIoXCJub24tZWRpdGFibGUtYmxvY2tcIiksIEZlID0gKCkgPT4gbmV3IFQoe1xuICBrZXk6IFVlLFxuICBwcm9wczoge1xuICAgIGhhbmRsZUtleURvd246IChuLCBlKSA9PiB7XG4gICAgICBcIm5vZGVcIiBpbiBuLnN0YXRlLnNlbGVjdGlvbiAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59KSwgV2UgPSBHLmNyZWF0ZSh7XG4gIG5hbWU6IFwiYmxvY2tDb250YWluZXJcIixcbiAgZ3JvdXA6IFwiYmxvY2tDb250YWluZXJcIixcbiAgLy8gQSBibG9jayBhbHdheXMgY29udGFpbnMgY29udGVudCwgYW5kIG9wdGlvbmFsbHkgYSBibG9ja0dyb3VwIHdoaWNoIGNvbnRhaW5zIG5lc3RlZCBibG9ja3NcbiAgY29udGVudDogXCJibG9ja0NvbnRlbnQgYmxvY2tHcm91cD9cIixcbiAgLy8gRW5zdXJlcyBjb250ZW50LXNwZWNpZmljIGtleWJvYXJkIGhhbmRsZXJzIHRyaWdnZXIgZmlyc3QuXG4gIHByaW9yaXR5OiA1MCxcbiAgZGVmaW5pbmc6ICEwLFxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICBnZXRBdHRyczogKG4pID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgICAgZm9yIChjb25zdCBbdCwgb10gb2YgT2JqZWN0LmVudHJpZXMoVmUpKVxuICAgICAgICAgICAgbi5nZXRBdHRyaWJ1dGUobykgJiYgKGVbdF0gPSBuLmdldEF0dHJpYnV0ZShvKSk7XG4gICAgICAgICAgcmV0dXJuIG4uZ2V0QXR0cmlidXRlKFwiZGF0YS1ub2RlLXR5cGVcIikgPT09IFwiYmxvY2tDb250YWluZXJcIiA/IGUgOiAhMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlczogbiB9KSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9ICgodCA9IHRoaXMub3B0aW9ucy5kb21BdHRyaWJ1dGVzKSA9PSBudWxsID8gdm9pZCAwIDogdC5ibG9ja0NvbnRhaW5lcikgfHwge307XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiZGl2XCIsXG4gICAgICBOKG4sIHtcbiAgICAgICAgY2xhc3M6IGcuYmxvY2tPdXRlcixcbiAgICAgICAgXCJkYXRhLW5vZGUtdHlwZVwiOiBcImJsb2NrLW91dGVyXCJcbiAgICAgIH0pLFxuICAgICAgW1xuICAgICAgICBcImRpdlwiLFxuICAgICAgICBOKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmUsXG4gICAgICAgICAgICBjbGFzczogUyhnLmJsb2NrLCBlLmNsYXNzKSxcbiAgICAgICAgICAgIFwiZGF0YS1ub2RlLXR5cGVcIjogdGhpcy5uYW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBuXG4gICAgICAgICksXG4gICAgICAgIDBcbiAgICAgIF1cbiAgICBdO1xuICB9LFxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gQ3JlYXRlcyBhIG5ldyB0ZXh0IGJsb2NrIGF0IGEgZ2l2ZW4gcG9zaXRpb24uXG4gICAgICBCTkNyZWF0ZUJsb2NrOiAobikgPT4gKHsgc3RhdGU6IGUsIGRpc3BhdGNoOiB0IH0pID0+IHtcbiAgICAgICAgY29uc3QgbyA9IGUuc2NoZW1hLm5vZGVzLmJsb2NrQ29udGFpbmVyLmNyZWF0ZUFuZEZpbGwoKTtcbiAgICAgICAgcmV0dXJuIHQgJiYgZS50ci5pbnNlcnQobiwgbyksICEwO1xuICAgICAgfSxcbiAgICAgIC8vIERlbGV0ZXMgYSBibG9jayBhdCBhIGdpdmVuIHBvc2l0aW9uLlxuICAgICAgQk5EZWxldGVCbG9jazogKG4pID0+ICh7IHN0YXRlOiBlLCBkaXNwYXRjaDogdCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IG8gPSBiKGUuZG9jLCBuKTtcbiAgICAgICAgaWYgKG8gPT09IHZvaWQgMClcbiAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHsgc3RhcnRQb3M6IHIsIGVuZFBvczogaSB9ID0gbztcbiAgICAgICAgcmV0dXJuIHQgJiYgZS50ci5kZWxldGVSYW5nZShyLCBpKSwgITA7XG4gICAgICB9LFxuICAgICAgLy8gVXBkYXRlcyBhIGJsb2NrIGF0IGEgZ2l2ZW4gcG9zaXRpb24uXG4gICAgICBCTlVwZGF0ZUJsb2NrOiAobiwgZSkgPT4gKHsgc3RhdGU6IHQsIGRpc3BhdGNoOiBvIH0pID0+IHtcbiAgICAgICAgY29uc3QgciA9IGIodC5kb2MsIG4pO1xuICAgICAgICBpZiAociA9PT0gdm9pZCAwKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgeyBzdGFydFBvczogaSwgZW5kUG9zOiBzLCBub2RlOiBsLCBjb250ZW50Tm9kZTogYSB9ID0gcjtcbiAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICBpZiAoZS5jaGlsZHJlbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGYgb2YgZS5jaGlsZHJlbilcbiAgICAgICAgICAgICAgcC5wdXNoKFYoZiwgdC5zY2hlbWEpKTtcbiAgICAgICAgICAgIGwuY2hpbGRDb3VudCA9PT0gMiA/IHQudHIucmVwbGFjZShcbiAgICAgICAgICAgICAgaSArIGEubm9kZVNpemUgKyAxLFxuICAgICAgICAgICAgICBzIC0gMSxcbiAgICAgICAgICAgICAgbmV3IEwoUC5mcm9tKHApLCAwLCAwKVxuICAgICAgICAgICAgKSA6IHQudHIuaW5zZXJ0KFxuICAgICAgICAgICAgICBpICsgYS5ub2RlU2l6ZSxcbiAgICAgICAgICAgICAgdC5zY2hlbWEubm9kZXMuYmxvY2tHcm91cC5jcmVhdGUoe30sIHApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZS5jb250ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxldCBwID0gW107XG4gICAgICAgICAgICB0eXBlb2YgZS5jb250ZW50ID09IFwic3RyaW5nXCIgPyBwLnB1c2godC5zY2hlbWEudGV4dChlLmNvbnRlbnQpKSA6IHAgPSBDdChlLmNvbnRlbnQsIHQuc2NoZW1hKSwgdC50ci5yZXBsYWNlKFxuICAgICAgICAgICAgICBpICsgMSxcbiAgICAgICAgICAgICAgaSArIGEubm9kZVNpemUgLSAxLFxuICAgICAgICAgICAgICBuZXcgTChQLmZyb20ocCksIDAsIDApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBkID0gYS50eXBlLm5hbWUsIGMgPSBlLnR5cGUgfHwgZCwgbSA9IHQuc2NoZW1hLm5vZGVzW2RdLnNwZWMuY29udGVudCwgaCA9IHQuc2NoZW1hLm5vZGVzW2NdLnNwZWMuY29udGVudDtcbiAgICAgICAgICBtID09PSBcImlubGluZSpcIiAmJiBoID09PSBcIlwiID8gdC50ci5yZXBsYWNlV2l0aChcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBzLFxuICAgICAgICAgICAgdC5zY2hlbWEubm9kZXNbY10uY3JlYXRlKHtcbiAgICAgICAgICAgICAgLi4uYS5hdHRycyxcbiAgICAgICAgICAgICAgLi4uZS5wcm9wc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApLnNldFNlbGVjdGlvbihcbiAgICAgICAgICAgIG5ldyBtdCh0LnRyLmRvYy5yZXNvbHZlKGkpKVxuICAgICAgICAgICkgOiB0LnRyLnNldE5vZGVNYXJrdXAoXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgZS50eXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0LnNjaGVtYS5ub2Rlc1tlLnR5cGVdLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAuLi5hLmF0dHJzLFxuICAgICAgICAgICAgICAuLi5lLnByb3BzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSwgdC50ci5zZXROb2RlTWFya3VwKGkgLSAxLCB2b2lkIDAsIHtcbiAgICAgICAgICAgIC4uLmwuYXR0cnMsXG4gICAgICAgICAgICAuLi5lLnByb3BzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgfSxcbiAgICAgIC8vIEFwcGVuZHMgdGhlIHRleHQgY29udGVudHMgb2YgYSBibG9jayB0byB0aGUgbmVhcmVzdCBwcmV2aW91cyBibG9jaywgZ2l2ZW4gYSBwb3NpdGlvbiBiZXR3ZWVuIHRoZW0uIENoaWxkcmVuIG9mXG4gICAgICAvLyB0aGUgbWVyZ2VkIGJsb2NrIGFyZSBtb3ZlZCBvdXQgb2YgaXQgZmlyc3QsIHJhdGhlciB0aGFuIGFsc28gYmVpbmcgbWVyZ2VkLlxuICAgICAgLy9cbiAgICAgIC8vIEluIHRoZSBleGFtcGxlIGJlbG93LCB0aGUgcG9zaXRpb24gcGFzc2VkIGludG8gdGhlIGZ1bmN0aW9uIGlzIGJldHdlZW4gQmxvY2sxIGFuZCBCbG9jazIuXG4gICAgICAvL1xuICAgICAgLy8gQmxvY2sxXG4gICAgICAvLyAgICBCbG9jazJcbiAgICAgIC8vIEJsb2NrM1xuICAgICAgLy8gICAgQmxvY2s0XG4gICAgICAvLyAgICAgICAgQmxvY2s1XG4gICAgICAvL1xuICAgICAgLy8gQmVjb21lczpcbiAgICAgIC8vXG4gICAgICAvLyBCbG9jazFcbiAgICAgIC8vICAgIEJsb2NrMkJsb2NrM1xuICAgICAgLy8gQmxvY2s0XG4gICAgICAvLyAgICAgQmxvY2s1XG4gICAgICBCTk1lcmdlQmxvY2tzOiAobikgPT4gKHsgc3RhdGU6IGUsIGRpc3BhdGNoOiB0IH0pID0+IHtcbiAgICAgICAgY29uc3QgbyA9IGUuZG9jLnJlc29sdmUobiArIDEpLm5vZGUoKS50eXBlLm5hbWUgPT09IFwiYmxvY2tDb250YWluZXJcIiwgciA9IGUuZG9jLnJlc29sdmUobiAtIDEpLm5vZGUoKS50eXBlLm5hbWUgPT09IFwiYmxvY2tDb250YWluZXJcIjtcbiAgICAgICAgaWYgKCFvIHx8ICFyKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgaSA9IGIoXG4gICAgICAgICAgZS5kb2MsXG4gICAgICAgICAgbiArIDFcbiAgICAgICAgKSwgeyBub2RlOiBzLCBjb250ZW50Tm9kZTogbCwgc3RhcnRQb3M6IGEsIGVuZFBvczogZCwgZGVwdGg6IGMgfSA9IGk7XG4gICAgICAgIGlmIChzLmNoaWxkQ291bnQgPT09IDIpIHtcbiAgICAgICAgICBjb25zdCBwID0gZS5kb2MucmVzb2x2ZShcbiAgICAgICAgICAgIGEgKyBsLm5vZGVTaXplICsgMVxuICAgICAgICAgICksIGYgPSBlLmRvYy5yZXNvbHZlKGQgLSAxKSwgayA9IHAuYmxvY2tSYW5nZShmKTtcbiAgICAgICAgICB0ICYmIGUudHIubGlmdChrLCBjIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG0gPSBuIC0gMSwgaCA9IGIoZS5kb2MsIG0pO1xuICAgICAgICBmb3IgKDsgaC5udW1DaGlsZEJsb2NrcyA+IDA7IClcbiAgICAgICAgICBpZiAobS0tLCBoID0gYihlLmRvYywgbSksIGggPT09IHZvaWQgMClcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuIHQgJiYgKHQoXG4gICAgICAgICAgZS50ci5kZWxldGVSYW5nZShhLCBhICsgbC5ub2RlU2l6ZSkucmVwbGFjZShcbiAgICAgICAgICAgIG0gLSAxLFxuICAgICAgICAgICAgYSxcbiAgICAgICAgICAgIG5ldyBMKGwuY29udGVudCwgMCwgMClcbiAgICAgICAgICApLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgKSwgZS50ci5zZXRTZWxlY3Rpb24oXG4gICAgICAgICAgbmV3IGl0KGUuZG9jLnJlc29sdmUobSAtIDEpKVxuICAgICAgICApKSwgITA7XG4gICAgICB9LFxuICAgICAgLy8gU3BsaXRzIGEgYmxvY2sgYXQgYSBnaXZlbiBwb3NpdGlvbi4gQ29udGVudCBhZnRlciB0aGUgcG9zaXRpb24gaXMgbW92ZWQgdG8gYSBuZXcgYmxvY2sgYmVsb3csIGF0IHRoZSBzYW1lXG4gICAgICAvLyBuZXN0aW5nIGxldmVsLlxuICAgICAgQk5TcGxpdEJsb2NrOiAobiwgZSkgPT4gKHsgc3RhdGU6IHQsIGRpc3BhdGNoOiBvIH0pID0+IHtcbiAgICAgICAgY29uc3QgciA9IGIodC5kb2MsIG4pO1xuICAgICAgICBpZiAociA9PT0gdm9pZCAwKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgeyBjb250ZW50Tm9kZTogaSwgY29udGVudFR5cGU6IHMsIHN0YXJ0UG9zOiBsLCBlbmRQb3M6IGEsIGRlcHRoOiBkIH0gPSByLCBjID0gdC5kb2MuY3V0KGwgKyAxLCBuKSwgbSA9IHQuZG9jLmN1dChuLCBhIC0gMSksIGggPSB0LnNjaGVtYS5ub2Rlcy5ibG9ja0NvbnRhaW5lci5jcmVhdGVBbmRGaWxsKCksIHAgPSBhICsgMSwgZiA9IHAgKyAyO1xuICAgICAgICByZXR1cm4gbyAmJiAodC50ci5pbnNlcnQocCwgaCksIHQudHIucmVwbGFjZShcbiAgICAgICAgICBmLFxuICAgICAgICAgIGYgKyAxLFxuICAgICAgICAgIG0uY29udGVudC5zaXplID4gMCA/IG5ldyBMKFxuICAgICAgICAgICAgUC5mcm9tKG0pLFxuICAgICAgICAgICAgZCArIDIsXG4gICAgICAgICAgICBkICsgMlxuICAgICAgICAgICkgOiB2b2lkIDBcbiAgICAgICAgKSwgZSAmJiB0LnRyLnNldEJsb2NrVHlwZShcbiAgICAgICAgICBmLFxuICAgICAgICAgIGYsXG4gICAgICAgICAgdC5zY2hlbWEubm9kZShzKS50eXBlLFxuICAgICAgICAgIGkuYXR0cnNcbiAgICAgICAgKSwgdC50ci5zZXRTZWxlY3Rpb24oXG4gICAgICAgICAgbmV3IGl0KHQuZG9jLnJlc29sdmUoZikpXG4gICAgICAgICksIHQudHIucmVwbGFjZShcbiAgICAgICAgICBsICsgMSxcbiAgICAgICAgICBhIC0gMSxcbiAgICAgICAgICBjLmNvbnRlbnQuc2l6ZSA+IDAgPyBuZXcgTChcbiAgICAgICAgICAgIFAuZnJvbShjKSxcbiAgICAgICAgICAgIGQgKyAyLFxuICAgICAgICAgICAgZCArIDJcbiAgICAgICAgICApIDogdm9pZCAwXG4gICAgICAgICkpLCAhMDtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFt6ZSgpLCBGZSgpXTtcbiAgfSxcbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEJhY2tzcGFjZTogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuZmlyc3QoKHsgY29tbWFuZHM6IHQgfSkgPT4gW1xuICAgICAgICAvLyBEZWxldGVzIHRoZSBzZWxlY3Rpb24gaWYgaXQncyBub3QgZW1wdHkuXG4gICAgICAgICgpID0+IHQuZGVsZXRlU2VsZWN0aW9uKCksXG4gICAgICAgIC8vIFVuZG9lcyBhbiBpbnB1dCBydWxlIGlmIG9uZSB3YXMgdHJpZ2dlcmVkIGluIHRoZSBsYXN0IGVkaXRvciBzdGF0ZSBjaGFuZ2UuXG4gICAgICAgICgpID0+IHQudW5kb0lucHV0UnVsZSgpLFxuICAgICAgICAvLyBSZXZlcnRzIGJsb2NrIGNvbnRlbnQgdHlwZSB0byBhIHBhcmFncmFwaCBpZiB0aGUgc2VsZWN0aW9uIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgYmxvY2suXG4gICAgICAgICgpID0+IHQuY29tbWFuZCgoeyBzdGF0ZTogbyB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBjb250ZW50VHlwZTogciB9ID0gYihcbiAgICAgICAgICAgIG8uZG9jLFxuICAgICAgICAgICAgby5zZWxlY3Rpb24uZnJvbVxuICAgICAgICAgICksIGkgPSBvLnNlbGVjdGlvbi4kYW5jaG9yLnBhcmVudE9mZnNldCA9PT0gMCwgcyA9IHIubmFtZSA9PT0gXCJwYXJhZ3JhcGhcIjtcbiAgICAgICAgICByZXR1cm4gaSAmJiAhcyA/IHQuQk5VcGRhdGVCbG9jayhvLnNlbGVjdGlvbi5mcm9tLCB7XG4gICAgICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgcHJvcHM6IHt9XG4gICAgICAgICAgfSkgOiAhMTtcbiAgICAgICAgfSksXG4gICAgICAgIC8vIFJlbW92ZXMgYSBsZXZlbCBvZiBuZXN0aW5nIGlmIHRoZSBibG9jayBpcyBpbmRlbnRlZCBpZiB0aGUgc2VsZWN0aW9uIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgYmxvY2suXG4gICAgICAgICgpID0+IHQuY29tbWFuZCgoeyBzdGF0ZTogbyB9KSA9PiBvLnNlbGVjdGlvbi4kYW5jaG9yLnBhcmVudE9mZnNldCA9PT0gMCA/IHQubGlmdExpc3RJdGVtKFwiYmxvY2tDb250YWluZXJcIikgOiAhMSksXG4gICAgICAgIC8vIE1lcmdlcyBibG9jayB3aXRoIHRoZSBwcmV2aW91cyBvbmUgaWYgaXQgaXNuJ3QgaW5kZW50ZWQsIGlzbid0IHRoZSBmaXJzdCBibG9jayBpbiB0aGUgZG9jLCBhbmQgdGhlIHNlbGVjdGlvblxuICAgICAgICAvLyBpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGJsb2NrLlxuICAgICAgICAoKSA9PiB0LmNvbW1hbmQoKHsgc3RhdGU6IG8gfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgZGVwdGg6IHIsIHN0YXJ0UG9zOiBpIH0gPSBiKFxuICAgICAgICAgICAgby5kb2MsXG4gICAgICAgICAgICBvLnNlbGVjdGlvbi5mcm9tXG4gICAgICAgICAgKSwgcyA9IG8uc2VsZWN0aW9uLiRhbmNob3IucGFyZW50T2Zmc2V0ID09PSAwLCBsID0gby5zZWxlY3Rpb24uYW5jaG9yID09PSBvLnNlbGVjdGlvbi5oZWFkLCBhID0gaSA9PT0gMiwgZCA9IGkgLSAxO1xuICAgICAgICAgIHJldHVybiAhYSAmJiBzICYmIGwgJiYgciA9PT0gMiA/IHQuQk5NZXJnZUJsb2NrcyhkKSA6ICExO1xuICAgICAgICB9KVxuICAgICAgXSksXG4gICAgICBFbnRlcjogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuZmlyc3QoKHsgY29tbWFuZHM6IHQgfSkgPT4gW1xuICAgICAgICAvLyBSZW1vdmVzIGEgbGV2ZWwgb2YgbmVzdGluZyBpZiB0aGUgYmxvY2sgaXMgZW1wdHkgJiBpbmRlbnRlZCwgd2hpbGUgdGhlIHNlbGVjdGlvbiBpcyBhbHNvIGVtcHR5ICYgYXQgdGhlIHN0YXJ0XG4gICAgICAgIC8vIG9mIHRoZSBibG9jay5cbiAgICAgICAgKCkgPT4gdC5jb21tYW5kKCh7IHN0YXRlOiBvIH0pID0+IHtcbiAgICAgICAgICBjb25zdCB7IG5vZGU6IHIsIGRlcHRoOiBpIH0gPSBiKFxuICAgICAgICAgICAgby5kb2MsXG4gICAgICAgICAgICBvLnNlbGVjdGlvbi5mcm9tXG4gICAgICAgICAgKSwgcyA9IG8uc2VsZWN0aW9uLiRhbmNob3IucGFyZW50T2Zmc2V0ID09PSAwLCBsID0gby5zZWxlY3Rpb24uYW5jaG9yID09PSBvLnNlbGVjdGlvbi5oZWFkLCBhID0gci50ZXh0Q29udGVudC5sZW5ndGggPT09IDAsIGQgPSBpID4gMjtcbiAgICAgICAgICByZXR1cm4gcyAmJiBsICYmIGEgJiYgZCA/IHQubGlmdExpc3RJdGVtKFwiYmxvY2tDb250YWluZXJcIikgOiAhMTtcbiAgICAgICAgfSksXG4gICAgICAgIC8vIENyZWF0ZXMgYSBuZXcgYmxvY2sgYW5kIG1vdmVzIHRoZSBzZWxlY3Rpb24gdG8gaXQgaWYgdGhlIGN1cnJlbnQgb25lIGlzIGVtcHR5LCB3aGlsZSB0aGUgc2VsZWN0aW9uIGlzIGFsc29cbiAgICAgICAgLy8gZW1wdHkgJiBhdCB0aGUgc3RhcnQgb2YgdGhlIGJsb2NrLlxuICAgICAgICAoKSA9PiB0LmNvbW1hbmQoKHsgc3RhdGU6IG8sIGNoYWluOiByIH0pID0+IHtcbiAgICAgICAgICBjb25zdCB7IG5vZGU6IGksIGVuZFBvczogcyB9ID0gYihcbiAgICAgICAgICAgIG8uZG9jLFxuICAgICAgICAgICAgby5zZWxlY3Rpb24uZnJvbVxuICAgICAgICAgICksIGwgPSBvLnNlbGVjdGlvbi4kYW5jaG9yLnBhcmVudE9mZnNldCA9PT0gMCwgYSA9IG8uc2VsZWN0aW9uLmFuY2hvciA9PT0gby5zZWxlY3Rpb24uaGVhZCwgZCA9IGkudGV4dENvbnRlbnQubGVuZ3RoID09PSAwO1xuICAgICAgICAgIGlmIChsICYmIGEgJiYgZCkge1xuICAgICAgICAgICAgY29uc3QgYyA9IHMgKyAxLCBtID0gYyArIDI7XG4gICAgICAgICAgICByZXR1cm4gcigpLkJOQ3JlYXRlQmxvY2soYykuc2V0VGV4dFNlbGVjdGlvbihtKS5ydW4oKSwgITA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSksXG4gICAgICAgIC8vIFNwbGl0cyB0aGUgY3VycmVudCBibG9jaywgbW92aW5nIGNvbnRlbnQgaW5zaWRlIHRoYXQncyBhZnRlciB0aGUgY3Vyc29yIHRvIGEgbmV3IHRleHQgYmxvY2sgYmVsb3cuIEFsc29cbiAgICAgICAgLy8gZGVsZXRlcyB0aGUgc2VsZWN0aW9uIGJlZm9yZWhhbmQsIGlmIGl0J3Mgbm90IGVtcHR5LlxuICAgICAgICAoKSA9PiB0LmNvbW1hbmQoKHsgc3RhdGU6IG8sIGNoYWluOiByIH0pID0+IHtcbiAgICAgICAgICBjb25zdCB7IG5vZGU6IGkgfSA9IGIoXG4gICAgICAgICAgICBvLmRvYyxcbiAgICAgICAgICAgIG8uc2VsZWN0aW9uLmZyb21cbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBpLnRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCA/ICExIDogKHIoKS5kZWxldGVTZWxlY3Rpb24oKS5CTlNwbGl0QmxvY2soby5zZWxlY3Rpb24uZnJvbSwgITEpLnJ1bigpLCAhMCk7XG4gICAgICAgIH0pXG4gICAgICBdKSxcbiAgICAgIC8vIEFsd2F5cyByZXR1cm5pbmcgdHJ1ZSBmb3IgdGFiIGtleSBwcmVzc2VzIGVuc3VyZXMgdGhleSdyZSBub3QgY2FwdHVyZWQgYnkgdGhlIGJyb3dzZXIuIE90aGVyd2lzZSwgdGhleSBibHVyIHRoZVxuICAgICAgLy8gZWRpdG9yIHNpbmNlIHRoZSBicm93c2VyIHdpbGwgdHJ5IHRvIHVzZSB0YWIgZm9yIGtleWJvYXJkIG5hdmlnYXRpb24uXG4gICAgICBUYWI6ICgpID0+ICh0aGlzLmVkaXRvci5jb21tYW5kcy5zaW5rTGlzdEl0ZW0oXCJibG9ja0NvbnRhaW5lclwiKSwgITApLFxuICAgICAgXCJTaGlmdC1UYWJcIjogKCkgPT4gKHRoaXMuZWRpdG9yLmNvbW1hbmRzLmxpZnRMaXN0SXRlbShcImJsb2NrQ29udGFpbmVyXCIpLCAhMCksXG4gICAgICBcIk1vZC1BbHQtMFwiOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5CTkNyZWF0ZUJsb2NrKFxuICAgICAgICB0aGlzLmVkaXRvci5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yICsgMlxuICAgICAgKVxuICAgIH07XG4gIH1cbn0pLCAkZSA9IEcuY3JlYXRlKHtcbiAgbmFtZTogXCJibG9ja0dyb3VwXCIsXG4gIGdyb3VwOiBcImJsb2NrR3JvdXBcIixcbiAgY29udGVudDogXCJibG9ja0NvbnRhaW5lcitcIixcbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgZ2V0QXR0cnM6IChuKSA9PiB0eXBlb2YgbiA9PSBcInN0cmluZ1wiID8gITEgOiBuLmdldEF0dHJpYnV0ZShcImRhdGEtbm9kZS10eXBlXCIpID09PSBcImJsb2NrR3JvdXBcIiA/IG51bGwgOiAhMVxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlczogbiB9KSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9ICgodCA9IHRoaXMub3B0aW9ucy5kb21BdHRyaWJ1dGVzKSA9PSBudWxsID8gdm9pZCAwIDogdC5ibG9ja0dyb3VwKSB8fCB7fTtcbiAgICByZXR1cm4gW1xuICAgICAgXCJkaXZcIixcbiAgICAgIE4oXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5lLFxuICAgICAgICAgIGNsYXNzOiBTKFxuICAgICAgICAgICAgZy5ibG9ja0dyb3VwLFxuICAgICAgICAgICAgZS5jbGFzc1xuICAgICAgICAgICksXG4gICAgICAgICAgXCJkYXRhLW5vZGUtdHlwZVwiOiBcImJsb2NrR3JvdXBcIlxuICAgICAgICB9LFxuICAgICAgICBuXG4gICAgICApLFxuICAgICAgMFxuICAgIF07XG4gIH1cbn0pLCBHZSA9IEcuY3JlYXRlKHtcbiAgbmFtZTogXCJkb2NcIixcbiAgdG9wTm9kZTogITAsXG4gIGNvbnRlbnQ6IFwiYmxvY2tHcm91cFwiXG59KSwgamUgPSAobikgPT4ge1xuICBjb25zdCBlID0gWS5mcm9tU2NoZW1hKG4pO1xuICByZXR1cm4gbmV3IFkoXG4gICAge1xuICAgICAgLi4uZS5ub2Rlc1xuICAgICAgLy8gVE9ETzogSWYgYSBzZXJpYWxpemVyIGlzIGRlZmluZWQgaW4gdGhlIGNvbmZpZyBmb3IgYSBjdXN0b20gYmxvY2ssIGl0XG4gICAgICAvLyAgc2hvdWxkIGJlIGFkZGVkIGhlcmUuIFdlIHN0aWxsIG5lZWQgdG8gZmlndXJlIG91dCBob3cgdGhlIHNlcmlhbGl6ZXJcbiAgICAgIC8vICBzaG91bGQgYmUgZGVmaW5lZCBpbiB0aGUgY3VzdG9tIGJsb2NrcyBBUEkgdGhvdWdoLCBhbmQgaW1wbGVtZW50IHRoYXQsXG4gICAgICAvLyAgYmVmb3JlIHdlIGNhbiBkbyB0aGlzLlxuICAgIH0sXG4gICAgZS5tYXJrc1xuICApO1xufSwgcWUgPSBBLmNyZWF0ZSh7XG4gIGFkZFByb3NlTWlycm9yUGx1Z2lucygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFQoe1xuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGNsaXBib2FyZFNlcmlhbGl6ZXI6IGplKHRoaXMuZWRpdG9yLnNjaGVtYSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBdO1xuICB9XG59KTtcbmNsYXNzIFUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuICAgIHUodGhpcywgXCJjYWxsYmFja3NcIiwge30pO1xuICB9XG4gIG9uKGUsIHQpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsYmFja3NbZV0gfHwgKHRoaXMuY2FsbGJhY2tzW2VdID0gW10pLCB0aGlzLmNhbGxiYWNrc1tlXS5wdXNoKHQpLCAoKSA9PiB0aGlzLm9mZihlLCB0KTtcbiAgfVxuICBlbWl0KGUsIC4uLnQpIHtcbiAgICBjb25zdCBvID0gdGhpcy5jYWxsYmFja3NbZV07XG4gICAgbyAmJiBvLmZvckVhY2goKHIpID0+IHIuYXBwbHkodGhpcywgdCkpO1xuICB9XG4gIG9mZihlLCB0KSB7XG4gICAgY29uc3QgbyA9IHRoaXMuY2FsbGJhY2tzW2VdO1xuICAgIG8gJiYgKHQgPyB0aGlzLmNhbGxiYWNrc1tlXSA9IG8uZmlsdGVyKChyKSA9PiByICE9PSB0KSA6IGRlbGV0ZSB0aGlzLmNhbGxiYWNrc1tlXSk7XG4gIH1cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzKCkge1xuICAgIHRoaXMuY2FsbGJhY2tzID0ge307XG4gIH1cbn1cbmNvbnN0IFhlID0gZWUoXG4gIChuKSA9PiBuLnR5cGUubmFtZSA9PT0gXCJibG9ja0NvbnRhaW5lclwiXG4pO1xuY2xhc3MgS2Uge1xuICBjb25zdHJ1Y3RvcihlLCB0LCBvID0gKCkgPT4ge1xuICB9KSB7XG4gICAgdSh0aGlzLCBcInN1Z2dlc3Rpb25zTWVudVN0YXRlXCIpO1xuICAgIHUodGhpcywgXCJ1cGRhdGVTdWdnZXN0aW9uc01lbnVcIik7XG4gICAgdSh0aGlzLCBcInBsdWdpblN0YXRlXCIpO1xuICAgIHUodGhpcywgXCJoYW5kbGVTY3JvbGxcIiwgKCkgPT4ge1xuICAgICAgdmFyIGU7XG4gICAgICBpZiAoKGUgPSB0aGlzLnN1Z2dlc3Rpb25zTWVudVN0YXRlKSAhPSBudWxsICYmIGUuc2hvdykge1xuICAgICAgICBjb25zdCB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBgW2RhdGEtZGVjb3JhdGlvbi1pZD1cIiR7dGhpcy5wbHVnaW5TdGF0ZS5kZWNvcmF0aW9uSWR9XCJdYFxuICAgICAgICApO1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zTWVudVN0YXRlLnJlZmVyZW5jZVBvcyA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnNNZW51KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5lZGl0b3IgPSBlLCB0aGlzLnBsdWdpbktleSA9IHQsIHRoaXMucGx1Z2luU3RhdGUgPSBKKCksIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnNNZW51ID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnN1Z2dlc3Rpb25zTWVudVN0YXRlKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0aW5nIHRvIHVwZGF0ZSB1bmluaXRpYWxpemVkIHN1Z2dlc3Rpb25zIG1lbnVcIik7XG4gICAgICBvKHRoaXMuc3VnZ2VzdGlvbnNNZW51U3RhdGUpO1xuICAgIH0sIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5oYW5kbGVTY3JvbGwpO1xuICB9XG4gIHVwZGF0ZShlLCB0KSB7XG4gICAgY29uc3QgbyA9IHRoaXMucGx1Z2luS2V5LmdldFN0YXRlKHQpLCByID0gdGhpcy5wbHVnaW5LZXkuZ2V0U3RhdGUoZS5zdGF0ZSksIGkgPSAhby5hY3RpdmUgJiYgci5hY3RpdmUsIHMgPSBvLmFjdGl2ZSAmJiAhci5hY3RpdmUsIGwgPSBvLmFjdGl2ZSAmJiByLmFjdGl2ZTtcbiAgICBpZiAoIWkgJiYgIWwgJiYgIXMpXG4gICAgICByZXR1cm47XG4gICAgaWYgKHRoaXMucGx1Z2luU3RhdGUgPSBzID8gbyA6IHIsIHMgfHwgIXRoaXMuZWRpdG9yLmlzRWRpdGFibGUpIHtcbiAgICAgIHRoaXMuc3VnZ2VzdGlvbnNNZW51U3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zTWVudSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS1kZWNvcmF0aW9uLWlkPVwiJHt0aGlzLnBsdWdpblN0YXRlLmRlY29yYXRpb25JZH1cIl1gXG4gICAgKTtcbiAgICB0aGlzLmVkaXRvci5pc0VkaXRhYmxlICYmICh0aGlzLnN1Z2dlc3Rpb25zTWVudVN0YXRlID0ge1xuICAgICAgc2hvdzogITAsXG4gICAgICByZWZlcmVuY2VQb3M6IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICBmaWx0ZXJlZEl0ZW1zOiB0aGlzLnBsdWdpblN0YXRlLml0ZW1zLFxuICAgICAga2V5Ym9hcmRIb3ZlcmVkSXRlbUluZGV4OiB0aGlzLnBsdWdpblN0YXRlLmtleWJvYXJkSG92ZXJlZEl0ZW1JbmRleFxuICAgIH0sIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnNNZW51KCkpO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLmhhbmRsZVNjcm9sbCk7XG4gIH1cbn1cbmZ1bmN0aW9uIEooKSB7XG4gIHJldHVybiB7XG4gICAgYWN0aXZlOiAhMSxcbiAgICB0cmlnZ2VyQ2hhcmFjdGVyOiB2b2lkIDAsXG4gICAgcXVlcnlTdGFydFBvczogdm9pZCAwLFxuICAgIGl0ZW1zOiBbXSxcbiAgICBrZXlib2FyZEhvdmVyZWRJdGVtSW5kZXg6IHZvaWQgMCxcbiAgICBub3RGb3VuZENvdW50OiAwLFxuICAgIGRlY29yYXRpb25JZDogdm9pZCAwXG4gIH07XG59XG5jb25zdCBZZSA9IChuLCBlLCB0LCBvLCByID0gKCkgPT4gW10sIGkgPSAoKSA9PiB7XG59KSA9PiB7XG4gIGlmIChvLmxlbmd0aCAhPT0gMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCInY2hhcicgc2hvdWxkIGJlIGEgc2luZ2xlIGNoYXJhY3RlclwiKTtcbiAgbGV0IHM7XG4gIGNvbnN0IGwgPSAoYSkgPT4ge1xuICAgIGEuZGlzcGF0Y2goYS5zdGF0ZS50ci5zZXRNZXRhKHQsIHsgZGVhY3RpdmF0ZTogITAgfSkpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHBsdWdpbjogbmV3IFQoe1xuICAgICAga2V5OiB0LFxuICAgICAgdmlldzogKCkgPT4gKHMgPSBuZXcgS2UoXG4gICAgICAgIG4sXG4gICAgICAgIHQsXG4gICAgICAgIGVcbiAgICAgICksIHMpLFxuICAgICAgc3RhdGU6IHtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcGx1Z2luJ3MgaW50ZXJuYWwgc3RhdGUuXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgcmV0dXJuIEooKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQXBwbHkgY2hhbmdlcyB0byB0aGUgcGx1Z2luIHN0YXRlIGZyb20gYW4gZWRpdG9yIHRyYW5zYWN0aW9uLlxuICAgICAgICBhcHBseShhLCBkLCBjLCBtKSB7XG4gICAgICAgICAgdmFyIHAsIGYsIGssIHY7XG4gICAgICAgICAgaWYgKGEuZ2V0TWV0YShcIm9yZGVyZWRMaXN0SW5kZXhpbmdcIikgIT09IHZvaWQgMClcbiAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgIGlmICgocCA9IGEuZ2V0TWV0YSh0KSkgIT0gbnVsbCAmJiBwLmFjdGl2YXRlKVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgYWN0aXZlOiAhMCxcbiAgICAgICAgICAgICAgdHJpZ2dlckNoYXJhY3RlcjogKChmID0gYS5nZXRNZXRhKHQpKSA9PSBudWxsID8gdm9pZCAwIDogZi50cmlnZ2VyQ2hhcmFjdGVyKSB8fCBcIlwiLFxuICAgICAgICAgICAgICBxdWVyeVN0YXJ0UG9zOiBtLnNlbGVjdGlvbi5mcm9tLFxuICAgICAgICAgICAgICBpdGVtczogcihcIlwiKSxcbiAgICAgICAgICAgICAga2V5Ym9hcmRIb3ZlcmVkSXRlbUluZGV4OiAwLFxuICAgICAgICAgICAgICAvLyBUT0RPOiBNYXliZSBzaG91bGQgYmUgMSBpZiB0aGUgbWVudSBoYXMgbm8gcG9zc2libGUgaXRlbXM/IFByb2JhYmx5IHJlZHVuZGFudCBzaW5jZSBhIG1lbnUgd2l0aCBubyBpdGVtc1xuICAgICAgICAgICAgICAvLyAgaXMgdXNlbGVzcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICAgICAgbm90Rm91bmRDb3VudDogMCxcbiAgICAgICAgICAgICAgZGVjb3JhdGlvbklkOiBgaWRfJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0Mjk0OTY3Mjk1KX1gXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGlmICghZC5hY3RpdmUpXG4gICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgICBjb25zdCBoID0geyAuLi5kIH07XG4gICAgICAgICAgaWYgKGguaXRlbXMgPSByKFxuICAgICAgICAgICAgbS5kb2MudGV4dEJldHdlZW4oXG4gICAgICAgICAgICAgIGQucXVlcnlTdGFydFBvcyxcbiAgICAgICAgICAgICAgbS5zZWxlY3Rpb24uZnJvbVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIGgubm90Rm91bmRDb3VudCA9IDAsIGguaXRlbXMubGVuZ3RoID09PSAwICYmIChoLm5vdEZvdW5kQ291bnQgPSBNYXRoLm1heChcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBkLm5vdEZvdW5kQ291bnQgKyAobS5zZWxlY3Rpb24uZnJvbSAtIGMuc2VsZWN0aW9uLmZyb20pXG4gICAgICAgICAgKSksIC8vIEhpZ2hsaWdodGluZyB0ZXh0IHNob3VsZCBoaWRlIHRoZSBtZW51LlxuICAgICAgICAgIG0uc2VsZWN0aW9uLmZyb20gIT09IG0uc2VsZWN0aW9uLnRvIHx8IC8vIFRyYW5zYWN0aW9ucyB3aXRoIHBsdWdpbiBtZXRhZGF0YSB7ZGVhY3RpdmF0ZTogdHJ1ZX0gc2hvdWxkIGhpZGUgdGhlIG1lbnUuXG4gICAgICAgICAgKGsgPSBhLmdldE1ldGEodCkpICE9IG51bGwgJiYgay5kZWFjdGl2YXRlIHx8IC8vIENlcnRhaW4gbW91c2UgZXZlbnRzIHNob3VsZCBoaWRlIHRoZSBtZW51LlxuICAgICAgICAgIC8vIFRPRE86IENoYW5nZSB0byBnbG9iYWwgbW91c2Vkb3duIGxpc3RlbmVyLlxuICAgICAgICAgIGEuZ2V0TWV0YShcImZvY3VzXCIpIHx8IGEuZ2V0TWV0YShcImJsdXJcIikgfHwgYS5nZXRNZXRhKFwicG9pbnRlclwiKSB8fCAvLyBNb3ZpbmcgdGhlIGNhcmV0IGJlZm9yZSB0aGUgY2hhcmFjdGVyIHdoaWNoIHRyaWdnZXJlZCB0aGUgbWVudSBzaG91bGQgaGlkZSBpdC5cbiAgICAgICAgICBkLmFjdGl2ZSAmJiBtLnNlbGVjdGlvbi5mcm9tIDwgZC5xdWVyeVN0YXJ0UG9zIHx8IC8vIEVudGVyaW5nIG1vcmUgdGhhbiAzIGNoYXJhY3RlcnMsIGFmdGVyIHRoZSBsYXN0IHF1ZXJ5IHRoYXQgbWF0Y2hlZCB3aXRoIGF0IGxlYXN0IDEgbWVudSBpdGVtLCBzaG91bGQgaGlkZVxuICAgICAgICAgIC8vIHRoZSBtZW51LlxuICAgICAgICAgIGgubm90Rm91bmRDb3VudCA+IDMpXG4gICAgICAgICAgICByZXR1cm4gSigpO1xuICAgICAgICAgIGlmICgoKHYgPSBhLmdldE1ldGEodCkpID09IG51bGwgPyB2b2lkIDAgOiB2LnNlbGVjdGVkSXRlbUluZGV4Q2hhbmdlZCkgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbGV0IHcgPSBhLmdldE1ldGEodCkuc2VsZWN0ZWRJdGVtSW5kZXhDaGFuZ2VkO1xuICAgICAgICAgICAgdyA8IDAgPyB3ID0gZC5pdGVtcy5sZW5ndGggLSAxIDogdyA+PSBkLml0ZW1zLmxlbmd0aCAmJiAodyA9IDApLCBoLmtleWJvYXJkSG92ZXJlZEl0ZW1JbmRleCA9IHc7XG4gICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnNlbGVjdGlvbi5mcm9tICE9PSBtLnNlbGVjdGlvbi5mcm9tICYmIChoLmtleWJvYXJkSG92ZXJlZEl0ZW1JbmRleCA9IDApO1xuICAgICAgICAgIHJldHVybiBoO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgaGFuZGxlS2V5RG93bihhLCBkKSB7XG4gICAgICAgICAgY29uc3QgYyA9IHRoaXMuZ2V0U3RhdGUoYS5zdGF0ZSkuYWN0aXZlO1xuICAgICAgICAgIGlmIChkLmtleSA9PT0gbyAmJiAhYylcbiAgICAgICAgICAgIHJldHVybiBhLmRpc3BhdGNoKFxuICAgICAgICAgICAgICBhLnN0YXRlLnRyLmluc2VydFRleHQobykuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKHQsIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZTogITAsXG4gICAgICAgICAgICAgICAgdHJpZ2dlckNoYXJhY3Rlcjogb1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSwgITA7XG4gICAgICAgICAgaWYgKCFjKVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRyaWdnZXJDaGFyYWN0ZXI6IG0sXG4gICAgICAgICAgICBxdWVyeVN0YXJ0UG9zOiBoLFxuICAgICAgICAgICAgaXRlbXM6IHAsXG4gICAgICAgICAgICBrZXlib2FyZEhvdmVyZWRJdGVtSW5kZXg6IGZcbiAgICAgICAgICB9ID0gdC5nZXRTdGF0ZShhLnN0YXRlKTtcbiAgICAgICAgICByZXR1cm4gZC5rZXkgPT09IFwiQXJyb3dVcFwiID8gKGEuZGlzcGF0Y2goXG4gICAgICAgICAgICBhLnN0YXRlLnRyLnNldE1ldGEodCwge1xuICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleENoYW5nZWQ6IGYgLSAxXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICksICEwKSA6IGQua2V5ID09PSBcIkFycm93RG93blwiID8gKGEuZGlzcGF0Y2goXG4gICAgICAgICAgICBhLnN0YXRlLnRyLnNldE1ldGEodCwge1xuICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleENoYW5nZWQ6IGYgKyAxXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICksICEwKSA6IGQua2V5ID09PSBcIkVudGVyXCIgPyAobChhKSwgbi5fdGlwdGFwRWRpdG9yLmNoYWluKCkuZm9jdXMoKS5kZWxldGVSYW5nZSh7XG4gICAgICAgICAgICBmcm9tOiBoIC0gbS5sZW5ndGgsXG4gICAgICAgICAgICB0bzogbi5fdGlwdGFwRWRpdG9yLnN0YXRlLnNlbGVjdGlvbi5mcm9tXG4gICAgICAgICAgfSkucnVuKCksIGkoe1xuICAgICAgICAgICAgaXRlbTogcFtmXSxcbiAgICAgICAgICAgIGVkaXRvcjogblxuICAgICAgICAgIH0pLCAhMCkgOiBkLmtleSA9PT0gXCJFc2NhcGVcIiA/IChsKGEpLCAhMCkgOiAhMTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gU2V0dXAgZGVjb3JhdG9yIG9uIHRoZSBjdXJyZW50bHkgYWN0aXZlIHN1Z2dlc3Rpb24uXG4gICAgICAgIGRlY29yYXRpb25zKGEpIHtcbiAgICAgICAgICBjb25zdCB7IGFjdGl2ZTogZCwgZGVjb3JhdGlvbklkOiBjLCBxdWVyeVN0YXJ0UG9zOiBtLCB0cmlnZ2VyQ2hhcmFjdGVyOiBoIH0gPSB0aGlzLmdldFN0YXRlKGEpO1xuICAgICAgICAgIGlmICghZClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIGlmIChoID09PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gWGUoYS5zZWxlY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHApXG4gICAgICAgICAgICAgIHJldHVybiAkLmNyZWF0ZShhLmRvYywgW1xuICAgICAgICAgICAgICAgIFcubm9kZShcbiAgICAgICAgICAgICAgICAgIHAucG9zLFxuICAgICAgICAgICAgICAgICAgcC5wb3MgKyBwLm5vZGUubm9kZVNpemUsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVOYW1lOiBcInNwYW5cIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwic3VnZ2VzdGlvbi1kZWNvcmF0b3JcIixcbiAgICAgICAgICAgICAgICAgICAgXCJkYXRhLWRlY29yYXRpb24taWRcIjogY1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAkLmNyZWF0ZShhLmRvYywgW1xuICAgICAgICAgICAgVy5pbmxpbmUoXG4gICAgICAgICAgICAgIG0gLSBoLmxlbmd0aCxcbiAgICAgICAgICAgICAgbSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5vZGVOYW1lOiBcInNwYW5cIixcbiAgICAgICAgICAgICAgICBjbGFzczogXCJzdWdnZXN0aW9uLWRlY29yYXRvclwiLFxuICAgICAgICAgICAgICAgIFwiZGF0YS1kZWNvcmF0aW9uLWlkXCI6IGNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG4gICAgaXRlbUNhbGxiYWNrOiAoYSkgPT4ge1xuICAgICAgbChuLl90aXB0YXBFZGl0b3IudmlldyksIG4uX3RpcHRhcEVkaXRvci5jaGFpbigpLmZvY3VzKCkuZGVsZXRlUmFuZ2Uoe1xuICAgICAgICBmcm9tOiBzLnBsdWdpblN0YXRlLnF1ZXJ5U3RhcnRQb3MgLSBzLnBsdWdpblN0YXRlLnRyaWdnZXJDaGFyYWN0ZXIubGVuZ3RoLFxuICAgICAgICB0bzogbi5fdGlwdGFwRWRpdG9yLnN0YXRlLnNlbGVjdGlvbi5mcm9tXG4gICAgICB9KS5ydW4oKSwgaSh7XG4gICAgICAgIGl0ZW06IGEsXG4gICAgICAgIGVkaXRvcjogblxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSwgdHQgPSBuZXcgQihcIlNsYXNoTWVudVBsdWdpblwiKTtcbmNsYXNzIEplIGV4dGVuZHMgVSB7XG4gIGNvbnN0cnVjdG9yKHQsIG8pIHtcbiAgICBzdXBlcigpO1xuICAgIHUodGhpcywgXCJwbHVnaW5cIik7XG4gICAgdSh0aGlzLCBcIml0ZW1DYWxsYmFja1wiKTtcbiAgICBjb25zdCByID0gWWUoXG4gICAgICB0LFxuICAgICAgKGkpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIsIGkpO1xuICAgICAgfSxcbiAgICAgIHR0LFxuICAgICAgXCIvXCIsXG4gICAgICAoaSkgPT4gby5maWx0ZXIoXG4gICAgICAgICh7IG5hbWU6IHMsIGFsaWFzZXM6IGwgfSkgPT4gcy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoaS50b0xvd2VyQ2FzZSgpKSB8fCBsICYmIGwuZmlsdGVyKFxuICAgICAgICAgIChhKSA9PiBhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICkubGVuZ3RoICE9PSAwXG4gICAgICApLFxuICAgICAgKHsgaXRlbTogaSwgZWRpdG9yOiBzIH0pID0+IGkuZXhlY3V0ZShzKVxuICAgICk7XG4gICAgdGhpcy5wbHVnaW4gPSByLnBsdWdpbiwgdGhpcy5pdGVtQ2FsbGJhY2sgPSByLml0ZW1DYWxsYmFjaztcbiAgfVxuICBvblVwZGF0ZSh0KSB7XG4gICAgcmV0dXJuIHRoaXMub24oXCJ1cGRhdGVcIiwgdCk7XG4gIH1cbn1cbmNvbnN0IFplID0gbmV3IEIoXCJibG9ja25vdGUtcGxhY2Vob2xkZXJcIiksIFFlID0gQS5jcmVhdGUoe1xuICBuYW1lOiBcInBsYWNlaG9sZGVyXCIsXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVtcHR5RWRpdG9yQ2xhc3M6IFwiaXMtZWRpdG9yLWVtcHR5XCIsXG4gICAgICBlbXB0eU5vZGVDbGFzczogXCJpcy1lbXB0eVwiLFxuICAgICAgaXNGaWx0ZXJDbGFzczogXCJpcy1maWx0ZXJcIixcbiAgICAgIGhhc0FuY2hvckNsYXNzOiBcImhhcy1hbmNob3JcIixcbiAgICAgIHBsYWNlaG9sZGVyOiBcIldyaXRlIHNvbWV0aGluZyDigKZcIixcbiAgICAgIHNob3dPbmx5V2hlbkVkaXRhYmxlOiAhMCxcbiAgICAgIHNob3dPbmx5Q3VycmVudDogITAsXG4gICAgICBpbmNsdWRlQ2hpbGRyZW46ICExXG4gICAgfTtcbiAgfSxcbiAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgVCh7XG4gICAgICAgIGtleTogWmUsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgZGVjb3JhdGlvbnM6IChuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGRvYzogZSwgc2VsZWN0aW9uOiB0IH0gPSBuLCBvID0gdHQuZ2V0U3RhdGUobiksIHIgPSB0aGlzLmVkaXRvci5pc0VkaXRhYmxlIHx8ICF0aGlzLm9wdGlvbnMuc2hvd09ubHlXaGVuRWRpdGFibGUsIHsgYW5jaG9yOiBpIH0gPSB0LCBzID0gW107XG4gICAgICAgICAgICBpZiAocilcbiAgICAgICAgICAgICAgcmV0dXJuIGUuZGVzY2VuZGFudHMoKGwsIGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gaSA+PSBhICYmIGkgPD0gYSArIGwubm9kZVNpemUsIGMgPSAhbC5pc0xlYWYgJiYgIWwuY2hpbGRDb3VudDtcbiAgICAgICAgICAgICAgICBpZiAoKGQgfHwgIXRoaXMub3B0aW9ucy5zaG93T25seUN1cnJlbnQpICYmIGMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBbdGhpcy5vcHRpb25zLmVtcHR5Tm9kZUNsYXNzXTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yLmlzRW1wdHkgJiYgbS5wdXNoKHRoaXMub3B0aW9ucy5lbXB0eUVkaXRvckNsYXNzKSwgZCAmJiBtLnB1c2godGhpcy5vcHRpb25zLmhhc0FuY2hvckNsYXNzKSwgKG8gPT0gbnVsbCA/IHZvaWQgMCA6IG8udHJpZ2dlckNoYXJhY3RlcikgPT09IFwiXCIgJiYgKG8gIT0gbnVsbCAmJiBvLmFjdGl2ZSkgJiYgbS5wdXNoKHRoaXMub3B0aW9ucy5pc0ZpbHRlckNsYXNzKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSBXLm5vZGUoYSwgYSArIGwubm9kZVNpemUsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IG0uam9pbihcIiBcIilcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcy5wdXNoKGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluY2x1ZGVDaGlsZHJlbjtcbiAgICAgICAgICAgICAgfSksICQuY3JlYXRlKGUsIHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBdO1xuICB9XG59KSwgdG8gPSBBLmNyZWF0ZSh7XG4gIG5hbWU6IFwidGV4dEFsaWdubWVudFwiLFxuICBhZGRHbG9iYWxBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIC8vIEF0dHJpYnV0ZSBpcyBhcHBsaWVkIHRvIGJsb2NrIGNvbnRlbnQgaW5zdGVhZCBvZiBjb250YWluZXIgc28gdGhhdCBjaGlsZCBibG9ja3MgZG9uJ3QgaW5oZXJpdCB0aGUgdGV4dFxuICAgICAgICAvLyBhbGlnbm1lbnQgc3R5bGluZy5cbiAgICAgICAgdHlwZXM6IFtcInBhcmFncmFwaFwiLCBcImhlYWRpbmdcIiwgXCJidWxsZXRMaXN0SXRlbVwiLCBcIm51bWJlcmVkTGlzdEl0ZW1cIl0sXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICB0ZXh0QWxpZ25tZW50OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBcImxlZnRcIixcbiAgICAgICAgICAgIHBhcnNlSFRNTDogKG4pID0+IG4uZ2V0QXR0cmlidXRlKFwiZGF0YS10ZXh0LWFsaWdubWVudFwiKSxcbiAgICAgICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiBuLnRleHRBbGlnbm1lbnQgIT09IFwibGVmdFwiICYmIHtcbiAgICAgICAgICAgICAgXCJkYXRhLXRleHQtYWxpZ25tZW50XCI6IG4udGV4dEFsaWdubWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRUZXh0QWxpZ25tZW50OiAobikgPT4gKHsgc3RhdGU6IGUgfSkgPT4ge1xuICAgICAgICBjb25zdCB0ID0gW10sIG8gPSBiKFxuICAgICAgICAgIGUuZG9jLFxuICAgICAgICAgIGUuc2VsZWN0aW9uLmZyb21cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG8gPT09IHZvaWQgMClcbiAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIGxldCByID0gby5zdGFydFBvcztcbiAgICAgICAgZm9yICg7IHIgPCBlLnNlbGVjdGlvbi50bzsgKVxuICAgICAgICAgIGUuZG9jLnJlc29sdmUocikubm9kZSgpLnR5cGUuc3BlYy5ncm91cCA9PT0gXCJibG9ja0NvbnRlbnRcIiA/ICh0LnB1c2gociAtIDEpLCByICs9IGUuZG9jLnJlc29sdmUocikubm9kZSgpLm5vZGVTaXplIC0gMSkgOiByICs9IDE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiB0KVxuICAgICAgICAgIGUudHIuc2V0Tm9kZUF0dHJpYnV0ZShpLCBcInRleHRBbGlnbm1lbnRcIiwgbik7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KSwgZW8gPSBBLmNyZWF0ZSh7XG4gIG5hbWU6IFwiYmxvY2tUZXh0Q29sb3JcIixcbiAgYWRkR2xvYmFsQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0eXBlczogW1wiYmxvY2tDb250YWluZXJcIl0sXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICB0ZXh0Q29sb3I6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IEMudGV4dENvbG9yLmRlZmF1bHQsXG4gICAgICAgICAgICBwYXJzZUhUTUw6IChuKSA9PiBuLmhhc0F0dHJpYnV0ZShcImRhdGEtdGV4dC1jb2xvclwiKSA/IG4uZ2V0QXR0cmlidXRlKFwiZGF0YS10ZXh0LWNvbG9yXCIpIDogQy50ZXh0Q29sb3IuZGVmYXVsdCxcbiAgICAgICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiBuLnRleHRDb2xvciAhPT0gQy50ZXh0Q29sb3IuZGVmYXVsdCAmJiB7XG4gICAgICAgICAgICAgIFwiZGF0YS10ZXh0LWNvbG9yXCI6IG4udGV4dENvbG9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgXTtcbiAgfSxcbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldEJsb2NrVGV4dENvbG9yOiAobiwgZSkgPT4gKHsgc3RhdGU6IHQsIHZpZXc6IG8gfSkgPT4ge1xuICAgICAgICBjb25zdCByID0gYih0LmRvYywgbik7XG4gICAgICAgIHJldHVybiByID09PSB2b2lkIDAgPyAhMSA6ICh0LnRyLnNldE5vZGVBdHRyaWJ1dGUoci5zdGFydFBvcyAtIDEsIFwidGV4dENvbG9yXCIsIGUpLCBvLmZvY3VzKCksICEwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KSwgb28gPSBodC5jcmVhdGUoe1xuICBuYW1lOiBcInRleHRDb2xvclwiLFxuICBhZGRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjoge1xuICAgICAgICBkZWZhdWx0OiB2b2lkIDAsXG4gICAgICAgIHBhcnNlSFRNTDogKG4pID0+IG4uZ2V0QXR0cmlidXRlKFwiZGF0YS10ZXh0LWNvbG9yXCIpLFxuICAgICAgICByZW5kZXJIVE1MOiAobikgPT4gKHtcbiAgICAgICAgICBcImRhdGEtdGV4dC1jb2xvclwiOiBuLmNvbG9yXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRhZzogXCJzcGFuXCIsXG4gICAgICAgIGdldEF0dHJzOiAobikgPT4gdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiA/ICExIDogbi5oYXNBdHRyaWJ1dGUoXCJkYXRhLXRleHQtY29sb3JcIikgPyB7IGNvbG9yOiBuLmdldEF0dHJpYnV0ZShcImRhdGEtdGV4dC1jb2xvclwiKSB9IDogITFcbiAgICAgIH1cbiAgICBdO1xuICB9LFxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXM6IG4gfSkge1xuICAgIHJldHVybiBbXCJzcGFuXCIsIG4sIDBdO1xuICB9LFxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0VGV4dENvbG9yOiAobikgPT4gKHsgY29tbWFuZHM6IGUgfSkgPT4gbiAhPT0gQy50ZXh0Q29sb3IuZGVmYXVsdCA/IGUuc2V0TWFyayh0aGlzLm5hbWUsIHsgY29sb3I6IG4gfSkgOiBlLnVuc2V0TWFyayh0aGlzLm5hbWUpXG4gICAgfTtcbiAgfVxufSksIG5vID0gQS5jcmVhdGUoe1xuICBuYW1lOiBcInRyYWlsaW5nTm9kZVwiLFxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgY29uc3QgbiA9IG5ldyBCKHRoaXMubmFtZSk7XG4gICAgcmV0dXJuIFtcbiAgICAgIG5ldyBUKHtcbiAgICAgICAga2V5OiBuLFxuICAgICAgICBhcHBlbmRUcmFuc2FjdGlvbjogKGUsIHQsIG8pID0+IHtcbiAgICAgICAgICBjb25zdCB7IGRvYzogciwgdHI6IGksIHNjaGVtYTogcyB9ID0gbywgbCA9IG4uZ2V0U3RhdGUobyksIGEgPSByLmNvbnRlbnQuc2l6ZSAtIDIsIGQgPSBzLm5vZGVzLmJsb2NrQ29udGFpbmVyLCBjID0gcy5ub2Rlcy5wYXJhZ3JhcGg7XG4gICAgICAgICAgaWYgKGwpXG4gICAgICAgICAgICByZXR1cm4gaS5pbnNlcnQoXG4gICAgICAgICAgICAgIGEsXG4gICAgICAgICAgICAgIGQuY3JlYXRlKHZvaWQgMCwgYy5jcmVhdGUoKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgaW5pdDogKGUsIHQpID0+IHtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFwcGx5OiAoZSwgdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgbGV0IG8gPSBlLmRvYy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoIW8gfHwgby50eXBlLm5hbWUgIT09IFwiYmxvY2tHcm91cFwiKVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBibG9ja0dyb3VwXCIpO1xuICAgICAgICAgICAgaWYgKG8gPSBvLmxhc3RDaGlsZCwgIW8gfHwgby50eXBlLm5hbWUgIT09IFwiYmxvY2tDb250YWluZXJcIilcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgYmxvY2tDb250YWluZXJcIik7XG4gICAgICAgICAgICBjb25zdCByID0gby5maXJzdENoaWxkO1xuICAgICAgICAgICAgaWYgKCFyKVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBibG9ja0NvbnRlbnRcIik7XG4gICAgICAgICAgICByZXR1cm4gby5ub2RlU2l6ZSA+IDQgfHwgci50eXBlLnNwZWMuY29udGVudCAhPT0gXCJpbmxpbmUqXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIF07XG4gIH1cbn0pLCBybyA9IChuKSA9PiB7XG4gIHZhciB0O1xuICBjb25zdCBlID0gW1xuICAgIFIuQ2xpcGJvYXJkVGV4dFNlcmlhbGl6ZXIsXG4gICAgUi5Db21tYW5kcyxcbiAgICBSLkVkaXRhYmxlLFxuICAgIFIuRm9jdXNFdmVudHMsXG4gICAgUi5UYWJpbmRleCxcbiAgICAvLyBEZXZUb29scyxcbiAgICBjZSxcbiAgICAvLyBEcm9wQ3Vyc29yLFxuICAgIFFlLmNvbmZpZ3VyZSh7XG4gICAgICBlbXB0eU5vZGVDbGFzczogZy5pc0VtcHR5LFxuICAgICAgaGFzQW5jaG9yQ2xhc3M6IGcuaGFzQW5jaG9yLFxuICAgICAgaXNGaWx0ZXJDbGFzczogZy5pc0ZpbHRlcixcbiAgICAgIGluY2x1ZGVDaGlsZHJlbjogITAsXG4gICAgICBzaG93T25seUN1cnJlbnQ6ICExXG4gICAgfSksXG4gICAgai5jb25maWd1cmUoe1xuICAgICAgdHlwZXM6IFtcImJsb2NrQ29udGFpbmVyXCJdXG4gICAgfSksXG4gICAgdWUsXG4gICAgLy8gQ29tbWVudHMsXG4gICAgLy8gYmFzaWNzOlxuICAgIGdlLFxuICAgIC8vIG1hcmtzOlxuICAgIGllLFxuICAgIHNlLFxuICAgIGhlLFxuICAgIGZlLFxuICAgIGtlLFxuICAgIG1lLFxuICAgIG9vLFxuICAgIGVvLFxuICAgIF9lLFxuICAgIEFlLFxuICAgIHRvLFxuICAgIC8vIG5vZGVzXG4gICAgR2UsXG4gICAgV2UuY29uZmlndXJlKHtcbiAgICAgIGRvbUF0dHJpYnV0ZXM6IG4uZG9tQXR0cmlidXRlc1xuICAgIH0pLFxuICAgICRlLmNvbmZpZ3VyZSh7XG4gICAgICBkb21BdHRyaWJ1dGVzOiBuLmRvbUF0dHJpYnV0ZXNcbiAgICB9KSxcbiAgICAuLi5PYmplY3QudmFsdWVzKG4uYmxvY2tTY2hlbWEpLm1hcChcbiAgICAgIChvKSA9PiBvLm5vZGUuY29uZmlndXJlKHtcbiAgICAgICAgZWRpdG9yOiBuLmVkaXRvcixcbiAgICAgICAgZG9tQXR0cmlidXRlczogbi5kb21BdHRyaWJ1dGVzXG4gICAgICB9KVxuICAgICksXG4gICAgcWUsXG4gICAgZGUuY29uZmlndXJlKHsgd2lkdGg6IDUsIGNvbG9yOiBcIiNkZGVlZmZcIiB9KSxcbiAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGF0IHRoZSBib3R0b20gb2YgdGhpcyBsaXN0LCBiZWNhdXNlIEtleSBldmVudHMgKHN1Y2ggYXMgZW50ZXIsIHdoZW4gc2VsZWN0aW5nIGEgL2NvbW1hbmQpLFxuICAgIC8vIHNob3VsZCBiZSBoYW5kbGVkIGJlZm9yZSBFbnRlciBoYW5kbGVycyBpbiBvdGhlciBjb21wb25lbnRzIGxpa2Ugc3BsaXRMaXN0SXRlbVxuICAgIG5vXG4gIF07XG4gIGlmIChuLmNvbGxhYm9yYXRpb24pIHtcbiAgICBpZiAoZS5wdXNoKFxuICAgICAgYWUuY29uZmlndXJlKHtcbiAgICAgICAgZnJhZ21lbnQ6IG4uY29sbGFib3JhdGlvbi5mcmFnbWVudFxuICAgICAgfSlcbiAgICApLCAodCA9IG4uY29sbGFib3JhdGlvbi5wcm92aWRlcikgIT0gbnVsbCAmJiB0LmF3YXJlbmVzcykge1xuICAgICAgY29uc3QgbyA9IChyKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgaS5jbGFzc0xpc3QuYWRkKERbXCJjb2xsYWJvcmF0aW9uLWN1cnNvcl9fY2FyZXRcIl0pLCBpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGBib3JkZXItY29sb3I6ICR7ci5jb2xvcn1gKTtcbiAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBzLmNsYXNzTGlzdC5hZGQoRFtcImNvbGxhYm9yYXRpb24tY3Vyc29yX19sYWJlbFwiXSksIHMuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYGJhY2tncm91bmQtY29sb3I6ICR7ci5jb2xvcn1gKSwgcy5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoci5uYW1lKSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IGwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIuKBoFwiKSwgYSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwi4oGgXCIpO1xuICAgICAgICByZXR1cm4gaS5pbnNlcnRCZWZvcmUobCwgbnVsbCksIGkuaW5zZXJ0QmVmb3JlKHMsIG51bGwpLCBpLmluc2VydEJlZm9yZShhLCBudWxsKSwgaTtcbiAgICAgIH07XG4gICAgICBlLnB1c2goXG4gICAgICAgIGxlLmNvbmZpZ3VyZSh7XG4gICAgICAgICAgdXNlcjogbi5jb2xsYWJvcmF0aW9uLnVzZXIsXG4gICAgICAgICAgcmVuZGVyOiBuLmNvbGxhYm9yYXRpb24ucmVuZGVyQ3Vyc29yIHx8IG8sXG4gICAgICAgICAgcHJvdmlkZXI6IG4uY29sbGFib3JhdGlvbi5wcm92aWRlclxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZVxuICAgIGUucHVzaChwZSk7XG4gIHJldHVybiBlO1xufTtcbmZ1bmN0aW9uIGV0KG4sIGUpIHtcbiAgbGV0IHQsIG87XG4gIGlmIChlLmZpcnN0Q2hpbGQuZGVzY2VuZGFudHMoKHIsIGkpID0+IHQgPyAhMSA6IHIudHlwZS5uYW1lICE9PSBcImJsb2NrQ29udGFpbmVyXCIgfHwgci5hdHRycy5pZCAhPT0gbiA/ICEwIDogKHQgPSByLCBvID0gaSArIDEsICExKSksIHQgPT09IHZvaWQgMCB8fCBvID09PSB2b2lkIDApXG4gICAgdGhyb3cgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBibG9jayBpbiB0aGUgZWRpdG9yIHdpdGggbWF0Y2hpbmcgSUQuXCIpO1xuICByZXR1cm4ge1xuICAgIG5vZGU6IHQsXG4gICAgcG9zQmVmb3JlTm9kZTogb1xuICB9O1xufVxuZnVuY3Rpb24gVXQobiwgZSwgdCA9IFwiYmVmb3JlXCIsIG8pIHtcbiAgY29uc3QgciA9IHR5cGVvZiBlID09IFwic3RyaW5nXCIgPyBlIDogZS5pZCwgaSA9IFtdO1xuICBmb3IgKGNvbnN0IGQgb2YgbilcbiAgICBpLnB1c2goVihkLCBvLnNjaGVtYSkpO1xuICBsZXQgcyA9IC0xO1xuICBjb25zdCB7IG5vZGU6IGwsIHBvc0JlZm9yZU5vZGU6IGEgfSA9IGV0KHIsIG8uc3RhdGUuZG9jKTtcbiAgaWYgKHQgPT09IFwiYmVmb3JlXCIgJiYgKHMgPSBhKSwgdCA9PT0gXCJhZnRlclwiICYmIChzID0gYSArIGwubm9kZVNpemUpLCB0ID09PSBcIm5lc3RlZFwiKSB7XG4gICAgaWYgKGwuY2hpbGRDb3VudCA8IDIpIHtcbiAgICAgIHMgPSBhICsgbC5maXJzdENoaWxkLm5vZGVTaXplICsgMTtcbiAgICAgIGNvbnN0IGQgPSBvLnN0YXRlLnNjaGVtYS5ub2Rlcy5ibG9ja0dyb3VwLmNyZWF0ZShcbiAgICAgICAge30sXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgICBvLnZpZXcuZGlzcGF0Y2goXG4gICAgICAgIG8uc3RhdGUudHIuaW5zZXJ0KHMsIGQpXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzID0gYSArIGwuZmlyc3RDaGlsZC5ub2RlU2l6ZSArIDI7XG4gIH1cbiAgby52aWV3LmRpc3BhdGNoKG8uc3RhdGUudHIuaW5zZXJ0KHMsIGkpKTtcbn1cbmZ1bmN0aW9uIGlvKG4sIGUsIHQpIHtcbiAgY29uc3QgbyA9IHR5cGVvZiBuID09IFwic3RyaW5nXCIgPyBuIDogbi5pZCwgeyBwb3NCZWZvcmVOb2RlOiByIH0gPSBldChvLCB0LnN0YXRlLmRvYyk7XG4gIHQuY29tbWFuZHMuQk5VcGRhdGVCbG9jayhyICsgMSwgZSk7XG59XG5mdW5jdGlvbiBGdChuLCBlKSB7XG4gIGNvbnN0IHQgPSBuZXcgU2V0KFxuICAgIG4ubWFwKFxuICAgICAgKHIpID0+IHR5cGVvZiByID09IFwic3RyaW5nXCIgPyByIDogci5pZFxuICAgIClcbiAgKTtcbiAgbGV0IG8gPSAwO1xuICBpZiAoZS5zdGF0ZS5kb2MuZGVzY2VuZGFudHMoKHIsIGkpID0+IHtcbiAgICBpZiAodC5zaXplID09PSAwKVxuICAgICAgcmV0dXJuICExO1xuICAgIGlmIChyLnR5cGUubmFtZSAhPT0gXCJibG9ja0NvbnRhaW5lclwiIHx8ICF0LmhhcyhyLmF0dHJzLmlkKSlcbiAgICAgIHJldHVybiAhMDtcbiAgICB0LmRlbGV0ZShyLmF0dHJzLmlkKTtcbiAgICBjb25zdCBzID0gZS5zdGF0ZS5kb2Mubm9kZVNpemU7XG4gICAgZS5jb21tYW5kcy5CTkRlbGV0ZUJsb2NrKGkgLSBvICsgMSk7XG4gICAgY29uc3QgbCA9IGUuc3RhdGUuZG9jLm5vZGVTaXplO1xuICAgIHJldHVybiBvICs9IHMgLSBsLCAhMTtcbiAgfSksIHQuc2l6ZSA+IDApIHtcbiAgICBjb25zdCByID0gWy4uLnRdLmpvaW4oYFxuYCk7XG4gICAgdGhyb3cgRXJyb3IoXG4gICAgICBcIkJsb2NrcyB3aXRoIHRoZSBmb2xsb3dpbmcgSURzIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgZWRpdG9yOiBcIiArIHJcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBzbyhuLCBlLCB0KSB7XG4gIFV0KGUsIG5bMF0sIFwiYmVmb3JlXCIsIHQpLCBGdChuLCB0KTtcbn1cbmZ1bmN0aW9uIGFvKCkge1xuICBjb25zdCBuID0gKGUpID0+IHtcbiAgICBsZXQgdCA9IGUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGZvciAobGV0IG8gPSAwOyBvIDwgdDsgbysrKSB7XG4gICAgICBjb25zdCByID0gZS5jaGlsZHJlbltvXTtcbiAgICAgIGlmIChyLnR5cGUgPT09IFwiZWxlbWVudFwiICYmIChuKHIpLCByLnRhZ05hbWUgPT09IFwidVwiKSlcbiAgICAgICAgaWYgKHIuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGUuY2hpbGRyZW4uc3BsaWNlKG8sIDEsIC4uLnIuY2hpbGRyZW4pO1xuICAgICAgICAgIGNvbnN0IGkgPSByLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgdCArPSBpLCBvICs9IGk7XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgIGUuY2hpbGRyZW4uc3BsaWNlKG8sIDEpLCB0LS0sIG8tLTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gbG8obikge1xuICBjb25zdCBlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICAgIC4uLm4ub3JkZXJlZExpc3RJdGVtQmxvY2tUeXBlcyxcbiAgICAuLi5uLnVub3JkZXJlZExpc3RJdGVtQmxvY2tUeXBlc1xuICBdKSwgdCA9IChvKSA9PiB7XG4gICAgbGV0IHIgPSBvLmNoaWxkcmVuLmxlbmd0aCwgaTtcbiAgICBmb3IgKGxldCBzID0gMDsgcyA8IHI7IHMrKykge1xuICAgICAgY29uc3QgYSA9IG8uY2hpbGRyZW5bc10uY2hpbGRyZW5bMF0sIGQgPSBhLmNoaWxkcmVuWzBdLCBjID0gYS5jaGlsZHJlbi5sZW5ndGggPT09IDIgPyBhLmNoaWxkcmVuWzFdIDogbnVsbCwgbSA9IGUuaGFzKFxuICAgICAgICBkLnByb3BlcnRpZXMuZGF0YUNvbnRlbnRUeXBlXG4gICAgICApLCBoID0gbSA/IG4ub3JkZXJlZExpc3RJdGVtQmxvY2tUeXBlcy5oYXMoXG4gICAgICAgIGQucHJvcGVydGllcy5kYXRhQ29udGVudFR5cGVcbiAgICAgICkgPyBcIm9sXCIgOiBcInVsXCIgOiBudWxsO1xuICAgICAgaWYgKGMgIT09IG51bGwgJiYgdChjKSwgaSAmJiBpLnRhZ05hbWUgIT09IGgpIHtcbiAgICAgICAgby5jaGlsZHJlbi5zcGxpY2UoXG4gICAgICAgICAgcyAtIGkuY2hpbGRyZW4ubGVuZ3RoLFxuICAgICAgICAgIGkuY2hpbGRyZW4ubGVuZ3RoLFxuICAgICAgICAgIGlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcCA9IGkuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgICAgcyAtPSBwLCByIC09IHAsIGkgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICBpZiAobSkge1xuICAgICAgICBpIHx8IChpID0gc3QoXG4gICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChoKVxuICAgICAgICApKTtcbiAgICAgICAgY29uc3QgcCA9IHN0KFxuICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKVxuICAgICAgICApO1xuICAgICAgICBwLmNoaWxkcmVuLnB1c2goZC5jaGlsZHJlblswXSksIGMgIT09IG51bGwgJiYgcC5jaGlsZHJlbi5wdXNoKC4uLmMuY2hpbGRyZW4pLCBpLmNoaWxkcmVuLnB1c2gocCk7XG4gICAgICB9IGVsc2UgaWYgKGMgIT09IG51bGwpIHtcbiAgICAgICAgby5jaGlsZHJlbi5zcGxpY2UocyArIDEsIDAsIC4uLmMuY2hpbGRyZW4pLCBvLmNoaWxkcmVuW3NdID0gZC5jaGlsZHJlblswXTtcbiAgICAgICAgY29uc3QgcCA9IGMuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICBzICs9IHAsIHIgKz0gcDtcbiAgICAgIH0gZWxzZVxuICAgICAgICBvLmNoaWxkcmVuW3NdID0gZC5jaGlsZHJlblswXTtcbiAgICB9XG4gICAgaSAmJiBvLmNoaWxkcmVuLnNwbGljZShcbiAgICAgIHIgLSBpLmNoaWxkcmVuLmxlbmd0aCxcbiAgICAgIGkuY2hpbGRyZW4ubGVuZ3RoLFxuICAgICAgaVxuICAgICk7XG4gIH07XG4gIHJldHVybiB0O1xufVxuYXN5bmMgZnVuY3Rpb24gV3QobiwgZSkge1xuICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgbyA9IFkuZnJvbVNjaGVtYShlKTtcbiAgZm9yIChjb25zdCBpIG9mIG4pIHtcbiAgICBjb25zdCBzID0gVihpLCBlKSwgbCA9IG8uc2VyaWFsaXplTm9kZShzKTtcbiAgICB0LmFwcGVuZENoaWxkKGwpO1xuICB9XG4gIHJldHVybiAoYXdhaXQgUSgpLnVzZShmdCwgeyBmcmFnbWVudDogITAgfSkudXNlKGxvLCB7XG4gICAgb3JkZXJlZExpc3RJdGVtQmxvY2tUeXBlczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1wibnVtYmVyZWRMaXN0SXRlbVwiXSksXG4gICAgdW5vcmRlcmVkTGlzdEl0ZW1CbG9ja1R5cGVzOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJidWxsZXRMaXN0SXRlbVwiXSlcbiAgfSkudXNlKGd0KS5wcm9jZXNzKHQuaW5uZXJIVE1MKSkudmFsdWU7XG59XG5hc3luYyBmdW5jdGlvbiAkdChuLCBlLCB0KSB7XG4gIGNvbnN0IG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBvLmlubmVySFRNTCA9IG4udHJpbSgpO1xuICBjb25zdCBpID0gYmUuZnJvbVNjaGVtYSh0KS5wYXJzZShvKSwgcyA9IFtdO1xuICBmb3IgKGxldCBsID0gMDsgbCA8IGkuZmlyc3RDaGlsZC5jaGlsZENvdW50OyBsKyspXG4gICAgcy5wdXNoKHgoaS5maXJzdENoaWxkLmNoaWxkKGwpLCBlKSk7XG4gIHJldHVybiBzO1xufVxuYXN5bmMgZnVuY3Rpb24gY28obiwgZSkge1xuICByZXR1cm4gKGF3YWl0IFEoKS51c2UoZnQsIHsgZnJhZ21lbnQ6ICEwIH0pLnVzZShhbykudXNlKHdlKS51c2Uoa3QpLnVzZShUZSkucHJvY2Vzcyhhd2FpdCBXdChuLCBlKSkpLnZhbHVlO1xufVxuZnVuY3Rpb24gdW8obiwgZSkge1xuICBjb25zdCB0ID0gZS52YWx1ZSA/IGUudmFsdWUgKyBgXG5gIDogXCJcIiwgbyA9IHt9O1xuICBlLmxhbmcgJiYgKG9bXCJkYXRhLWxhbmd1YWdlXCJdID0gZS5sYW5nKTtcbiAgbGV0IHIgPSB7XG4gICAgdHlwZTogXCJlbGVtZW50XCIsXG4gICAgdGFnTmFtZTogXCJjb2RlXCIsXG4gICAgcHJvcGVydGllczogbyxcbiAgICBjaGlsZHJlbjogW3sgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiB0IH1dXG4gIH07XG4gIHJldHVybiBlLm1ldGEgJiYgKHIuZGF0YSA9IHsgbWV0YTogZS5tZXRhIH0pLCBuLnBhdGNoKGUsIHIpLCByID0gbi5hcHBseURhdGEoZSwgciksIHIgPSB7XG4gICAgdHlwZTogXCJlbGVtZW50XCIsXG4gICAgdGFnTmFtZTogXCJwcmVcIixcbiAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICBjaGlsZHJlbjogW3JdXG4gIH0sIG4ucGF0Y2goZSwgciksIHI7XG59XG5hc3luYyBmdW5jdGlvbiBwbyhuLCBlLCB0KSB7XG4gIGNvbnN0IG8gPSBhd2FpdCBRKCkudXNlKENlKS51c2Uoa3QpLnVzZShFZSwge1xuICAgIGhhbmRsZXJzOiB7XG4gICAgICAuLi5TZSxcbiAgICAgIGNvZGU6IHVvXG4gICAgfVxuICB9KS51c2UoZ3QpLnByb2Nlc3Mobik7XG4gIHJldHVybiAkdChvLnZhbHVlLCBlLCB0KTtcbn1cbmZ1bmN0aW9uIGR0KG4pIHtcbiAgcmV0dXJuIFwiZGF0YS1cIiArIG4ucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMS0kMlwiKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gaG8obikge1xuICBjb25zdCBlID0ge307XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhuLnByb3BTY2hlbWEpLmZvckVhY2goKFt0LCBvXSkgPT4ge1xuICAgIGVbdF0gPSB7XG4gICAgICBkZWZhdWx0OiBvLmRlZmF1bHQsXG4gICAgICBrZWVwT25TcGxpdDogITAsXG4gICAgICAvLyBQcm9wcyBhcmUgZGlzcGxheWVkIGluIGtlYmFiLWNhc2UgYXMgSFRNTCBhdHRyaWJ1dGVzLiBJZiBhIHByb3Anc1xuICAgICAgLy8gdmFsdWUgaXMgdGhlIHNhbWUgYXMgaXRzIGRlZmF1bHQsIHdlIGRvbid0IGRpc3BsYXkgYW4gSFRNTFxuICAgICAgLy8gYXR0cmlidXRlIGZvciBpdC5cbiAgICAgIHBhcnNlSFRNTDogKHIpID0+IHIuZ2V0QXR0cmlidXRlKGR0KHQpKSxcbiAgICAgIHJlbmRlckhUTUw6IChyKSA9PiByW3RdICE9PSBvLmRlZmF1bHQgPyB7XG4gICAgICAgIFtkdCh0KV06IHJbdF1cbiAgICAgIH0gOiB7fVxuICAgIH07XG4gIH0pLCBlO1xufVxuZnVuY3Rpb24gbW8obikge1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHRhZzogXCJkaXZbZGF0YS1jb250ZW50LXR5cGU9XCIgKyBuLnR5cGUgKyBcIl1cIlxuICAgIH1cbiAgXTtcbn1cbmZ1bmN0aW9uIGZvKG4sIGUpIHtcbiAgY29uc3QgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHQuc2V0QXR0cmlidXRlKFwiZGF0YS1jb250ZW50LXR5cGVcIiwgbi50eXBlKTtcbiAgZm9yIChjb25zdCBbciwgaV0gb2YgT2JqZWN0LmVudHJpZXMoZSkpXG4gICAgdC5zZXRBdHRyaWJ1dGUociwgaSk7XG4gIGxldCBvO1xuICByZXR1cm4gbi5jb250YWluc0lubGluZUNvbnRlbnQgPyAobyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHQuYXBwZW5kQ2hpbGQobykpIDogbyA9IHZvaWQgMCwgbyAhPT0gdm9pZCAwID8ge1xuICAgIGRvbTogdCxcbiAgICBjb250ZW50RE9NOiBvXG4gIH0gOiB7XG4gICAgZG9tOiB0XG4gIH07XG59XG5mdW5jdGlvbiBnbyhuKSB7XG4gIHJldHVybiB7XG4gICAgbm9kZTogRih7XG4gICAgICBuYW1lOiBuLnR5cGUsXG4gICAgICBjb250ZW50OiBuLmNvbnRhaW5zSW5saW5lQ29udGVudCA/IFwiaW5saW5lKlwiIDogXCJcIixcbiAgICAgIHNlbGVjdGFibGU6ICEwLFxuICAgICAgYWRkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIGhvKG4pO1xuICAgICAgfSxcbiAgICAgIHBhcnNlSFRNTCgpIHtcbiAgICAgICAgcmV0dXJuIG1vKG4pO1xuICAgICAgfSxcbiAgICAgIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlczogdCB9KSB7XG4gICAgICAgIHJldHVybiBmbyhuLCB0KTtcbiAgICAgIH0sXG4gICAgICBhZGROb2RlVmlldygpIHtcbiAgICAgICAgcmV0dXJuICh7IEhUTUxBdHRyaWJ1dGVzOiB0LCBnZXRQb3M6IG8gfSkgPT4ge1xuICAgICAgICAgIHZhciBwLCBmO1xuICAgICAgICAgIGNvbnN0IHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBpID0gKChwID0gdGhpcy5vcHRpb25zLmRvbUF0dHJpYnV0ZXMpID09IG51bGwgPyB2b2lkIDAgOiBwLmJsb2NrQ29udGVudCkgfHwge307XG4gICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICBpXG4gICAgICAgICAgKSlcbiAgICAgICAgICAgIGsgIT09IFwiY2xhc3NcIiAmJiByLnNldEF0dHJpYnV0ZShrLCB2KTtcbiAgICAgICAgICByLmNsYXNzTmFtZSA9IFMoXG4gICAgICAgICAgICBnLmJsb2NrQ29udGVudCxcbiAgICAgICAgICAgIGkuY2xhc3NcbiAgICAgICAgICApLCByLnNldEF0dHJpYnV0ZShcImRhdGEtY29udGVudC10eXBlXCIsIG4udHlwZSk7XG4gICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModCkpXG4gICAgICAgICAgICByLnNldEF0dHJpYnV0ZShrLCB2KTtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5vcHRpb25zLmVkaXRvcjtcbiAgICAgICAgICBpZiAodHlwZW9mIG8gPT0gXCJib29sZWFuXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIFwiQ2Fubm90IGZpbmQgbm9kZSBwb3NpdGlvbiBhcyBnZXRQb3MgaXMgYSBib29sZWFuLCBub3QgYSBmdW5jdGlvbi5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBsID0gbygpLCBjID0gcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5yZXNvbHZlKGwpLm5vZGUoKS5hdHRycy5pZCwgbSA9IHMuZ2V0QmxvY2soYyk7XG4gICAgICAgICAgaWYgKG0udHlwZSAhPT0gbi50eXBlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmxvY2sgdHlwZSBkb2VzIG5vdCBtYXRjaFwiKTtcbiAgICAgICAgICBjb25zdCBoID0gbi5yZW5kZXIobSwgcyk7XG4gICAgICAgICAgaWYgKG4uY29udGFpbnNJbmxpbmVDb250ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBrID0gaC5jb250ZW50RE9NLCB2ID0gKChmID0gdGhpcy5vcHRpb25zLmRvbUF0dHJpYnV0ZXMpID09IG51bGwgPyB2b2lkIDAgOiBmLmlubGluZUNvbnRlbnQpIHx8IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdywgRV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgIHZcbiAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgIHcgIT09IFwiY2xhc3NcIiAmJiBrLnNldEF0dHJpYnV0ZSh3LCBFKTtcbiAgICAgICAgICAgIGsuY2xhc3NOYW1lID0gUyhcbiAgICAgICAgICAgICAgay5jbGFzc05hbWUsXG4gICAgICAgICAgICAgIGcuaW5saW5lQ29udGVudCxcbiAgICAgICAgICAgICAgdi5jbGFzc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHIuYXBwZW5kQ2hpbGQoaC5kb20pLCBcImNvbnRlbnRET01cIiBpbiBoID8ge1xuICAgICAgICAgICAgZG9tOiByLFxuICAgICAgICAgICAgY29udGVudERPTTogaC5jb250ZW50RE9NLFxuICAgICAgICAgICAgZGVzdHJveTogaC5kZXN0cm95XG4gICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGRvbTogcixcbiAgICAgICAgICAgIGRlc3Ryb3k6IGguZGVzdHJveVxuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSksXG4gICAgcHJvcFNjaGVtYTogbi5wcm9wU2NoZW1hXG4gIH07XG59XG5mdW5jdGlvbiBGKG4pIHtcbiAgcmV0dXJuIEcuY3JlYXRlKHtcbiAgICAuLi5uLFxuICAgIGdyb3VwOiBcImJsb2NrQ29udGVudFwiLFxuICAgIGNvbnRlbnQ6IG4uY29udGVudFxuICB9KTtcbn1cbmNvbnN0IGtvID0ge1xuICAuLi5DLFxuICBsZXZlbDogeyBkZWZhdWx0OiAxLCB2YWx1ZXM6IFsxLCAyLCAzXSB9XG59LCBibyA9IEYoe1xuICBuYW1lOiBcImhlYWRpbmdcIixcbiAgY29udGVudDogXCJpbmxpbmUqXCIsXG4gIGFkZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiB7XG4gICAgICAgIGRlZmF1bHQ6IDEsXG4gICAgICAgIC8vIGluc3RlYWQgb2YgXCJsZXZlbFwiIGF0dHJpYnV0ZXMsIHVzZSBcImRhdGEtbGV2ZWxcIlxuICAgICAgICBwYXJzZUhUTUw6IChuKSA9PiBuLmdldEF0dHJpYnV0ZShcImRhdGEtbGV2ZWxcIiksXG4gICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiAoe1xuICAgICAgICAgIFwiZGF0YS1sZXZlbFwiOiBuLmxldmVsLnRvU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBhZGRJbnB1dFJ1bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAuLi5bMSwgMiwgM10ubWFwKChuKSA9PiBuZXcgWih7XG4gICAgICAgIGZpbmQ6IG5ldyBSZWdFeHAoYF4oI3ske259fSlcXFxccyRgKSxcbiAgICAgICAgaGFuZGxlcjogKHsgc3RhdGU6IGUsIGNoYWluOiB0LCByYW5nZTogbyB9KSA9PiB7XG4gICAgICAgICAgdCgpLkJOVXBkYXRlQmxvY2soZS5zZWxlY3Rpb24uZnJvbSwge1xuICAgICAgICAgICAgdHlwZTogXCJoZWFkaW5nXCIsXG4gICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICBsZXZlbDogblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmRlbGV0ZVJhbmdlKHsgZnJvbTogby5mcm9tLCB0bzogby50byB9KTtcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgXTtcbiAgfSxcbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFwiTW9kLUFsdC0xXCI6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLkJOVXBkYXRlQmxvY2sodGhpcy5lZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciwge1xuICAgICAgICB0eXBlOiBcImhlYWRpbmdcIixcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBsZXZlbDogMVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIFwiTW9kLUFsdC0yXCI6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLkJOVXBkYXRlQmxvY2sodGhpcy5lZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciwge1xuICAgICAgICB0eXBlOiBcImhlYWRpbmdcIixcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBsZXZlbDogMlxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIFwiTW9kLUFsdC0zXCI6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLkJOVXBkYXRlQmxvY2sodGhpcy5lZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciwge1xuICAgICAgICB0eXBlOiBcImhlYWRpbmdcIixcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBsZXZlbDogM1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH07XG4gIH0sXG4gIHBhcnNlSFRNTCgpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0YWc6IFwiaDFcIixcbiAgICAgICAgYXR0cnM6IHsgbGV2ZWw6IDEgfSxcbiAgICAgICAgbm9kZTogXCJoZWFkaW5nXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogXCJoMlwiLFxuICAgICAgICBhdHRyczogeyBsZXZlbDogMiB9LFxuICAgICAgICBub2RlOiBcImhlYWRpbmdcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiBcImgzXCIsXG4gICAgICAgIGF0dHJzOiB7IGxldmVsOiAzIH0sXG4gICAgICAgIG5vZGU6IFwiaGVhZGluZ1wiXG4gICAgICB9XG4gICAgXTtcbiAgfSxcbiAgcmVuZGVySFRNTCh7IG5vZGU6IG4sIEhUTUxBdHRyaWJ1dGVzOiBlIH0pIHtcbiAgICB2YXIgciwgaTtcbiAgICBjb25zdCB0ID0gKChyID0gdGhpcy5vcHRpb25zLmRvbUF0dHJpYnV0ZXMpID09IG51bGwgPyB2b2lkIDAgOiByLmJsb2NrQ29udGVudCkgfHwge30sIG8gPSAoKGkgPSB0aGlzLm9wdGlvbnMuZG9tQXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGkuaW5saW5lQ29udGVudCkgfHwge307XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiZGl2XCIsXG4gICAgICBOKGUsIHtcbiAgICAgICAgLi4udCxcbiAgICAgICAgY2xhc3M6IFMoXG4gICAgICAgICAgZy5ibG9ja0NvbnRlbnQsXG4gICAgICAgICAgdC5jbGFzc1xuICAgICAgICApLFxuICAgICAgICBcImRhdGEtY29udGVudC10eXBlXCI6IHRoaXMubmFtZVxuICAgICAgfSksXG4gICAgICBbXG4gICAgICAgIGBoJHtuLmF0dHJzLmxldmVsfWAsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5vLFxuICAgICAgICAgIGNsYXNzOiBTKFxuICAgICAgICAgICAgZy5pbmxpbmVDb250ZW50LFxuICAgICAgICAgICAgby5jbGFzc1xuICAgICAgICAgIClcbiAgICAgICAgfSxcbiAgICAgICAgMFxuICAgICAgXVxuICAgIF07XG4gIH1cbn0pLCB5byA9IHtcbiAgbm9kZTogYm8sXG4gIHByb3BTY2hlbWE6IGtvXG59LCBHdCA9IChuKSA9PiB7XG4gIGNvbnN0IHsgbm9kZTogZSwgY29udGVudFR5cGU6IHQgfSA9IGIoXG4gICAgbi5zdGF0ZS5kb2MsXG4gICAgbi5zdGF0ZS5zZWxlY3Rpb24uZnJvbVxuICApLCBvID0gbi5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yID09PSBuLnN0YXRlLnNlbGVjdGlvbi5oZWFkO1xuICByZXR1cm4gIXQubmFtZS5lbmRzV2l0aChcIkxpc3RJdGVtXCIpIHx8ICFvID8gITEgOiBuLmNvbW1hbmRzLmZpcnN0KCh7IHN0YXRlOiByLCBjaGFpbjogaSwgY29tbWFuZHM6IHMgfSkgPT4gW1xuICAgICgpID0+IChcbiAgICAgIC8vIENoYW5nZXMgbGlzdCBpdGVtIGJsb2NrIHRvIGEgdGV4dCBibG9jayBpZiB0aGUgY29udGVudCBpcyBlbXB0eS5cbiAgICAgIHMuY29tbWFuZCgoKSA9PiBlLnRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCA/IHMuQk5VcGRhdGVCbG9jayhyLnNlbGVjdGlvbi5mcm9tLCB7XG4gICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgIHByb3BzOiB7fVxuICAgICAgfSkgOiAhMSlcbiAgICApLFxuICAgICgpID0+IChcbiAgICAgIC8vIFNwbGl0cyB0aGUgY3VycmVudCBibG9jaywgbW92aW5nIGNvbnRlbnQgaW5zaWRlIHRoYXQncyBhZnRlciB0aGUgY3Vyc29yIHRvIGEgbmV3IGJsb2NrIG9mIHRoZSBzYW1lIHR5cGVcbiAgICAgIC8vIGJlbG93LlxuICAgICAgcy5jb21tYW5kKCgpID0+IGUudGV4dENvbnRlbnQubGVuZ3RoID4gMCA/IChpKCkuZGVsZXRlU2VsZWN0aW9uKCkuQk5TcGxpdEJsb2NrKHIuc2VsZWN0aW9uLmZyb20sICEwKS5ydW4oKSwgITApIDogITEpXG4gICAgKVxuICBdKTtcbn0sIHZvID0ge1xuICAuLi5DXG59LCB3byA9IEYoe1xuICBuYW1lOiBcImJ1bGxldExpc3RJdGVtXCIsXG4gIGNvbnRlbnQ6IFwiaW5saW5lKlwiLFxuICBhZGRJbnB1dFJ1bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAvLyBDcmVhdGVzIGFuIHVub3JkZXJlZCBsaXN0IHdoZW4gc3RhcnRpbmcgd2l0aCBcIi1cIiwgXCIrXCIsIG9yIFwiKlwiLlxuICAgICAgbmV3IFooe1xuICAgICAgICBmaW5kOiBuZXcgUmVnRXhwKFwiXlstKypdXFxcXHMkXCIpLFxuICAgICAgICBoYW5kbGVyOiAoeyBzdGF0ZTogbiwgY2hhaW46IGUsIHJhbmdlOiB0IH0pID0+IHtcbiAgICAgICAgICBlKCkuQk5VcGRhdGVCbG9jayhuLnNlbGVjdGlvbi5mcm9tLCB7XG4gICAgICAgICAgICB0eXBlOiBcImJ1bGxldExpc3RJdGVtXCIsXG4gICAgICAgICAgICBwcm9wczoge31cbiAgICAgICAgICB9KS5kZWxldGVSYW5nZSh7IGZyb206IHQuZnJvbSwgdG86IHQudG8gfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgXTtcbiAgfSxcbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEVudGVyOiAoKSA9PiBHdCh0aGlzLmVkaXRvciksXG4gICAgICBcIk1vZC1TaGlmdC03XCI6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLkJOVXBkYXRlQmxvY2sodGhpcy5lZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciwge1xuICAgICAgICB0eXBlOiBcImJ1bGxldExpc3RJdGVtXCIsXG4gICAgICAgIHByb3BzOiB7fVxuICAgICAgfSlcbiAgICB9O1xuICB9LFxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC8vIENhc2UgZm9yIHJlZ3VsYXIgSFRNTCBsaXN0IHN0cnVjdHVyZS5cbiAgICAgIHtcbiAgICAgICAgdGFnOiBcImxpXCIsXG4gICAgICAgIGdldEF0dHJzOiAobikgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIGNvbnN0IGUgPSBuLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgcmV0dXJuIGUgPT09IG51bGwgPyAhMSA6IGUudGFnTmFtZSA9PT0gXCJVTFwiID8ge30gOiAhMTtcbiAgICAgICAgfSxcbiAgICAgICAgbm9kZTogXCJidWxsZXRMaXN0SXRlbVwiXG4gICAgICB9LFxuICAgICAgLy8gQ2FzZSBmb3IgQmxvY2tOb3RlIGxpc3Qgc3RydWN0dXJlLlxuICAgICAge1xuICAgICAgICB0YWc6IFwicFwiLFxuICAgICAgICBnZXRBdHRyczogKG4pID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICBjb25zdCBlID0gbi5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgIHJldHVybiBlID09PSBudWxsID8gITEgOiBlLmdldEF0dHJpYnV0ZShcImRhdGEtY29udGVudC10eXBlXCIpID09PSBcImJ1bGxldExpc3RJdGVtXCIgPyB7fSA6ICExO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogMzAwLFxuICAgICAgICBub2RlOiBcImJ1bGxldExpc3RJdGVtXCJcbiAgICAgIH1cbiAgICBdO1xuICB9LFxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXM6IG4gfSkge1xuICAgIHZhciBvLCByO1xuICAgIGNvbnN0IGUgPSAoKG8gPSB0aGlzLm9wdGlvbnMuZG9tQXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IG8uYmxvY2tDb250ZW50KSB8fCB7fSwgdCA9ICgociA9IHRoaXMub3B0aW9ucy5kb21BdHRyaWJ1dGVzKSA9PSBudWxsID8gdm9pZCAwIDogci5pbmxpbmVDb250ZW50KSB8fCB7fTtcbiAgICByZXR1cm4gW1xuICAgICAgXCJkaXZcIixcbiAgICAgIE4obiwge1xuICAgICAgICAuLi5lLFxuICAgICAgICBjbGFzczogUyhcbiAgICAgICAgICBnLmJsb2NrQ29udGVudCxcbiAgICAgICAgICBlLmNsYXNzXG4gICAgICAgICksXG4gICAgICAgIFwiZGF0YS1jb250ZW50LXR5cGVcIjogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIFtcbiAgICAgICAgXCJwXCIsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi50LFxuICAgICAgICAgIGNsYXNzOiBTKFxuICAgICAgICAgICAgZy5pbmxpbmVDb250ZW50LFxuICAgICAgICAgICAgdC5jbGFzc1xuICAgICAgICAgIClcbiAgICAgICAgfSxcbiAgICAgICAgMFxuICAgICAgXVxuICAgIF07XG4gIH1cbn0pLCBDbyA9IHtcbiAgbm9kZTogd28sXG4gIHByb3BTY2hlbWE6IHZvXG59LCBFbyA9IG5ldyBCKFwibnVtYmVyZWQtbGlzdC1pbmRleGluZ1wiKSwgU28gPSAoKSA9PiBuZXcgVCh7XG4gIGtleTogRW8sXG4gIGFwcGVuZFRyYW5zYWN0aW9uOiAobiwgZSwgdCkgPT4ge1xuICAgIGNvbnN0IG8gPSB0LnRyO1xuICAgIG8uc2V0TWV0YShcIm51bWJlcmVkTGlzdEluZGV4aW5nXCIsICEwKTtcbiAgICBsZXQgciA9ICExO1xuICAgIHJldHVybiB0LmRvYy5kZXNjZW5kYW50cygoaSwgcykgPT4ge1xuICAgICAgaWYgKGkudHlwZS5uYW1lID09PSBcImJsb2NrQ29udGFpbmVyXCIgJiYgaS5maXJzdENoaWxkLnR5cGUubmFtZSA9PT0gXCJudW1iZXJlZExpc3RJdGVtXCIpIHtcbiAgICAgICAgbGV0IGwgPSBcIjFcIjtcbiAgICAgICAgY29uc3QgYSA9IHMgPT09IDEsIGQgPSBiKG8uZG9jLCBzICsgMSk7XG4gICAgICAgIGlmIChkID09PSB2b2lkIDApXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIWEpIHtcbiAgICAgICAgICBjb25zdCBoID0gYihvLmRvYywgcyAtIDIpO1xuICAgICAgICAgIGlmIChoID09PSB2b2lkIDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgaWYgKCEoZC5kZXB0aCAhPT0gaC5kZXB0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGYgPSBoLmNvbnRlbnROb2RlO1xuICAgICAgICAgICAgaWYgKGguY29udGVudFR5cGUubmFtZSA9PT0gXCJudW1iZXJlZExpc3RJdGVtXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgdyA9IGYuYXR0cnMuaW5kZXg7XG4gICAgICAgICAgICAgIGwgPSAocGFyc2VJbnQodykgKyAxKS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkLmNvbnRlbnROb2RlLmF0dHJzLmluZGV4ICE9PSBsICYmIChyID0gITAsIG8uc2V0Tm9kZU1hcmt1cChzICsgMSwgdm9pZCAwLCB7XG4gICAgICAgICAgaW5kZXg6IGxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pLCByID8gbyA6IG51bGw7XG4gIH1cbn0pLCBUbyA9IHtcbiAgLi4uQ1xufSwgTW8gPSBGKHtcbiAgbmFtZTogXCJudW1iZXJlZExpc3RJdGVtXCIsXG4gIGNvbnRlbnQ6IFwiaW5saW5lKlwiLFxuICBhZGRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleDoge1xuICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICBwYXJzZUhUTUw6IChuKSA9PiBuLmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiksXG4gICAgICAgIHJlbmRlckhUTUw6IChuKSA9PiAoe1xuICAgICAgICAgIFwiZGF0YS1pbmRleFwiOiBuLmluZGV4XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgLy8gQ3JlYXRlcyBhbiBvcmRlcmVkIGxpc3Qgd2hlbiBzdGFydGluZyB3aXRoIFwiMS5cIi5cbiAgICAgIG5ldyBaKHtcbiAgICAgICAgZmluZDogbmV3IFJlZ0V4cChcIl4xXFxcXC5cXFxccyRcIiksXG4gICAgICAgIGhhbmRsZXI6ICh7IHN0YXRlOiBuLCBjaGFpbjogZSwgcmFuZ2U6IHQgfSkgPT4ge1xuICAgICAgICAgIGUoKS5CTlVwZGF0ZUJsb2NrKG4uc2VsZWN0aW9uLmZyb20sIHtcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyZWRMaXN0SXRlbVwiLFxuICAgICAgICAgICAgcHJvcHM6IHt9XG4gICAgICAgICAgfSkuZGVsZXRlUmFuZ2UoeyBmcm9tOiB0LmZyb20sIHRvOiB0LnRvIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIF07XG4gIH0sXG4gIGFkZEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBFbnRlcjogKCkgPT4gR3QodGhpcy5lZGl0b3IpLFxuICAgICAgXCJNb2QtU2hpZnQtOFwiOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5CTlVwZGF0ZUJsb2NrKHRoaXMuZWRpdG9yLnN0YXRlLnNlbGVjdGlvbi5hbmNob3IsIHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJlZExpc3RJdGVtXCIsXG4gICAgICAgIHByb3BzOiB7fVxuICAgICAgfSlcbiAgICB9O1xuICB9LFxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFtTbygpXTtcbiAgfSxcbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICAvLyBDYXNlIGZvciByZWd1bGFyIEhUTUwgbGlzdCBzdHJ1Y3R1cmUuXG4gICAgICAvLyAoZS5nLjogd2hlbiBwYXN0aW5nIGZyb20gb3RoZXIgYXBwcylcbiAgICAgIHtcbiAgICAgICAgdGFnOiBcImxpXCIsXG4gICAgICAgIGdldEF0dHJzOiAobikgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIGNvbnN0IGUgPSBuLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgcmV0dXJuIGUgPT09IG51bGwgPyAhMSA6IGUudGFnTmFtZSA9PT0gXCJPTFwiID8ge30gOiAhMTtcbiAgICAgICAgfSxcbiAgICAgICAgbm9kZTogXCJudW1iZXJlZExpc3RJdGVtXCJcbiAgICAgIH0sXG4gICAgICAvLyBDYXNlIGZvciBCbG9ja05vdGUgbGlzdCBzdHJ1Y3R1cmUuXG4gICAgICAvLyAoZS5nLjogd2hlbiBwYXN0aW5nIGZyb20gYmxvY2tub3RlKVxuICAgICAge1xuICAgICAgICB0YWc6IFwicFwiLFxuICAgICAgICBnZXRBdHRyczogKG4pID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICBjb25zdCBlID0gbi5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgIHJldHVybiBlID09PSBudWxsID8gITEgOiBlLmdldEF0dHJpYnV0ZShcImRhdGEtY29udGVudC10eXBlXCIpID09PSBcIm51bWJlcmVkTGlzdEl0ZW1cIiA/IHt9IDogITE7XG4gICAgICAgIH0sXG4gICAgICAgIHByaW9yaXR5OiAzMDAsXG4gICAgICAgIG5vZGU6IFwibnVtYmVyZWRMaXN0SXRlbVwiXG4gICAgICB9XG4gICAgXTtcbiAgfSxcbiAgcmVuZGVySFRNTCh7IEhUTUxBdHRyaWJ1dGVzOiBuIH0pIHtcbiAgICB2YXIgbywgcjtcbiAgICBjb25zdCBlID0gKChvID0gdGhpcy5vcHRpb25zLmRvbUF0dHJpYnV0ZXMpID09IG51bGwgPyB2b2lkIDAgOiBvLmJsb2NrQ29udGVudCkgfHwge30sIHQgPSAoKHIgPSB0aGlzLm9wdGlvbnMuZG9tQXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IHIuaW5saW5lQ29udGVudCkgfHwge307XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiZGl2XCIsXG4gICAgICBOKG4sIHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgY2xhc3M6IFMoXG4gICAgICAgICAgZy5ibG9ja0NvbnRlbnQsXG4gICAgICAgICAgZS5jbGFzc1xuICAgICAgICApLFxuICAgICAgICBcImRhdGEtY29udGVudC10eXBlXCI6IHRoaXMubmFtZVxuICAgICAgfSksXG4gICAgICAvLyB3ZSB1c2UgYSA8cD4gdGFnLCBiZWNhdXNlIGZvciA8bGk+IHRhZ3Mgd2UnZCBuZWVkIHRvIGFkZCBhIDx1bD4gcGFyZW50IGZvciBhcm91bmQgc2libGluZ3MgdG8gYmUgc2VtYW50aWNhbGx5IGNvcnJlY3QsXG4gICAgICAvLyB3aGljaCB3b3VsZCBiZSBxdWl0ZSBjdW1iZXJzb21lXG4gICAgICBbXG4gICAgICAgIFwicFwiLFxuICAgICAgICB7XG4gICAgICAgICAgLi4udCxcbiAgICAgICAgICBjbGFzczogUyhcbiAgICAgICAgICAgIGcuaW5saW5lQ29udGVudCxcbiAgICAgICAgICAgIHQuY2xhc3NcbiAgICAgICAgICApXG4gICAgICAgIH0sXG4gICAgICAgIDBcbiAgICAgIF1cbiAgICBdO1xuICB9XG59KSwgQm8gPSB7XG4gIG5vZGU6IE1vLFxuICBwcm9wU2NoZW1hOiBUb1xufSwgeG8gPSB7XG4gIC4uLkNcbn0sIElvID0gRih7XG4gIG5hbWU6IFwicGFyYWdyYXBoXCIsXG4gIGNvbnRlbnQ6IFwiaW5saW5lKlwiLFxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiBcInBcIixcbiAgICAgICAgcHJpb3JpdHk6IDIwMCxcbiAgICAgICAgbm9kZTogXCJwYXJhZ3JhcGhcIlxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlczogbiB9KSB7XG4gICAgdmFyIG8sIHI7XG4gICAgY29uc3QgZSA9ICgobyA9IHRoaXMub3B0aW9ucy5kb21BdHRyaWJ1dGVzKSA9PSBudWxsID8gdm9pZCAwIDogby5ibG9ja0NvbnRlbnQpIHx8IHt9LCB0ID0gKChyID0gdGhpcy5vcHRpb25zLmRvbUF0dHJpYnV0ZXMpID09IG51bGwgPyB2b2lkIDAgOiByLmlubGluZUNvbnRlbnQpIHx8IHt9O1xuICAgIHJldHVybiBbXG4gICAgICBcImRpdlwiLFxuICAgICAgTihcbiAgICAgICAge1xuICAgICAgICAgIC4uLmUsXG4gICAgICAgICAgY2xhc3M6IFMoXG4gICAgICAgICAgICBnLmJsb2NrQ29udGVudCxcbiAgICAgICAgICAgIGUuY2xhc3NcbiAgICAgICAgICApLFxuICAgICAgICAgIFwiZGF0YS1jb250ZW50LXR5cGVcIjogdGhpcy5uYW1lXG4gICAgICAgIH0sXG4gICAgICAgIG5cbiAgICAgICksXG4gICAgICBbXG4gICAgICAgIFwicFwiLFxuICAgICAgICB7XG4gICAgICAgICAgLi4udCxcbiAgICAgICAgICBjbGFzczogUyhcbiAgICAgICAgICAgIGcuaW5saW5lQ29udGVudCxcbiAgICAgICAgICAgIHQuY2xhc3NcbiAgICAgICAgICApXG4gICAgICAgIH0sXG4gICAgICAgIDBcbiAgICAgIF1cbiAgICBdO1xuICB9XG59KSwgQW8gPSB7XG4gIG5vZGU6IElvLFxuICBwcm9wU2NoZW1hOiB4b1xufTtcbmNsYXNzIF9vIHtcbiAgY29uc3RydWN0b3IoZSwgdCwgbykge1xuICAgIHUodGhpcywgXCJpbWFnZVRvb2xiYXJTdGF0ZVwiKTtcbiAgICB1KHRoaXMsIFwidXBkYXRlSW1hZ2VUb29sYmFyXCIpO1xuICAgIHUodGhpcywgXCJwcmV2V2FzRWRpdGFibGVcIiwgbnVsbCk7XG4gICAgdSh0aGlzLCBcInNob3VsZFNob3dcIiwgKGUpID0+IFwibm9kZVwiIGluIGUuc2VsZWN0aW9uICYmIGUuc2VsZWN0aW9uLm5vZGUudHlwZS5uYW1lID09PSBcImltYWdlXCIgJiYgZS5zZWxlY3Rpb24ubm9kZS5hdHRycy5zcmMgPT09IFwiXCIpO1xuICAgIHUodGhpcywgXCJtb3VzZURvd25IYW5kbGVyXCIsICgpID0+IHtcbiAgICAgIHZhciBlO1xuICAgICAgKGUgPSB0aGlzLmltYWdlVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIGUuc2hvdyAmJiAodGhpcy5pbWFnZVRvb2xiYXJTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlSW1hZ2VUb29sYmFyKCkpO1xuICAgIH0pO1xuICAgIC8vIEZvciBkcmFnZ2luZyB0aGUgd2hvbGUgZWRpdG9yLlxuICAgIHUodGhpcywgXCJkcmFnc3RhcnRIYW5kbGVyXCIsICgpID0+IHtcbiAgICAgIHZhciBlO1xuICAgICAgKGUgPSB0aGlzLmltYWdlVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIGUuc2hvdyAmJiAodGhpcy5pbWFnZVRvb2xiYXJTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlSW1hZ2VUb29sYmFyKCkpO1xuICAgIH0pO1xuICAgIHUodGhpcywgXCJibHVySGFuZGxlclwiLCAoZSkgPT4ge1xuICAgICAgdmFyIG87XG4gICAgICBjb25zdCB0ID0gdGhpcy5wbVZpZXcuZG9tLnBhcmVudEVsZW1lbnQ7XG4gICAgICAvLyBBbiBlbGVtZW50IGlzIGNsaWNrZWQuXG4gICAgICBlICYmIGUucmVsYXRlZFRhcmdldCAmJiAvLyBFbGVtZW50IGlzIGluc2lkZSB0aGUgZWRpdG9yLlxuICAgICAgKHQgPT09IGUucmVsYXRlZFRhcmdldCB8fCB0LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHx8IChvID0gdGhpcy5pbWFnZVRvb2xiYXJTdGF0ZSkgIT0gbnVsbCAmJiBvLnNob3cgJiYgKHRoaXMuaW1hZ2VUb29sYmFyU3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZUltYWdlVG9vbGJhcigpKTtcbiAgICB9KTtcbiAgICB1KHRoaXMsIFwic2Nyb2xsSGFuZGxlclwiLCAoKSA9PiB7XG4gICAgICB2YXIgZTtcbiAgICAgIGlmICgoZSA9IHRoaXMuaW1hZ2VUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgZS5zaG93KSB7XG4gICAgICAgIGNvbnN0IHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGBbZGF0YS1ub2RlLXR5cGU9XCJibG9ja0NvbnRhaW5lclwiXVtkYXRhLWlkPVwiJHt0aGlzLmltYWdlVG9vbGJhclN0YXRlLmJsb2NrLmlkfVwiXWBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5pbWFnZVRvb2xiYXJTdGF0ZS5yZWZlcmVuY2VQb3MgPSB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB0aGlzLnVwZGF0ZUltYWdlVG9vbGJhcigpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucGx1Z2luS2V5ID0gZSwgdGhpcy5wbVZpZXcgPSB0LCB0aGlzLnVwZGF0ZUltYWdlVG9vbGJhciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5pbWFnZVRvb2xiYXJTdGF0ZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGluZyB0byB1cGRhdGUgdW5pbml0aWFsaXplZCBpbWFnZSB0b29sYmFyXCIpO1xuICAgICAgbyh0aGlzLmltYWdlVG9vbGJhclN0YXRlKTtcbiAgICB9LCB0LmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMubW91c2VEb3duSGFuZGxlciksIHQuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5kcmFnc3RhcnRIYW5kbGVyKSwgdC5kb20uYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5ibHVySGFuZGxlciksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgfVxuICB1cGRhdGUoZSwgdCkge1xuICAgIHZhciByLCBpO1xuICAgIGNvbnN0IG8gPSB0aGlzLnBsdWdpbktleS5nZXRTdGF0ZShlLnN0YXRlKTtcbiAgICBpZiAoISgociA9IHRoaXMuaW1hZ2VUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgci5zaG93KSAmJiBvLmJsb2NrKSB7XG4gICAgICBjb25zdCBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFtkYXRhLW5vZGUtdHlwZT1cImJsb2NrQ29udGFpbmVyXCJdW2RhdGEtaWQ9XCIke28uYmxvY2suaWR9XCJdYFxuICAgICAgKTtcbiAgICAgIHRoaXMuaW1hZ2VUb29sYmFyU3RhdGUgPSB7XG4gICAgICAgIHNob3c6ICEwLFxuICAgICAgICByZWZlcmVuY2VQb3M6IHMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgIGJsb2NrOiBvLmJsb2NrXG4gICAgICB9LCB0aGlzLnVwZGF0ZUltYWdlVG9vbGJhcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAoIWUuc3RhdGUuc2VsZWN0aW9uLmVxKHQuc2VsZWN0aW9uKSB8fCAhZS5zdGF0ZS5kb2MuZXEodC5kb2MpKSAmJiAoaSA9IHRoaXMuaW1hZ2VUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgaS5zaG93ICYmICh0aGlzLmltYWdlVG9vbGJhclN0YXRlLnNob3cgPSAhMSwgdGhpcy51cGRhdGVJbWFnZVRvb2xiYXIoKSk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBtVmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIpLCB0aGlzLnBtVmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCB0aGlzLmRyYWdzdGFydEhhbmRsZXIpLCB0aGlzLnBtVmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5ibHVySGFuZGxlciksIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgfVxufVxuY29uc3QgeiA9IG5ldyBCKFwiSW1hZ2VUb29sYmFyUGx1Z2luXCIpO1xuY2xhc3MgSG8gZXh0ZW5kcyBVIHtcbiAgY29uc3RydWN0b3IodCkge1xuICAgIHN1cGVyKCk7XG4gICAgdSh0aGlzLCBcInZpZXdcIik7XG4gICAgdSh0aGlzLCBcInBsdWdpblwiKTtcbiAgICB0aGlzLnBsdWdpbiA9IG5ldyBUKHtcbiAgICAgIGtleTogeixcbiAgICAgIHZpZXc6IChvKSA9PiAodGhpcy52aWV3ID0gbmV3IF9vKFxuICAgICAgICAvLyBlZGl0b3IsXG4gICAgICAgIHosXG4gICAgICAgIG8sXG4gICAgICAgIChyKSA9PiB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIsIHIpO1xuICAgICAgICB9XG4gICAgICApLCB0aGlzLnZpZXcpLFxuICAgICAgc3RhdGU6IHtcbiAgICAgICAgaW5pdDogKCkgPT4gKHtcbiAgICAgICAgICBibG9jazogdm9pZCAwXG4gICAgICAgIH0pLFxuICAgICAgICBhcHBseTogKG8pID0+IHtcbiAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmxvY2s6IChpID0gby5nZXRNZXRhKHopKSA9PSBudWxsID8gdm9pZCAwIDogaS5ibG9ja1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBvblVwZGF0ZSh0KSB7XG4gICAgcmV0dXJuIHRoaXMub24oXCJ1cGRhdGVcIiwgdCk7XG4gIH1cbn1cbmNvbnN0IExvID0ge1xuICB0ZXh0QWxpZ25tZW50OiBDLnRleHRBbGlnbm1lbnQsXG4gIGJhY2tncm91bmRDb2xvcjogQy5iYWNrZ3JvdW5kQ29sb3IsXG4gIC8vIEltYWdlIHVybC5cbiAgdXJsOiB7XG4gICAgZGVmYXVsdDogXCJcIlxuICB9LFxuICAvLyBJbWFnZSBjYXB0aW9uLlxuICBjYXB0aW9uOiB7XG4gICAgZGVmYXVsdDogXCJcIlxuICB9LFxuICAvLyBJbWFnZSB3aWR0aCBpbiBweC5cbiAgd2lkdGg6IHtcbiAgICBkZWZhdWx0OiA1MTJcbiAgfVxufSwgY3QgPSAobikgPT4ge1xuICBzd2l0Y2ggKG4pIHtcbiAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgcmV0dXJuIFwiZmxleC1zdGFydFwiO1xuICAgIGNhc2UgXCJjZW50ZXJcIjpcbiAgICAgIHJldHVybiBcImNlbnRlclwiO1xuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgcmV0dXJuIFwiZmxleC1lbmRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiZmxleC1zdGFydFwiO1xuICB9XG59LCB1dCA9IDY0LCBObyA9IChuLCBlKSA9PiB7XG4gIGNvbnN0IHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0LmNsYXNzTmFtZSA9IGcud3JhcHBlciwgdC5zdHlsZS5hbGlnbkl0ZW1zID0gY3QoXG4gICAgbi5wcm9wcy50ZXh0QWxpZ25tZW50XG4gICk7XG4gIGNvbnN0IG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBvLmNsYXNzTmFtZSA9IGcuYWRkSW1hZ2VCdXR0b24sIG8uc3R5bGUuZGlzcGxheSA9IG4ucHJvcHMudXJsID09PSBcIlwiID8gXCJcIiA6IFwibm9uZVwiO1xuICBjb25zdCByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgci5jbGFzc05hbWUgPSBnLmFkZEltYWdlQnV0dG9uSWNvbjtcbiAgY29uc3QgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBpLmNsYXNzTmFtZSA9IGcuYWRkSW1hZ2VCdXR0b25UZXh0LCBpLmlubmVyVGV4dCA9IFwiQWRkIEltYWdlXCI7XG4gIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzLmNsYXNzTmFtZSA9IGcuaW1hZ2VBbmRDYXB0aW9uV3JhcHBlciwgcy5zdHlsZS5kaXNwbGF5ID0gbi5wcm9wcy51cmwgIT09IFwiXCIgPyBcIlwiIDogXCJub25lXCI7XG4gIGNvbnN0IGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBsLmNsYXNzTmFtZSA9IGcuaW1hZ2VXcmFwcGVyLCBsLnN0eWxlLmRpc3BsYXkgPSBuLnByb3BzLnVybCAhPT0gXCJcIiA/IFwiXCIgOiBcIm5vbmVcIjtcbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGEuY2xhc3NOYW1lID0gZy5pbWFnZSwgYS5zcmMgPSBuLnByb3BzLnVybCwgYS5hbHQgPSBcInBsYWNlaG9sZGVyXCIsIGEuY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiLCBhLmRyYWdnYWJsZSA9ICExLCBhLnN0eWxlLndpZHRoID0gYCR7TWF0aC5taW4oXG4gICAgbi5wcm9wcy53aWR0aCxcbiAgICBlLmRvbUVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xpZW50V2lkdGhcbiAgKX1weGA7XG4gIGNvbnN0IGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBkLmNsYXNzTmFtZSA9IGcucmVzaXplSGFuZGxlLCBkLnN0eWxlLmxlZnQgPSBcIjRweFwiO1xuICBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYy5jbGFzc05hbWUgPSBnLnJlc2l6ZUhhbmRsZSwgYy5zdHlsZS5yaWdodCA9IFwiNHB4XCI7XG4gIGNvbnN0IG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgbS5jbGFzc05hbWUgPSBnLmNhcHRpb24sIG0uaW5uZXJUZXh0ID0gbi5wcm9wcy5jYXB0aW9uLCBtLnN0eWxlLnBhZGRpbmcgPSBuLnByb3BzLmNhcHRpb24gPyBcIjRweFwiIDogXCJcIjtcbiAgY29uc3QgaCA9ICgpID0+IHtcbiAgICB2YXIgcTtcbiAgICBjb25zdCB5ID0gKChxID0gZS5nZXRTZWxlY3Rpb24oKSkgPT0gbnVsbCA/IHZvaWQgMCA6IHEuYmxvY2tzKSB8fCBbXTtcbiAgICBbZS5nZXRUZXh0Q3Vyc29yUG9zaXRpb24oKS5ibG9jaywgLi4ueV0uZmluZChcbiAgICAgIChLdCkgPT4gS3QuaWQgPT09IG4uaWRcbiAgICApICE9PSB2b2lkIDAgPyAoby5zdHlsZS5vdXRsaW5lID0gXCI0cHggc29saWQgcmdiKDEwMCwgMTYwLCAyNTUpXCIsIHMuc3R5bGUub3V0bGluZSA9IFwiNHB4IHNvbGlkIHJnYigxMDAsIDE2MCwgMjU1KVwiKSA6IChvLnN0eWxlLm91dGxpbmUgPSBcIlwiLCBzLnN0eWxlLm91dGxpbmUgPSBcIlwiKTtcbiAgfTtcbiAgZS5vbkVkaXRvckNvbnRlbnRDaGFuZ2UoaCksIGUub25FZGl0b3JTZWxlY3Rpb25DaGFuZ2UoaCk7XG4gIGxldCBwO1xuICBjb25zdCBmID0gKHkpID0+IHtcbiAgICBpZiAoIXApXG4gICAgICByZXR1cm47XG4gICAgbGV0IE07XG4gICAgY3Qobi5wcm9wcy50ZXh0QWxpZ25tZW50KSA9PT0gXCJjZW50ZXJcIiA/IHAuaGFuZGxlVXNlZCA9PT0gXCJsZWZ0XCIgPyBNID0gcC5pbml0aWFsV2lkdGggKyAocC5pbml0aWFsQ2xpZW50WCAtIHkuY2xpZW50WCkgKiAyIDogTSA9IHAuaW5pdGlhbFdpZHRoICsgKHkuY2xpZW50WCAtIHAuaW5pdGlhbENsaWVudFgpICogMiA6IHAuaGFuZGxlVXNlZCA9PT0gXCJsZWZ0XCIgPyBNID0gcC5pbml0aWFsV2lkdGggKyBwLmluaXRpYWxDbGllbnRYIC0geS5jbGllbnRYIDogTSA9IHAuaW5pdGlhbFdpZHRoICsgeS5jbGllbnRYIC0gcC5pbml0aWFsQ2xpZW50WCwgTSA8IHV0ID8gYS5zdHlsZS53aWR0aCA9IGAke3V0fXB4YCA6IE0gPiBlLmRvbUVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xpZW50V2lkdGggPyBhLnN0eWxlLndpZHRoID0gYCR7ZS5kb21FbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmNsaWVudFdpZHRofXB4YCA6IGEuc3R5bGUud2lkdGggPSBgJHtNfXB4YDtcbiAgfSwgayA9ICh5KSA9PiB7XG4gICAgcCAmJiAoKCF5LnRhcmdldCB8fCAhbC5jb250YWlucyh5LnRhcmdldCkpICYmIGwuY29udGFpbnMoZCkgJiYgbC5jb250YWlucyhjKSAmJiAoZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIsIGMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKSwgcCA9IHZvaWQgMCwgZS51cGRhdGVCbG9jayhuLCB7XG4gICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICBwcm9wczoge1xuICAgICAgICAvLyBSZW1vdmVzIFwicHhcIiBmcm9tIHRoZSBlbmQgb2YgdGhlIHdpZHRoIHN0cmluZyBhbmQgY29udmVydHMgdG8gZmxvYXQuXG4gICAgICAgIHdpZHRoOiBwYXJzZUZsb2F0KGEuc3R5bGUud2lkdGguc2xpY2UoMCwgLTIpKVxuICAgICAgfVxuICAgIH0pKTtcbiAgfSwgdiA9ICh5KSA9PiB7XG4gICAgeS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LCB3ID0gKCkgPT4ge1xuICAgIGUuX3RpcHRhcEVkaXRvci52aWV3LmRpc3BhdGNoKFxuICAgICAgZS5fdGlwdGFwRWRpdG9yLnN0YXRlLnRyLnNldE1ldGEoeiwge1xuICAgICAgICBibG9jazogblxuICAgICAgfSlcbiAgICApO1xuICB9LCBFID0gKHkpID0+IHtcbiAgICB5LnByZXZlbnREZWZhdWx0KCksIGQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIiwgYy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiLCBwID0ge1xuICAgICAgaGFuZGxlVXNlZDogXCJsZWZ0XCIsXG4gICAgICBpbml0aWFsV2lkdGg6IG4ucHJvcHMud2lkdGgsXG4gICAgICBpbml0aWFsQ2xpZW50WDogeS5jbGllbnRYXG4gICAgfTtcbiAgfSwgXyA9ICh5KSA9PiB7XG4gICAgeS5wcmV2ZW50RGVmYXVsdCgpLCBkLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCIsIGMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIiwgcCA9IHtcbiAgICAgIGhhbmRsZVVzZWQ6IFwicmlnaHRcIixcbiAgICAgIGluaXRpYWxXaWR0aDogbi5wcm9wcy53aWR0aCxcbiAgICAgIGluaXRpYWxDbGllbnRYOiB5LmNsaWVudFhcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdC5hcHBlbmRDaGlsZChvKSwgby5hcHBlbmRDaGlsZChyKSwgby5hcHBlbmRDaGlsZChpKSwgdC5hcHBlbmRDaGlsZChzKSwgcy5hcHBlbmRDaGlsZChsKSwgbC5hcHBlbmRDaGlsZChhKSwgbC5hcHBlbmRDaGlsZChkKSwgbC5hcHBlbmRDaGlsZChjKSwgcy5hcHBlbmRDaGlsZChtKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZiksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBrKSwgby5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHYpLCBvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB3KSwgZC5hZGRFdmVudExpc3RlbmVyKFxuICAgIFwibW91c2Vkb3duXCIsXG4gICAgRVxuICApLCBjLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgXCJtb3VzZWRvd25cIixcbiAgICBfXG4gICksIHtcbiAgICBkb206IHQsXG4gICAgZGVzdHJveTogKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZiksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBrKSwgby5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICBcIm1vdXNlZG93blwiLFxuICAgICAgICB2XG4gICAgICApLCBvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB3KSwgZC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICBcIm1vdXNlZG93blwiLFxuICAgICAgICBFXG4gICAgICApLCBjLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwibW91c2Vkb3duXCIsXG4gICAgICAgIF9cbiAgICAgICk7XG4gICAgfVxuICB9O1xufSwgUG8gPSBnbyh7XG4gIHR5cGU6IFwiaW1hZ2VcIixcbiAgcHJvcFNjaGVtYTogTG8sXG4gIGNvbnRhaW5zSW5saW5lQ29udGVudDogITEsXG4gIHJlbmRlcjogTm9cbn0pLCBqdCA9IHtcbiAgcGFyYWdyYXBoOiBBbyxcbiAgaGVhZGluZzogeW8sXG4gIGJ1bGxldExpc3RJdGVtOiBDbyxcbiAgbnVtYmVyZWRMaXN0SXRlbTogQm8sXG4gIGltYWdlOiBQb1xufTtcbmNsYXNzIERvIHtcbiAgY29uc3RydWN0b3IoZSwgdCwgbykge1xuICAgIHUodGhpcywgXCJmb3JtYXR0aW5nVG9vbGJhclN0YXRlXCIpO1xuICAgIHUodGhpcywgXCJ1cGRhdGVGb3JtYXR0aW5nVG9vbGJhclwiKTtcbiAgICB1KHRoaXMsIFwicHJldmVudEhpZGVcIiwgITEpO1xuICAgIHUodGhpcywgXCJwcmV2ZW50U2hvd1wiLCAhMSk7XG4gICAgdSh0aGlzLCBcInByZXZXYXNFZGl0YWJsZVwiLCBudWxsKTtcbiAgICB1KHRoaXMsIFwic2hvdWxkU2hvd1wiLCAoeyB2aWV3OiBlLCBzdGF0ZTogdCwgZnJvbTogbywgdG86IHIgfSkgPT4ge1xuICAgICAgY29uc3QgeyBkb2M6IGksIHNlbGVjdGlvbjogcyB9ID0gdCwgeyBlbXB0eTogbCB9ID0gcywgYSA9ICFpLnRleHRCZXR3ZWVuKG8sIHIpLmxlbmd0aCAmJiBvZSh0LnNlbGVjdGlvbik7XG4gICAgICByZXR1cm4gISghZS5oYXNGb2N1cygpIHx8IGwgfHwgYSk7XG4gICAgfSk7XG4gICAgdSh0aGlzLCBcInZpZXdNb3VzZWRvd25IYW5kbGVyXCIsICgpID0+IHtcbiAgICAgIHRoaXMucHJldmVudFNob3cgPSAhMDtcbiAgICB9KTtcbiAgICB1KHRoaXMsIFwidmlld01vdXNldXBIYW5kbGVyXCIsICgpID0+IHtcbiAgICAgIHRoaXMucHJldmVudFNob3cgPSAhMSwgc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZSh0aGlzLnBtVmlldykpO1xuICAgIH0pO1xuICAgIC8vIEZvciBkcmFnZ2luZyB0aGUgd2hvbGUgZWRpdG9yLlxuICAgIHUodGhpcywgXCJkcmFnc3RhcnRIYW5kbGVyXCIsICgpID0+IHtcbiAgICAgIHZhciBlO1xuICAgICAgKGUgPSB0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgZS5zaG93ICYmICh0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZUZvcm1hdHRpbmdUb29sYmFyKCkpO1xuICAgIH0pO1xuICAgIHUodGhpcywgXCJmb2N1c0hhbmRsZXJcIiwgKCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZSh0aGlzLnBtVmlldykpO1xuICAgIH0pO1xuICAgIHUodGhpcywgXCJibHVySGFuZGxlclwiLCAoZSkgPT4ge1xuICAgICAgdmFyIG87XG4gICAgICBpZiAodGhpcy5wcmV2ZW50SGlkZSkge1xuICAgICAgICB0aGlzLnByZXZlbnRIaWRlID0gITE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHQgPSB0aGlzLnBtVmlldy5kb20ucGFyZW50RWxlbWVudDtcbiAgICAgIC8vIEFuIGVsZW1lbnQgaXMgY2xpY2tlZC5cbiAgICAgIGUgJiYgZS5yZWxhdGVkVGFyZ2V0ICYmIC8vIEVsZW1lbnQgaXMgaW5zaWRlIHRoZSBlZGl0b3IuXG4gICAgICAodCA9PT0gZS5yZWxhdGVkVGFyZ2V0IHx8IHQuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkgfHwgKG8gPSB0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgby5zaG93ICYmICh0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZUZvcm1hdHRpbmdUb29sYmFyKCkpO1xuICAgIH0pO1xuICAgIHUodGhpcywgXCJzY3JvbGxIYW5kbGVyXCIsICgpID0+IHtcbiAgICAgIHZhciBlO1xuICAgICAgKGUgPSB0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgZS5zaG93ICYmICh0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUucmVmZXJlbmNlUG9zID0gdGhpcy5nZXRTZWxlY3Rpb25Cb3VuZGluZ0JveCgpLCB0aGlzLnVwZGF0ZUZvcm1hdHRpbmdUb29sYmFyKCkpO1xuICAgIH0pO1xuICAgIHRoaXMuZWRpdG9yID0gZSwgdGhpcy5wbVZpZXcgPSB0LCB0aGlzLnVwZGF0ZUZvcm1hdHRpbmdUb29sYmFyID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmZvcm1hdHRpbmdUb29sYmFyU3RhdGUpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gdXBkYXRlIHVuaW5pdGlhbGl6ZWQgZm9ybWF0dGluZyB0b29sYmFyXCJcbiAgICAgICAgKTtcbiAgICAgIG8odGhpcy5mb3JtYXR0aW5nVG9vbGJhclN0YXRlKTtcbiAgICB9LCB0LmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMudmlld01vdXNlZG93bkhhbmRsZXIpLCB0LmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLnZpZXdNb3VzZXVwSGFuZGxlciksIHQuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5kcmFnc3RhcnRIYW5kbGVyKSwgdC5kb20uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuZm9jdXNIYW5kbGVyKSwgdC5kb20uYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5ibHVySGFuZGxlciksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgfVxuICB1cGRhdGUoZSwgdCkge1xuICAgIHZhciBoLCBwO1xuICAgIGNvbnN0IHsgc3RhdGU6IG8sIGNvbXBvc2luZzogciB9ID0gZSwgeyBkb2M6IGksIHNlbGVjdGlvbjogcyB9ID0gbywgbCA9IHQgJiYgdC5kb2MuZXEoaSkgJiYgdC5zZWxlY3Rpb24uZXEocyk7XG4gICAgaWYgKCh0aGlzLnByZXZXYXNFZGl0YWJsZSA9PT0gbnVsbCB8fCB0aGlzLnByZXZXYXNFZGl0YWJsZSA9PT0gdGhpcy5lZGl0b3IuaXNFZGl0YWJsZSkgJiYgKHIgfHwgbCkpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5wcmV2V2FzRWRpdGFibGUgPSB0aGlzLmVkaXRvci5pc0VkaXRhYmxlO1xuICAgIGNvbnN0IHsgcmFuZ2VzOiBhIH0gPSBzLCBkID0gTWF0aC5taW4oLi4uYS5tYXAoKGYpID0+IGYuJGZyb20ucG9zKSksIGMgPSBNYXRoLm1heCguLi5hLm1hcCgoZikgPT4gZi4kdG8ucG9zKSksIG0gPSAoaCA9IHRoaXMuc2hvdWxkU2hvdykgPT0gbnVsbCA/IHZvaWQgMCA6IGguY2FsbCh0aGlzLCB7XG4gICAgICB2aWV3OiBlLFxuICAgICAgc3RhdGU6IG8sXG4gICAgICBmcm9tOiBkLFxuICAgICAgdG86IGNcbiAgICB9KTtcbiAgICBpZiAodGhpcy5lZGl0b3IuaXNFZGl0YWJsZSAmJiAhdGhpcy5wcmV2ZW50U2hvdyAmJiAobSB8fCB0aGlzLnByZXZlbnRIaWRlKSkge1xuICAgICAgdGhpcy5mb3JtYXR0aW5nVG9vbGJhclN0YXRlID0ge1xuICAgICAgICBzaG93OiAhMCxcbiAgICAgICAgcmVmZXJlbmNlUG9zOiB0aGlzLmdldFNlbGVjdGlvbkJvdW5kaW5nQm94KClcbiAgICAgIH0sIHRoaXMudXBkYXRlRm9ybWF0dGluZ1Rvb2xiYXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKChwID0gdGhpcy5mb3JtYXR0aW5nVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIHAuc2hvdyAmJiAhdGhpcy5wcmV2ZW50SGlkZSAmJiAoIW0gfHwgdGhpcy5wcmV2ZW50U2hvdyB8fCAhdGhpcy5lZGl0b3IuaXNFZGl0YWJsZSkpIHtcbiAgICAgIHRoaXMuZm9ybWF0dGluZ1Rvb2xiYXJTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlRm9ybWF0dGluZ1Rvb2xiYXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBtVmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLnZpZXdNb3VzZWRvd25IYW5kbGVyKSwgdGhpcy5wbVZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudmlld01vdXNldXBIYW5kbGVyKSwgdGhpcy5wbVZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5kcmFnc3RhcnRIYW5kbGVyKSwgdGhpcy5wbVZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLmZvY3VzSGFuZGxlciksIHRoaXMucG1WaWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmJsdXJIYW5kbGVyKSwgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICB9XG4gIGdldFNlbGVjdGlvbkJvdW5kaW5nQm94KCkge1xuICAgIGNvbnN0IHsgc3RhdGU6IGUgfSA9IHRoaXMucG1WaWV3LCB7IHNlbGVjdGlvbjogdCB9ID0gZSwgeyByYW5nZXM6IG8gfSA9IHQsIHIgPSBNYXRoLm1pbiguLi5vLm1hcCgocykgPT4gcy4kZnJvbS5wb3MpKSwgaSA9IE1hdGgubWF4KC4uLm8ubWFwKChzKSA9PiBzLiR0by5wb3MpKTtcbiAgICBpZiAobmUodCkpIHtcbiAgICAgIGNvbnN0IHMgPSB0aGlzLnBtVmlldy5ub2RlRE9NKHIpO1xuICAgICAgaWYgKHMpXG4gICAgICAgIHJldHVybiBzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gSyh0aGlzLnBtVmlldywgciwgaSk7XG4gIH1cbn1cbmNvbnN0IE9vID0gbmV3IEIoXG4gIFwiRm9ybWF0dGluZ1Rvb2xiYXJQbHVnaW5cIlxuKTtcbmNsYXNzIFJvIGV4dGVuZHMgVSB7XG4gIGNvbnN0cnVjdG9yKHQpIHtcbiAgICBzdXBlcigpO1xuICAgIHUodGhpcywgXCJ2aWV3XCIpO1xuICAgIHUodGhpcywgXCJwbHVnaW5cIik7XG4gICAgdGhpcy5wbHVnaW4gPSBuZXcgVCh7XG4gICAgICBrZXk6IE9vLFxuICAgICAgdmlldzogKG8pID0+ICh0aGlzLnZpZXcgPSBuZXcgRG8odCwgbywgKHIpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIsIHIpO1xuICAgICAgfSksIHRoaXMudmlldylcbiAgICB9KTtcbiAgfVxuICBvblVwZGF0ZSh0KSB7XG4gICAgcmV0dXJuIHRoaXMub24oXCJ1cGRhdGVcIiwgdCk7XG4gIH1cbn1cbmNsYXNzIHpvIHtcbiAgY29uc3RydWN0b3IoZSwgdCwgbykge1xuICAgIHUodGhpcywgXCJoeXBlcmxpbmtUb29sYmFyU3RhdGVcIik7XG4gICAgdSh0aGlzLCBcInVwZGF0ZUh5cGVybGlua1Rvb2xiYXJcIik7XG4gICAgdSh0aGlzLCBcIm1lbnVVcGRhdGVUaW1lclwiKTtcbiAgICB1KHRoaXMsIFwic3RhcnRNZW51VXBkYXRlVGltZXJcIik7XG4gICAgdSh0aGlzLCBcInN0b3BNZW51VXBkYXRlVGltZXJcIik7XG4gICAgdSh0aGlzLCBcIm1vdXNlSG92ZXJlZEh5cGVybGlua01hcmtcIik7XG4gICAgdSh0aGlzLCBcIm1vdXNlSG92ZXJlZEh5cGVybGlua01hcmtSYW5nZVwiKTtcbiAgICB1KHRoaXMsIFwia2V5Ym9hcmRIb3ZlcmVkSHlwZXJsaW5rTWFya1wiKTtcbiAgICB1KHRoaXMsIFwia2V5Ym9hcmRIb3ZlcmVkSHlwZXJsaW5rTWFya1JhbmdlXCIpO1xuICAgIHUodGhpcywgXCJoeXBlcmxpbmtNYXJrXCIpO1xuICAgIHUodGhpcywgXCJoeXBlcmxpbmtNYXJrUmFuZ2VcIik7XG4gICAgdSh0aGlzLCBcIm1vdXNlT3ZlckhhbmRsZXJcIiwgKGUpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vdXNlSG92ZXJlZEh5cGVybGlua01hcmsgPSB2b2lkIDAsIHRoaXMubW91c2VIb3ZlcmVkSHlwZXJsaW5rTWFya1JhbmdlID0gdm9pZCAwLCB0aGlzLnN0b3BNZW51VXBkYXRlVGltZXIoKSwgZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlLnRhcmdldC5ub2RlTmFtZSA9PT0gXCJBXCIpIHtcbiAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0LCBvID0gdGhpcy5wbVZpZXcucG9zQXRET00odCwgMCkgKyAxLCByID0gdGhpcy5wbVZpZXcuc3RhdGUuZG9jLnJlc29sdmUoXG4gICAgICAgICAgb1xuICAgICAgICApLCBpID0gci5tYXJrcygpO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgaSlcbiAgICAgICAgICBpZiAocy50eXBlLm5hbWUgPT09IHRoaXMucG1WaWV3LnN0YXRlLnNjaGVtYS5tYXJrKFwibGlua1wiKS50eXBlLm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VIb3ZlcmVkSHlwZXJsaW5rTWFyayA9IHMsIHRoaXMubW91c2VIb3ZlcmVkSHlwZXJsaW5rTWFya1JhbmdlID0gcnQoXG4gICAgICAgICAgICAgIHIsXG4gICAgICAgICAgICAgIHMudHlwZSxcbiAgICAgICAgICAgICAgcy5hdHRyc1xuICAgICAgICAgICAgKSB8fCB2b2lkIDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5zdGFydE1lbnVVcGRhdGVUaW1lcigpLCAhMTtcbiAgICB9KTtcbiAgICB1KHRoaXMsIFwiY2xpY2tIYW5kbGVyXCIsIChlKSA9PiB7XG4gICAgICB2YXIgbztcbiAgICAgIGNvbnN0IHQgPSB0aGlzLnBtVmlldy5kb20ucGFyZW50RWxlbWVudDtcbiAgICAgIC8vIFRvb2xiYXIgaXMgb3Blbi5cbiAgICAgIHRoaXMuaHlwZXJsaW5rTWFyayAmJiAvLyBBbiBlbGVtZW50IGlzIGNsaWNrZWQuXG4gICAgICBlICYmIGUudGFyZ2V0ICYmIC8vIFRoZSBjbGlja2VkIGVsZW1lbnQgaXMgbm90IHRoZSBlZGl0b3IuXG4gICAgICAhKHQgPT09IGUudGFyZ2V0IHx8IHQuY29udGFpbnMoZS50YXJnZXQpKSAmJiAobyA9IHRoaXMuaHlwZXJsaW5rVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIG8uc2hvdyAmJiAodGhpcy5oeXBlcmxpbmtUb29sYmFyU3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZUh5cGVybGlua1Rvb2xiYXIoKSk7XG4gICAgfSk7XG4gICAgdSh0aGlzLCBcInNjcm9sbEhhbmRsZXJcIiwgKCkgPT4ge1xuICAgICAgdmFyIGU7XG4gICAgICB0aGlzLmh5cGVybGlua01hcmsgIT09IHZvaWQgMCAmJiAoZSA9IHRoaXMuaHlwZXJsaW5rVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIGUuc2hvdyAmJiAodGhpcy5oeXBlcmxpbmtUb29sYmFyU3RhdGUucmVmZXJlbmNlUG9zID0gSyhcbiAgICAgICAgdGhpcy5wbVZpZXcsXG4gICAgICAgIHRoaXMuaHlwZXJsaW5rTWFya1JhbmdlLmZyb20sXG4gICAgICAgIHRoaXMuaHlwZXJsaW5rTWFya1JhbmdlLnRvXG4gICAgICApLCB0aGlzLnVwZGF0ZUh5cGVybGlua1Rvb2xiYXIoKSk7XG4gICAgfSk7XG4gICAgdGhpcy5lZGl0b3IgPSBlLCB0aGlzLnBtVmlldyA9IHQsIHRoaXMudXBkYXRlSHlwZXJsaW5rVG9vbGJhciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5oeXBlcmxpbmtUb29sYmFyU3RhdGUpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRpbmcgdG8gdXBkYXRlIHVuaW5pdGlhbGl6ZWQgaHlwZXJsaW5rIHRvb2xiYXJcIik7XG4gICAgICBvKHRoaXMuaHlwZXJsaW5rVG9vbGJhclN0YXRlKTtcbiAgICB9LCB0aGlzLnN0YXJ0TWVudVVwZGF0ZVRpbWVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5tZW51VXBkYXRlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH0sIDI1MCk7XG4gICAgfSwgdGhpcy5zdG9wTWVudVVwZGF0ZVRpbWVyID0gKCkgPT4gKHRoaXMubWVudVVwZGF0ZVRpbWVyICYmIChjbGVhclRpbWVvdXQodGhpcy5tZW51VXBkYXRlVGltZXIpLCB0aGlzLm1lbnVVcGRhdGVUaW1lciA9IHZvaWQgMCksICExKSwgdGhpcy5wbVZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5tb3VzZU92ZXJIYW5kbGVyKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tIYW5kbGVyLCAhMCksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgfVxuICBlZGl0SHlwZXJsaW5rKGUsIHQpIHtcbiAgICB2YXIgcjtcbiAgICBjb25zdCBvID0gdGhpcy5wbVZpZXcuc3RhdGUudHIuaW5zZXJ0VGV4dChcbiAgICAgIHQsXG4gICAgICB0aGlzLmh5cGVybGlua01hcmtSYW5nZS5mcm9tLFxuICAgICAgdGhpcy5oeXBlcmxpbmtNYXJrUmFuZ2UudG9cbiAgICApO1xuICAgIG8uYWRkTWFyayhcbiAgICAgIHRoaXMuaHlwZXJsaW5rTWFya1JhbmdlLmZyb20sXG4gICAgICB0aGlzLmh5cGVybGlua01hcmtSYW5nZS5mcm9tICsgdC5sZW5ndGgsXG4gICAgICB0aGlzLnBtVmlldy5zdGF0ZS5zY2hlbWEubWFyayhcImxpbmtcIiwgeyBocmVmOiBlIH0pXG4gICAgKSwgdGhpcy5wbVZpZXcuZGlzcGF0Y2gobyksIHRoaXMucG1WaWV3LmZvY3VzKCksIChyID0gdGhpcy5oeXBlcmxpbmtUb29sYmFyU3RhdGUpICE9IG51bGwgJiYgci5zaG93ICYmICh0aGlzLmh5cGVybGlua1Rvb2xiYXJTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlSHlwZXJsaW5rVG9vbGJhcigpKTtcbiAgfVxuICBkZWxldGVIeXBlcmxpbmsoKSB7XG4gICAgdmFyIGU7XG4gICAgdGhpcy5wbVZpZXcuZGlzcGF0Y2goXG4gICAgICB0aGlzLnBtVmlldy5zdGF0ZS50ci5yZW1vdmVNYXJrKFxuICAgICAgICB0aGlzLmh5cGVybGlua01hcmtSYW5nZS5mcm9tLFxuICAgICAgICB0aGlzLmh5cGVybGlua01hcmtSYW5nZS50byxcbiAgICAgICAgdGhpcy5oeXBlcmxpbmtNYXJrLnR5cGVcbiAgICAgICkuc2V0TWV0YShcInByZXZlbnRBdXRvbGlua1wiLCAhMClcbiAgICApLCB0aGlzLnBtVmlldy5mb2N1cygpLCAoZSA9IHRoaXMuaHlwZXJsaW5rVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIGUuc2hvdyAmJiAodGhpcy5oeXBlcmxpbmtUb29sYmFyU3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZUh5cGVybGlua1Rvb2xiYXIoKSk7XG4gIH1cbiAgdXBkYXRlKCkge1xuICAgIHZhciB0O1xuICAgIGlmICghdGhpcy5wbVZpZXcuaGFzRm9jdXMoKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBlID0gdGhpcy5oeXBlcmxpbmtNYXJrO1xuICAgIGlmICh0aGlzLmh5cGVybGlua01hcmsgPSB2b2lkIDAsIHRoaXMuaHlwZXJsaW5rTWFya1JhbmdlID0gdm9pZCAwLCB0aGlzLmtleWJvYXJkSG92ZXJlZEh5cGVybGlua01hcmsgPSB2b2lkIDAsIHRoaXMua2V5Ym9hcmRIb3ZlcmVkSHlwZXJsaW5rTWFya1JhbmdlID0gdm9pZCAwLCB0aGlzLnBtVmlldy5zdGF0ZS5zZWxlY3Rpb24uZW1wdHkpIHtcbiAgICAgIGNvbnN0IG8gPSB0aGlzLnBtVmlldy5zdGF0ZS5zZWxlY3Rpb24uJGZyb20ubWFya3MoKTtcbiAgICAgIGZvciAoY29uc3QgciBvZiBvKVxuICAgICAgICBpZiAoci50eXBlLm5hbWUgPT09IHRoaXMucG1WaWV3LnN0YXRlLnNjaGVtYS5tYXJrKFwibGlua1wiKS50eXBlLm5hbWUpIHtcbiAgICAgICAgICB0aGlzLmtleWJvYXJkSG92ZXJlZEh5cGVybGlua01hcmsgPSByLCB0aGlzLmtleWJvYXJkSG92ZXJlZEh5cGVybGlua01hcmtSYW5nZSA9IHJ0KFxuICAgICAgICAgICAgdGhpcy5wbVZpZXcuc3RhdGUuc2VsZWN0aW9uLiRmcm9tLFxuICAgICAgICAgICAgci50eXBlLFxuICAgICAgICAgICAgci5hdHRyc1xuICAgICAgICAgICkgfHwgdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm1vdXNlSG92ZXJlZEh5cGVybGlua01hcmsgJiYgKHRoaXMuaHlwZXJsaW5rTWFyayA9IHRoaXMubW91c2VIb3ZlcmVkSHlwZXJsaW5rTWFyaywgdGhpcy5oeXBlcmxpbmtNYXJrUmFuZ2UgPSB0aGlzLm1vdXNlSG92ZXJlZEh5cGVybGlua01hcmtSYW5nZSksIHRoaXMua2V5Ym9hcmRIb3ZlcmVkSHlwZXJsaW5rTWFyayAmJiAodGhpcy5oeXBlcmxpbmtNYXJrID0gdGhpcy5rZXlib2FyZEhvdmVyZWRIeXBlcmxpbmtNYXJrLCB0aGlzLmh5cGVybGlua01hcmtSYW5nZSA9IHRoaXMua2V5Ym9hcmRIb3ZlcmVkSHlwZXJsaW5rTWFya1JhbmdlKSwgdGhpcy5oeXBlcmxpbmtNYXJrICYmIHRoaXMuZWRpdG9yLmlzRWRpdGFibGUpIHtcbiAgICAgIHRoaXMuaHlwZXJsaW5rVG9vbGJhclN0YXRlID0ge1xuICAgICAgICBzaG93OiAhMCxcbiAgICAgICAgcmVmZXJlbmNlUG9zOiBLKFxuICAgICAgICAgIHRoaXMucG1WaWV3LFxuICAgICAgICAgIHRoaXMuaHlwZXJsaW5rTWFya1JhbmdlLmZyb20sXG4gICAgICAgICAgdGhpcy5oeXBlcmxpbmtNYXJrUmFuZ2UudG9cbiAgICAgICAgKSxcbiAgICAgICAgdXJsOiB0aGlzLmh5cGVybGlua01hcmsuYXR0cnMuaHJlZixcbiAgICAgICAgdGV4dDogdGhpcy5wbVZpZXcuc3RhdGUuZG9jLnRleHRCZXR3ZWVuKFxuICAgICAgICAgIHRoaXMuaHlwZXJsaW5rTWFya1JhbmdlLmZyb20sXG4gICAgICAgICAgdGhpcy5oeXBlcmxpbmtNYXJrUmFuZ2UudG9cbiAgICAgICAgKVxuICAgICAgfSwgdGhpcy51cGRhdGVIeXBlcmxpbmtUb29sYmFyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICgodCA9IHRoaXMuaHlwZXJsaW5rVG9vbGJhclN0YXRlKSAhPSBudWxsICYmIHQuc2hvdyAmJiBlICYmICghdGhpcy5oeXBlcmxpbmtNYXJrIHx8ICF0aGlzLmVkaXRvci5pc0VkaXRhYmxlKSkge1xuICAgICAgdGhpcy5oeXBlcmxpbmtUb29sYmFyU3RhdGUuc2hvdyA9ICExLCB0aGlzLnVwZGF0ZUh5cGVybGlua1Rvb2xiYXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBtVmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLm1vdXNlT3ZlckhhbmRsZXIpLCBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMuc2Nyb2xsSGFuZGxlciksIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrSGFuZGxlciwgITApO1xuICB9XG59XG5jb25zdCBWbyA9IG5ldyBCKFxuICBcIkh5cGVybGlua1Rvb2xiYXJQbHVnaW5cIlxuKTtcbmNsYXNzIFVvIGV4dGVuZHMgVSB7XG4gIGNvbnN0cnVjdG9yKHQpIHtcbiAgICBzdXBlcigpO1xuICAgIHUodGhpcywgXCJ2aWV3XCIpO1xuICAgIHUodGhpcywgXCJwbHVnaW5cIik7XG4gICAgLyoqXG4gICAgICogRWRpdCB0aGUgY3VycmVudGx5IGhvdmVyZWQgaHlwZXJsaW5rLlxuICAgICAqL1xuICAgIHUodGhpcywgXCJlZGl0SHlwZXJsaW5rXCIsICh0LCBvKSA9PiB7XG4gICAgICB0aGlzLnZpZXcuZWRpdEh5cGVybGluayh0LCBvKTtcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnRseSBob3ZlcmVkIGh5cGVybGluay5cbiAgICAgKi9cbiAgICB1KHRoaXMsIFwiZGVsZXRlSHlwZXJsaW5rXCIsICgpID0+IHtcbiAgICAgIHRoaXMudmlldy5kZWxldGVIeXBlcmxpbmsoKTtcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBXaGVuIGhvdmVyaW5nIG9uL29mZiBoeXBlcmxpbmtzIHVzaW5nIHRoZSBtb3VzZSBjdXJzb3IsIHRoZSBoeXBlcmxpbmtcbiAgICAgKiB0b29sYmFyIHdpbGwgb3BlbiAmIGNsb3NlIHdpdGggYSBkZWxheS5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gc3RhcnRzIHRoZSBkZWxheSB0aW1lciwgYW5kIHNob3VsZCBiZSB1c2VkIGZvciB3aGVuIHRoZSBtb3VzZSBjdXJzb3IgZW50ZXJzIHRoZSBoeXBlcmxpbmsgdG9vbGJhci5cbiAgICAgKi9cbiAgICB1KHRoaXMsIFwic3RhcnRIaWRlVGltZXJcIiwgKCkgPT4ge1xuICAgICAgdGhpcy52aWV3LnN0YXJ0TWVudVVwZGF0ZVRpbWVyKCk7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogV2hlbiBob3ZlcmluZyBvbi9vZmYgaHlwZXJsaW5rcyB1c2luZyB0aGUgbW91c2UgY3Vyc29yLCB0aGUgaHlwZXJsaW5rXG4gICAgICogdG9vbGJhciB3aWxsIG9wZW4gJiBjbG9zZSB3aXRoIGEgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHN0b3BzIHRoZSBkZWxheSB0aW1lciwgYW5kIHNob3VsZCBiZSB1c2VkIGZvciB3aGVuIHRoZSBtb3VzZSBjdXJzb3IgZXhpdHMgdGhlIGh5cGVybGluayB0b29sYmFyLlxuICAgICAqL1xuICAgIHUodGhpcywgXCJzdG9wSGlkZVRpbWVyXCIsICgpID0+IHtcbiAgICAgIHRoaXMudmlldy5zdG9wTWVudVVwZGF0ZVRpbWVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wbHVnaW4gPSBuZXcgVCh7XG4gICAgICBrZXk6IFZvLFxuICAgICAgdmlldzogKG8pID0+ICh0aGlzLnZpZXcgPSBuZXcgem8odCwgbywgKHIpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIsIHIpO1xuICAgICAgfSksIHRoaXMudmlldylcbiAgICB9KTtcbiAgfVxuICBvblVwZGF0ZSh0KSB7XG4gICAgcmV0dXJuIHRoaXMub24oXCJ1cGRhdGVcIiwgdCk7XG4gIH1cbn1cbmNsYXNzIE8gZXh0ZW5kcyBYIHtcbiAgY29uc3RydWN0b3IodCwgbykge1xuICAgIHN1cGVyKHQsIG8pO1xuICAgIHUodGhpcywgXCJub2Rlc1wiKTtcbiAgICBjb25zdCByID0gdC5ub2RlKCk7XG4gICAgdGhpcy5ub2RlcyA9IFtdLCB0LmRvYy5ub2Rlc0JldHdlZW4odC5wb3MsIG8ucG9zLCAoaSwgcywgbCkgPT4ge1xuICAgICAgaWYgKGwgIT09IG51bGwgJiYgbC5lcShyKSlcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXMucHVzaChpKSwgITE7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIGNyZWF0ZSh0LCBvLCByID0gbykge1xuICAgIHJldHVybiBuZXcgTyh0LnJlc29sdmUobyksIHQucmVzb2x2ZShyKSk7XG4gIH1cbiAgY29udGVudCgpIHtcbiAgICByZXR1cm4gbmV3IEwoUC5mcm9tKHRoaXMubm9kZXMpLCAwLCAwKTtcbiAgfVxuICBlcSh0KSB7XG4gICAgaWYgKCEodCBpbnN0YW5jZW9mIE8pIHx8IHRoaXMubm9kZXMubGVuZ3RoICE9PSB0Lm5vZGVzLmxlbmd0aCB8fCB0aGlzLmZyb20gIT09IHQuZnJvbSB8fCB0aGlzLnRvICE9PSB0LnRvKVxuICAgICAgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG8gPSAwOyBvIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IG8rKylcbiAgICAgIGlmICghdGhpcy5ub2Rlc1tvXS5lcSh0Lm5vZGVzW29dKSlcbiAgICAgICAgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbiAgfVxuICBtYXAodCwgbykge1xuICAgIGNvbnN0IHIgPSBvLm1hcFJlc3VsdCh0aGlzLmZyb20pLCBpID0gby5tYXBSZXN1bHQodGhpcy50byk7XG4gICAgcmV0dXJuIGkuZGVsZXRlZCA/IFgubmVhcih0LnJlc29sdmUoci5wb3MpKSA6IHIuZGVsZXRlZCA/IFgubmVhcih0LnJlc29sdmUoaS5wb3MpKSA6IG5ldyBPKFxuICAgICAgdC5yZXNvbHZlKHIucG9zKSxcbiAgICAgIHQucmVzb2x2ZShpLnBvcylcbiAgICApO1xuICB9XG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcIm5vZGVcIiwgYW5jaG9yOiB0aGlzLmFuY2hvciwgaGVhZDogdGhpcy5oZWFkIH07XG4gIH1cbn1cbmNvbnN0IEZvID0gdmUuX19zZXJpYWxpemVGb3JDbGlwYm9hcmQ7XG5sZXQgSTtcbmZ1bmN0aW9uIHF0KG4sIGUpIHtcbiAgdmFyIHI7XG4gIGlmICghZS5kb20uaXNDb25uZWN0ZWQpXG4gICAgcmV0dXJuO1xuICBjb25zdCB0ID0gZS5wb3NBdENvb3JkcyhuKTtcbiAgaWYgKCF0KVxuICAgIHJldHVybjtcbiAgbGV0IG8gPSBlLmRvbUF0UG9zKHQucG9zKS5ub2RlO1xuICBpZiAobyAhPT0gZS5kb20pIHtcbiAgICBmb3IgKDsgbyAmJiBvLnBhcmVudE5vZGUgJiYgby5wYXJlbnROb2RlICE9PSBlLmRvbSAmJiAhKChyID0gby5oYXNBdHRyaWJ1dGUpICE9IG51bGwgJiYgci5jYWxsKG8sIFwiZGF0YS1pZFwiKSk7IClcbiAgICAgIG8gPSBvLnBhcmVudE5vZGU7XG4gICAgaWYgKG8pXG4gICAgICByZXR1cm4geyBub2RlOiBvLCBpZDogby5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpIH07XG4gIH1cbn1cbmZ1bmN0aW9uIFdvKG4sIGUpIHtcbiAgY29uc3QgdCA9IHF0KG4sIGUpO1xuICBpZiAodCAmJiB0Lm5vZGUubm9kZVR5cGUgPT09IDEpIHtcbiAgICBjb25zdCBvID0gZS5kb2NWaWV3LCByID0gby5uZWFyZXN0RGVzYyh0Lm5vZGUsICEwKTtcbiAgICByZXR1cm4gIXIgfHwgciA9PT0gbyA/IG51bGwgOiByLnBvc0JlZm9yZTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uICRvKG4sIGUpIHtcbiAgbGV0IHQsIG87XG4gIGNvbnN0IHIgPSBlLnJlc29sdmUobi5mcm9tKS5ub2RlKCkudHlwZS5zcGVjLmdyb3VwID09PSBcImJsb2NrQ29udGVudFwiLCBpID0gZS5yZXNvbHZlKG4udG8pLm5vZGUoKS50eXBlLnNwZWMuZ3JvdXAgPT09IFwiYmxvY2tDb250ZW50XCIsIHMgPSBNYXRoLm1pbihuLiRhbmNob3IuZGVwdGgsIG4uJGhlYWQuZGVwdGgpO1xuICBpZiAociAmJiBpKSB7XG4gICAgY29uc3QgbCA9IG4uJGZyb20uc3RhcnQocyAtIDEpLCBhID0gbi4kdG8uZW5kKHMgLSAxKTtcbiAgICB0ID0gZS5yZXNvbHZlKGwgLSAxKS5wb3MsIG8gPSBlLnJlc29sdmUoYSArIDEpLnBvcztcbiAgfSBlbHNlXG4gICAgdCA9IG4uZnJvbSwgbyA9IG4udG87XG4gIHJldHVybiB7IGZyb206IHQsIHRvOiBvIH07XG59XG5mdW5jdGlvbiBwdChuLCBlLCB0ID0gZSkge1xuICBlID09PSB0ICYmICh0ICs9IG4uc3RhdGUuZG9jLnJlc29sdmUoZSArIDEpLm5vZGUoKS5ub2RlU2l6ZSk7XG4gIGNvbnN0IG8gPSBuLmRvbUF0UG9zKGUpLm5vZGUuY2xvbmVOb2RlKCEwKSwgciA9IG4uZG9tQXRQb3MoZSkubm9kZSwgaSA9IChjLCBtKSA9PiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGMuY2hpbGRyZW4sIG0pLCBzID0gaShcbiAgICByLFxuICAgIC8vIEV4cGVjdHMgZnJvbSBwb3NpdGlvbiB0byBiZSBqdXN0IGJlZm9yZSB0aGUgZmlyc3Qgc2VsZWN0ZWQgYmxvY2suXG4gICAgbi5kb21BdFBvcyhlICsgMSkubm9kZS5wYXJlbnRFbGVtZW50XG4gICksIGwgPSBpKFxuICAgIHIsXG4gICAgLy8gRXhwZWN0cyB0byBwb3NpdGlvbiB0byBiZSBqdXN0IGFmdGVyIHRoZSBsYXN0IHNlbGVjdGVkIGJsb2NrLlxuICAgIG4uZG9tQXRQb3ModCAtIDEpLm5vZGUucGFyZW50RWxlbWVudFxuICApO1xuICBmb3IgKGxldCBjID0gci5jaGlsZEVsZW1lbnRDb3VudCAtIDE7IGMgPj0gMDsgYy0tKVxuICAgIChjID4gbCB8fCBjIDwgcykgJiYgby5yZW1vdmVDaGlsZChvLmNoaWxkcmVuW2NdKTtcbiAgWHQoKSwgSSA9IG87XG4gIGNvbnN0IGQgPSBuLmRvbS5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLmZpbHRlcihcbiAgICAoYykgPT4gIWMuaW5jbHVkZXMoXCJiblwiKSAmJiAhYy5pbmNsdWRlcyhcIlByb3NlTWlycm9yXCIpICYmICFjLmluY2x1ZGVzKFwiZWRpdG9yXCIpXG4gICkuam9pbihcIiBcIik7XG4gIEkuY2xhc3NOYW1lID0gSS5jbGFzc05hbWUgKyBcIiBcIiArIEQuZHJhZ1ByZXZpZXcgKyBcIiBcIiArIGQsIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoSSk7XG59XG5mdW5jdGlvbiBYdCgpIHtcbiAgSSAhPT0gdm9pZCAwICYmIChkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKEkpLCBJID0gdm9pZCAwKTtcbn1cbmZ1bmN0aW9uIEdvKG4sIGUpIHtcbiAgaWYgKCFuLmRhdGFUcmFuc2ZlcilcbiAgICByZXR1cm47XG4gIGNvbnN0IHQgPSBlLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbyA9IHtcbiAgICBsZWZ0OiB0LmxlZnQgKyB0LndpZHRoIC8gMixcbiAgICAvLyB0YWtlIG1pZGRsZSBvZiBlZGl0b3JcbiAgICB0b3A6IG4uY2xpZW50WVxuICB9LCByID0gV28obywgZSk7XG4gIGlmIChyICE9IG51bGwpIHtcbiAgICBjb25zdCBpID0gZS5zdGF0ZS5zZWxlY3Rpb24sIHMgPSBlLnN0YXRlLmRvYywgeyBmcm9tOiBsLCB0bzogYSB9ID0gJG8oaSwgcyksIGQgPSBsIDw9IHIgJiYgciA8IGEsIGMgPSBpLiRhbmNob3Iubm9kZSgpICE9PSBpLiRoZWFkLm5vZGUoKSB8fCBpIGluc3RhbmNlb2YgTztcbiAgICBkICYmIGMgPyAoZS5kaXNwYXRjaChcbiAgICAgIGUuc3RhdGUudHIuc2V0U2VsZWN0aW9uKE8uY3JlYXRlKHMsIGwsIGEpKVxuICAgICksIHB0KGUsIGwsIGEpKSA6IChlLmRpc3BhdGNoKFxuICAgICAgZS5zdGF0ZS50ci5zZXRTZWxlY3Rpb24obXQuY3JlYXRlKGUuc3RhdGUuZG9jLCByKSlcbiAgICApLCBwdChlLCByKSk7XG4gICAgY29uc3QgbSA9IGUuc3RhdGUuc2VsZWN0aW9uLmNvbnRlbnQoKSwgeyBkb206IGgsIHRleHQ6IHAgfSA9IEZvKGUsIG0pO1xuICAgIG4uZGF0YVRyYW5zZmVyLmNsZWFyRGF0YSgpLCBuLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9odG1sXCIsIGguaW5uZXJIVE1MKSwgbi5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgcCksIG4uZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSBcIm1vdmVcIiwgbi5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKEksIDAsIDApLCBlLmRyYWdnaW5nID0geyBzbGljZTogbSwgbW92ZTogITAgfTtcbiAgfVxufVxuY2xhc3Mgam8ge1xuICBjb25zdHJ1Y3RvcihlLCB0LCBvKSB7XG4gICAgdSh0aGlzLCBcInNpZGVNZW51U3RhdGVcIik7XG4gICAgLy8gV2hlbiB0cnVlLCB0aGUgZHJhZyBoYW5kbGUgd2l0aCBiZSBhbmNob3JlZCBhdCB0aGUgc2FtZSBsZXZlbCBhcyByb290IGVsZW1lbnRzXG4gICAgLy8gV2hlbiBmYWxzZSwgdGhlIGRyYWcgaGFuZGxlIHdpdGggYmUganVzdCB0byB0aGUgbGVmdCBvZiB0aGUgZWxlbWVudFxuICAgIC8vIFRPRE86IElzIHRoZXJlIGFueSBjYXNlIHdoZXJlIHdlIHdhbnQgdGhpcyB0byBiZSBmYWxzZT9cbiAgICB1KHRoaXMsIFwiaG9yaXpvbnRhbFBvc0FuY2hvcmVkQXRSb290XCIpO1xuICAgIHUodGhpcywgXCJob3Jpem9udGFsUG9zQW5jaG9yXCIpO1xuICAgIHUodGhpcywgXCJob3ZlcmVkQmxvY2tcIik7XG4gICAgLy8gVXNlZCB0byBjaGVjayBpZiBjdXJyZW50bHkgZHJhZ2dlZCBjb250ZW50IGNvbWVzIGZyb20gdGhpcyBlZGl0b3IgaW5zdGFuY2UuXG4gICAgdSh0aGlzLCBcImlzRHJhZ2dpbmdcIiwgITEpO1xuICAgIHUodGhpcywgXCJtZW51RnJvemVuXCIsICExKTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGlzRHJhZ2dpbmcgd2hlbiBkcmFnZ2luZyB0ZXh0LlxuICAgICAqL1xuICAgIHUodGhpcywgXCJvbkRyYWdTdGFydFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmlzRHJhZ2dpbmcgPSAhMDtcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZXZlbnQgaXMgb3V0c2lkZSB0aGUgZWRpdG9yIGNvbnRlbnRzLFxuICAgICAqIHdlIGRpc3BhdGNoIGEgZmFrZSBldmVudCwgc28gdGhhdCB3ZSBjYW4gc3RpbGwgZHJvcCB0aGUgY29udGVudFxuICAgICAqIHdoZW4gZHJhZ2dpbmcgLyBkcm9wcGluZyB0byB0aGUgc2lkZSBvZiB0aGUgZWRpdG9yXG4gICAgICovXG4gICAgdSh0aGlzLCBcIm9uRHJvcFwiLCAoZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZWRpdG9yLl90aXB0YXBFZGl0b3IuY29tbWFuZHMuYmx1cigpLCBlLnN5bnRoZXRpYyB8fCAhdGhpcy5pc0RyYWdnaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCB0ID0gdGhpcy5wbVZpZXcucG9zQXRDb29yZHMoe1xuICAgICAgICBsZWZ0OiBlLmNsaWVudFgsXG4gICAgICAgIHRvcDogZS5jbGllbnRZXG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmcgPSAhMSwgIXQgfHwgdC5pbnNpZGUgPT09IC0xKSB7XG4gICAgICAgIGNvbnN0IG8gPSBuZXcgRXZlbnQoXCJkcm9wXCIsIGUpLCByID0gdGhpcy5wbVZpZXcuZG9tLmZpcnN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG8uY2xpZW50WCA9IHIubGVmdCArIHIud2lkdGggLyAyLCBvLmNsaWVudFkgPSBlLmNsaWVudFksIG8uZGF0YVRyYW5zZmVyID0gZS5kYXRhVHJhbnNmZXIsIG8ucHJldmVudERlZmF1bHQgPSAoKSA9PiBlLnByZXZlbnREZWZhdWx0KCksIG8uc3ludGhldGljID0gITAsIHRoaXMucG1WaWV3LmRvbS5kaXNwYXRjaEV2ZW50KG8pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIElmIHRoZSBldmVudCBpcyBvdXRzaWRlIHRoZSBlZGl0b3IgY29udGVudHMsXG4gICAgICogd2UgZGlzcGF0Y2ggYSBmYWtlIGV2ZW50LCBzbyB0aGF0IHdlIGNhbiBzdGlsbCBkcm9wIHRoZSBjb250ZW50XG4gICAgICogd2hlbiBkcmFnZ2luZyAvIGRyb3BwaW5nIHRvIHRoZSBzaWRlIG9mIHRoZSBlZGl0b3JcbiAgICAgKi9cbiAgICB1KHRoaXMsIFwib25EcmFnT3ZlclwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUuc3ludGhldGljIHx8ICF0aGlzLmlzRHJhZ2dpbmcpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHQgPSB0aGlzLnBtVmlldy5wb3NBdENvb3Jkcyh7XG4gICAgICAgIGxlZnQ6IGUuY2xpZW50WCxcbiAgICAgICAgdG9wOiBlLmNsaWVudFlcbiAgICAgIH0pO1xuICAgICAgaWYgKCF0IHx8IHQuaW5zaWRlID09PSAtMSkge1xuICAgICAgICBjb25zdCBvID0gbmV3IEV2ZW50KFwiZHJhZ292ZXJcIiwgZSksIHIgPSB0aGlzLnBtVmlldy5kb20uZmlyc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgby5jbGllbnRYID0gci5sZWZ0ICsgci53aWR0aCAvIDIsIG8uY2xpZW50WSA9IGUuY2xpZW50WSwgby5kYXRhVHJhbnNmZXIgPSBlLmRhdGFUcmFuc2Zlciwgby5wcmV2ZW50RGVmYXVsdCA9ICgpID0+IGUucHJldmVudERlZmF1bHQoKSwgby5zeW50aGV0aWMgPSAhMCwgdGhpcy5wbVZpZXcuZG9tLmRpc3BhdGNoRXZlbnQobyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdSh0aGlzLCBcIm9uS2V5RG93blwiLCAoZSkgPT4ge1xuICAgICAgdmFyIHQ7XG4gICAgICAodCA9IHRoaXMuc2lkZU1lbnVTdGF0ZSkgIT0gbnVsbCAmJiB0LnNob3cgJiYgKHRoaXMuc2lkZU1lbnVTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlU2lkZU1lbnUodGhpcy5zaWRlTWVudVN0YXRlKSksIHRoaXMubWVudUZyb3plbiA9ICExO1xuICAgIH0pO1xuICAgIHUodGhpcywgXCJvbk1vdXNlTW92ZVwiLCAoZSkgPT4ge1xuICAgICAgdmFyIGQsIGMsIG0sIGgsIHA7XG4gICAgICBpZiAodGhpcy5tZW51RnJvemVuKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCB0ID0gdGhpcy5wbVZpZXcuZG9tLmZpcnN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIG8gPSB0aGlzLnBtVmlldy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHIgPSBlLmNsaWVudFggPj0gby5sZWZ0ICYmIGUuY2xpZW50WCA8PSBvLnJpZ2h0ICYmIGUuY2xpZW50WSA+PSBvLnRvcCAmJiBlLmNsaWVudFkgPD0gby5ib3R0b20sIGkgPSB0aGlzLnBtVmlldy5kb20ucGFyZW50RWxlbWVudDtcbiAgICAgIGlmIChcbiAgICAgICAgLy8gQ3Vyc29yIGlzIHdpdGhpbiB0aGUgZWRpdG9yIGFyZWFcbiAgICAgICAgciAmJiAvLyBBbiBlbGVtZW50IGlzIGhvdmVyZWRcbiAgICAgICAgZSAmJiBlLnRhcmdldCAmJiAvLyBFbGVtZW50IGlzIG91dHNpZGUgdGhlIGVkaXRvclxuICAgICAgICAhKGkgPT09IGUudGFyZ2V0IHx8IGkuY29udGFpbnMoZS50YXJnZXQpKVxuICAgICAgKSB7XG4gICAgICAgIChkID0gdGhpcy5zaWRlTWVudVN0YXRlKSAhPSBudWxsICYmIGQuc2hvdyAmJiAodGhpcy5zaWRlTWVudVN0YXRlLnNob3cgPSAhMSwgdGhpcy51cGRhdGVTaWRlTWVudSh0aGlzLnNpZGVNZW51U3RhdGUpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5ob3Jpem9udGFsUG9zQW5jaG9yID0gdC54O1xuICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgbGVmdDogdC5sZWZ0ICsgdC53aWR0aCAvIDIsXG4gICAgICAgIC8vIHRha2UgbWlkZGxlIG9mIGVkaXRvclxuICAgICAgICB0b3A6IGUuY2xpZW50WVxuICAgICAgfSwgbCA9IHF0KHMsIHRoaXMucG1WaWV3KTtcbiAgICAgIGlmICghbCB8fCAhdGhpcy5lZGl0b3IuaXNFZGl0YWJsZSkge1xuICAgICAgICAoYyA9IHRoaXMuc2lkZU1lbnVTdGF0ZSkgIT0gbnVsbCAmJiBjLnNob3cgJiYgKHRoaXMuc2lkZU1lbnVTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlU2lkZU1lbnUodGhpcy5zaWRlTWVudVN0YXRlKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICgobSA9IHRoaXMuc2lkZU1lbnVTdGF0ZSkgIT0gbnVsbCAmJiBtLnNob3cgJiYgKChoID0gdGhpcy5ob3ZlcmVkQmxvY2spICE9IG51bGwgJiYgaC5oYXNBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpKSAmJiAoKHAgPSB0aGlzLmhvdmVyZWRCbG9jaykgPT0gbnVsbCA/IHZvaWQgMCA6IHAuZ2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiKSkgPT09IGwuaWQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHRoaXMuaG92ZXJlZEJsb2NrID0gbC5ub2RlO1xuICAgICAgY29uc3QgYSA9IGwubm9kZS5maXJzdENoaWxkO1xuICAgICAgaWYgKGEgJiYgdGhpcy5lZGl0b3IuaXNFZGl0YWJsZSkge1xuICAgICAgICBjb25zdCBmID0gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5zaWRlTWVudVN0YXRlID0ge1xuICAgICAgICAgIHNob3c6ICEwLFxuICAgICAgICAgIHJlZmVyZW5jZVBvczogbmV3IERPTVJlY3QoXG4gICAgICAgICAgICB0aGlzLmhvcml6b250YWxQb3NBbmNob3JlZEF0Um9vdCA/IHRoaXMuaG9yaXpvbnRhbFBvc0FuY2hvciA6IGYueCxcbiAgICAgICAgICAgIGYueSxcbiAgICAgICAgICAgIGYud2lkdGgsXG4gICAgICAgICAgICBmLmhlaWdodFxuICAgICAgICAgICksXG4gICAgICAgICAgYmxvY2s6IHRoaXMuZWRpdG9yLmdldEJsb2NrKFxuICAgICAgICAgICAgdGhpcy5ob3ZlcmVkQmxvY2suZ2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiKVxuICAgICAgICAgIClcbiAgICAgICAgfSwgdGhpcy51cGRhdGVTaWRlTWVudSh0aGlzLnNpZGVNZW51U3RhdGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHUodGhpcywgXCJvblNjcm9sbFwiLCAoKSA9PiB7XG4gICAgICB2YXIgZTtcbiAgICAgIGlmICgoZSA9IHRoaXMuc2lkZU1lbnVTdGF0ZSkgIT0gbnVsbCAmJiBlLnNob3cpIHtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuaG92ZXJlZEJsb2NrLmZpcnN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuc2lkZU1lbnVTdGF0ZS5yZWZlcmVuY2VQb3MgPSBuZXcgRE9NUmVjdChcbiAgICAgICAgICB0aGlzLmhvcml6b250YWxQb3NBbmNob3JlZEF0Um9vdCA/IHRoaXMuaG9yaXpvbnRhbFBvc0FuY2hvciA6IG8ueCxcbiAgICAgICAgICBvLnksXG4gICAgICAgICAgby53aWR0aCxcbiAgICAgICAgICBvLmhlaWdodFxuICAgICAgICApLCB0aGlzLnVwZGF0ZVNpZGVNZW51KHRoaXMuc2lkZU1lbnVTdGF0ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5lZGl0b3IgPSBlLCB0aGlzLnBtVmlldyA9IHQsIHRoaXMudXBkYXRlU2lkZU1lbnUgPSBvLCB0aGlzLmhvcml6b250YWxQb3NBbmNob3JlZEF0Um9vdCA9ICEwLCB0aGlzLmhvcml6b250YWxQb3NBbmNob3IgPSB0aGlzLnBtVmlldy5kb20uZmlyc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54LCBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIHRoaXMub25Ecm9wLCAhMCksIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMub25EcmFnT3ZlciksIHRoaXMucG1WaWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIHRoaXMub25EcmFnU3RhcnQpLCBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlTW92ZSwgITApLCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpLCBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMub25LZXlEb3duLCAhMCk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB2YXIgZTtcbiAgICAoZSA9IHRoaXMuc2lkZU1lbnVTdGF0ZSkgIT0gbnVsbCAmJiBlLnNob3cgJiYgKHRoaXMuc2lkZU1lbnVTdGF0ZS5zaG93ID0gITEsIHRoaXMudXBkYXRlU2lkZU1lbnUodGhpcy5zaWRlTWVudVN0YXRlKSksIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlKSwgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgdGhpcy5vbkRyYWdPdmVyKSwgdGhpcy5wbVZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5vbkRyYWdTdGFydCksIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgdGhpcy5vbkRyb3AsICEwKSwgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKSwgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLm9uS2V5RG93biwgITApO1xuICB9XG4gIGFkZEJsb2NrKCkge1xuICAgIHZhciBsO1xuICAgIChsID0gdGhpcy5zaWRlTWVudVN0YXRlKSAhPSBudWxsICYmIGwuc2hvdyAmJiAodGhpcy5zaWRlTWVudVN0YXRlLnNob3cgPSAhMSwgdGhpcy51cGRhdGVTaWRlTWVudSh0aGlzLnNpZGVNZW51U3RhdGUpKSwgdGhpcy5tZW51RnJvemVuID0gITA7XG4gICAgY29uc3QgdCA9IHRoaXMuaG92ZXJlZEJsb2NrLmZpcnN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIG8gPSB0aGlzLnBtVmlldy5wb3NBdENvb3Jkcyh7XG4gICAgICBsZWZ0OiB0LmxlZnQgKyB0LndpZHRoIC8gMixcbiAgICAgIHRvcDogdC50b3AgKyB0LmhlaWdodCAvIDJcbiAgICB9KTtcbiAgICBpZiAoIW8pXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgciA9IGIoXG4gICAgICB0aGlzLmVkaXRvci5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYyxcbiAgICAgIG8ucG9zXG4gICAgKTtcbiAgICBpZiAociA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHsgY29udGVudE5vZGU6IGksIGVuZFBvczogcyB9ID0gcjtcbiAgICBpZiAoaS50ZXh0Q29udGVudC5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IGEgPSBzICsgMSwgZCA9IGEgKyAyO1xuICAgICAgdGhpcy5lZGl0b3IuX3RpcHRhcEVkaXRvci5jaGFpbigpLkJOQ3JlYXRlQmxvY2soYSkuQk5VcGRhdGVCbG9jayhkLCB7IHR5cGU6IFwicGFyYWdyYXBoXCIsIHByb3BzOiB7fSB9KS5zZXRUZXh0U2VsZWN0aW9uKGQpLnJ1bigpO1xuICAgIH0gZWxzZVxuICAgICAgdGhpcy5lZGl0b3IuX3RpcHRhcEVkaXRvci5jb21tYW5kcy5zZXRUZXh0U2VsZWN0aW9uKHMpO1xuICAgIHRoaXMucG1WaWV3LmZvY3VzKCksIHRoaXMucG1WaWV3LmRpc3BhdGNoKFxuICAgICAgdGhpcy5wbVZpZXcuc3RhdGUudHIuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKHR0LCB7XG4gICAgICAgIC8vIFRPRE8gaW1wb3J0IHN1Z2dlc3Rpb24gcGx1Z2luIGtleVxuICAgICAgICBhY3RpdmF0ZTogITAsXG4gICAgICAgIHR5cGU6IFwiZHJhZ1wiXG4gICAgICB9KVxuICAgICk7XG4gIH1cbn1cbmNvbnN0IHFvID0gbmV3IEIoXCJTaWRlTWVudVBsdWdpblwiKTtcbmNsYXNzIFhvIGV4dGVuZHMgVSB7XG4gIGNvbnN0cnVjdG9yKHQpIHtcbiAgICBzdXBlcigpO1xuICAgIHUodGhpcywgXCJzaWRlTWVudVZpZXdcIik7XG4gICAgdSh0aGlzLCBcInBsdWdpblwiKTtcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgYmxvY2sgaXMgZW1wdHksIG9wZW5zIHRoZSBzbGFzaCBtZW51LiBJZiB0aGUgYmxvY2sgaGFzIGNvbnRlbnQsXG4gICAgICogY3JlYXRlcyBhIG5ldyBibG9jayBiZWxvdyBhbmQgb3BlbnMgdGhlIHNsYXNoIG1lbnUgaW4gaXQuXG4gICAgICovXG4gICAgdSh0aGlzLCBcImFkZEJsb2NrXCIsICgpID0+IHRoaXMuc2lkZU1lbnVWaWV3LmFkZEJsb2NrKCkpO1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZHJhZyAmIGRyb3AgZXZlbnRzIGZvciBibG9ja3MuXG4gICAgICovXG4gICAgdSh0aGlzLCBcImJsb2NrRHJhZ1N0YXJ0XCIsICh0KSA9PiB7XG4gICAgICB0aGlzLnNpZGVNZW51Vmlldy5pc0RyYWdnaW5nID0gITAsIEdvKHQsIHRoaXMuZWRpdG9yLnByb3NlbWlycm9yVmlldyk7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBkcmFnICYgZHJvcCBldmVudHMgZm9yIGJsb2Nrcy5cbiAgICAgKi9cbiAgICB1KHRoaXMsIFwiYmxvY2tEcmFnRW5kXCIsICgpID0+IFh0KCkpO1xuICAgIC8qKlxuICAgICAqIEZyZWV6ZXMgdGhlIHNpZGUgbWVudS4gV2hlbiBmcm96ZW4sIHRoZSBzaWRlIG1lbnUgd2lsbCBzdGF5XG4gICAgICogYXR0YWNoZWQgdG8gdGhlIHNhbWUgYmxvY2sgcmVnYXJkbGVzcyBvZiB3aGljaCBibG9jayBpcyBob3ZlcmVkIGJ5IHRoZVxuICAgICAqIG1vdXNlIGN1cnNvci5cbiAgICAgKi9cbiAgICB1KHRoaXMsIFwiZnJlZXplTWVudVwiLCAoKSA9PiB0aGlzLnNpZGVNZW51Vmlldy5tZW51RnJvemVuID0gITApO1xuICAgIC8qKlxuICAgICAqIFVuZnJlZXplcyB0aGUgc2lkZSBtZW51LiBXaGVuIGZyb3plbiwgdGhlIHNpZGUgbWVudSB3aWxsIHN0YXlcbiAgICAgKiBhdHRhY2hlZCB0byB0aGUgc2FtZSBibG9jayByZWdhcmRsZXNzIG9mIHdoaWNoIGJsb2NrIGlzIGhvdmVyZWQgYnkgdGhlXG4gICAgICogbW91c2UgY3Vyc29yLlxuICAgICAqL1xuICAgIHUodGhpcywgXCJ1bmZyZWV6ZU1lbnVcIiwgKCkgPT4gdGhpcy5zaWRlTWVudVZpZXcubWVudUZyb3plbiA9ICExKTtcbiAgICB0aGlzLmVkaXRvciA9IHQsIHRoaXMucGx1Z2luID0gbmV3IFQoe1xuICAgICAga2V5OiBxbyxcbiAgICAgIHZpZXc6IChvKSA9PiAodGhpcy5zaWRlTWVudVZpZXcgPSBuZXcgam8oXG4gICAgICAgIHQsXG4gICAgICAgIG8sXG4gICAgICAgIChyKSA9PiB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIsIHIpO1xuICAgICAgICB9XG4gICAgICApLCB0aGlzLnNpZGVNZW51VmlldylcbiAgICB9KTtcbiAgfVxuICBvblVwZGF0ZSh0KSB7XG4gICAgcmV0dXJuIHRoaXMub24oXCJ1cGRhdGVcIiwgdCk7XG4gIH1cbn1cbmZ1bmN0aW9uIEgobiwgZSkge1xuICBjb25zdCB0ID0gbi5nZXRUZXh0Q3Vyc29yUG9zaXRpb24oKS5ibG9jaztcbiAgaWYgKHQuY29udGVudCA9PT0gdm9pZCAwKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU2xhc2ggTWVudSBvcGVuIGluIGEgYmxvY2sgdGhhdCBkb2Vzbid0IGNvbnRhaW4gaW5saW5lIGNvbnRlbnQuXCJcbiAgICApO1xuICB0LmNvbnRlbnQubGVuZ3RoID09PSAxICYmIHQuY29udGVudFswXS50eXBlID09PSBcInRleHRcIiAmJiB0LmNvbnRlbnRbMF0udGV4dCA9PT0gXCIvXCIgfHwgdC5jb250ZW50Lmxlbmd0aCA9PT0gMCA/IG4udXBkYXRlQmxvY2sodCwgZSkgOiAobi5pbnNlcnRCbG9ja3MoW2VdLCB0LCBcImFmdGVyXCIpLCBuLnNldFRleHRDdXJzb3JQb3NpdGlvbihuLmdldFRleHRDdXJzb3JQb3NpdGlvbigpLm5leHRCbG9jaykpO1xufVxuY29uc3QgS28gPSAobiA9IGp0KSA9PiB7XG4gIHZhciB0LCBvLCByO1xuICBjb25zdCBlID0gW107XG4gIHJldHVybiBcImhlYWRpbmdcIiBpbiBuICYmIFwibGV2ZWxcIiBpbiBuLmhlYWRpbmcucHJvcFNjaGVtYSAmJiAoKHQgPSBuLmhlYWRpbmcucHJvcFNjaGVtYS5sZXZlbC52YWx1ZXMpICE9IG51bGwgJiYgdC5pbmNsdWRlcygxKSAmJiBlLnB1c2goe1xuICAgIG5hbWU6IFwiSGVhZGluZ1wiLFxuICAgIGFsaWFzZXM6IFtcImhcIiwgXCJoZWFkaW5nMVwiLCBcImgxXCJdLFxuICAgIGV4ZWN1dGU6IChpKSA9PiBIKGksIHtcbiAgICAgIHR5cGU6IFwiaGVhZGluZ1wiLFxuICAgICAgcHJvcHM6IHsgbGV2ZWw6IDEgfVxuICAgIH0pXG4gIH0pLCAobyA9IG4uaGVhZGluZy5wcm9wU2NoZW1hLmxldmVsLnZhbHVlcykgIT0gbnVsbCAmJiBvLmluY2x1ZGVzKDIpICYmIGUucHVzaCh7XG4gICAgbmFtZTogXCJIZWFkaW5nIDJcIixcbiAgICBhbGlhc2VzOiBbXCJoMlwiLCBcImhlYWRpbmcyXCIsIFwic3ViaGVhZGluZ1wiXSxcbiAgICBleGVjdXRlOiAoaSkgPT4gSChpLCB7XG4gICAgICB0eXBlOiBcImhlYWRpbmdcIixcbiAgICAgIHByb3BzOiB7IGxldmVsOiAyIH1cbiAgICB9KVxuICB9KSwgKHIgPSBuLmhlYWRpbmcucHJvcFNjaGVtYS5sZXZlbC52YWx1ZXMpICE9IG51bGwgJiYgci5pbmNsdWRlcygzKSAmJiBlLnB1c2goe1xuICAgIG5hbWU6IFwiSGVhZGluZyAzXCIsXG4gICAgYWxpYXNlczogW1wiaDNcIiwgXCJoZWFkaW5nM1wiLCBcInN1YmhlYWRpbmdcIl0sXG4gICAgZXhlY3V0ZTogKGkpID0+IEgoaSwge1xuICAgICAgdHlwZTogXCJoZWFkaW5nXCIsXG4gICAgICBwcm9wczogeyBsZXZlbDogMyB9XG4gICAgfSlcbiAgfSkpLCBcImJ1bGxldExpc3RJdGVtXCIgaW4gbiAmJiBlLnB1c2goe1xuICAgIG5hbWU6IFwiQnVsbGV0IExpc3RcIixcbiAgICBhbGlhc2VzOiBbXCJ1bFwiLCBcImxpc3RcIiwgXCJidWxsZXRsaXN0XCIsIFwiYnVsbGV0IGxpc3RcIl0sXG4gICAgZXhlY3V0ZTogKGkpID0+IEgoaSwge1xuICAgICAgdHlwZTogXCJidWxsZXRMaXN0SXRlbVwiXG4gICAgfSlcbiAgfSksIFwibnVtYmVyZWRMaXN0SXRlbVwiIGluIG4gJiYgZS5wdXNoKHtcbiAgICBuYW1lOiBcIk51bWJlcmVkIExpc3RcIixcbiAgICBhbGlhc2VzOiBbXCJsaVwiLCBcImxpc3RcIiwgXCJudW1iZXJlZGxpc3RcIiwgXCJudW1iZXJlZCBsaXN0XCJdLFxuICAgIGV4ZWN1dGU6IChpKSA9PiBIKGksIHtcbiAgICAgIHR5cGU6IFwibnVtYmVyZWRMaXN0SXRlbVwiXG4gICAgfSlcbiAgfSksIFwicGFyYWdyYXBoXCIgaW4gbiAmJiBlLnB1c2goe1xuICAgIG5hbWU6IFwiUGFyYWdyYXBoXCIsXG4gICAgYWxpYXNlczogW1wicFwiXSxcbiAgICBleGVjdXRlOiAoaSkgPT4gSChpLCB7XG4gICAgICB0eXBlOiBcInBhcmFncmFwaFwiXG4gICAgfSlcbiAgfSksIFwiaW1hZ2VcIiBpbiBuICYmIGUucHVzaCh7XG4gICAgbmFtZTogXCJJbWFnZVwiLFxuICAgIGFsaWFzZXM6IFtcbiAgICAgIFwiaW1hZ2VcIixcbiAgICAgIFwiaW1hZ2VVcGxvYWRcIixcbiAgICAgIFwidXBsb2FkXCIsXG4gICAgICBcImltZ1wiLFxuICAgICAgXCJwaWN0dXJlXCIsXG4gICAgICBcIm1lZGlhXCIsXG4gICAgICBcInVybFwiLFxuICAgICAgXCJkcml2ZVwiLFxuICAgICAgXCJkcm9wYm94XCJcbiAgICBdLFxuICAgIGV4ZWN1dGU6IChpKSA9PiB7XG4gICAgICBIKGksIHtcbiAgICAgICAgdHlwZTogXCJpbWFnZVwiXG4gICAgICB9KSwgaS5zZXRUZXh0Q3Vyc29yUG9zaXRpb24oXG4gICAgICAgIGkuZ2V0VGV4dEN1cnNvclBvc2l0aW9uKCkubmV4dEJsb2NrLFxuICAgICAgICBcInN0YXJ0XCJcbiAgICAgICksIGkuX3RpcHRhcEVkaXRvci52aWV3LmRpc3BhdGNoKFxuICAgICAgICBpLl90aXB0YXBFZGl0b3Iuc3RhdGUudHIuc2V0TWV0YSh6LCB7XG4gICAgICAgICAgYmxvY2s6IGkuZ2V0VGV4dEN1cnNvclBvc2l0aW9uKCkucHJldkJsb2NrXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfSksIGU7XG59LCBZbyA9IHtcbiAgZW5hYmxlSW5wdXRSdWxlczogITAsXG4gIGVuYWJsZVBhc3RlUnVsZXM6ICEwLFxuICBlbmFibGVDb3JlRXh0ZW5zaW9uczogITFcbn07XG5jbGFzcyB4biB7XG4gIGNvbnN0cnVjdG9yKGUgPSB7fSkge1xuICAgIHUodGhpcywgXCJfdGlwdGFwRWRpdG9yXCIpO1xuICAgIHUodGhpcywgXCJibG9ja0NhY2hlXCIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpKTtcbiAgICB1KHRoaXMsIFwic2NoZW1hXCIpO1xuICAgIHUodGhpcywgXCJyZWFkeVwiLCAhMSk7XG4gICAgdSh0aGlzLCBcInNpZGVNZW51XCIpO1xuICAgIHUodGhpcywgXCJmb3JtYXR0aW5nVG9vbGJhclwiKTtcbiAgICB1KHRoaXMsIFwic2xhc2hNZW51XCIpO1xuICAgIHUodGhpcywgXCJoeXBlcmxpbmtUb29sYmFyXCIpO1xuICAgIHUodGhpcywgXCJpbWFnZVRvb2xiYXJcIik7XG4gICAgdSh0aGlzLCBcInVwbG9hZEZpbGVcIik7XG4gICAgdmFyIGwsIGEsIGQsIGMsIG07XG4gICAgdGhpcy5vcHRpb25zID0gZTtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgZGVmYXVsdFN0eWxlczogITAsXG4gICAgICAvLyBUT0RPOiBUaGVyZSdzIGEgbG90IG9mIGFubm95aW5nIHR5cGluZyBzdHVmZiB0byBkZWFsIHdpdGggaGVyZS4gSWZcbiAgICAgIC8vICBCU2NoZW1hIGlzIHNwZWNpZmllZCwgdGhlbiBvcHRpb25zLmJsb2NrU2NoZW1hIHNob3VsZCBhbHNvIGJlIHJlcXVpcmVkLlxuICAgICAgLy8gIElmIEJTY2hlbWEgaXMgbm90IHNwZWNpZmllZCwgdGhlbiBvcHRpb25zLmJsb2NrU2NoZW1hIHNob3VsZCBhbHNvIG5vdFxuICAgICAgLy8gIGJlIGRlZmluZWQuIFVuZm9ydHVuYXRlbHksIHRyeWluZyB0byBpbXBsZW1lbnQgdGhlc2UgY29uc3RyYWludHMgc2VlbXNcbiAgICAgIC8vICB0byBiZSBhIGh1Z2UgcGFpbiwgaGVuY2UgdGhlIGBhcyBhbnlgIGNhc3RzLlxuICAgICAgYmxvY2tTY2hlbWE6IGUuYmxvY2tTY2hlbWEgfHwganQsXG4gICAgICAuLi5lXG4gICAgfTtcbiAgICB0aGlzLnNpZGVNZW51ID0gbmV3IFhvKHRoaXMpLCB0aGlzLmZvcm1hdHRpbmdUb29sYmFyID0gbmV3IFJvKHRoaXMpLCB0aGlzLnNsYXNoTWVudSA9IG5ldyBKZShcbiAgICAgIHRoaXMsXG4gICAgICB0LnNsYXNoTWVudUl0ZW1zIHx8IEtvKHQuYmxvY2tTY2hlbWEpXG4gICAgKSwgdGhpcy5oeXBlcmxpbmtUb29sYmFyID0gbmV3IFVvKHRoaXMpLCB0aGlzLmltYWdlVG9vbGJhciA9IG5ldyBIbyh0aGlzKTtcbiAgICBjb25zdCBvID0gcm8oe1xuICAgICAgZWRpdG9yOiB0aGlzLFxuICAgICAgZG9tQXR0cmlidXRlczogdC5kb21BdHRyaWJ1dGVzIHx8IHt9LFxuICAgICAgYmxvY2tTY2hlbWE6IHQuYmxvY2tTY2hlbWEsXG4gICAgICBjb2xsYWJvcmF0aW9uOiB0LmNvbGxhYm9yYXRpb25cbiAgICB9KSwgciA9IEEuY3JlYXRlKHtcbiAgICAgIG5hbWU6IFwiQmxvY2tOb3RlVUlFeHRlbnNpb25cIixcbiAgICAgIGFkZFByb3NlTWlycm9yUGx1Z2luczogKCkgPT4gW1xuICAgICAgICB0aGlzLnNpZGVNZW51LnBsdWdpbixcbiAgICAgICAgdGhpcy5mb3JtYXR0aW5nVG9vbGJhci5wbHVnaW4sXG4gICAgICAgIHRoaXMuc2xhc2hNZW51LnBsdWdpbixcbiAgICAgICAgdGhpcy5oeXBlcmxpbmtUb29sYmFyLnBsdWdpbixcbiAgICAgICAgdGhpcy5pbWFnZVRvb2xiYXIucGx1Z2luXG4gICAgICBdXG4gICAgfSk7XG4gICAgby5wdXNoKHIpLCB0aGlzLnNjaGVtYSA9IHQuYmxvY2tTY2hlbWEsIHRoaXMudXBsb2FkRmlsZSA9IHQudXBsb2FkRmlsZTtcbiAgICBjb25zdCBpID0gdC5pbml0aWFsQ29udGVudCB8fCAoZS5jb2xsYWJvcmF0aW9uID8gdm9pZCAwIDogW1xuICAgICAge1xuICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICBpZDogai5vcHRpb25zLmdlbmVyYXRlSUQoKVxuICAgICAgfVxuICAgIF0pLCBzID0ge1xuICAgICAgLi4uWW8sXG4gICAgICAuLi50Ll90aXB0YXBPcHRpb25zLFxuICAgICAgb25CZWZvcmVDcmVhdGUoaCkge1xuICAgICAgICBpZiAoIWkpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBwID0gaC5lZGl0b3Iuc2NoZW1hLCBmID0gcC5ub2RlKFxuICAgICAgICAgIFwiZG9jXCIsXG4gICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgIHAubm9kZShcImJsb2NrR3JvdXBcIiwgdm9pZCAwLCBbXG4gICAgICAgICAgICBWKHsgaWQ6IFwiaW5pdGlhbEJsb2NrXCIsIHR5cGU6IFwicGFyYWdyYXBoXCIgfSwgcClcbiAgICAgICAgICBdKVxuICAgICAgICApO1xuICAgICAgICBoLmVkaXRvci5vcHRpb25zLmNvbnRlbnQgPSBmLnRvSlNPTigpO1xuICAgICAgfSxcbiAgICAgIG9uQ3JlYXRlOiAoKSA9PiB7XG4gICAgICAgIHZhciBoO1xuICAgICAgICBpICE9PSB2b2lkIDAgJiYgdGhpcy5yZXBsYWNlQmxvY2tzKHRoaXMudG9wTGV2ZWxCbG9ja3MsIGkpLCAoaCA9IHQub25FZGl0b3JSZWFkeSkgPT0gbnVsbCB8fCBoLmNhbGwodCwgdGhpcyksIHRoaXMucmVhZHkgPSAhMDtcbiAgICAgIH0sXG4gICAgICBvblVwZGF0ZTogKCkgPT4ge1xuICAgICAgICB2YXIgaDtcbiAgICAgICAgdGhpcy5yZWFkeSAmJiAoKGggPSB0Lm9uRWRpdG9yQ29udGVudENoYW5nZSkgPT0gbnVsbCB8fCBoLmNhbGwodCwgdGhpcykpO1xuICAgICAgfSxcbiAgICAgIG9uU2VsZWN0aW9uVXBkYXRlOiAoKSA9PiB7XG4gICAgICAgIHZhciBoO1xuICAgICAgICB0aGlzLnJlYWR5ICYmICgoaCA9IHQub25UZXh0Q3Vyc29yUG9zaXRpb25DaGFuZ2UpID09IG51bGwgfHwgaC5jYWxsKHQsIHRoaXMpKTtcbiAgICAgIH0sXG4gICAgICBlZGl0YWJsZTogZS5lZGl0YWJsZSA9PT0gdm9pZCAwID8gITAgOiBlLmVkaXRhYmxlLFxuICAgICAgZXh0ZW5zaW9uczogdC5lbmFibGVCbG9ja05vdGVFeHRlbnNpb25zID09PSAhMSA/IChsID0gdC5fdGlwdGFwT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IGwuZXh0ZW5zaW9ucyA6IFsuLi4oKGEgPSB0Ll90aXB0YXBPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogYS5leHRlbnNpb25zKSB8fCBbXSwgLi4ub10sXG4gICAgICBlZGl0b3JQcm9wczoge1xuICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgLi4uKGQgPSB0LmRvbUF0dHJpYnV0ZXMpID09IG51bGwgPyB2b2lkIDAgOiBkLmVkaXRvcixcbiAgICAgICAgICBjbGFzczogUyhcbiAgICAgICAgICAgIEQuYm5FZGl0b3IsXG4gICAgICAgICAgICBELmJuUm9vdCxcbiAgICAgICAgICAgIHQuZGVmYXVsdFN0eWxlcyA/IEQuZGVmYXVsdFN0eWxlcyA6IFwiXCIsXG4gICAgICAgICAgICAoKG0gPSAoYyA9IHQuZG9tQXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGMuZWRpdG9yKSA9PSBudWxsID8gdm9pZCAwIDogbS5jbGFzcykgfHwgXCJcIlxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdC5wYXJlbnRFbGVtZW50ICYmIChzLmVsZW1lbnQgPSB0LnBhcmVudEVsZW1lbnQpLCB0aGlzLl90aXB0YXBFZGl0b3IgPSBuZXcgcmUocyk7XG4gIH1cbiAgZ2V0IHByb3NlbWlycm9yVmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5fdGlwdGFwRWRpdG9yLnZpZXc7XG4gIH1cbiAgZ2V0IGRvbUVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpcHRhcEVkaXRvci52aWV3LmRvbTtcbiAgfVxuICBpc0ZvY3VzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpcHRhcEVkaXRvci52aWV3Lmhhc0ZvY3VzKCk7XG4gIH1cbiAgZm9jdXMoKSB7XG4gICAgdGhpcy5fdGlwdGFwRWRpdG9yLnZpZXcuZm9jdXMoKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyBhIHNuYXBzaG90IG9mIGFsbCB0b3AtbGV2ZWwgKG5vbi1uZXN0ZWQpIGJsb2NrcyBpbiB0aGUgZWRpdG9yLlxuICAgKiBAcmV0dXJucyBBIHNuYXBzaG90IG9mIGFsbCB0b3AtbGV2ZWwgKG5vbi1uZXN0ZWQpIGJsb2NrcyBpbiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgZ2V0IHRvcExldmVsQmxvY2tzKCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5maXJzdENoaWxkLmRlc2NlbmRhbnRzKCh0KSA9PiAoZS5wdXNoKHgodCwgdGhpcy5zY2hlbWEsIHRoaXMuYmxvY2tDYWNoZSkpLCAhMSkpLCBlO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIGEgc25hcHNob3Qgb2YgYW4gZXhpc3RpbmcgYmxvY2sgZnJvbSB0aGUgZWRpdG9yLlxuICAgKiBAcGFyYW0gYmxvY2tJZGVudGlmaWVyIFRoZSBpZGVudGlmaWVyIG9mIGFuIGV4aXN0aW5nIGJsb2NrIHRoYXQgc2hvdWxkIGJlIHJldHJpZXZlZC5cbiAgICogQHJldHVybnMgVGhlIGJsb2NrIHRoYXQgbWF0Y2hlcyB0aGUgaWRlbnRpZmllciwgb3IgYHVuZGVmaW5lZGAgaWYgbm8gbWF0Y2hpbmcgYmxvY2sgd2FzIGZvdW5kLlxuICAgKi9cbiAgZ2V0QmxvY2soZSkge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gZSA6IGUuaWQ7XG4gICAgbGV0IG87XG4gICAgcmV0dXJuIHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5kb2MuZmlyc3RDaGlsZC5kZXNjZW5kYW50cygocikgPT4gdHlwZW9mIG8gPCBcInVcIiA/ICExIDogci50eXBlLm5hbWUgIT09IFwiYmxvY2tDb250YWluZXJcIiB8fCByLmF0dHJzLmlkICE9PSB0ID8gITAgOiAobyA9IHgociwgdGhpcy5zY2hlbWEsIHRoaXMuYmxvY2tDYWNoZSksICExKSksIG87XG4gIH1cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyBhbGwgYmxvY2tzIGluIHRoZSBlZGl0b3IgZGVwdGgtZmlyc3QsIGFuZCBleGVjdXRlcyBhIGNhbGxiYWNrIGZvciBlYWNoLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUgZm9yIGVhY2ggYmxvY2suIFJldHVybmluZyBgZmFsc2VgIHN0b3BzIHRoZSB0cmF2ZXJzYWwuXG4gICAqIEBwYXJhbSByZXZlcnNlIFdoZXRoZXIgdGhlIGJsb2NrcyBzaG91bGQgYmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIuXG4gICAqL1xuICBmb3JFYWNoQmxvY2soZSwgdCA9ICExKSB7XG4gICAgY29uc3QgbyA9IHRoaXMudG9wTGV2ZWxCbG9ja3Muc2xpY2UoKTtcbiAgICB0ICYmIG8ucmV2ZXJzZSgpO1xuICAgIGZ1bmN0aW9uIHIoaSkge1xuICAgICAgZm9yIChjb25zdCBzIG9mIGkpIHtcbiAgICAgICAgaWYgKCFlKHMpKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbCA9IHQgPyBzLmNoaWxkcmVuLnNsaWNlKCkucmV2ZXJzZSgpIDogcy5jaGlsZHJlbjtcbiAgICAgICAgaWYgKCFyKGwpKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgcihvKTtcbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZXMgYSBjYWxsYmFjayB3aGVuZXZlciB0aGUgZWRpdG9yJ3MgY29udGVudHMgY2hhbmdlLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUuXG4gICAqL1xuICBvbkVkaXRvckNvbnRlbnRDaGFuZ2UoZSkge1xuICAgIHRoaXMuX3RpcHRhcEVkaXRvci5vbihcInVwZGF0ZVwiLCBlKTtcbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZXMgYSBjYWxsYmFjayB3aGVuZXZlciB0aGUgZWRpdG9yJ3Mgc2VsZWN0aW9uIGNoYW5nZXMuXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZS5cbiAgICovXG4gIG9uRWRpdG9yU2VsZWN0aW9uQ2hhbmdlKGUpIHtcbiAgICB0aGlzLl90aXB0YXBFZGl0b3Iub24oXCJzZWxlY3Rpb25VcGRhdGVcIiwgZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgYSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCB0ZXh0IGN1cnNvciBwb3NpdGlvbi5cbiAgICogQHJldHVybnMgQSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCB0ZXh0IGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIGdldFRleHRDdXJzb3JQb3NpdGlvbigpIHtcbiAgICBjb25zdCB7IG5vZGU6IGUsIGRlcHRoOiB0LCBzdGFydFBvczogbywgZW5kUG9zOiByIH0gPSBiKFxuICAgICAgdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYyxcbiAgICAgIHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5zZWxlY3Rpb24uZnJvbVxuICAgICksIGkgPSB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuZG9jLnJlc29sdmUocikuaW5kZXgodCAtIDEpLCBzID0gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5yZXNvbHZlKHIgKyAxKS5ub2RlKCkuY2hpbGRDb3VudDtcbiAgICBsZXQgbDtcbiAgICBpID4gMCAmJiAobCA9IHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5kb2MucmVzb2x2ZShvIC0gMikubm9kZSgpKTtcbiAgICBsZXQgYTtcbiAgICByZXR1cm4gaSA8IHMgLSAxICYmIChhID0gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5yZXNvbHZlKHIgKyAyKS5ub2RlKCkpLCB7XG4gICAgICBibG9jazogeChlLCB0aGlzLnNjaGVtYSwgdGhpcy5ibG9ja0NhY2hlKSxcbiAgICAgIHByZXZCbG9jazogbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogeChsLCB0aGlzLnNjaGVtYSwgdGhpcy5ibG9ja0NhY2hlKSxcbiAgICAgIG5leHRCbG9jazogYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogeChhLCB0aGlzLnNjaGVtYSwgdGhpcy5ibG9ja0NhY2hlKVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRleHQgY3Vyc29yIHBvc2l0aW9uIHRvIHRoZSBzdGFydCBvciBlbmQgb2YgYW4gZXhpc3RpbmcgYmxvY2suIFRocm93cyBhbiBlcnJvciBpZiB0aGUgdGFyZ2V0IGJsb2NrIGNvdWxkXG4gICAqIG5vdCBiZSBmb3VuZC5cbiAgICogQHBhcmFtIHRhcmdldEJsb2NrIFRoZSBpZGVudGlmaWVyIG9mIGFuIGV4aXN0aW5nIGJsb2NrIHRoYXQgdGhlIHRleHQgY3Vyc29yIHNob3VsZCBiZSBtb3ZlZCB0by5cbiAgICogQHBhcmFtIHBsYWNlbWVudCBXaGV0aGVyIHRoZSB0ZXh0IGN1cnNvciBzaG91bGQgYmUgcGxhY2VkIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgdGhlIGJsb2NrLlxuICAgKi9cbiAgc2V0VGV4dEN1cnNvclBvc2l0aW9uKGUsIHQgPSBcInN0YXJ0XCIpIHtcbiAgICBjb25zdCBvID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IGUgOiBlLmlkLCB7IHBvc0JlZm9yZU5vZGU6IHIgfSA9IGV0KG8sIHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5kb2MpLCB7IHN0YXJ0UG9zOiBpLCBjb250ZW50Tm9kZTogcyB9ID0gYihcbiAgICAgIHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5kb2MsXG4gICAgICByICsgMlxuICAgICk7XG4gICAgaWYgKHMudHlwZS5zcGVjLmNvbnRlbnQgPT09IFwiXCIpIHtcbiAgICAgIHRoaXMuX3RpcHRhcEVkaXRvci5jb21tYW5kcy5zZXROb2RlU2VsZWN0aW9uKGkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0ID09PSBcInN0YXJ0XCIgPyB0aGlzLl90aXB0YXBFZGl0b3IuY29tbWFuZHMuc2V0VGV4dFNlbGVjdGlvbihpICsgMSkgOiB0aGlzLl90aXB0YXBFZGl0b3IuY29tbWFuZHMuc2V0VGV4dFNlbGVjdGlvbihcbiAgICAgIGkgKyBzLm5vZGVTaXplIC0gMVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgYSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqL1xuICBnZXRTZWxlY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5zZWxlY3Rpb24uZnJvbSA9PT0gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLnNlbGVjdGlvbi50byB8fCBcIm5vZGVcIiBpbiB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuc2VsZWN0aW9uKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5kZXNjZW5kYW50cygodCwgbykgPT4gdC50eXBlLnNwZWMuZ3JvdXAgIT09IFwiYmxvY2tDb250ZW50XCIgfHwgbyArIHQubm9kZVNpemUgPCB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmZyb20gfHwgbyA+IHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5zZWxlY3Rpb24udG8gPyAhMCA6IChlLnB1c2goXG4gICAgICB4KFxuICAgICAgICB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuZG9jLnJlc29sdmUobykubm9kZSgpLFxuICAgICAgICB0aGlzLnNjaGVtYSxcbiAgICAgICAgdGhpcy5ibG9ja0NhY2hlXG4gICAgICApXG4gICAgKSwgITEpKSwgeyBibG9ja3M6IGUgfTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBlZGl0b3IgaXMgY3VycmVudGx5IGVkaXRhYmxlLCBvciBpZiBpdCdzIGxvY2tlZC5cbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZWRpdG9yIGlzIGVkaXRhYmxlLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBnZXQgaXNFZGl0YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGlwdGFwRWRpdG9yLmlzRWRpdGFibGU7XG4gIH1cbiAgLyoqXG4gICAqIE1ha2VzIHRoZSBlZGl0b3IgZWRpdGFibGUgb3IgbG9ja3MgaXQsIGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnQgcGFzc2VkLlxuICAgKiBAcGFyYW0gZWRpdGFibGUgVHJ1ZSB0byBtYWtlIHRoZSBlZGl0b3IgZWRpdGFibGUsIG9yIGZhbHNlIHRvIGxvY2sgaXQuXG4gICAqL1xuICBzZXQgaXNFZGl0YWJsZShlKSB7XG4gICAgdGhpcy5fdGlwdGFwRWRpdG9yLnNldEVkaXRhYmxlKGUpO1xuICB9XG4gIC8qKlxuICAgKiBJbnNlcnRzIG5ldyBibG9ja3MgaW50byB0aGUgZWRpdG9yLiBJZiBhIGJsb2NrJ3MgYGlkYCBpcyB1bmRlZmluZWQsIEJsb2NrTm90ZSBnZW5lcmF0ZXMgb25lIGF1dG9tYXRpY2FsbHkuIFRocm93cyBhblxuICAgKiBlcnJvciBpZiB0aGUgcmVmZXJlbmNlIGJsb2NrIGNvdWxkIG5vdCBiZSBmb3VuZC5cbiAgICogQHBhcmFtIGJsb2Nrc1RvSW5zZXJ0IEFuIGFycmF5IG9mIHBhcnRpYWwgYmxvY2tzIHRoYXQgc2hvdWxkIGJlIGluc2VydGVkLlxuICAgKiBAcGFyYW0gcmVmZXJlbmNlQmxvY2sgQW4gaWRlbnRpZmllciBmb3IgYW4gZXhpc3RpbmcgYmxvY2ssIGF0IHdoaWNoIHRoZSBuZXcgYmxvY2tzIHNob3VsZCBiZSBpbnNlcnRlZC5cbiAgICogQHBhcmFtIHBsYWNlbWVudCBXaGV0aGVyIHRoZSBibG9ja3Mgc2hvdWxkIGJlIGluc2VydGVkIGp1c3QgYmVmb3JlLCBqdXN0IGFmdGVyLCBvciBuZXN0ZWQgaW5zaWRlIHRoZVxuICAgKiBgcmVmZXJlbmNlQmxvY2tgLiBJbnNlcnRzIHRoZSBibG9ja3MgYXQgdGhlIHN0YXJ0IG9mIHRoZSBleGlzdGluZyBibG9jaydzIGNoaWxkcmVuIGlmIFwibmVzdGVkXCIgaXMgdXNlZC5cbiAgICovXG4gIGluc2VydEJsb2NrcyhlLCB0LCBvID0gXCJiZWZvcmVcIikge1xuICAgIFV0KGUsIHQsIG8sIHRoaXMuX3RpcHRhcEVkaXRvcik7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYW4gZXhpc3RpbmcgYmxvY2sgaW4gdGhlIGVkaXRvci4gU2luY2UgdXBkYXRlZEJsb2NrIGlzIGEgUGFydGlhbEJsb2NrIG9iamVjdCwgc29tZSBmaWVsZHMgbWlnaHQgbm90IGJlXG4gICAqIGRlZmluZWQuIFRoZXNlIHVuZGVmaW5lZCBmaWVsZHMgYXJlIGtlcHQgYXMtaXMgZnJvbSB0aGUgZXhpc3RpbmcgYmxvY2suIFRocm93cyBhbiBlcnJvciBpZiB0aGUgYmxvY2sgdG8gdXBkYXRlIGNvdWxkXG4gICAqIG5vdCBiZSBmb3VuZC5cbiAgICogQHBhcmFtIGJsb2NrVG9VcGRhdGUgVGhlIGJsb2NrIHRoYXQgc2hvdWxkIGJlIHVwZGF0ZWQuXG4gICAqIEBwYXJhbSB1cGRhdGUgQSBwYXJ0aWFsIGJsb2NrIHdoaWNoIGRlZmluZXMgaG93IHRoZSBleGlzdGluZyBibG9jayBzaG91bGQgYmUgY2hhbmdlZC5cbiAgICovXG4gIHVwZGF0ZUJsb2NrKGUsIHQpIHtcbiAgICBpbyhlLCB0LCB0aGlzLl90aXB0YXBFZGl0b3IpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGV4aXN0aW5nIGJsb2NrcyBmcm9tIHRoZSBlZGl0b3IuIFRocm93cyBhbiBlcnJvciBpZiBhbnkgb2YgdGhlIGJsb2NrcyBjb3VsZCBub3QgYmUgZm91bmQuXG4gICAqIEBwYXJhbSBibG9ja3NUb1JlbW92ZSBBbiBhcnJheSBvZiBpZGVudGlmaWVycyBmb3IgZXhpc3RpbmcgYmxvY2tzIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQuXG4gICAqL1xuICByZW1vdmVCbG9ja3MoZSkge1xuICAgIEZ0KGUsIHRoaXMuX3RpcHRhcEVkaXRvcik7XG4gIH1cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGV4aXN0aW5nIGJsb2NrcyBpbiB0aGUgZWRpdG9yIHdpdGggbmV3IGJsb2Nrcy4gSWYgdGhlIGJsb2NrcyB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGFyZSBub3QgYWRqYWNlbnQgb3JcbiAgICogYXJlIGF0IGRpZmZlcmVudCBuZXN0aW5nIGxldmVscywgYGJsb2Nrc1RvSW5zZXJ0YCB3aWxsIGJlIGluc2VydGVkIGF0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3QgYmxvY2sgaW5cbiAgICogYGJsb2Nrc1RvUmVtb3ZlYC4gVGhyb3dzIGFuIGVycm9yIGlmIGFueSBvZiB0aGUgYmxvY2tzIHRvIHJlbW92ZSBjb3VsZCBub3QgYmUgZm91bmQuXG4gICAqIEBwYXJhbSBibG9ja3NUb1JlbW92ZSBBbiBhcnJheSBvZiBibG9ja3MgdGhhdCBzaG91bGQgYmUgcmVwbGFjZWQuXG4gICAqIEBwYXJhbSBibG9ja3NUb0luc2VydCBBbiBhcnJheSBvZiBwYXJ0aWFsIGJsb2NrcyB0byByZXBsYWNlIHRoZSBvbGQgb25lcyB3aXRoLlxuICAgKi9cbiAgcmVwbGFjZUJsb2NrcyhlLCB0KSB7XG4gICAgc28oZSwgdCwgdGhpcy5fdGlwdGFwRWRpdG9yKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgYWN0aXZlIHRleHQgc3R5bGVzIGF0IHRoZSB0ZXh0IGN1cnNvciBwb3NpdGlvbiBvciBhdCB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBpZiBpdCdzIGFjdGl2ZS5cbiAgICovXG4gIGdldEFjdGl2ZVN0eWxlcygpIHtcbiAgICBjb25zdCBlID0ge30sIHQgPSB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLiR0by5tYXJrcygpLCBvID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICAgICAgXCJib2xkXCIsXG4gICAgICBcIml0YWxpY1wiLFxuICAgICAgXCJ1bmRlcmxpbmVcIixcbiAgICAgIFwic3RyaWtlXCIsXG4gICAgICBcImNvZGVcIlxuICAgIF0pLCByID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1widGV4dENvbG9yXCIsIFwiYmFja2dyb3VuZENvbG9yXCJdKTtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdClcbiAgICAgIG8uaGFzKGkudHlwZS5uYW1lKSA/IGVbaS50eXBlLm5hbWVdID0gITAgOiByLmhhcyhpLnR5cGUubmFtZSkgJiYgKGVbaS50eXBlLm5hbWVdID0gaS5hdHRycy5jb2xvcik7XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgc3R5bGVzIHRvIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgY29udGVudC5cbiAgICogQHBhcmFtIHN0eWxlcyBUaGUgc3R5bGVzIHRvIGFkZC5cbiAgICovXG4gIGFkZFN0eWxlcyhlKSB7XG4gICAgY29uc3QgdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgIFwiYm9sZFwiLFxuICAgICAgXCJpdGFsaWNcIixcbiAgICAgIFwidW5kZXJsaW5lXCIsXG4gICAgICBcInN0cmlrZVwiLFxuICAgICAgXCJjb2RlXCJcbiAgICBdKSwgbyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcInRleHRDb2xvclwiLCBcImJhY2tncm91bmRDb2xvclwiXSk7XG4gICAgdGhpcy5fdGlwdGFwRWRpdG9yLnZpZXcuZm9jdXMoKTtcbiAgICBmb3IgKGNvbnN0IFtyLCBpXSBvZiBPYmplY3QuZW50cmllcyhlKSlcbiAgICAgIHQuaGFzKHIpID8gdGhpcy5fdGlwdGFwRWRpdG9yLmNvbW1hbmRzLnNldE1hcmsocikgOiBvLmhhcyhyKSAmJiB0aGlzLl90aXB0YXBFZGl0b3IuY29tbWFuZHMuc2V0TWFyayhyLCB7IGNvbG9yOiBpIH0pO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIHN0eWxlcyBmcm9tIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgY29udGVudC5cbiAgICogQHBhcmFtIHN0eWxlcyBUaGUgc3R5bGVzIHRvIHJlbW92ZS5cbiAgICovXG4gIHJlbW92ZVN0eWxlcyhlKSB7XG4gICAgdGhpcy5fdGlwdGFwRWRpdG9yLnZpZXcuZm9jdXMoKTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMoZSkpXG4gICAgICB0aGlzLl90aXB0YXBFZGl0b3IuY29tbWFuZHMudW5zZXRNYXJrKHQpO1xuICB9XG4gIC8qKlxuICAgKiBUb2dnbGVzIHN0eWxlcyBvbiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbnRlbnQuXG4gICAqIEBwYXJhbSBzdHlsZXMgVGhlIHN0eWxlcyB0byB0b2dnbGUuXG4gICAqL1xuICB0b2dnbGVTdHlsZXMoZSkge1xuICAgIGNvbnN0IHQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gICAgICBcImJvbGRcIixcbiAgICAgIFwiaXRhbGljXCIsXG4gICAgICBcInVuZGVybGluZVwiLFxuICAgICAgXCJzdHJpa2VcIixcbiAgICAgIFwiY29kZVwiXG4gICAgXSksIG8gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJ0ZXh0Q29sb3JcIiwgXCJiYWNrZ3JvdW5kQ29sb3JcIl0pO1xuICAgIHRoaXMuX3RpcHRhcEVkaXRvci52aWV3LmZvY3VzKCk7XG4gICAgZm9yIChjb25zdCBbciwgaV0gb2YgT2JqZWN0LmVudHJpZXMoZSkpXG4gICAgICB0LmhhcyhyKSA/IHRoaXMuX3RpcHRhcEVkaXRvci5jb21tYW5kcy50b2dnbGVNYXJrKHIpIDogby5oYXMocikgJiYgdGhpcy5fdGlwdGFwRWRpdG9yLmNvbW1hbmRzLnRvZ2dsZU1hcmsociwgeyBjb2xvcjogaSB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRleHQuXG4gICAqL1xuICBnZXRTZWxlY3RlZFRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5kb2MudGV4dEJldHdlZW4oXG4gICAgICB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmZyb20sXG4gICAgICB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLnRvXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgVVJMIG9mIHRoZSBsYXN0IGxpbmsgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLCBvciBgdW5kZWZpbmVkYCBpZiB0aGVyZSBhcmUgbm8gbGlua3MgaW4gdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIGdldFNlbGVjdGVkTGlua1VybCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGlwdGFwRWRpdG9yLmdldEF0dHJpYnV0ZXMoXCJsaW5rXCIpLmhyZWY7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgbGluayB0byByZXBsYWNlIHRoZSBzZWxlY3RlZCBjb250ZW50LlxuICAgKiBAcGFyYW0gdXJsIFRoZSBsaW5rIFVSTC5cbiAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gZGlzcGxheSB0aGUgbGluayB3aXRoLlxuICAgKi9cbiAgY3JlYXRlTGluayhlLCB0KSB7XG4gICAgaWYgKGUgPT09IFwiXCIpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgeyBmcm9tOiBvLCB0bzogciB9ID0gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLnNlbGVjdGlvbjtcbiAgICB0IHx8ICh0ID0gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy50ZXh0QmV0d2VlbihvLCByKSk7XG4gICAgY29uc3QgaSA9IHRoaXMuX3RpcHRhcEVkaXRvci5zY2hlbWEubWFyayhcImxpbmtcIiwgeyBocmVmOiBlIH0pO1xuICAgIHRoaXMuX3RpcHRhcEVkaXRvci52aWV3LmRpc3BhdGNoKFxuICAgICAgdGhpcy5fdGlwdGFwRWRpdG9yLnZpZXcuc3RhdGUudHIuaW5zZXJ0VGV4dCh0LCBvLCByKS5hZGRNYXJrKG8sIG8gKyB0Lmxlbmd0aCwgaSlcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGJsb2NrIGNvbnRhaW5pbmcgdGhlIHRleHQgY3Vyc29yIGNhbiBiZSBuZXN0ZWQuXG4gICAqL1xuICBjYW5OZXN0QmxvY2soKSB7XG4gICAgY29uc3QgeyBzdGFydFBvczogZSwgZGVwdGg6IHQgfSA9IGIoXG4gICAgICB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuZG9jLFxuICAgICAgdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLnNlbGVjdGlvbi5mcm9tXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5yZXNvbHZlKGUpLmluZGV4KHQgLSAxKSA+IDA7XG4gIH1cbiAgLyoqXG4gICAqIE5lc3RzIHRoZSBibG9jayBjb250YWluaW5nIHRoZSB0ZXh0IGN1cnNvciBpbnRvIHRoZSBibG9jayBhYm92ZSBpdC5cbiAgICovXG4gIG5lc3RCbG9jaygpIHtcbiAgICB0aGlzLl90aXB0YXBFZGl0b3IuY29tbWFuZHMuc2lua0xpc3RJdGVtKFwiYmxvY2tDb250YWluZXJcIik7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgYmxvY2sgY29udGFpbmluZyB0aGUgdGV4dCBjdXJzb3IgaXMgbmVzdGVkLlxuICAgKi9cbiAgY2FuVW5uZXN0QmxvY2soKSB7XG4gICAgY29uc3QgeyBkZXB0aDogZSB9ID0gYihcbiAgICAgIHRoaXMuX3RpcHRhcEVkaXRvci5zdGF0ZS5kb2MsXG4gICAgICB0aGlzLl90aXB0YXBFZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmZyb21cbiAgICApO1xuICAgIHJldHVybiBlID4gMjtcbiAgfVxuICAvKipcbiAgICogTGlmdHMgdGhlIGJsb2NrIGNvbnRhaW5pbmcgdGhlIHRleHQgY3Vyc29yIG91dCBvZiBpdHMgcGFyZW50LlxuICAgKi9cbiAgdW5uZXN0QmxvY2soKSB7XG4gICAgdGhpcy5fdGlwdGFwRWRpdG9yLmNvbW1hbmRzLmxpZnRMaXN0SXRlbShcImJsb2NrQ29udGFpbmVyXCIpO1xuICB9XG4gIC8qKlxuICAgKiBTZXJpYWxpemVzIGJsb2NrcyBpbnRvIGFuIEhUTUwgc3RyaW5nLiBUbyBiZXR0ZXIgY29uZm9ybSB0byBIVE1MIHN0YW5kYXJkcywgY2hpbGRyZW4gb2YgYmxvY2tzIHdoaWNoIGFyZW4ndCBsaXN0XG4gICAqIGl0ZW1zIGFyZSB1bi1uZXN0ZWQgaW4gdGhlIG91dHB1dCBIVE1MLlxuICAgKiBAcGFyYW0gYmxvY2tzIEFuIGFycmF5IG9mIGJsb2NrcyB0aGF0IHNob3VsZCBiZSBzZXJpYWxpemVkIGludG8gSFRNTC5cbiAgICogQHJldHVybnMgVGhlIGJsb2Nrcywgc2VyaWFsaXplZCBhcyBhbiBIVE1MIHN0cmluZy5cbiAgICovXG4gIGFzeW5jIGJsb2Nrc1RvSFRNTChlKSB7XG4gICAgcmV0dXJuIFd0KGUsIHRoaXMuX3RpcHRhcEVkaXRvci5zY2hlbWEpO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgYmxvY2tzIGZyb20gYW4gSFRNTCBzdHJpbmcuIFRyaWVzIHRvIGNyZWF0ZSBgQmxvY2tgIG9iamVjdHMgb3V0IG9mIGFueSBIVE1MIGJsb2NrLWxldmVsIGVsZW1lbnRzLCBhbmRcbiAgICogYElubGluZU5vZGVgIG9iamVjdHMgZnJvbSBhbnkgSFRNTCBpbmxpbmUgZWxlbWVudHMsIHRob3VnaCBub3QgYWxsIGVsZW1lbnQgdHlwZXMgYXJlIHJlY29nbml6ZWQuIElmIEJsb2NrTm90ZVxuICAgKiBkb2Vzbid0IHJlY29nbml6ZSBhbiBIVE1MIGVsZW1lbnQncyB0YWcsIGl0IHdpbGwgcGFyc2UgaXQgYXMgYSBwYXJhZ3JhcGggb3IgcGxhaW4gdGV4dC5cbiAgICogQHBhcmFtIGh0bWwgVGhlIEhUTUwgc3RyaW5nIHRvIHBhcnNlIGJsb2NrcyBmcm9tLlxuICAgKiBAcmV0dXJucyBUaGUgYmxvY2tzIHBhcnNlZCBmcm9tIHRoZSBIVE1MIHN0cmluZy5cbiAgICovXG4gIGFzeW5jIEhUTUxUb0Jsb2NrcyhlKSB7XG4gICAgcmV0dXJuICR0KGUsIHRoaXMuc2NoZW1hLCB0aGlzLl90aXB0YXBFZGl0b3Iuc2NoZW1hKTtcbiAgfVxuICAvKipcbiAgICogU2VyaWFsaXplcyBibG9ja3MgaW50byBhIE1hcmtkb3duIHN0cmluZy4gVGhlIG91dHB1dCBpcyBzaW1wbGlmaWVkIGFzIE1hcmtkb3duIGRvZXMgbm90IHN1cHBvcnQgYWxsIGZlYXR1cmVzIG9mXG4gICAqIEJsb2NrTm90ZSAtIGNoaWxkcmVuIG9mIGJsb2NrcyB3aGljaCBhcmVuJ3QgbGlzdCBpdGVtcyBhcmUgdW4tbmVzdGVkIGFuZCBjZXJ0YWluIHN0eWxlcyBhcmUgcmVtb3ZlZC5cbiAgICogQHBhcmFtIGJsb2NrcyBBbiBhcnJheSBvZiBibG9ja3MgdGhhdCBzaG91bGQgYmUgc2VyaWFsaXplZCBpbnRvIE1hcmtkb3duLlxuICAgKiBAcmV0dXJucyBUaGUgYmxvY2tzLCBzZXJpYWxpemVkIGFzIGEgTWFya2Rvd24gc3RyaW5nLlxuICAgKi9cbiAgYXN5bmMgYmxvY2tzVG9NYXJrZG93bihlKSB7XG4gICAgcmV0dXJuIGNvKGUsIHRoaXMuX3RpcHRhcEVkaXRvci5zY2hlbWEpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbGlzdCBvZiBibG9ja3MgZnJvbSBhIE1hcmtkb3duIHN0cmluZy4gVHJpZXMgdG8gY3JlYXRlIGBCbG9ja2AgYW5kIGBJbmxpbmVOb2RlYCBvYmplY3RzIGJhc2VkIG9uXG4gICAqIE1hcmtkb3duIHN5bnRheCwgdGhvdWdoIG5vdCBhbGwgc3ltYm9scyBhcmUgcmVjb2duaXplZC4gSWYgQmxvY2tOb3RlIGRvZXNuJ3QgcmVjb2duaXplIGEgc3ltYm9sLCBpdCB3aWxsIHBhcnNlIGl0XG4gICAqIGFzIHRleHQuXG4gICAqIEBwYXJhbSBtYXJrZG93biBUaGUgTWFya2Rvd24gc3RyaW5nIHRvIHBhcnNlIGJsb2NrcyBmcm9tLlxuICAgKiBAcmV0dXJucyBUaGUgYmxvY2tzIHBhcnNlZCBmcm9tIHRoZSBNYXJrZG93biBzdHJpbmcuXG4gICAqL1xuICBhc3luYyBtYXJrZG93blRvQmxvY2tzKGUpIHtcbiAgICByZXR1cm4gcG8oZSwgdGhpcy5zY2hlbWEsIHRoaXMuX3RpcHRhcEVkaXRvci5zY2hlbWEpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB1c2VyIGluZm8gZm9yIHRoZSBjdXJyZW50IHVzZXIgdGhhdCdzIHNob3duIHRvIG90aGVyIGNvbGxhYm9yYXRvcnMuXG4gICAqL1xuICB1cGRhdGVDb2xsYWJvcmF0aW9uVXNlckluZm8oZSkge1xuICAgIGlmICghdGhpcy5vcHRpb25zLmNvbGxhYm9yYXRpb24pXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiQ2Fubm90IHVwZGF0ZSBjb2xsYWJvcmF0aW9uIHVzZXIgaW5mbyB3aGVuIGNvbGxhYm9yYXRpb24gaXMgZGlzYWJsZWQuXCJcbiAgICAgICk7XG4gICAgdGhpcy5fdGlwdGFwRWRpdG9yLmNvbW1hbmRzLnVwZGF0ZVVzZXIoZSk7XG4gIH1cbn1cbmNvbnN0IEluID0gYXN5bmMgKG4pID0+IHtcbiAgY29uc3QgZSA9IG5ldyBGb3JtRGF0YSgpO1xuICByZXR1cm4gZS5hcHBlbmQoXCJmaWxlXCIsIG4pLCAoYXdhaXQgKGF3YWl0IGZldGNoKFwiaHR0cHM6Ly90bXBmaWxlcy5vcmcvYXBpL3YxL3VwbG9hZFwiLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiBlXG4gIH0pKS5qc29uKCkpLmRhdGEudXJsLnJlcGxhY2UoXG4gICAgXCJ0bXBmaWxlcy5vcmcvXCIsXG4gICAgXCJ0bXBmaWxlcy5vcmcvZGwvXCJcbiAgKTtcbn07XG5leHBvcnQge1xuICB4biBhcyBCbG9ja05vdGVFZGl0b3IsXG4gIHFlIGFzIEN1c3RvbUJsb2NrU2VyaWFsaXplckV4dGVuc2lvbixcbiAgUm8gYXMgRm9ybWF0dGluZ1Rvb2xiYXJQcm9zZW1pcnJvclBsdWdpbixcbiAgRG8gYXMgRm9ybWF0dGluZ1Rvb2xiYXJWaWV3LFxuICBVbyBhcyBIeXBlcmxpbmtUb29sYmFyUHJvc2VtaXJyb3JQbHVnaW4sXG4gIEhvIGFzIEltYWdlVG9vbGJhclByb3NlbWlycm9yUGx1Z2luLFxuICBfbyBhcyBJbWFnZVRvb2xiYXJWaWV3LFxuICBYbyBhcyBTaWRlTWVudVByb3NlbWlycm9yUGx1Z2luLFxuICBqbyBhcyBTaWRlTWVudVZpZXcsXG4gIEplIGFzIFNsYXNoTWVudVByb3NlbWlycm9yUGx1Z2luLFxuICBQZSBhcyBVbnJlYWNoYWJsZUNhc2VFcnJvcixcbiAgQm4gYXMgYmxvY2tTdHlsZXMsXG4gIGR0IGFzIGNhbWVsVG9EYXRhS2ViYWIsXG4gIGdvIGFzIGNyZWF0ZUJsb2NrU3BlYyxcbiAgRiBhcyBjcmVhdGVUaXBUYXBCbG9jayxcbiAganQgYXMgZGVmYXVsdEJsb2NrU2NoZW1hLFxuICBDIGFzIGRlZmF1bHRQcm9wcyxcbiAgTW4gYXMgZm9ybWF0S2V5Ym9hcmRTaG9ydGN1dCxcbiAgT28gYXMgZm9ybWF0dGluZ1Rvb2xiYXJQbHVnaW5LZXksXG4gIHJvIGFzIGdldEJsb2NrTm90ZUV4dGVuc2lvbnMsXG4gIEtvIGFzIGdldERlZmF1bHRTbGFzaE1lbnVJdGVtcyxcbiAgVm8gYXMgaHlwZXJsaW5rVG9vbGJhclBsdWdpbktleSxcbiAgeiBhcyBpbWFnZVRvb2xiYXJQbHVnaW5LZXksXG4gIE5lIGFzIGlzQXBwbGVPUyxcbiAgUyBhcyBtZXJnZUNTU0NsYXNzZXMsXG4gIG1vIGFzIHBhcnNlLFxuICBobyBhcyBwcm9wc1RvQXR0cmlidXRlcyxcbiAgZm8gYXMgcmVuZGVyLFxuICBZZSBhcyBzZXR1cFN1Z2dlc3Rpb25zTWVudSxcbiAgcW8gYXMgc2lkZU1lbnVQbHVnaW5LZXksXG4gIHR0IGFzIHNsYXNoTWVudVBsdWdpbktleSxcbiAgSW4gYXMgdXBsb2FkVG9UbXBGaWxlc0RvdE9yZ19ERVZfT05MWVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJsb2Nrbm90ZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/core/dist/blocknote.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@blocknote/react/dist/blocknote-react.js":
/*!***************************************************************!*\
  !*** ./node_modules/@blocknote/react/dist/blocknote-react.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AddBlockButton: () => (/* binding */ wn),\n/* harmony export */   BlockColorsButton: () => (/* binding */ En),\n/* harmony export */   BlockNoteView: () => (/* binding */ eo),\n/* harmony export */   BlockTypeDropdown: () => (/* binding */ on),\n/* harmony export */   ColorStyleButton: () => (/* binding */ un),\n/* harmony export */   CreateLinkButton: () => (/* binding */ vn),\n/* harmony export */   DefaultDragHandleMenu: () => (/* binding */ zn),\n/* harmony export */   DefaultFormattingToolbar: () => (/* binding */ mn),\n/* harmony export */   DefaultImageToolbar: () => (/* binding */ Et),\n/* harmony export */   DefaultSideMenu: () => (/* binding */ In),\n/* harmony export */   DefaultSlashMenu: () => (/* binding */ Fn),\n/* harmony export */   DragHandle: () => (/* binding */ Hn),\n/* harmony export */   DragHandleMenu: () => (/* binding */ Mn),\n/* harmony export */   DragHandleMenuItem: () => (/* binding */ Ht),\n/* harmony export */   FormattingToolbarPositioner: () => (/* binding */ kn),\n/* harmony export */   HyperlinkToolbarPositioner: () => (/* binding */ Cn),\n/* harmony export */   ImageToolbarPositioner: () => (/* binding */ Ln),\n/* harmony export */   InlineContent: () => (/* binding */ no),\n/* harmony export */   NestBlockButton: () => (/* binding */ gn),\n/* harmony export */   RemoveBlockButton: () => (/* binding */ Rn),\n/* harmony export */   SideMenu: () => (/* binding */ jn),\n/* harmony export */   SideMenuButton: () => (/* binding */ zt),\n/* harmony export */   SideMenuPositioner: () => (/* binding */ Bn),\n/* harmony export */   SlashMenuItem: () => (/* binding */ On),\n/* harmony export */   SlashMenuPositioner: () => (/* binding */ An),\n/* harmony export */   TextAlignButton: () => (/* binding */ Se),\n/* harmony export */   ToggledStyleButton: () => (/* binding */ he),\n/* harmony export */   Toolbar: () => (/* binding */ _e),\n/* harmony export */   ToolbarButton: () => (/* binding */ P),\n/* harmony export */   ToolbarDropdown: () => (/* binding */ en),\n/* harmony export */   UnnestBlockButton: () => (/* binding */ fn),\n/* harmony export */   blockNoteToMantineTheme: () => (/* binding */ fe),\n/* harmony export */   createReactBlockSpec: () => (/* binding */ oo),\n/* harmony export */   darkDefaultTheme: () => (/* binding */ dt),\n/* harmony export */   defaultBlockTypeDropdownItems: () => (/* binding */ nn),\n/* harmony export */   defaultColorScheme: () => (/* binding */ k),\n/* harmony export */   getDefaultReactSlashMenuItems: () => (/* binding */ Nn),\n/* harmony export */   lightDefaultTheme: () => (/* binding */ ve),\n/* harmony export */   useBlockNote: () => (/* binding */ to),\n/* harmony export */   useEditorChange: () => (/* binding */ q),\n/* harmony export */   useEditorContentChange: () => (/* binding */ tn),\n/* harmony export */   useEditorForceUpdate: () => (/* binding */ ro),\n/* harmony export */   useEditorSelectionChange: () => (/* binding */ rn),\n/* harmony export */   useSelectedBlocks: () => (/* binding */ Q)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _blocknote_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @blocknote/core */ \"(ssr)/./node_modules/@blocknote/core/dist/blocknote.js\");\n/* harmony import */ var _mantine_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mantine/core */ \"(ssr)/./node_modules/@mantine/core/cjs/index.js\");\n/* harmony import */ var _tiptap_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @tiptap/react */ \"(ssr)/./node_modules/@tiptap/react/dist/index.js\");\n/* harmony import */ var use_prefers_color_scheme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! use-prefers-color-scheme */ \"(ssr)/./node_modules/use-prefers-color-scheme/dist/index.cjs.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"(ssr)/./node_modules/lodash/lodash.js\");\n/* harmony import */ var _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @tippyjs/react */ \"(ssr)/./node_modules/@tippyjs/react/dist/tippy-react.umd.js\");\n/* harmony import */ var tippy_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tippy.js */ \"(ssr)/./node_modules/tippy.js/dist/tippy.cjs.js\");\n\n\n\n\n\n\n\n\n\nvar Me = { exports: {} }, re = {};\n/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar at;\nfunction Hr() {\n  if (at)\n    return re;\n  at = 1;\n  var e = react__WEBPACK_IMPORTED_MODULE_0__, n = Symbol.for(\"react.element\"), o = Symbol.for(\"react.fragment\"), i = Object.prototype.hasOwnProperty, s = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, c = { key: !0, ref: !0, __self: !0, __source: !0 };\n  function d(g, a, y) {\n    var x, p = {}, S = null, T = null;\n    y !== void 0 && (S = \"\" + y), a.key !== void 0 && (S = \"\" + a.key), a.ref !== void 0 && (T = a.ref);\n    for (x in a)\n      i.call(a, x) && !c.hasOwnProperty(x) && (p[x] = a[x]);\n    if (g && g.defaultProps)\n      for (x in a = g.defaultProps, a)\n        p[x] === void 0 && (p[x] = a[x]);\n    return { $$typeof: n, type: g, key: S, ref: T, props: p, _owner: s.current };\n  }\n  return re.Fragment = o, re.jsx = d, re.jsxs = d, re;\n}\nvar ne = {};\n/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar lt;\nfunction Ir() {\n  return lt || (lt = 1,  true && function() {\n    var e = react__WEBPACK_IMPORTED_MODULE_0__, n = Symbol.for(\"react.element\"), o = Symbol.for(\"react.portal\"), i = Symbol.for(\"react.fragment\"), s = Symbol.for(\"react.strict_mode\"), c = Symbol.for(\"react.profiler\"), d = Symbol.for(\"react.provider\"), g = Symbol.for(\"react.context\"), a = Symbol.for(\"react.forward_ref\"), y = Symbol.for(\"react.suspense\"), x = Symbol.for(\"react.suspense_list\"), p = Symbol.for(\"react.memo\"), S = Symbol.for(\"react.lazy\"), T = Symbol.for(\"react.offscreen\"), D = Symbol.iterator, le = \"@@iterator\";\n    function Bt(t) {\n      if (t === null || typeof t != \"object\")\n        return null;\n      var l = D && t[D] || t[le];\n      return typeof l == \"function\" ? l : null;\n    }\n    var G = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n    function H(t) {\n      {\n        for (var l = arguments.length, u = new Array(l > 1 ? l - 1 : 0), f = 1; f < l; f++)\n          u[f - 1] = arguments[f];\n        _t(\"error\", t, u);\n      }\n    }\n    function _t(t, l, u) {\n      {\n        var f = G.ReactDebugCurrentFrame, m = f.getStackAddendum();\n        m !== \"\" && (l += \"%s\", u = u.concat([m]));\n        var C = u.map(function(v) {\n          return String(v);\n        });\n        C.unshift(\"Warning: \" + l), Function.prototype.apply.call(console[t], console, C);\n      }\n    }\n    var Dt = !1, Pt = !1, Ot = !1, Ft = !1, At = !1, De;\n    De = Symbol.for(\"react.module.reference\");\n    function Lt(t) {\n      return !!(typeof t == \"string\" || typeof t == \"function\" || t === i || t === c || At || t === s || t === y || t === x || Ft || t === T || Dt || Pt || Ot || typeof t == \"object\" && t !== null && (t.$$typeof === S || t.$$typeof === p || t.$$typeof === d || t.$$typeof === g || t.$$typeof === a || // This needs to include all possible module reference object\n      // types supported by any Flight configuration anywhere since\n      // we don't know which Flight build this will end up being used\n      // with.\n      t.$$typeof === De || t.getModuleId !== void 0));\n    }\n    function Vt(t, l, u) {\n      var f = t.displayName;\n      if (f)\n        return f;\n      var m = l.displayName || l.name || \"\";\n      return m !== \"\" ? u + \"(\" + m + \")\" : u;\n    }\n    function Pe(t) {\n      return t.displayName || \"Context\";\n    }\n    function L(t) {\n      if (t == null)\n        return null;\n      if (typeof t.tag == \"number\" && H(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"), typeof t == \"function\")\n        return t.displayName || t.name || null;\n      if (typeof t == \"string\")\n        return t;\n      switch (t) {\n        case i:\n          return \"Fragment\";\n        case o:\n          return \"Portal\";\n        case c:\n          return \"Profiler\";\n        case s:\n          return \"StrictMode\";\n        case y:\n          return \"Suspense\";\n        case x:\n          return \"SuspenseList\";\n      }\n      if (typeof t == \"object\")\n        switch (t.$$typeof) {\n          case g:\n            var l = t;\n            return Pe(l) + \".Consumer\";\n          case d:\n            var u = t;\n            return Pe(u._context) + \".Provider\";\n          case a:\n            return Vt(t, t.render, \"ForwardRef\");\n          case p:\n            var f = t.displayName || null;\n            return f !== null ? f : L(t.type) || \"Memo\";\n          case S: {\n            var m = t, C = m._payload, v = m._init;\n            try {\n              return L(v(C));\n            } catch {\n              return null;\n            }\n          }\n        }\n      return null;\n    }\n    var K = Object.assign, ee = 0, Oe, Fe, Ae, Le, Ve, Ue, Ne;\n    function $e() {\n    }\n    $e.__reactDisabledLog = !0;\n    function Ut() {\n      {\n        if (ee === 0) {\n          Oe = console.log, Fe = console.info, Ae = console.warn, Le = console.error, Ve = console.group, Ue = console.groupCollapsed, Ne = console.groupEnd;\n          var t = {\n            configurable: !0,\n            enumerable: !0,\n            value: $e,\n            writable: !0\n          };\n          Object.defineProperties(console, {\n            info: t,\n            log: t,\n            warn: t,\n            error: t,\n            group: t,\n            groupCollapsed: t,\n            groupEnd: t\n          });\n        }\n        ee++;\n      }\n    }\n    function Nt() {\n      {\n        if (ee--, ee === 0) {\n          var t = {\n            configurable: !0,\n            enumerable: !0,\n            writable: !0\n          };\n          Object.defineProperties(console, {\n            log: K({}, t, {\n              value: Oe\n            }),\n            info: K({}, t, {\n              value: Fe\n            }),\n            warn: K({}, t, {\n              value: Ae\n            }),\n            error: K({}, t, {\n              value: Le\n            }),\n            group: K({}, t, {\n              value: Ve\n            }),\n            groupCollapsed: K({}, t, {\n              value: Ue\n            }),\n            groupEnd: K({}, t, {\n              value: Ne\n            })\n          });\n        }\n        ee < 0 && H(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\");\n      }\n    }\n    var me = G.ReactCurrentDispatcher, ke;\n    function ce(t, l, u) {\n      {\n        if (ke === void 0)\n          try {\n            throw Error();\n          } catch (m) {\n            var f = m.stack.trim().match(/\\n( *(at )?)/);\n            ke = f && f[1] || \"\";\n          }\n        return `\n` + ke + t;\n      }\n    }\n    var ye = !1, se;\n    {\n      var $t = typeof WeakMap == \"function\" ? WeakMap : Map;\n      se = new $t();\n    }\n    function We(t, l) {\n      if (!t || ye)\n        return \"\";\n      {\n        var u = se.get(t);\n        if (u !== void 0)\n          return u;\n      }\n      var f;\n      ye = !0;\n      var m = Error.prepareStackTrace;\n      Error.prepareStackTrace = void 0;\n      var C;\n      C = me.current, me.current = null, Ut();\n      try {\n        if (l) {\n          var v = function() {\n            throw Error();\n          };\n          if (Object.defineProperty(v.prototype, \"props\", {\n            set: function() {\n              throw Error();\n            }\n          }), typeof Reflect == \"object\" && Reflect.construct) {\n            try {\n              Reflect.construct(v, []);\n            } catch (V) {\n              f = V;\n            }\n            Reflect.construct(t, [], v);\n          } else {\n            try {\n              v.call();\n            } catch (V) {\n              f = V;\n            }\n            t.call(v.prototype);\n          }\n        } else {\n          try {\n            throw Error();\n          } catch (V) {\n            f = V;\n          }\n          t();\n        }\n      } catch (V) {\n        if (V && f && typeof V.stack == \"string\") {\n          for (var h = V.stack.split(`\n`), I = f.stack.split(`\n`), M = h.length - 1, E = I.length - 1; M >= 1 && E >= 0 && h[M] !== I[E]; )\n            E--;\n          for (; M >= 1 && E >= 0; M--, E--)\n            if (h[M] !== I[E]) {\n              if (M !== 1 || E !== 1)\n                do\n                  if (M--, E--, E < 0 || h[M] !== I[E]) {\n                    var _ = `\n` + h[M].replace(\" at new \", \" at \");\n                    return t.displayName && _.includes(\"<anonymous>\") && (_ = _.replace(\"<anonymous>\", t.displayName)), typeof t == \"function\" && se.set(t, _), _;\n                  }\n                while (M >= 1 && E >= 0);\n              break;\n            }\n        }\n      } finally {\n        ye = !1, me.current = C, Nt(), Error.prepareStackTrace = m;\n      }\n      var X = t ? t.displayName || t.name : \"\", ot = X ? ce(X) : \"\";\n      return typeof t == \"function\" && se.set(t, ot), ot;\n    }\n    function Wt(t, l, u) {\n      return We(t, !1);\n    }\n    function Yt(t) {\n      var l = t.prototype;\n      return !!(l && l.isReactComponent);\n    }\n    function de(t, l, u) {\n      if (t == null)\n        return \"\";\n      if (typeof t == \"function\")\n        return We(t, Yt(t));\n      if (typeof t == \"string\")\n        return ce(t);\n      switch (t) {\n        case y:\n          return ce(\"Suspense\");\n        case x:\n          return ce(\"SuspenseList\");\n      }\n      if (typeof t == \"object\")\n        switch (t.$$typeof) {\n          case a:\n            return Wt(t.render);\n          case p:\n            return de(t.type, l, u);\n          case S: {\n            var f = t, m = f._payload, C = f._init;\n            try {\n              return de(C(m), l, u);\n            } catch {\n            }\n          }\n        }\n      return \"\";\n    }\n    var ue = Object.prototype.hasOwnProperty, Ye = {}, qe = G.ReactDebugCurrentFrame;\n    function ge(t) {\n      if (t) {\n        var l = t._owner, u = de(t.type, t._source, l ? l.type : null);\n        qe.setExtraStackFrame(u);\n      } else\n        qe.setExtraStackFrame(null);\n    }\n    function qt(t, l, u, f, m) {\n      {\n        var C = Function.call.bind(ue);\n        for (var v in t)\n          if (C(t, v)) {\n            var h = void 0;\n            try {\n              if (typeof t[v] != \"function\") {\n                var I = Error((f || \"React class\") + \": \" + u + \" type `\" + v + \"` is invalid; it must be a function, usually from the `prop-types` package, but received `\" + typeof t[v] + \"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");\n                throw I.name = \"Invariant Violation\", I;\n              }\n              h = t[v](l, v, f, u, null, \"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\");\n            } catch (M) {\n              h = M;\n            }\n            h && !(h instanceof Error) && (ge(m), H(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\", f || \"React class\", u, v, typeof h), ge(null)), h instanceof Error && !(h.message in Ye) && (Ye[h.message] = !0, ge(m), H(\"Failed %s type: %s\", u, h.message), ge(null));\n          }\n      }\n    }\n    var Kt = Array.isArray;\n    function pe(t) {\n      return Kt(t);\n    }\n    function Gt(t) {\n      {\n        var l = typeof Symbol == \"function\" && Symbol.toStringTag, u = l && t[Symbol.toStringTag] || t.constructor.name || \"Object\";\n        return u;\n      }\n    }\n    function Jt(t) {\n      try {\n        return Ke(t), !1;\n      } catch {\n        return !0;\n      }\n    }\n    function Ke(t) {\n      return \"\" + t;\n    }\n    function Ge(t) {\n      if (Jt(t))\n        return H(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\", Gt(t)), Ke(t);\n    }\n    var te = G.ReactCurrentOwner, Xt = {\n      key: !0,\n      ref: !0,\n      __self: !0,\n      __source: !0\n    }, Je, Xe, Ce;\n    Ce = {};\n    function Zt(t) {\n      if (ue.call(t, \"ref\")) {\n        var l = Object.getOwnPropertyDescriptor(t, \"ref\").get;\n        if (l && l.isReactWarning)\n          return !1;\n      }\n      return t.ref !== void 0;\n    }\n    function Qt(t) {\n      if (ue.call(t, \"key\")) {\n        var l = Object.getOwnPropertyDescriptor(t, \"key\").get;\n        if (l && l.isReactWarning)\n          return !1;\n      }\n      return t.key !== void 0;\n    }\n    function er(t, l) {\n      if (typeof t.ref == \"string\" && te.current && l && te.current.stateNode !== l) {\n        var u = L(te.current.type);\n        Ce[u] || (H('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref', L(te.current.type), t.ref), Ce[u] = !0);\n      }\n    }\n    function tr(t, l) {\n      {\n        var u = function() {\n          Je || (Je = !0, H(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\", l));\n        };\n        u.isReactWarning = !0, Object.defineProperty(t, \"key\", {\n          get: u,\n          configurable: !0\n        });\n      }\n    }\n    function rr(t, l) {\n      {\n        var u = function() {\n          Xe || (Xe = !0, H(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\", l));\n        };\n        u.isReactWarning = !0, Object.defineProperty(t, \"ref\", {\n          get: u,\n          configurable: !0\n        });\n      }\n    }\n    var nr = function(t, l, u, f, m, C, v) {\n      var h = {\n        // This tag allows us to uniquely identify this as a React Element\n        $$typeof: n,\n        // Built-in properties that belong on the element\n        type: t,\n        key: l,\n        ref: u,\n        props: v,\n        // Record the component responsible for creating this element.\n        _owner: C\n      };\n      return h._store = {}, Object.defineProperty(h._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: !1\n      }), Object.defineProperty(h, \"_self\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !1,\n        value: f\n      }), Object.defineProperty(h, \"_source\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !1,\n        value: m\n      }), Object.freeze && (Object.freeze(h.props), Object.freeze(h)), h;\n    };\n    function or(t, l, u, f, m) {\n      {\n        var C, v = {}, h = null, I = null;\n        u !== void 0 && (Ge(u), h = \"\" + u), Qt(l) && (Ge(l.key), h = \"\" + l.key), Zt(l) && (I = l.ref, er(l, m));\n        for (C in l)\n          ue.call(l, C) && !Xt.hasOwnProperty(C) && (v[C] = l[C]);\n        if (t && t.defaultProps) {\n          var M = t.defaultProps;\n          for (C in M)\n            v[C] === void 0 && (v[C] = M[C]);\n        }\n        if (h || I) {\n          var E = typeof t == \"function\" ? t.displayName || t.name || \"Unknown\" : t;\n          h && tr(v, E), I && rr(v, E);\n        }\n        return nr(t, h, I, m, f, te.current, v);\n      }\n    }\n    var je = G.ReactCurrentOwner, Ze = G.ReactDebugCurrentFrame;\n    function J(t) {\n      if (t) {\n        var l = t._owner, u = de(t.type, t._source, l ? l.type : null);\n        Ze.setExtraStackFrame(u);\n      } else\n        Ze.setExtraStackFrame(null);\n    }\n    var Te;\n    Te = !1;\n    function we(t) {\n      return typeof t == \"object\" && t !== null && t.$$typeof === n;\n    }\n    function Qe() {\n      {\n        if (je.current) {\n          var t = L(je.current.type);\n          if (t)\n            return `\n\nCheck the render method of \\`` + t + \"`.\";\n        }\n        return \"\";\n      }\n    }\n    function ir(t) {\n      {\n        if (t !== void 0) {\n          var l = t.fileName.replace(/^.*[\\\\\\/]/, \"\"), u = t.lineNumber;\n          return `\n\nCheck your code at ` + l + \":\" + u + \".\";\n        }\n        return \"\";\n      }\n    }\n    var et = {};\n    function ar(t) {\n      {\n        var l = Qe();\n        if (!l) {\n          var u = typeof t == \"string\" ? t : t.displayName || t.name;\n          u && (l = `\n\nCheck the top-level render call using <` + u + \">.\");\n        }\n        return l;\n      }\n    }\n    function tt(t, l) {\n      {\n        if (!t._store || t._store.validated || t.key != null)\n          return;\n        t._store.validated = !0;\n        var u = ar(l);\n        if (et[u])\n          return;\n        et[u] = !0;\n        var f = \"\";\n        t && t._owner && t._owner !== je.current && (f = \" It was passed a child from \" + L(t._owner.type) + \".\"), J(t), H('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.', u, f), J(null);\n      }\n    }\n    function rt(t, l) {\n      {\n        if (typeof t != \"object\")\n          return;\n        if (pe(t))\n          for (var u = 0; u < t.length; u++) {\n            var f = t[u];\n            we(f) && tt(f, l);\n          }\n        else if (we(t))\n          t._store && (t._store.validated = !0);\n        else if (t) {\n          var m = Bt(t);\n          if (typeof m == \"function\" && m !== t.entries)\n            for (var C = m.call(t), v; !(v = C.next()).done; )\n              we(v.value) && tt(v.value, l);\n        }\n      }\n    }\n    function lr(t) {\n      {\n        var l = t.type;\n        if (l == null || typeof l == \"string\")\n          return;\n        var u;\n        if (typeof l == \"function\")\n          u = l.propTypes;\n        else if (typeof l == \"object\" && (l.$$typeof === a || // Note: Memo only checks outer props here.\n        // Inner props are checked in the reconciler.\n        l.$$typeof === p))\n          u = l.propTypes;\n        else\n          return;\n        if (u) {\n          var f = L(l);\n          qt(u, t.props, \"prop\", f, t);\n        } else if (l.PropTypes !== void 0 && !Te) {\n          Te = !0;\n          var m = L(l);\n          H(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\", m || \"Unknown\");\n        }\n        typeof l.getDefaultProps == \"function\" && !l.getDefaultProps.isReactClassApproved && H(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\");\n      }\n    }\n    function cr(t) {\n      {\n        for (var l = Object.keys(t.props), u = 0; u < l.length; u++) {\n          var f = l[u];\n          if (f !== \"children\" && f !== \"key\") {\n            J(t), H(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\", f), J(null);\n            break;\n          }\n        }\n        t.ref !== null && (J(t), H(\"Invalid attribute `ref` supplied to `React.Fragment`.\"), J(null));\n      }\n    }\n    function nt(t, l, u, f, m, C) {\n      {\n        var v = Lt(t);\n        if (!v) {\n          var h = \"\";\n          (t === void 0 || typeof t == \"object\" && t !== null && Object.keys(t).length === 0) && (h += \" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");\n          var I = ir(m);\n          I ? h += I : h += Qe();\n          var M;\n          t === null ? M = \"null\" : pe(t) ? M = \"array\" : t !== void 0 && t.$$typeof === n ? (M = \"<\" + (L(t.type) || \"Unknown\") + \" />\", h = \" Did you accidentally export a JSX literal instead of a component?\") : M = typeof t, H(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\", M, h);\n        }\n        var E = or(t, l, u, m, C);\n        if (E == null)\n          return E;\n        if (v) {\n          var _ = l.children;\n          if (_ !== void 0)\n            if (f)\n              if (pe(_)) {\n                for (var X = 0; X < _.length; X++)\n                  rt(_[X], t);\n                Object.freeze && Object.freeze(_);\n              } else\n                H(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");\n            else\n              rt(_, t);\n        }\n        return t === i ? cr(E) : lr(E), E;\n      }\n    }\n    function sr(t, l, u) {\n      return nt(t, l, u, !0);\n    }\n    function dr(t, l, u) {\n      return nt(t, l, u, !1);\n    }\n    var ur = dr, gr = sr;\n    ne.Fragment = i, ne.jsx = ur, ne.jsxs = gr;\n  }()), ne;\n}\n false ? 0 : Me.exports = Ir();\nvar r = Me.exports;\nconst fe = (e) => {\n  const n = `0 4px 12px ${e.colors.shadow}`, o = `1px solid ${e.colors.border}`, i = {\n    default: e.colors.editor.text,\n    gray: e.colors.highlightColors.gray.text,\n    brown: e.colors.highlightColors.brown.text,\n    red: e.colors.highlightColors.red.text,\n    orange: e.colors.highlightColors.orange.text,\n    yellow: e.colors.highlightColors.yellow.text,\n    green: e.colors.highlightColors.green.text,\n    blue: e.colors.highlightColors.blue.text,\n    purple: e.colors.highlightColors.purple.text,\n    pink: e.colors.highlightColors.pink.text\n  }, s = {\n    default: e.colors.editor.background,\n    gray: e.colors.highlightColors.gray.background,\n    brown: e.colors.highlightColors.brown.background,\n    red: e.colors.highlightColors.red.background,\n    orange: e.colors.highlightColors.orange.background,\n    yellow: e.colors.highlightColors.yellow.background,\n    green: e.colors.highlightColors.green.background,\n    blue: e.colors.highlightColors.blue.background,\n    purple: e.colors.highlightColors.purple.background,\n    pink: e.colors.highlightColors.pink.background\n  }, c = `${Math.max(e.borderRadius + 2, 1)}px`, d = `${e.borderRadius}px`, g = `${Math.max(e.borderRadius - 2, 1)}px`;\n  return {\n    activeStyles: {\n      // Removes button press effect.\n      transform: \"none\"\n    },\n    components: {\n      // Slash Menu, Formatting Toolbar dropdown, color picker dropdown\n      Menu: {\n        styles: () => {\n          var a;\n          return {\n            dropdown: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                backgroundColor: e.colors.menu.background,\n                border: o,\n                borderRadius: d,\n                boxShadow: n,\n                color: e.colors.menu.text,\n                padding: \"2px\",\n                overflowY: \"scroll\",\n                \".mantine-Menu-label\": {\n                  backgroundColor: e.colors.menu.background,\n                  color: e.colors.menu.text\n                },\n                \".mantine-Menu-item\": {\n                  backgroundColor: e.colors.menu.background,\n                  border: \"none\",\n                  borderRadius: g,\n                  color: e.colors.menu.text\n                },\n                \".mantine-Menu-item[data-hovered]\": {\n                  backgroundColor: e.colors.hovered.background,\n                  border: \"none\",\n                  color: e.colors.hovered.text\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).Menu) || {}\n            )\n          };\n        }\n      },\n      Tabs: {\n        styles: () => ({\n          root: {\n            width: \"100%\",\n            backgroundColor: e.colors.menu.background\n          },\n          tabsList: {\n            borderColor: e.colors.hovered.background\n          },\n          tab: {\n            color: e.colors.menu.text,\n            borderColor: e.colors.hovered.background,\n            \"&:hover\": {\n              color: e.colors.hovered.text,\n              backgroundColor: e.colors.hovered.background,\n              borderColor: e.colors.hovered.background\n            },\n            \"&[data-active], &[data-active]&:hover\": {\n              color: e.colors.menu.text,\n              borderColor: e.colors.menu.text\n            }\n          },\n          panel: {\n            padding: \"8px\",\n            \".mantine-UnstyledButton-root\": {\n              width: \"60%\",\n              border: `solid ${e.colors.border} 1px`,\n              borderRadius: \"4px\",\n              height: \"32px\"\n            },\n            \".mantine-UnstyledButton-root:hover\": {\n              color: e.colors.hovered.text,\n              backgroundColor: e.colors.hovered.background\n            }\n          }\n        })\n      },\n      FileInput: {\n        styles: () => ({\n          input: {\n            color: e.colors.menu.text,\n            backgroundColor: e.colors.menu.background,\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            border: \"none\",\n            borderRadius: \"4px\",\n            \"&:hover\": {\n              backgroundColor: e.colors.hovered.background\n            }\n          },\n          wrapper: {\n            border: `solid ${e.colors.border} 1px`,\n            borderRadius: \"4px\"\n          },\n          placeholder: {\n            color: `${e.colors.menu.text} !important`,\n            fontWeight: 600\n          }\n        })\n      },\n      TextInput: {\n        styles: () => ({\n          input: {\n            color: e.colors.menu.text,\n            backgroundColor: e.colors.menu.background,\n            border: `solid ${e.colors.border} 1px`,\n            borderRadius: \"4px\",\n            height: \"32px\"\n          }\n        })\n      },\n      ColorIcon: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                border: o,\n                borderRadius: g\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).ColorIcon) || {}\n            )\n          };\n        }\n      },\n      DragHandleMenu: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                \".mantine-Menu-item\": {\n                  fontSize: \"12px\",\n                  height: \"30px\"\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).DragHandleMenu) || {}\n            )\n          };\n        }\n      },\n      Editor: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                \".ProseMirror\": {\n                  backgroundColor: e.colors.editor.background,\n                  borderRadius: c,\n                  color: e.colors.editor.text,\n                  fontFamily: e.fontFamily\n                },\n                // Placeholders\n                [`.${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.isEmpty} .${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.inlineContent}:before, .${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.isFilter} .${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.inlineContent}:before`]: {\n                  color: e.colors.sideMenu\n                },\n                // Indent lines\n                [`.${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.blockGroup}`]: {\n                  [`.${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.blockGroup}`]: {\n                    [`.${_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.blockOuter}:not([data-prev-depth-changed])::before`]: {\n                      borderLeft: `1px solid ${e.colors.sideMenu}`\n                    }\n                  }\n                },\n                // Highlight text colors\n                ...Object.fromEntries(\n                  Object.entries(i).map(([y, x]) => [\n                    `[data-text-color=\"${y}\"]`,\n                    { color: x }\n                  ])\n                ),\n                // Highlight background colors\n                ...Object.fromEntries(\n                  Object.entries(s).map(([y, x]) => [\n                    `[data-background-color=\"${y}\"]`,\n                    { backgroundColor: x }\n                  ])\n                )\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).Editor) || {}\n            )\n          };\n        }\n      },\n      Toolbar: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                backgroundColor: e.colors.menu.background,\n                boxShadow: n,\n                border: o,\n                borderRadius: d,\n                flexWrap: \"nowrap\",\n                gap: \"2px\",\n                padding: \"2px\",\n                width: \"fit-content\",\n                // Button (including dropdown target)\n                \".mantine-Button-root, .mantine-ActionIcon-root\": {\n                  backgroundColor: e.colors.menu.background,\n                  border: \"none\",\n                  borderRadius: g,\n                  color: e.colors.menu.text\n                },\n                // Hovered button\n                \".mantine-Button-root:hover, .mantine-ActionIcon-root:hover\": {\n                  backgroundColor: e.colors.hovered.background,\n                  border: \"none\",\n                  color: e.colors.hovered.text\n                },\n                // Selected button\n                \".mantine-Button-root[data-selected], .mantine-ActionIcon-root[data-selected]\": {\n                  backgroundColor: e.colors.selected.background,\n                  border: \"none\",\n                  color: e.colors.selected.text\n                },\n                // Disabled button\n                \".mantine-Button-root[data-disabled], .mantine-ActionIcon-root[data-disabled]\": {\n                  backgroundColor: e.colors.disabled.background,\n                  border: \"none\",\n                  color: e.colors.disabled.text\n                },\n                // Dropdown\n                \".mantine-Menu-dropdown\": {\n                  // Dropdown item\n                  \".mantine-Menu-item\": {\n                    fontSize: \"12px\",\n                    height: \"30px\",\n                    \".mantine-Menu-itemRightSection\": {\n                      paddingLeft: \"5px\"\n                    }\n                  },\n                  \".mantine-Menu-item:hover\": {\n                    backgroundColor: e.colors.hovered.background\n                  }\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).Toolbar) || {}\n            )\n          };\n        }\n      },\n      ToolbarInputDropdown: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                backgroundColor: e.colors.menu.background,\n                border: o,\n                borderRadius: d,\n                boxShadow: n,\n                color: e.colors.menu.text,\n                gap: \"4px\",\n                minWidth: \"145px\",\n                padding: \"2px\",\n                // Row\n                \".mantine-Group-root\": {\n                  flexWrap: \"nowrap\",\n                  // Row input field\n                  \".mantine-TextInput-root, .mantine-FileInput-root\": {\n                    width: \"300px\",\n                    \".mantine-TextInput-wrapper:hover\": {\n                      backgroundColor: e.colors.hovered.background\n                    },\n                    \".mantine-TextInput-wrapper, .mantine-FileInput-wrapper\": {\n                      padding: 0,\n                      borderRadius: \"4px\",\n                      \".mantine-FileInput-icon\": {\n                        color: e.colors.menu.text\n                      },\n                      \".mantine-TextInput-input, .mantine-FileInput-input\": {\n                        border: \"none\",\n                        fontSize: \"12px\",\n                        \".mantine-FileInput-placeholder\": {\n                          color: e.colors.menu.text\n                        }\n                      },\n                      \".mantine-FileInput-input:hover\": {\n                        backgroundColor: e.colors.hovered.background\n                      }\n                    }\n                  }\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).EditHyperlinkMenu) || {}\n            )\n          };\n        }\n      },\n      Tooltip: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                backgroundColor: e.colors.tooltip.background,\n                border: o,\n                borderRadius: d,\n                boxShadow: n,\n                color: e.colors.tooltip.text,\n                padding: \"4px 10px\",\n                textAlign: \"center\",\n                \"div ~ div\": {\n                  color: e.colors.tooltip.text\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).Tooltip) || {}\n            )\n          };\n        }\n      },\n      SlashMenu: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                position: \"relative\",\n                \".mantine-Menu-item\": {\n                  // Icon\n                  \".mantine-Menu-itemIcon\": {\n                    backgroundColor: e.colors.tooltip.background,\n                    borderRadius: g,\n                    color: e.colors.tooltip.text,\n                    padding: \"8px\"\n                  },\n                  // Text\n                  \".mantine-Menu-itemLabel\": {\n                    paddingRight: \"16px\",\n                    \".mantine-Stack-root\": {\n                      gap: \"0\"\n                    }\n                  },\n                  // Badge (keyboard shortcut)\n                  \".mantine-Menu-itemRightSection\": {\n                    \".mantine-Badge-root\": {\n                      backgroundColor: e.colors.tooltip.background,\n                      color: e.colors.tooltip.text\n                    }\n                  }\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).SlashMenu) || {}\n            )\n          };\n        }\n      },\n      SideMenu: {\n        styles: () => {\n          var a;\n          return {\n            root: lodash__WEBPACK_IMPORTED_MODULE_3__.merge(\n              {\n                backgroundColor: \"transparent\",\n                \".mantine-UnstyledButton-root\": {\n                  backgroundColor: \"transparent\",\n                  color: e.colors.sideMenu\n                },\n                \".mantine-UnstyledButton-root:hover\": {\n                  backgroundColor: e.colors.hovered.background\n                }\n              },\n              ((a = e.componentStyles) == null ? void 0 : a.call(e, e).SideMenu) || {}\n            )\n          };\n        }\n      }\n    },\n    fontFamily: e.fontFamily,\n    other: {\n      textColors: i,\n      backgroundColors: s\n    }\n  };\n}, _e = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((e, n) => {\n  const { classes: o } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"Toolbar\"\n  });\n  return /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Group,\n    {\n      className: e.className ? `${o.root} ${e.className}` : o.root,\n      ref: n,\n      ...e,\n      children: e.children\n    }\n  );\n});\nvar xt = {\n  color: void 0,\n  size: void 0,\n  className: void 0,\n  style: void 0,\n  attr: void 0\n}, ct = react__WEBPACK_IMPORTED_MODULE_0__.createContext && react__WEBPACK_IMPORTED_MODULE_0__.createContext(xt), W = globalThis && globalThis.__assign || function() {\n  return W = Object.assign || function(e) {\n    for (var n, o = 1, i = arguments.length; o < i; o++) {\n      n = arguments[o];\n      for (var s in n)\n        Object.prototype.hasOwnProperty.call(n, s) && (e[s] = n[s]);\n    }\n    return e;\n  }, W.apply(this, arguments);\n}, Br = globalThis && globalThis.__rest || function(e, n) {\n  var o = {};\n  for (var i in e)\n    Object.prototype.hasOwnProperty.call(e, i) && n.indexOf(i) < 0 && (o[i] = e[i]);\n  if (e != null && typeof Object.getOwnPropertySymbols == \"function\")\n    for (var s = 0, i = Object.getOwnPropertySymbols(e); s < i.length; s++)\n      n.indexOf(i[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, i[s]) && (o[i[s]] = e[i[s]]);\n  return o;\n};\nfunction mt(e) {\n  return e && e.map(function(n, o) {\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(n.tag, W({\n      key: o\n    }, n.attr), mt(n.child));\n  });\n}\nfunction j(e) {\n  return function(n) {\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_r, W({\n      attr: W({}, e.attr)\n    }, n), mt(e.child));\n  };\n}\nfunction _r(e) {\n  var n = function(o) {\n    var i = e.attr, s = e.size, c = e.title, d = Br(e, [\"attr\", \"size\", \"title\"]), g = s || o.size || \"1em\", a;\n    return o.className && (a = o.className), e.className && (a = (a ? a + \" \" : \"\") + e.className), react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", W({\n      stroke: \"currentColor\",\n      fill: \"currentColor\",\n      strokeWidth: \"0\"\n    }, o.attr, i, d, {\n      className: a,\n      style: W(W({\n        color: e.color || o.color\n      }, o.style), e.style),\n      height: g,\n      width: g,\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }), c && react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"title\", null, c), e.children);\n  };\n  return ct !== void 0 ? react__WEBPACK_IMPORTED_MODULE_0__.createElement(ct.Consumer, null, function(o) {\n    return n(o);\n  }) : n(xt);\n}\nfunction Dr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M23 12l-7.071 7.071-1.414-1.414L20.172 12l-5.657-5.657 1.414-1.414L23 12zM3.828 12l5.657 5.657-1.414 1.414L1 12l7.071-7.071 1.414 1.414L3.828 12z\" } }] }] })(e);\n}\nfunction Pr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z\" } }] }] })(e);\n}\nfunction Or(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M3 4h18v2H3V4zm0 15h18v2H3v-2zm0-5h18v2H3v-2zm0-5h18v2H3V9z\" } }] }] })(e);\n}\nfunction Fr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z\" } }] }] })(e);\n}\nfunction Ar(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z\" } }] }] })(e);\n}\nfunction Lr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z\" } }] }] })(e);\n}\nfunction kt(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0H24V24H0z\" } }, { tag: \"path\", attr: { d: \"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z\" } }] }] })(e);\n}\nfunction yt(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0H24V24H0z\" } }, { tag: \"path\", attr: { d: \"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z\" } }] }] })(e);\n}\nfunction pt(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0H24V24H0z\" } }, { tag: \"path\", attr: { d: \"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z\" } }] }] })(e);\n}\nfunction Vr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M3 4h18v2H3V4zm0 15h18v2H3v-2zm8-5h10v2H11v-2zm0-5h10v2H11V9zm-8 3.5L7 9v7l-4-3.5z\" } }] }] })(e);\n}\nfunction Ur(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M3 4h18v2H3V4zm0 15h18v2H3v-2zm8-5h10v2H11v-2zm0-5h10v2H11V9zm-4 3.5L3 16V9l4 3.5z\" } }] }] })(e);\n}\nfunction Nr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z\" } }] }] })(e);\n}\nfunction $r(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M17 17h5v2h-3v3h-2v-5zM7 7H2V5h3V2h2v5zm11.364 8.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z\" } }] }] })(e);\n}\nfunction Ct(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z\" } }] }] })(e);\n}\nfunction jt(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z\" } }] }] })(e);\n}\nfunction Tt(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z\" } }] }] })(e);\n}\nfunction Wr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z\" } }] }] })(e);\n}\nfunction ie(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M13 6v15h-2V6H5V4h14v2z\" } }] }] })(e);\n}\nfunction Yr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z\" } }] }] })(e);\n}\nfunction qr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M5 11.1l2-2 5.5 5.5 3.5-3.5 3 3V5H5v6.1zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm11.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" } }] }] })(e);\n}\nfunction Kr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0H24V24H0z\" } }, { tag: \"path\", attr: { d: \"M20 3c.552 0 1 .448 1 1v1.757l-2 2V5H5v8.1l4-4 4.328 4.329-1.327 1.327-.006 4.239 4.246.006 1.33-1.33L18.899 19H19v-2.758l2-2V20c0 .552-.448 1-1 1H4c-.552 0-1-.448-1-1V4c0-.552.448-1 1-1h16zm1.778 4.808l1.414 1.414L15.414 17l-1.416-.002.002-1.412 7.778-7.778zM15.5 7c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5S14 9.328 14 8.5 14.672 7 15.5 7z\" } }] }] })(e);\n}\nfunction Gr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"g\", attr: {}, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0z\" } }, { tag: \"path\", attr: { d: \"M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v9l-3.794-3.793-5.999 6-1.414-1.414 5.999-6L12 3h9z\" } }] }] })(e);\n}\nfunction Re(e) {\n  return j({ tag: \"svg\", attr: { version: \"1.2\", baseProfile: \"tiny\", viewBox: \"0 0 24 24\" }, child: [{ tag: \"path\", attr: { d: \"M16.972 6.251c-.967-.538-2.185-.188-2.72.777l-3.713 6.682-2.125-2.125c-.781-.781-2.047-.781-2.828 0-.781.781-.781 2.047 0 2.828l4 4c.378.379.888.587 1.414.587l.277-.02c.621-.087 1.166-.46 1.471-1.009l5-9c.537-.966.189-2.183-.776-2.72z\" } }] })(e);\n}\nfunction Jr(e) {\n  const n = e.icon;\n  return /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Item,\n    {\n      onClick: e.onClick,\n      icon: n && /* @__PURE__ */ r.jsx(n, { size: 16 }),\n      rightSection: e.isSelected ? /* @__PURE__ */ r.jsx(Re, { size: 16 }) : (\n        // Ensures space for tick even if item isn't currently selected.\n        /* @__PURE__ */ r.jsx(\"div\", { style: { width: \"16px\", padding: \"0\" } })\n      ),\n      disabled: e.isDisabled,\n      children: e.text\n    },\n    e.text\n  );\n}\nfunction Xr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 20 20\", fill: \"currentColor\", \"aria-hidden\": \"true\" }, child: [{ tag: \"path\", attr: { fillRule: \"evenodd\", d: \"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\", clipRule: \"evenodd\" } }] })(e);\n}\nfunction Zr(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 20 20\", fill: \"currentColor\", \"aria-hidden\": \"true\" }, child: [{ tag: \"path\", attr: { fillRule: \"evenodd\", d: \"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\", clipRule: \"evenodd\" } }] })(e);\n}\nconst Qr = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((e, n) => {\n  const o = e.icon;\n  return /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Button,\n    {\n      leftIcon: o && /* @__PURE__ */ r.jsx(o, { size: 16 }),\n      rightIcon: /* @__PURE__ */ r.jsx(Xr, {}),\n      size: \"xs\",\n      variant: \"subtle\",\n      disabled: e.isDisabled,\n      onClick: e.onClick,\n      ref: n,\n      children: e.text\n    }\n  );\n});\nfunction xe() {\n  const e = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  return {\n    ref: e,\n    updateMaxHeight: () => {\n      setTimeout(() => {\n        if (e.current && e.current.childElementCount > 0) {\n          e.current.firstElementChild.style.maxHeight = \"none\";\n          const n = e.current.firstElementChild.getBoundingClientRect();\n          e.current.firstElementChild.style.maxHeight = `${Math.min(\n            n.top >= 0 ? window.innerHeight - n.top - 20 : n.bottom - 20\n          )}px`;\n        }\n      }, 10);\n    }\n  };\n}\nfunction en(e) {\n  const n = e.items.filter((s) => s.isSelected)[0], { ref: o, updateMaxHeight: i } = xe();\n  return n ? /* @__PURE__ */ r.jsxs(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu,\n    {\n      exitTransitionDuration: 0,\n      disabled: e.isDisabled,\n      onOpen: i,\n      children: [\n        /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Target, { children: /* @__PURE__ */ r.jsx(\n          Qr,\n          {\n            text: n.text,\n            icon: n.icon,\n            isDisabled: n.isDisabled\n          }\n        ) }),\n        /* @__PURE__ */ r.jsx(\"div\", { ref: o, children: /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Dropdown, { children: e.items.map((s) => /* @__PURE__ */ r.jsx(Jr, { ...s }, s.text)) }) })\n      ]\n    }\n  ) : null;\n}\nfunction tn(e, n) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => (e._tiptapEditor.on(\"update\", n), () => {\n    e._tiptapEditor.off(\"update\", n);\n  }), [n, e._tiptapEditor]);\n}\nfunction rn(e, n) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => (e._tiptapEditor.on(\"selectionUpdate\", n), () => {\n    e._tiptapEditor.off(\"selectionUpdate\", n);\n  }), [n, e._tiptapEditor]);\n}\nfunction q(e, n) {\n  tn(e, n), rn(e, n);\n}\nconst nn = [\n  {\n    name: \"Paragraph\",\n    type: \"paragraph\",\n    icon: ie,\n    isSelected: (e) => e.type === \"paragraph\"\n  },\n  {\n    name: \"Heading 1\",\n    type: \"heading\",\n    props: { level: 1 },\n    icon: kt,\n    isSelected: (e) => e.type === \"heading\" && \"level\" in e.props && e.props.level === \"1\"\n  },\n  {\n    name: \"Heading 2\",\n    type: \"heading\",\n    props: { level: 2 },\n    icon: yt,\n    isSelected: (e) => e.type === \"heading\" && \"level\" in e.props && e.props.level === \"2\"\n  },\n  {\n    name: \"Heading 3\",\n    type: \"heading\",\n    props: { level: 3 },\n    icon: pt,\n    isSelected: (e) => e.type === \"heading\" && \"level\" in e.props && e.props.level === \"3\"\n  },\n  {\n    name: \"Bullet List\",\n    type: \"bulletListItem\",\n    icon: Tt,\n    isSelected: (e) => e.type === \"bulletListItem\"\n  },\n  {\n    name: \"Numbered List\",\n    type: \"numberedListItem\",\n    icon: jt,\n    isSelected: (e) => e.type === \"numberedListItem\"\n  }\n], on = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    e.editor.getTextCursorPosition().block\n  ), i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (e.items || nn).filter((d) => {\n    if (!(d.type in e.editor.schema))\n      return !1;\n    for (const [g, a] of Object.entries(d.props || {})) {\n      const y = e.editor.schema[d.type].propSchema;\n      if (!(g in y) || y[g].values !== void 0 && !y[g].values.includes(a))\n        return !1;\n    }\n    return !0;\n  }), [e.editor, e.items]), s = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => i.find((d) => d.type === n.type) !== void 0,\n    [n.type, i]\n  ), c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const d = (g) => {\n      e.editor.focus(), e.editor.updateBlock(n, {\n        type: g.type,\n        props: g.props\n      });\n    };\n    return i.map((g) => ({\n      text: g.name,\n      icon: g.icon,\n      onClick: () => d(g),\n      isSelected: g.isSelected(n)\n    }));\n  }, [n, i, e.editor]);\n  return q(e.editor, () => {\n    o(e.editor.getTextCursorPosition().block);\n  }), s ? /* @__PURE__ */ r.jsx(en, { items: c }) : null;\n}, an = (e) => {\n  const { classes: n } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"Tooltip\"\n  });\n  return /* @__PURE__ */ r.jsxs(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Stack, { spacing: 0, className: n.root, children: [\n    /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Text, { size: \"sm\", children: e.mainTooltip }),\n    e.secondaryTooltip && /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Text, { size: \"xs\", children: e.secondaryTooltip })\n  ] });\n}, P = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(\n  (e, n) => {\n    const o = e.icon;\n    return /* @__PURE__ */ r.jsx(\n      _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n      {\n        content: /* @__PURE__ */ r.jsx(\n          an,\n          {\n            mainTooltip: e.mainTooltip,\n            secondaryTooltip: e.secondaryTooltip\n          }\n        ),\n        trigger: \"mouseenter\",\n        children: e.children ? /* @__PURE__ */ r.jsxs(\n          _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Button,\n          {\n            onClick: e.onClick,\n            \"data-selected\": e.isSelected ? \"true\" : void 0,\n            \"data-test\": e.mainTooltip.slice(0, 1).toLowerCase() + e.mainTooltip.replace(/\\s+/g, \"\").slice(1),\n            size: \"xs\",\n            disabled: e.isDisabled || !1,\n            ref: n,\n            children: [\n              o && /* @__PURE__ */ r.jsx(o, {}),\n              e.children\n            ]\n          }\n        ) : /* @__PURE__ */ r.jsx(\n          _mantine_core__WEBPACK_IMPORTED_MODULE_4__.ActionIcon,\n          {\n            onClick: e.onClick,\n            \"data-selected\": e.isSelected ? \"true\" : void 0,\n            \"data-test\": e.mainTooltip.slice(0, 1).toLowerCase() + e.mainTooltip.replace(/\\s+/g, \"\").slice(1),\n            size: 30,\n            disabled: e.isDisabled || !1,\n            ref: n,\n            children: o && /* @__PURE__ */ r.jsx(o, {})\n          }\n        )\n      }\n    );\n  }\n);\nfunction Q(e) {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => {\n      var i;\n      return ((i = e.getSelection()) == null ? void 0 : i.blocks) || [e.getTextCursorPosition().block];\n    }\n  );\n  return q(\n    e,\n    () => {\n      var i;\n      return o(\n        ((i = e.getSelection()) == null ? void 0 : i.blocks) || [e.getTextCursorPosition().block]\n      );\n    }\n  ), n;\n}\nconst ln = () => typeof navigator < \"u\" && (/Mac/.test(navigator.platform) || /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent));\nfunction F(e) {\n  return ln() ? e.replace(\"Mod\", \"⌘\") : e.replace(\"Mod\", \"Ctrl\");\n}\nconst cn = {\n  bold: \"Mod+B\",\n  italic: \"Mod+I\",\n  underline: \"Mod+U\",\n  strike: \"Mod+Shift+X\",\n  code: \"\"\n}, sn = {\n  bold: Lr,\n  italic: Nr,\n  underline: Yr,\n  strike: Wr,\n  code: Dr\n}, he = (e) => {\n  const n = Q(e.editor), [o, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    e.toggledStyle in e.editor.getActiveStyles()\n  );\n  q(e.editor, () => {\n    i(e.toggledStyle in e.editor.getActiveStyles());\n  });\n  const s = (d) => {\n    e.editor.focus(), e.editor.toggleStyles({ [d]: !0 });\n  };\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => !!n.find((d) => d.content !== void 0), [n]) ? /* @__PURE__ */ r.jsx(\n    P,\n    {\n      onClick: () => s(e.toggledStyle),\n      isSelected: o,\n      mainTooltip: e.toggledStyle.slice(0, 1).toUpperCase() + e.toggledStyle.slice(1),\n      secondaryTooltip: F(cn[e.toggledStyle]),\n      icon: sn[e.toggledStyle]\n    }\n  ) : null;\n}, dn = {\n  left: Fr,\n  center: Pr,\n  right: Ar,\n  justify: Or\n}, Se = (e) => {\n  const n = Q(e.editor), o = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const c = n[0];\n    if (\"textAlignment\" in c.props)\n      return c.props.textAlignment;\n  }, [n]), i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (c) => {\n      e.editor.focus();\n      for (const d of n)\n        e.editor.updateBlock(d, {\n          props: { textAlignment: c }\n        });\n    },\n    [e.editor, n]\n  );\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => !!n.find((c) => \"textAlignment\" in c.props), [n]) ? /* @__PURE__ */ r.jsx(\n    P,\n    {\n      onClick: () => i(e.textAlignment),\n      isSelected: o === e.textAlignment,\n      mainTooltip: e.textAlignment === \"justify\" ? \"Justify Text\" : \"Align Text \" + e.textAlignment.slice(0, 1).toUpperCase() + e.textAlignment.slice(1),\n      icon: dn[e.textAlignment]\n    }\n  ) : null;\n}, Ee = (e) => {\n  const { classes: n } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"ColorIcon\"\n  }), o = e.textColor || \"default\", i = e.backgroundColor || \"default\", s = e.size || 16;\n  return /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Box,\n    {\n      className: n.root,\n      sx: (c) => ({\n        pointerEvents: \"none\",\n        backgroundColor: c.other.backgroundColors[i],\n        color: c.other.textColors[o],\n        fontSize: (s * 0.75).toString() + \"px\",\n        height: s.toString() + \"px\",\n        lineHeight: s.toString() + \"px\",\n        textAlign: \"center\",\n        width: s.toString() + \"px\"\n      }),\n      children: \"A\"\n    }\n  );\n}, wt = (e) => {\n  const n = () => e.text ? /* @__PURE__ */ r.jsxs(r.Fragment, { children: [\n    /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Label, { children: \"Text\" }),\n    [\n      \"default\",\n      \"gray\",\n      \"brown\",\n      \"red\",\n      \"orange\",\n      \"yellow\",\n      \"green\",\n      \"blue\",\n      \"purple\",\n      \"pink\"\n    ].map((i) => /* @__PURE__ */ r.jsx(\n      _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Item,\n      {\n        onClick: () => {\n          e.onClick && e.onClick(), e.text.setColor(i);\n        },\n        component: \"div\",\n        \"data-test\": \"text-color-\" + i,\n        icon: /* @__PURE__ */ r.jsx(Ee, { textColor: i, size: e.iconSize }),\n        rightSection: e.text.color === i ? /* @__PURE__ */ r.jsx(Re, { size: 16, style: { paddingLeft: \"8px\" } }) : /* @__PURE__ */ r.jsx(\"div\", { style: { width: \"24px\", padding: \"0\" } }),\n        children: i.charAt(0).toUpperCase() + i.slice(1)\n      },\n      \"text-color-\" + i\n    ))\n  ] }) : null, o = () => e.background ? /* @__PURE__ */ r.jsxs(r.Fragment, { children: [\n    /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Label, { children: \"Background\" }),\n    [\n      \"default\",\n      \"gray\",\n      \"brown\",\n      \"red\",\n      \"orange\",\n      \"yellow\",\n      \"green\",\n      \"blue\",\n      \"purple\",\n      \"pink\"\n    ].map((i) => /* @__PURE__ */ r.jsx(\n      _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Item,\n      {\n        onClick: () => {\n          e.onClick && e.onClick(), e.background.setColor(i);\n        },\n        component: \"div\",\n        \"data-test\": \"background-color-\" + i,\n        icon: /* @__PURE__ */ r.jsx(Ee, { backgroundColor: i, size: e.iconSize }),\n        rightSection: e.background.color === i ? /* @__PURE__ */ r.jsx(Re, { size: 16, style: { paddingLeft: \"8px\" } }) : /* @__PURE__ */ r.jsx(\"div\", { style: { width: \"24px\", padding: \"0\" } }),\n        children: i.charAt(0).toUpperCase() + i.slice(1)\n      },\n      \"background-color-\" + i\n    ))\n  ] }) : null;\n  return /* @__PURE__ */ r.jsxs(r.Fragment, { children: [\n    /* @__PURE__ */ r.jsx(n, {}),\n    /* @__PURE__ */ r.jsx(o, {})\n  ] });\n}, un = (e) => {\n  const n = Q(e.editor), [o, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    e.editor.getActiveStyles().textColor || \"default\"\n  ), [s, c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    e.editor.getActiveStyles().backgroundColor || \"default\"\n  );\n  q(e.editor, () => {\n    i(e.editor.getActiveStyles().textColor || \"default\"), c(\n      e.editor.getActiveStyles().backgroundColor || \"default\"\n    );\n  });\n  const { ref: d, updateMaxHeight: g } = xe(), a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (p) => {\n      e.editor.focus(), p === \"default\" ? e.editor.removeStyles({ textColor: p }) : e.editor.addStyles({ textColor: p });\n    },\n    [e.editor]\n  ), y = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (p) => {\n      e.editor.focus(), p === \"default\" ? e.editor.removeStyles({ backgroundColor: p }) : e.editor.addStyles({ backgroundColor: p });\n    },\n    [e.editor]\n  );\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    for (const p of n)\n      if (p.content !== void 0)\n        return !0;\n    return !1;\n  }, [n]) ? /* @__PURE__ */ r.jsxs(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu, { onOpen: g, children: [\n    /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Target, { children: /* @__PURE__ */ r.jsx(\n      P,\n      {\n        mainTooltip: \"Colors\",\n        icon: () => /* @__PURE__ */ r.jsx(\n          Ee,\n          {\n            textColor: o,\n            backgroundColor: s,\n            size: 20\n          }\n        )\n      }\n    ) }),\n    /* @__PURE__ */ r.jsx(\"div\", { ref: d, children: /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Dropdown, { children: /* @__PURE__ */ r.jsx(\n      wt,\n      {\n        text: {\n          color: o,\n          setColor: a\n        },\n        background: {\n          color: s,\n          setColor: y\n        }\n      }\n    ) }) })\n  ] }) : null;\n}, gn = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  q(e.editor, () => {\n    o(e.editor.canNestBlock());\n  });\n  const i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    e.editor.focus(), e.editor.nestBlock();\n  }, [e.editor]);\n  return /* @__PURE__ */ r.jsx(\n    P,\n    {\n      onClick: i,\n      isDisabled: !n,\n      mainTooltip: \"Nest Block\",\n      secondaryTooltip: F(\"Tab\"),\n      icon: Ur\n    }\n  );\n}, fn = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  q(e.editor, () => {\n    o(e.editor.canUnnestBlock());\n  });\n  const i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    e.editor.focus(), e.editor.unnestBlock();\n  }, [e]);\n  return /* @__PURE__ */ r.jsx(\n    P,\n    {\n      onClick: i,\n      isDisabled: !n,\n      mainTooltip: \"Unnest Block\",\n      secondaryTooltip: F(\"Shift+Tab\"),\n      icon: Vr\n    }\n  );\n}, St = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    o(!1);\n  }, []), s = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    o(!0);\n  }, []);\n  return /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      onShow: (c) => {\n        var d;\n        s(), (d = e.onShow) == null || d.call(e, c);\n      },\n      onHidden: (c) => {\n        var d;\n        i(), (d = e.onShow) == null || d.call(e, c);\n      },\n      content: n ? e.children[1] : null,\n      trigger: e.visible === void 0 ? \"click\" : void 0,\n      interactive: !0,\n      maxWidth: 500,\n      zIndex: 9e3,\n      ...e,\n      children: e.children[0]\n    }\n  );\n}, Mt = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({ className: e, ...n }, o) => {\n  const { classes: i } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"ToolbarInputDropdown\"\n  });\n  return /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Stack,\n    {\n      ...n,\n      className: (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.mergeCSSClasses)(i.root, e || \"\"),\n      ref: o,\n      children: n.children\n    }\n  );\n}), hn = {\n  text: _mantine_core__WEBPACK_IMPORTED_MODULE_4__.TextInput,\n  file: _mantine_core__WEBPACK_IMPORTED_MODULE_4__.FileInput\n}, ze = (e) => {\n  const n = e.icon, o = hn[e.type];\n  return /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Group, { children: /* @__PURE__ */ r.jsx(o, { size: \"xs\", icon: /* @__PURE__ */ r.jsx(n, {}), ...e.inputProps }) });\n}, Rt = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({ url: e, text: n, update: o, ...i }, s) => {\n  const [c, d] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(e), [g, a] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(n);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    d(e), a(n);\n  }, [n, e]);\n  const y = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (T) => {\n      T.key === \"Enter\" && (T.preventDefault(), o(c, g));\n    },\n    [o, c, g]\n  ), x = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (T) => d(T.currentTarget.value),\n    []\n  ), p = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (T) => a(T.currentTarget.value),\n    []\n  ), S = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    () => o(c, g),\n    [o, c, g]\n  );\n  return /* @__PURE__ */ r.jsxs(Mt, { ...i, ref: s, children: [\n    /* @__PURE__ */ r.jsx(\n      ze,\n      {\n        type: \"text\",\n        icon: Ct,\n        inputProps: {\n          autoFocus: !0,\n          placeholder: \"Edit URL\",\n          value: c,\n          onKeyDown: y,\n          onChange: x,\n          onSubmit: S\n        }\n      }\n    ),\n    /* @__PURE__ */ r.jsx(\n      ze,\n      {\n        type: \"text\",\n        icon: ie,\n        inputProps: {\n          placeholder: \"Edit Title\",\n          value: g,\n          onKeyDown: y,\n          onChange: p,\n          onSubmit: S\n        }\n      }\n    )\n  ] });\n}), vn = (e) => {\n  const n = Q(e.editor), [o, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    e.editor.getSelectedLinkUrl() || \"\"\n  ), [s, c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(e.editor.getSelectedText());\n  q(e.editor, () => {\n    c(e.editor.getSelectedText() || \"\"), i(e.editor.getSelectedLinkUrl() || \"\");\n  });\n  const d = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (a, y) => {\n      e.editor.createLink(a, y), e.editor.focus();\n    },\n    [e.editor]\n  );\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    for (const a of n)\n      if (a.content === void 0)\n        return !1;\n    return !0;\n  }, [n]) ? /* @__PURE__ */ r.jsxs(St, { children: [\n    /* @__PURE__ */ r.jsx(\n      P,\n      {\n        mainTooltip: \"Create Link\",\n        secondaryTooltip: F(\"Mod+K\"),\n        icon: Ct\n      }\n    ),\n    /* @__PURE__ */ r.jsx(Rt, { url: o, text: s, update: d })\n  ] }) : null;\n}, Et = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    e.editor.uploadFile !== void 0 ? \"upload\" : \"embed\"\n  ), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), [c, d] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    c && setTimeout(() => {\n      d(!1);\n    }, 3e3);\n  }, [c]);\n  const g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    async (T) => {\n      if (s(!0), e.editor.uploadFile !== void 0)\n        try {\n          const D = await e.editor.uploadFile(T);\n          e.editor.updateBlock(e.block, {\n            type: \"image\",\n            props: {\n              url: D\n            }\n          });\n        } catch {\n          d(!0);\n        } finally {\n          s(!1);\n        }\n    },\n    [e.block, e.editor]\n  ), [a, y] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\"), x = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (T) => {\n      y(T.currentTarget.value);\n    },\n    []\n  ), p = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (T) => {\n      T.key === \"Enter\" && (T.preventDefault(), e.editor.updateBlock(e.block, {\n        type: \"image\",\n        props: {\n          url: a\n        }\n      }));\n    },\n    [a, e.block, e.editor]\n  ), S = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    e.editor.updateBlock(e.block, {\n      type: \"image\",\n      props: {\n        url: a\n      }\n    });\n  }, [a, e.block, e.editor]);\n  return /* @__PURE__ */ r.jsx(\n    _e,\n    {\n      style: {\n        width: \"500px\"\n      },\n      children: /* @__PURE__ */ r.jsxs(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Tabs, { value: n, onTabChange: o, children: [\n        i && /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.LoadingOverlay, { visible: i }),\n        /* @__PURE__ */ r.jsxs(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Tabs.List, { children: [\n          e.editor.uploadFile !== void 0 && /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Tabs.Tab, { value: \"upload\", \"data-test\": \"upload-tab\", children: \"Upload\" }),\n          /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Tabs.Tab, { value: \"embed\", \"data-test\": \"embed-tab\", children: \"Embed\" })\n        ] }),\n        e.editor.uploadFile !== void 0 && /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Tabs.Panel, { value: \"upload\", children: /* @__PURE__ */ r.jsxs(\n          \"div\",\n          {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"stretch\",\n              gap: \"8px\"\n            },\n            children: [\n              /* @__PURE__ */ r.jsx(\n                _mantine_core__WEBPACK_IMPORTED_MODULE_4__.FileInput,\n                {\n                  placeholder: \"Upload Image\",\n                  size: \"xs\",\n                  value: null,\n                  onChange: g,\n                  \"data-test\": \"upload-input\"\n                }\n              ),\n              c && /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Text, { color: \"red\", size: 12, style: { textAlign: \"center\" }, children: \"Error: Upload failed\" })\n            ]\n          }\n        ) }),\n        /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Tabs.Panel, { value: \"embed\", children: /* @__PURE__ */ r.jsxs(\n          \"div\",\n          {\n            style: {\n              width: \"100%\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\",\n              gap: \"8px\"\n            },\n            children: [\n              /* @__PURE__ */ r.jsx(\n                _mantine_core__WEBPACK_IMPORTED_MODULE_4__.TextInput,\n                {\n                  size: \"xs\",\n                  placeholder: \"Enter URL\",\n                  value: a,\n                  onChange: x,\n                  onKeyDown: p,\n                  style: { width: \"100%\" },\n                  \"data-test\": \"embed-input\"\n                }\n              ),\n              /* @__PURE__ */ r.jsx(\n                _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Button,\n                {\n                  onClick: S,\n                  size: \"xs\",\n                  \"data-test\": \"embed-input-button\",\n                  children: \"Embed Image\"\n                }\n              )\n            ]\n          }\n        ) })\n      ] })\n    }\n  );\n}, bn = (e) => {\n  const n = Q(e.editor), [o, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    i(!1);\n  }, [n]), // Checks if only one block is selected.\n  n.length === 1 && // Checks if the selected block is an image.\n  n[0].type === \"image\" ? /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      visible: o,\n      interactive: !0,\n      content: /* @__PURE__ */ r.jsx(\n        Et,\n        {\n          block: n[0],\n          editor: e.editor\n        }\n      ),\n      children: /* @__PURE__ */ r.jsx(\n        P,\n        {\n          onClick: () => i(!o),\n          isSelected: o,\n          mainTooltip: \"Replace Image\",\n          icon: Kr\n        }\n      )\n    }\n  ) : null;\n}, xn = (e) => {\n  const n = Q(e.editor), o = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => (\n      // Checks if only one block is selected.\n      n.length === 1 && // Checks if the selected block is an image.\n      n[0].type === \"image\" && // Checks if the block has a `caption` prop which can take any string\n      // value.\n      \"caption\" in e.editor.schema.image.propSchema && typeof e.editor.schema.image.propSchema.caption.default == \"string\" && e.editor.schema.image.propSchema.caption.values === void 0 && // Checks if the block has a `src` prop which can take any string value.\n      \"src\" in e.editor.schema.image.propSchema && typeof e.editor.schema.image.propSchema.src.default == \"string\" && e.editor.schema.image.propSchema.src.values === void 0 && // Checks if the `src` prop is not set to an empty string.\n      n[0].props.src !== \"\"\n    ),\n    [e.editor.schema, n]\n  ), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    o ? n[0].props.caption : \"\"\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(\n    () => s(\n      o ? n[0].props.caption : \"\"\n    ),\n    [n, o]\n  );\n  const c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (g) => {\n      g.key === \"Enter\" && (g.preventDefault(), e.editor.updateBlock(n[0], {\n        type: \"image\",\n        props: {\n          caption: i\n        }\n      }));\n    },\n    [i, e.editor, n]\n  ), d = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (g) => s(g.currentTarget.value),\n    []\n  );\n  return o ? /* @__PURE__ */ r.jsxs(St, { children: [\n    /* @__PURE__ */ r.jsx(\n      P,\n      {\n        mainTooltip: \"Edit Caption\",\n        icon: ie,\n        isSelected: n[0].props.caption !== \"\"\n      }\n    ),\n    /* @__PURE__ */ r.jsx(Mt, { children: /* @__PURE__ */ r.jsx(\n      ze,\n      {\n        type: \"text\",\n        icon: ie,\n        inputProps: {\n          autoFocus: !0,\n          placeholder: \"Edit Caption\",\n          value: i,\n          onKeyDown: c,\n          onChange: d\n        }\n      }\n    ) })\n  ] }) : null;\n}, mn = (e) => /* @__PURE__ */ r.jsxs(_e, { children: [\n  /* @__PURE__ */ r.jsx(on, { ...e, items: e.blockTypeDropdownItems }),\n  /* @__PURE__ */ r.jsx(xn, { editor: e.editor }),\n  /* @__PURE__ */ r.jsx(bn, { editor: e.editor }),\n  /* @__PURE__ */ r.jsx(he, { editor: e.editor, toggledStyle: \"bold\" }),\n  /* @__PURE__ */ r.jsx(he, { editor: e.editor, toggledStyle: \"italic\" }),\n  /* @__PURE__ */ r.jsx(he, { editor: e.editor, toggledStyle: \"underline\" }),\n  /* @__PURE__ */ r.jsx(he, { editor: e.editor, toggledStyle: \"strike\" }),\n  /* @__PURE__ */ r.jsx(Se, { editor: e.editor, textAlignment: \"left\" }),\n  /* @__PURE__ */ r.jsx(Se, { editor: e.editor, textAlignment: \"center\" }),\n  /* @__PURE__ */ r.jsx(Se, { editor: e.editor, textAlignment: \"right\" }),\n  /* @__PURE__ */ r.jsx(un, { editor: e.editor }),\n  /* @__PURE__ */ r.jsx(gn, { editor: e.editor }),\n  /* @__PURE__ */ r.jsx(fn, { editor: e.editor }),\n  /* @__PURE__ */ r.jsx(vn, { editor: e.editor })\n] }), st = (e) => {\n  switch (e) {\n    case \"left\":\n      return \"top-start\";\n    case \"center\":\n      return \"top\";\n    case \"right\":\n      return \"top-end\";\n    default:\n      return \"top-start\";\n  }\n}, kn = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => {\n      const a = e.editor.getTextCursorPosition().block;\n      return \"textAlignment\" in a.props ? st(\n        a.props.textAlignment\n      ) : \"top-start\";\n    }\n  ), c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => (_tippyjs_react__WEBPACK_IMPORTED_MODULE_5__.tippy.setDefaultProps({ maxWidth: \"\" }), e.editor.formattingToolbar.onUpdate((a) => {\n    o(a.show), c.current = a.referencePos;\n  })), [e.editor]), q(e.editor, () => {\n    const a = e.editor.getTextCursorPosition().block;\n    \"textAlignment\" in a.props ? s(\n      st(\n        a.props.textAlignment\n      )\n    ) : s(\"top-start\");\n  });\n  const d = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => {\n      if (c)\n        return () => c.current;\n    },\n    [c.current]\n    // eslint-disable-line\n  ), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const a = e.formattingToolbar || mn;\n    return /* @__PURE__ */ r.jsx(a, { editor: e.editor });\n  }, [e.editor, e.formattingToolbar]);\n  return /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      appendTo: e.editor.domElement.parentElement,\n      content: g,\n      getReferenceClientRect: d,\n      interactive: !0,\n      visible: n,\n      animation: \"fade\",\n      placement: i,\n      sticky: !0,\n      plugins: yn,\n      zIndex: 3e3\n    }\n  );\n}, yn = [tippy_js__WEBPACK_IMPORTED_MODULE_6__.sticky], pn = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  return n ? /* @__PURE__ */ r.jsx(\n    Rt,\n    {\n      url: e.url,\n      text: e.text,\n      update: e.editHyperlink,\n      onBlur: (s) => setTimeout(() => {\n        var c;\n        (c = i.current) != null && c.contains(s.relatedTarget) || o(!1);\n      }, 500),\n      ref: i\n    }\n  ) : /* @__PURE__ */ r.jsxs(\n    _e,\n    {\n      onMouseEnter: e.stopHideTimer,\n      onMouseLeave: e.startHideTimer,\n      children: [\n        /* @__PURE__ */ r.jsx(\n          P,\n          {\n            mainTooltip: \"Edit\",\n            isSelected: !1,\n            onClick: () => o(!0),\n            children: \"Edit Link\"\n          }\n        ),\n        /* @__PURE__ */ r.jsx(\n          P,\n          {\n            mainTooltip: \"Open in new tab\",\n            isSelected: !1,\n            onClick: () => {\n              window.open(e.url, \"_blank\");\n            },\n            icon: Gr\n          }\n        ),\n        /* @__PURE__ */ r.jsx(\n          P,\n          {\n            mainTooltip: \"Remove link\",\n            isSelected: !1,\n            onClick: e.deleteHyperlink,\n            icon: $r\n          }\n        )\n      ]\n    }\n  );\n}, Cn = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(), [c, d] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => e.editor.hyperlinkToolbar.on(\n    \"update\",\n    (x) => {\n      o(x.show), s(x.url), d(x.text), g.current = x.referencePos;\n    }\n  ), [e.editor]);\n  const a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => {\n      if (g.current)\n        return () => g.current;\n    },\n    [g.current]\n    // eslint-disable-line\n  ), y = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!i || !c)\n      return null;\n    const x = e.hyperlinkToolbar || pn;\n    return /* @__PURE__ */ r.jsx(\n      x,\n      {\n        url: i,\n        text: c,\n        editHyperlink: e.editor.hyperlinkToolbar.editHyperlink,\n        deleteHyperlink: e.editor.hyperlinkToolbar.deleteHyperlink,\n        startHideTimer: e.editor.hyperlinkToolbar.startHideTimer,\n        stopHideTimer: e.editor.hyperlinkToolbar.stopHideTimer\n      }\n    );\n  }, [e.hyperlinkToolbar, e.editor, c, i]);\n  return /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      appendTo: e.editor.domElement.parentElement,\n      content: y,\n      getReferenceClientRect: a,\n      interactive: !0,\n      visible: n,\n      animation: \"fade\",\n      placement: \"top-start\",\n      zIndex: 4e3\n    }\n  );\n}, jn = (e) => {\n  const { classes: n } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"SideMenu\"\n  });\n  return /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Group, { className: n.root, spacing: 0, children: e.children });\n};\nfunction Tn(e) {\n  return j({ tag: \"svg\", attr: { t: \"1551322312294\", style: \"\", viewBox: \"0 0 1024 1024\", version: \"1.1\" }, child: [{ tag: \"defs\", attr: {}, child: [] }, { tag: \"path\", attr: { d: \"M474 152m8 0l60 0q8 0 8 8l0 704q0 8-8 8l-60 0q-8 0-8-8l0-704q0-8 8-8Z\" } }, { tag: \"path\", attr: { d: \"M168 474m8 0l672 0q8 0 8 8l0 60q0 8-8 8l-672 0q-8 0-8-8l0-60q0-8 8-8Z\" } }] })(e);\n}\nconst zt = (e) => /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.ActionIcon, { size: 24, children: e.children }), wn = (e) => /* @__PURE__ */ r.jsx(zt, { children: /* @__PURE__ */ r.jsx(\n  Tn,\n  {\n    size: 24,\n    onClick: e.addBlock,\n    \"data-test\": \"dragHandleAdd\"\n  }\n) });\nfunction Sn(e) {\n  return j({ tag: \"svg\", attr: { viewBox: \"0 0 24 24\" }, child: [{ tag: \"path\", attr: { fill: \"none\", d: \"M0 0h24v24H0V0z\" } }, { tag: \"path\", attr: { d: \"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" } }] })(e);\n}\nconst Mn = (e) => {\n  const { classes: n } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"DragHandleMenu\"\n  });\n  return /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Dropdown, { className: n.root, style: { overflow: \"visible\" }, children: e.children });\n}, Ht = (e) => {\n  const { children: n, ...o } = e;\n  return /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Item, { ...o, children: n });\n}, Rn = (e) => /* @__PURE__ */ r.jsx(\n  Ht,\n  {\n    onClick: () => e.editor.removeBlocks([e.block]),\n    children: e.children\n  }\n), En = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), { ref: i, updateMaxHeight: s } = xe(), c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(), d = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    c.current && clearTimeout(c.current), c.current = setTimeout(() => {\n      o(!1);\n    }, 250);\n  }, []), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    c.current && clearTimeout(c.current), n || s(), o(!0);\n  }, [n, s]);\n  return !(\"textColor\" in e.block.props) && !(\"backgroundColor\" in e.block.props) ? null : /* @__PURE__ */ r.jsx(\n    Ht,\n    {\n      onMouseLeave: d,\n      onMouseOver: g,\n      children: /* @__PURE__ */ r.jsxs(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu, { opened: n, position: \"right\", children: [\n        /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Target, { children: /* @__PURE__ */ r.jsxs(\"div\", { style: { display: \"flex\", alignItems: \"center\" }, children: [\n          /* @__PURE__ */ r.jsx(\"div\", { style: { flex: 1 }, children: e.children }),\n          /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Box, { style: { display: \"flex\", alignItems: \"center\" }, children: /* @__PURE__ */ r.jsx(Zr, { size: 15 }) })\n        ] }) }),\n        /* @__PURE__ */ r.jsx(\"div\", { ref: i, children: /* @__PURE__ */ r.jsx(\n          _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Dropdown,\n          {\n            onMouseLeave: d,\n            onMouseOver: g,\n            style: { marginLeft: \"5px\" },\n            children: /* @__PURE__ */ r.jsx(\n              wt,\n              {\n                iconSize: 18,\n                text: \"textColor\" in e.block.props && typeof e.block.props.textColor == \"string\" ? {\n                  color: e.block.props.textColor,\n                  setColor: (a) => e.editor.updateBlock(e.block, {\n                    props: { textColor: a }\n                  })\n                } : void 0,\n                background: \"backgroundColor\" in e.block.props && typeof e.block.props.backgroundColor == \"string\" ? {\n                  color: e.block.props.backgroundColor,\n                  setColor: (a) => e.editor.updateBlock(e.block, {\n                    props: { backgroundColor: a }\n                  })\n                } : void 0\n              }\n            )\n          }\n        ) })\n      ] })\n    }\n  );\n}, zn = (e) => /* @__PURE__ */ r.jsxs(Mn, { children: [\n  /* @__PURE__ */ r.jsx(Rn, { ...e, children: \"Delete\" }),\n  /* @__PURE__ */ r.jsx(En, { ...e, children: \"Colors\" })\n] }), Hn = (e) => {\n  const n = e.dragHandleMenu || zn;\n  return /* @__PURE__ */ r.jsxs(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu,\n    {\n      trigger: \"click\",\n      onOpen: e.freezeMenu,\n      onClose: e.unfreezeMenu,\n      width: 100,\n      position: \"left\",\n      children: [\n        /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Target, { children: /* @__PURE__ */ r.jsx(\n          \"div\",\n          {\n            draggable: \"true\",\n            onDragStart: e.blockDragStart,\n            onDragEnd: e.blockDragEnd,\n            children: /* @__PURE__ */ r.jsx(zt, { children: /* @__PURE__ */ r.jsx(Sn, { size: 24, \"data-test\": \"dragHandle\" }) })\n          }\n        ) }),\n        /* @__PURE__ */ r.jsx(n, { editor: e.editor, block: e.block })\n      ]\n    }\n  );\n}, In = (e) => /* @__PURE__ */ r.jsxs(jn, { children: [\n  /* @__PURE__ */ r.jsx(wn, { ...e }),\n  /* @__PURE__ */ r.jsx(Hn, { ...e })\n] }), Bn = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(), c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => e.editor.sideMenu.onUpdate((a) => {\n    o(a.show), s(a.block), c.current = a.referencePos;\n  }), [e.editor]);\n  const d = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => {\n      if (c.current)\n        return () => c.current;\n    },\n    [c.current]\n    // eslint-disable-line\n  ), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!i)\n      return null;\n    const a = e.sideMenu || In;\n    return /* @__PURE__ */ r.jsx(\n      a,\n      {\n        block: i,\n        editor: e.editor,\n        blockDragStart: e.editor.sideMenu.blockDragStart,\n        blockDragEnd: e.editor.sideMenu.blockDragEnd,\n        addBlock: e.editor.sideMenu.addBlock,\n        freezeMenu: e.editor.sideMenu.freezeMenu,\n        unfreezeMenu: e.editor.sideMenu.unfreezeMenu\n      }\n    );\n  }, [i, e.editor, e.sideMenu]);\n  return /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      appendTo: e.editor.domElement.parentElement,\n      content: g,\n      getReferenceClientRect: d,\n      interactive: !0,\n      visible: n,\n      animation: \"fade\",\n      offset: _n,\n      placement: \"left\",\n      popperOptions: Dn,\n      zIndex: 1e3\n    }\n  );\n}, _n = [0, 0], Dn = {\n  modifiers: [\n    {\n      name: \"flip\",\n      options: {\n        fallbackPlacements: []\n      }\n    },\n    {\n      name: \"preventOverflow\",\n      options: {\n        mainAxis: !1,\n        altAxis: !1\n      }\n    }\n  ]\n}, Pn = 5;\nfunction On(e) {\n  const n = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null), { classes: o } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"SuggestionListItem\"\n  });\n  function i() {\n    var g;\n    const c = e.isSelected, d = (g = n.current) == null ? void 0 : g.matches(\":hover\");\n    return c || d;\n  }\n  function s() {\n    var c, d;\n    i() ? (c = n.current) == null || c.setAttribute(\"data-hovered\", \"true\") : (d = n.current) == null || d.removeAttribute(\"data-hovered\");\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    s(), i() && n.current && n.current.getBoundingClientRect().left > Pn && n.current.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"nearest\"\n    });\n  }), /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Item,\n    {\n      className: o.root,\n      icon: e.icon,\n      onClick: e.set,\n      closeMenuOnClick: !1,\n      onMouseLeave: () => {\n        setTimeout(() => {\n          s();\n        }, 1);\n      },\n      ref: n,\n      rightSection: e.shortcut && /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Badge, { size: \"xs\", children: e.shortcut }),\n      children: /* @__PURE__ */ r.jsxs(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Stack, { children: [\n        /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Text, { size: 14, weight: 500, children: e.name }),\n        /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Text, { size: 10, children: e.hint })\n      ] })\n    }\n  );\n}\nfunction Fn(e) {\n  const { classes: n } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"SlashMenu\"\n  }), o = [];\n  let i = 0;\n  const s = lodash__WEBPACK_IMPORTED_MODULE_3__.groupBy(e.filteredItems, (c) => c.group);\n  return lodash__WEBPACK_IMPORTED_MODULE_3__.forEach(s, (c) => {\n    o.push(\n      /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Label, { children: c[0].group }, c[0].group)\n    );\n    for (const d of c)\n      o.push(\n        /* @__PURE__ */ r.jsx(\n          On,\n          {\n            name: d.name,\n            icon: d.icon,\n            hint: d.hint,\n            shortcut: d.shortcut,\n            isSelected: e.keyboardHoveredItemIndex === i,\n            set: () => e.itemCallback(d)\n          },\n          d.name\n        )\n      ), i++;\n  }), /* @__PURE__ */ r.jsx(\n    _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu,\n    {\n      defaultOpened: !0,\n      trigger: \"hover\",\n      closeDelay: 1e7,\n      children: /* @__PURE__ */ r.jsx(\n        _mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Dropdown,\n        {\n          onMouseDown: (c) => c.preventDefault(),\n          className: n.root,\n          children: o.length > 0 ? o : /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.Menu.Item, { children: \"No match found\" })\n        }\n      )\n    }\n  );\n}\nconst An = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(), [c, d] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => e.editor.slashMenu.onUpdate((S) => {\n    o(S.show), s(S.filteredItems), d(S.keyboardHoveredItemIndex), g.current = S.referencePos;\n  }), [e.editor]);\n  const a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => {\n      if (g.current)\n        return () => g.current;\n    },\n    [g.current]\n    // eslint-disable-line\n  ), { ref: y, updateMaxHeight: x } = xe(), p = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!i || c === void 0)\n      return null;\n    const S = e.slashMenu || Fn;\n    return /* @__PURE__ */ r.jsx(\"div\", { ref: y, children: /* @__PURE__ */ r.jsx(\n      S,\n      {\n        filteredItems: i,\n        itemCallback: (T) => e.editor.slashMenu.itemCallback(T),\n        keyboardHoveredItemIndex: c\n      }\n    ) });\n  }, [\n    i,\n    c,\n    e.editor.slashMenu,\n    e.slashMenu,\n    y\n  ]);\n  return /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      onShow: x,\n      appendTo: e.editor.domElement.parentElement,\n      content: p,\n      getReferenceClientRect: a,\n      interactive: !0,\n      visible: n,\n      animation: \"fade\",\n      placement: \"bottom-start\",\n      zIndex: 2e3\n    }\n  );\n}, k = [\n  \"#FFFFFF\",\n  \"#EFEFEF\",\n  \"#CFCFCF\",\n  \"#AFAFAF\",\n  \"#7F7F7F\",\n  \"#3F3F3F\",\n  \"#1F1F1F\",\n  \"#161616\",\n  \"#0F0F0F\",\n  \"#000000\"\n], ve = {\n  colors: {\n    editor: {\n      text: k[5],\n      background: k[0]\n    },\n    menu: {\n      text: k[5],\n      background: k[0]\n    },\n    tooltip: {\n      text: k[5],\n      background: k[1]\n    },\n    hovered: {\n      text: k[5],\n      background: k[1]\n    },\n    selected: {\n      text: k[0],\n      background: k[5]\n    },\n    disabled: {\n      text: k[3],\n      background: k[1]\n    },\n    shadow: k[2],\n    border: k[1],\n    sideMenu: k[2],\n    highlightColors: {\n      gray: {\n        text: \"#9b9a97\",\n        background: \"#ebeced\"\n      },\n      brown: {\n        text: \"#64473a\",\n        background: \"#e9e5e3\"\n      },\n      red: {\n        text: \"#e03e3e\",\n        background: \"#fbe4e4\"\n      },\n      orange: {\n        text: \"#d9730d\",\n        background: \"#f6e9d9\"\n      },\n      yellow: {\n        text: \"#dfab01\",\n        background: \"#fbf3db\"\n      },\n      green: {\n        text: \"#4d6461\",\n        background: \"#ddedea\"\n      },\n      blue: {\n        text: \"#0b6e99\",\n        background: \"#ddebf1\"\n      },\n      purple: {\n        text: \"#6940a5\",\n        background: \"#eae4f2\"\n      },\n      pink: {\n        text: \"#ad1a72\",\n        background: \"#f4dfeb\"\n      }\n    }\n  },\n  borderRadius: 6,\n  fontFamily: '\"Inter\", \"SF Pro Display\", -apple-system, BlinkMacSystemFont, \"Open Sans\", \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif'\n}, dt = {\n  colors: {\n    editor: {\n      text: k[2],\n      background: k[6]\n    },\n    menu: {\n      text: k[2],\n      background: k[6]\n    },\n    tooltip: {\n      text: k[2],\n      background: k[7]\n    },\n    hovered: {\n      text: k[2],\n      background: k[7]\n    },\n    selected: {\n      text: k[2],\n      background: k[8]\n    },\n    disabled: {\n      text: k[5],\n      background: k[7]\n    },\n    shadow: k[8],\n    border: k[7],\n    sideMenu: k[4],\n    highlightColors: {\n      gray: {\n        text: \"#bebdb8\",\n        background: \"#9b9a97\"\n      },\n      brown: {\n        text: \"#8e6552\",\n        background: \"#64473a\"\n      },\n      red: {\n        text: \"#ec4040\",\n        background: \"#be3434\"\n      },\n      orange: {\n        text: \"#e3790d\",\n        background: \"#b7600a\"\n      },\n      yellow: {\n        text: \"#dfab01\",\n        background: \"#b58b00\"\n      },\n      green: {\n        text: \"#6b8b87\",\n        background: \"#4d6461\"\n      },\n      blue: {\n        text: \"#0e87bc\",\n        background: \"#0b6e99\"\n      },\n      purple: {\n        text: \"#8552d7\",\n        background: \"#6940a5\"\n      },\n      pink: {\n        text: \"#da208f\",\n        background: \"#ad1a72\"\n      }\n    }\n  },\n  borderRadius: ve.borderRadius,\n  fontFamily: ve.fontFamily\n}, Ln = (e) => {\n  const [n, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1), [i, s] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(), c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => (_tippyjs_react__WEBPACK_IMPORTED_MODULE_5__.tippy.setDefaultProps({ maxWidth: \"\" }), e.editor.imageToolbar.onUpdate((a) => {\n    o(a.show), s(a.block), c.current = a.referencePos;\n  })), [e.editor]);\n  const d = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => {\n      if (c)\n        return () => c.current;\n    },\n    [c.current]\n    // eslint-disable-line\n  ), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const a = e.imageToolbar || Et;\n    return /* @__PURE__ */ r.jsx(a, { editor: e.editor, block: i });\n  }, [i, e.editor, e.imageToolbar]);\n  return /* @__PURE__ */ r.jsx(\n    _tippyjs_react__WEBPACK_IMPORTED_MODULE_5__,\n    {\n      appendTo: e.editor.domElement.parentElement,\n      content: g,\n      getReferenceClientRect: d,\n      interactive: !0,\n      visible: n,\n      animation: \"fade\",\n      placement: \"bottom\",\n      zIndex: 5e3\n    }\n  );\n};\nfunction Vn(e) {\n  var d;\n  const { classes: n } = (0,_mantine_core__WEBPACK_IMPORTED_MODULE_4__.createStyles)({ root: {} })(void 0, {\n    name: \"Editor\"\n  }), { editor: o, children: i, className: s, ...c } = e;\n  return /* @__PURE__ */ r.jsx(\n    _tiptap_react__WEBPACK_IMPORTED_MODULE_7__.EditorContent,\n    {\n      editor: (d = e.editor) == null ? void 0 : d._tiptapEditor,\n      className: (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.mergeCSSClasses)(n.root, e.className || \"\"),\n      ...c,\n      children: e.children || /* @__PURE__ */ r.jsxs(r.Fragment, { children: [\n        /* @__PURE__ */ r.jsx(kn, { editor: e.editor }),\n        /* @__PURE__ */ r.jsx(Cn, { editor: e.editor }),\n        /* @__PURE__ */ r.jsx(An, { editor: e.editor }),\n        /* @__PURE__ */ r.jsx(Bn, { editor: e.editor }),\n        /* @__PURE__ */ r.jsx(Ln, { editor: e.editor })\n      ] })\n    }\n  );\n}\nfunction eo(e) {\n  const {\n    theme: n = { light: ve, dark: dt },\n    ...o\n  } = e, i = use_prefers_color_scheme__WEBPACK_IMPORTED_MODULE_2__(), s = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => n === \"light\" ? fe(ve) : n === \"dark\" ? fe(dt) : \"light\" in n && \"dark\" in n ? fe(\n    n[i === \"dark\" ? \"dark\" : \"light\"]\n  ) : fe(n), [i, n]);\n  return /* @__PURE__ */ r.jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_4__.MantineProvider, { theme: s, children: /* @__PURE__ */ r.jsx(Vn, { ...o }) });\n}\nconst Un = {\n  Heading: {\n    group: \"Headings\",\n    icon: /* @__PURE__ */ r.jsx(kt, { size: 18 }),\n    hint: \"Used for a top-level heading\",\n    shortcut: F(\"Mod-Alt-1\")\n  },\n  \"Heading 2\": {\n    group: \"Headings\",\n    icon: /* @__PURE__ */ r.jsx(yt, { size: 18 }),\n    hint: \"Used for key sections\",\n    shortcut: F(\"Mod-Alt-2\")\n  },\n  \"Heading 3\": {\n    group: \"Headings\",\n    icon: /* @__PURE__ */ r.jsx(pt, { size: 18 }),\n    hint: \"Used for subsections and group headings\",\n    shortcut: F(\"Mod-Alt-3\")\n  },\n  \"Numbered List\": {\n    group: \"Basic blocks\",\n    icon: /* @__PURE__ */ r.jsx(jt, { size: 18 }),\n    hint: \"Used to display a numbered list\",\n    shortcut: F(\"Mod-Alt-7\")\n  },\n  \"Bullet List\": {\n    group: \"Basic blocks\",\n    icon: /* @__PURE__ */ r.jsx(Tt, { size: 18 }),\n    hint: \"Used to display an unordered list\",\n    shortcut: F(\"Mod-Alt-9\")\n  },\n  Paragraph: {\n    group: \"Basic blocks\",\n    icon: /* @__PURE__ */ r.jsx(ie, { size: 18 }),\n    hint: \"Used for the body of your document\",\n    shortcut: F(\"Mod-Alt-0\")\n  },\n  Image: {\n    group: \"Media\",\n    icon: /* @__PURE__ */ r.jsx(qr, {}),\n    hint: \"Insert an image\"\n  }\n};\nfunction Nn(e = _blocknote_core__WEBPACK_IMPORTED_MODULE_1__.defaultBlockSchema) {\n  return (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.getDefaultSlashMenuItems)(e).map((o) => ({\n    ...o,\n    ...Un[o.name]\n  }));\n}\nconst $n = (e) => new _blocknote_core__WEBPACK_IMPORTED_MODULE_1__.BlockNoteEditor({\n  slashMenuItems: Nn(\n    e.blockSchema || _blocknote_core__WEBPACK_IMPORTED_MODULE_1__.defaultBlockSchema\n  ),\n  ...e\n}), to = (e = {}, n = []) => {\n  const o = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (o.current && o.current._tiptapEditor.destroy(), o.current = $n(e), o.current), n);\n};\nfunction Wn() {\n  const [, e] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  return () => e((n) => n + 1);\n}\nconst ro = (e) => {\n  const n = Wn();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const o = () => {\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          n();\n        });\n      });\n    };\n    return e.on(\"transaction\", o), () => {\n      e.off(\"transaction\", o);\n    };\n  }, [e]);\n}, It = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}), no = (e) => {\n  const n = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(It).inlineContent || {}, o = (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.mergeCSSClasses)(\n    e.className || \"\",\n    _blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.inlineContent,\n    n.class\n  );\n  return /* @__PURE__ */ r.jsx(\n    _tiptap_react__WEBPACK_IMPORTED_MODULE_7__.NodeViewContent,\n    {\n      ...Object.fromEntries(\n        Object.entries(n).filter(\n          ([i]) => i !== \"class\"\n        )\n      ),\n      ...e,\n      className: o\n    }\n  );\n};\nfunction oo(e) {\n  return {\n    node: (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.createTipTapBlock)({\n      name: e.type,\n      content: e.containsInlineContent ? \"inline*\" : \"\",\n      selectable: !0,\n      addAttributes() {\n        return (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.propsToAttributes)(e);\n      },\n      parseHTML() {\n        return (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.parse)(e);\n      },\n      renderHTML({ HTMLAttributes: o }) {\n        return (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.render)(e, o);\n      },\n      addNodeView() {\n        return (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_7__.ReactNodeViewRenderer)((i) => {\n          var T;\n          const s = e.render, c = ((T = this.options.domAttributes) == null ? void 0 : T.blockContent) || {}, d = {};\n          for (const [D, le] of Object.entries(i.node.attrs))\n            D in e.propSchema && le !== e.propSchema[D].default && (d[(0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.camelToDataKebab)(D)] = le);\n          const g = this.options.editor, a = typeof i.getPos == \"function\" ? i.getPos() : void 0, p = g._tiptapEditor.state.doc.resolve(a).node().attrs.id, S = g.getBlock(p);\n          if (S.type !== e.type)\n            throw new Error(\"Block type does not match\");\n          return /* @__PURE__ */ r.jsx(\n            _tiptap_react__WEBPACK_IMPORTED_MODULE_7__.NodeViewWrapper,\n            {\n              ...Object.fromEntries(\n                Object.entries(c).filter(\n                  ([D]) => D !== \"class\"\n                )\n              ),\n              className: (0,_blocknote_core__WEBPACK_IMPORTED_MODULE_1__.mergeCSSClasses)(\n                _blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.blockContent,\n                c.class\n              ),\n              \"data-content-type\": e.type,\n              ...d,\n              children: /* @__PURE__ */ r.jsx(\n                It.Provider,\n                {\n                  value: this.options.domAttributes || {},\n                  children: /* @__PURE__ */ r.jsx(s, { block: S, editor: g })\n                }\n              )\n            }\n          );\n        }, {\n          className: _blocknote_core__WEBPACK_IMPORTED_MODULE_1__.blockStyles.reactNodeViewRenderer\n        });\n      }\n    }),\n    propSchema: e.propSchema\n  };\n}\n\n//# sourceMappingURL=blocknote-react.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJsb2Nrbm90ZS9yZWFjdC9kaXN0L2Jsb2Nrbm90ZS1yZWFjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStKO0FBQ2lHO0FBQ1g7QUFDdEg7QUFDckY7QUFDYjtBQUNOO0FBQ3lCO0FBQ1I7QUFDeEMsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGtDQUFDLDRMQUE0TDtBQUN2TTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLEtBQXFDO0FBQzdELFlBQVksa0NBQUM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsT0FBTztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2Isc0JBQXNCO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiLHNCQUFzQjtBQUN0QjtBQUNBLGFBQWE7QUFDYix1QkFBdUI7QUFDdkI7QUFDQSxhQUFhO0FBQ2IsdUJBQXVCO0FBQ3ZCO0FBQ0EsYUFBYTtBQUNiLGdDQUFnQztBQUNoQztBQUNBLGFBQWE7QUFDYiwwQkFBMEI7QUFDMUI7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxtQ0FBbUM7QUFDM0U7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0Y7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsY0FBYztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNCQUFzQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0VBQUU7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0VBQUU7QUFDakIsT0FBTztBQUNQO0FBQ0EsZUFBZSxzREFBRTtBQUNqQixPQUFPO0FBQ1AsbUJBQW1CLG1CQUFtQjtBQUN0QyxlQUFlLHVEQUFFO0FBQ2pCLE9BQU87QUFDUDtBQUNBLGVBQWUsb0VBQUU7QUFDakI7QUFDQSw0R0FBNEc7QUFDNUc7QUFDQSxzRUFBc0UsaUVBQUU7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBEQUFFO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGdFQUFFO0FBQzNCLGdCQUFnQix3REFBQztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RCx1REFBdUQscUJBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHFCQUFxQix3REFBQztBQUN0QixTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBOENFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5ib2FyZC8uL25vZGVfbW9kdWxlcy9AYmxvY2tub3RlL3JlYWN0L2Rpc3QvYmxvY2tub3RlLXJlYWN0LmpzPzBkMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE4sIHsgZm9yd2FyZFJlZiBhcyBhZSwgdXNlUmVmIGFzIEEsIHVzZUVmZmVjdCBhcyBCLCB1c2VTdGF0ZSBhcyBiLCB1c2VNZW1vIGFzIFIsIHVzZUNhbGxiYWNrIGFzIHosIGNyZWF0ZUNvbnRleHQgYXMgZnIsIHVzZUNvbnRleHQgYXMgaHIgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGJsb2NrU3R5bGVzIGFzIE8sIG1lcmdlQ1NTQ2xhc3NlcyBhcyBiZSwgZ2V0RGVmYXVsdFNsYXNoTWVudUl0ZW1zIGFzIHZyLCBkZWZhdWx0QmxvY2tTY2hlbWEgYXMgdXQsIEJsb2NrTm90ZUVkaXRvciBhcyBiciwgY3JlYXRlVGlwVGFwQmxvY2sgYXMgeHIsIHByb3BzVG9BdHRyaWJ1dGVzIGFzIG1yLCBwYXJzZSBhcyBrciwgcmVuZGVyIGFzIHlyLCBjYW1lbFRvRGF0YUtlYmFiIGFzIHByIH0gZnJvbSBcIkBibG9ja25vdGUvY29yZVwiO1xuaW1wb3J0IHsgY3JlYXRlU3R5bGVzIGFzICQsIEdyb3VwIGFzIEhlLCBNZW51IGFzIHcsIEJ1dHRvbiBhcyBJZSwgU3RhY2sgYXMgQmUsIFRleHQgYXMgb2UsIEFjdGlvbkljb24gYXMgZ3QsIEJveCBhcyBmdCwgVGV4dElucHV0IGFzIGh0LCBGaWxlSW5wdXQgYXMgdnQsIFRhYnMgYXMgWiwgTG9hZGluZ092ZXJsYXkgYXMgQ3IsIEJhZGdlIGFzIGpyLCBNYW50aW5lUHJvdmlkZXIgYXMgVHIgfSBmcm9tIFwiQG1hbnRpbmUvY29yZVwiO1xuaW1wb3J0IHsgRWRpdG9yQ29udGVudCBhcyB3ciwgTm9kZVZpZXdDb250ZW50IGFzIFNyLCBSZWFjdE5vZGVWaWV3UmVuZGVyZXIgYXMgTXIsIE5vZGVWaWV3V3JhcHBlciBhcyBSciB9IGZyb20gXCJAdGlwdGFwL3JlYWN0XCI7XG5pbXBvcnQgRXIgZnJvbSBcInVzZS1wcmVmZXJzLWNvbG9yLXNjaGVtZVwiO1xuaW1wb3J0ICogYXMgaXQgZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IFUgZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IFksIHsgdGlwcHkgYXMgYnQgfSBmcm9tIFwiQHRpcHB5anMvcmVhY3RcIjtcbmltcG9ydCB7IHN0aWNreSBhcyB6ciB9IGZyb20gXCJ0aXBweS5qc1wiO1xudmFyIE1lID0geyBleHBvcnRzOiB7fSB9LCByZSA9IHt9O1xuLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xudmFyIGF0O1xuZnVuY3Rpb24gSHIoKSB7XG4gIGlmIChhdClcbiAgICByZXR1cm4gcmU7XG4gIGF0ID0gMTtcbiAgdmFyIGUgPSBOLCBuID0gU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIiksIG8gPSBTeW1ib2wuZm9yKFwicmVhY3QuZnJhZ21lbnRcIiksIGkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LCBzID0gZS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRC5SZWFjdEN1cnJlbnRPd25lciwgYyA9IHsga2V5OiAhMCwgcmVmOiAhMCwgX19zZWxmOiAhMCwgX19zb3VyY2U6ICEwIH07XG4gIGZ1bmN0aW9uIGQoZywgYSwgeSkge1xuICAgIHZhciB4LCBwID0ge30sIFMgPSBudWxsLCBUID0gbnVsbDtcbiAgICB5ICE9PSB2b2lkIDAgJiYgKFMgPSBcIlwiICsgeSksIGEua2V5ICE9PSB2b2lkIDAgJiYgKFMgPSBcIlwiICsgYS5rZXkpLCBhLnJlZiAhPT0gdm9pZCAwICYmIChUID0gYS5yZWYpO1xuICAgIGZvciAoeCBpbiBhKVxuICAgICAgaS5jYWxsKGEsIHgpICYmICFjLmhhc093blByb3BlcnR5KHgpICYmIChwW3hdID0gYVt4XSk7XG4gICAgaWYgKGcgJiYgZy5kZWZhdWx0UHJvcHMpXG4gICAgICBmb3IgKHggaW4gYSA9IGcuZGVmYXVsdFByb3BzLCBhKVxuICAgICAgICBwW3hdID09PSB2b2lkIDAgJiYgKHBbeF0gPSBhW3hdKTtcbiAgICByZXR1cm4geyAkJHR5cGVvZjogbiwgdHlwZTogZywga2V5OiBTLCByZWY6IFQsIHByb3BzOiBwLCBfb3duZXI6IHMuY3VycmVudCB9O1xuICB9XG4gIHJldHVybiByZS5GcmFnbWVudCA9IG8sIHJlLmpzeCA9IGQsIHJlLmpzeHMgPSBkLCByZTtcbn1cbnZhciBuZSA9IHt9O1xuLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xudmFyIGx0O1xuZnVuY3Rpb24gSXIoKSB7XG4gIHJldHVybiBsdCB8fCAobHQgPSAxLCBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUgPSBOLCBuID0gU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIiksIG8gPSBTeW1ib2wuZm9yKFwicmVhY3QucG9ydGFsXCIpLCBpID0gU3ltYm9sLmZvcihcInJlYWN0LmZyYWdtZW50XCIpLCBzID0gU3ltYm9sLmZvcihcInJlYWN0LnN0cmljdF9tb2RlXCIpLCBjID0gU3ltYm9sLmZvcihcInJlYWN0LnByb2ZpbGVyXCIpLCBkID0gU3ltYm9sLmZvcihcInJlYWN0LnByb3ZpZGVyXCIpLCBnID0gU3ltYm9sLmZvcihcInJlYWN0LmNvbnRleHRcIiksIGEgPSBTeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIiksIHkgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VcIiksIHggPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VfbGlzdFwiKSwgcCA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpLCBTID0gU3ltYm9sLmZvcihcInJlYWN0LmxhenlcIiksIFQgPSBTeW1ib2wuZm9yKFwicmVhY3Qub2Zmc2NyZWVuXCIpLCBEID0gU3ltYm9sLml0ZXJhdG9yLCBsZSA9IFwiQEBpdGVyYXRvclwiO1xuICAgIGZ1bmN0aW9uIEJ0KHQpIHtcbiAgICAgIGlmICh0ID09PSBudWxsIHx8IHR5cGVvZiB0ICE9IFwib2JqZWN0XCIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgdmFyIGwgPSBEICYmIHRbRF0gfHwgdFtsZV07XG4gICAgICByZXR1cm4gdHlwZW9mIGwgPT0gXCJmdW5jdGlvblwiID8gbCA6IG51bGw7XG4gICAgfVxuICAgIHZhciBHID0gZS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRDtcbiAgICBmdW5jdGlvbiBIKHQpIHtcbiAgICAgIHtcbiAgICAgICAgZm9yICh2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGgsIHUgPSBuZXcgQXJyYXkobCA+IDEgPyBsIC0gMSA6IDApLCBmID0gMTsgZiA8IGw7IGYrKylcbiAgICAgICAgICB1W2YgLSAxXSA9IGFyZ3VtZW50c1tmXTtcbiAgICAgICAgX3QoXCJlcnJvclwiLCB0LCB1KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gX3QodCwgbCwgdSkge1xuICAgICAge1xuICAgICAgICB2YXIgZiA9IEcuUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZSwgbSA9IGYuZ2V0U3RhY2tBZGRlbmR1bSgpO1xuICAgICAgICBtICE9PSBcIlwiICYmIChsICs9IFwiJXNcIiwgdSA9IHUuY29uY2F0KFttXSkpO1xuICAgICAgICB2YXIgQyA9IHUubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKHYpO1xuICAgICAgICB9KTtcbiAgICAgICAgQy51bnNoaWZ0KFwiV2FybmluZzogXCIgKyBsKSwgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZVt0XSwgY29uc29sZSwgQyk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBEdCA9ICExLCBQdCA9ICExLCBPdCA9ICExLCBGdCA9ICExLCBBdCA9ICExLCBEZTtcbiAgICBEZSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tb2R1bGUucmVmZXJlbmNlXCIpO1xuICAgIGZ1bmN0aW9uIEx0KHQpIHtcbiAgICAgIHJldHVybiAhISh0eXBlb2YgdCA9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiB8fCB0ID09PSBpIHx8IHQgPT09IGMgfHwgQXQgfHwgdCA9PT0gcyB8fCB0ID09PSB5IHx8IHQgPT09IHggfHwgRnQgfHwgdCA9PT0gVCB8fCBEdCB8fCBQdCB8fCBPdCB8fCB0eXBlb2YgdCA9PSBcIm9iamVjdFwiICYmIHQgIT09IG51bGwgJiYgKHQuJCR0eXBlb2YgPT09IFMgfHwgdC4kJHR5cGVvZiA9PT0gcCB8fCB0LiQkdHlwZW9mID09PSBkIHx8IHQuJCR0eXBlb2YgPT09IGcgfHwgdC4kJHR5cGVvZiA9PT0gYSB8fCAvLyBUaGlzIG5lZWRzIHRvIGluY2x1ZGUgYWxsIHBvc3NpYmxlIG1vZHVsZSByZWZlcmVuY2Ugb2JqZWN0XG4gICAgICAvLyB0eXBlcyBzdXBwb3J0ZWQgYnkgYW55IEZsaWdodCBjb25maWd1cmF0aW9uIGFueXdoZXJlIHNpbmNlXG4gICAgICAvLyB3ZSBkb24ndCBrbm93IHdoaWNoIEZsaWdodCBidWlsZCB0aGlzIHdpbGwgZW5kIHVwIGJlaW5nIHVzZWRcbiAgICAgIC8vIHdpdGguXG4gICAgICB0LiQkdHlwZW9mID09PSBEZSB8fCB0LmdldE1vZHVsZUlkICE9PSB2b2lkIDApKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVnQodCwgbCwgdSkge1xuICAgICAgdmFyIGYgPSB0LmRpc3BsYXlOYW1lO1xuICAgICAgaWYgKGYpXG4gICAgICAgIHJldHVybiBmO1xuICAgICAgdmFyIG0gPSBsLmRpc3BsYXlOYW1lIHx8IGwubmFtZSB8fCBcIlwiO1xuICAgICAgcmV0dXJuIG0gIT09IFwiXCIgPyB1ICsgXCIoXCIgKyBtICsgXCIpXCIgOiB1O1xuICAgIH1cbiAgICBmdW5jdGlvbiBQZSh0KSB7XG4gICAgICByZXR1cm4gdC5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gTCh0KSB7XG4gICAgICBpZiAodCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgdC50YWcgPT0gXCJudW1iZXJcIiAmJiBIKFwiUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS5cIiksIHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgcmV0dXJuIHQuZGlzcGxheU5hbWUgfHwgdC5uYW1lIHx8IG51bGw7XG4gICAgICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBpOlxuICAgICAgICAgIHJldHVybiBcIkZyYWdtZW50XCI7XG4gICAgICAgIGNhc2UgbzpcbiAgICAgICAgICByZXR1cm4gXCJQb3J0YWxcIjtcbiAgICAgICAgY2FzZSBjOlxuICAgICAgICAgIHJldHVybiBcIlByb2ZpbGVyXCI7XG4gICAgICAgIGNhc2UgczpcbiAgICAgICAgICByZXR1cm4gXCJTdHJpY3RNb2RlXCI7XG4gICAgICAgIGNhc2UgeTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZVwiO1xuICAgICAgICBjYXNlIHg6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VMaXN0XCI7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHQgPT0gXCJvYmplY3RcIilcbiAgICAgICAgc3dpdGNoICh0LiQkdHlwZW9mKSB7XG4gICAgICAgICAgY2FzZSBnOlxuICAgICAgICAgICAgdmFyIGwgPSB0O1xuICAgICAgICAgICAgcmV0dXJuIFBlKGwpICsgXCIuQ29uc3VtZXJcIjtcbiAgICAgICAgICBjYXNlIGQ6XG4gICAgICAgICAgICB2YXIgdSA9IHQ7XG4gICAgICAgICAgICByZXR1cm4gUGUodS5fY29udGV4dCkgKyBcIi5Qcm92aWRlclwiO1xuICAgICAgICAgIGNhc2UgYTpcbiAgICAgICAgICAgIHJldHVybiBWdCh0LCB0LnJlbmRlciwgXCJGb3J3YXJkUmVmXCIpO1xuICAgICAgICAgIGNhc2UgcDpcbiAgICAgICAgICAgIHZhciBmID0gdC5kaXNwbGF5TmFtZSB8fCBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGYgIT09IG51bGwgPyBmIDogTCh0LnR5cGUpIHx8IFwiTWVtb1wiO1xuICAgICAgICAgIGNhc2UgUzoge1xuICAgICAgICAgICAgdmFyIG0gPSB0LCBDID0gbS5fcGF5bG9hZCwgdiA9IG0uX2luaXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gTCh2KEMpKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgSyA9IE9iamVjdC5hc3NpZ24sIGVlID0gMCwgT2UsIEZlLCBBZSwgTGUsIFZlLCBVZSwgTmU7XG4gICAgZnVuY3Rpb24gJGUoKSB7XG4gICAgfVxuICAgICRlLl9fcmVhY3REaXNhYmxlZExvZyA9ICEwO1xuICAgIGZ1bmN0aW9uIFV0KCkge1xuICAgICAge1xuICAgICAgICBpZiAoZWUgPT09IDApIHtcbiAgICAgICAgICBPZSA9IGNvbnNvbGUubG9nLCBGZSA9IGNvbnNvbGUuaW5mbywgQWUgPSBjb25zb2xlLndhcm4sIExlID0gY29uc29sZS5lcnJvciwgVmUgPSBjb25zb2xlLmdyb3VwLCBVZSA9IGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQsIE5lID0gY29uc29sZS5ncm91cEVuZDtcbiAgICAgICAgICB2YXIgdCA9IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICAgICAgICAgIHZhbHVlOiAkZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiAhMFxuICAgICAgICAgIH07XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29uc29sZSwge1xuICAgICAgICAgICAgaW5mbzogdCxcbiAgICAgICAgICAgIGxvZzogdCxcbiAgICAgICAgICAgIHdhcm46IHQsXG4gICAgICAgICAgICBlcnJvcjogdCxcbiAgICAgICAgICAgIGdyb3VwOiB0LFxuICAgICAgICAgICAgZ3JvdXBDb2xsYXBzZWQ6IHQsXG4gICAgICAgICAgICBncm91cEVuZDogdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVlKys7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIE50KCkge1xuICAgICAge1xuICAgICAgICBpZiAoZWUtLSwgZWUgPT09IDApIHtcbiAgICAgICAgICB2YXIgdCA9IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICAgICAgICAgIHdyaXRhYmxlOiAhMFxuICAgICAgICAgIH07XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29uc29sZSwge1xuICAgICAgICAgICAgbG9nOiBLKHt9LCB0LCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBPZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBpbmZvOiBLKHt9LCB0LCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBGZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB3YXJuOiBLKHt9LCB0LCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBBZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBlcnJvcjogSyh7fSwgdCwge1xuICAgICAgICAgICAgICB2YWx1ZTogTGVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZ3JvdXA6IEsoe30sIHQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IFZlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGdyb3VwQ29sbGFwc2VkOiBLKHt9LCB0LCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBVZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBncm91cEVuZDogSyh7fSwgdCwge1xuICAgICAgICAgICAgICB2YWx1ZTogTmVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWUgPCAwICYmIEgoXCJkaXNhYmxlZERlcHRoIGZlbGwgYmVsb3cgemVyby4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgbWUgPSBHLlJlYWN0Q3VycmVudERpc3BhdGNoZXIsIGtlO1xuICAgIGZ1bmN0aW9uIGNlKHQsIGwsIHUpIHtcbiAgICAgIHtcbiAgICAgICAgaWYgKGtlID09PSB2b2lkIDApXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgfSBjYXRjaCAobSkge1xuICAgICAgICAgICAgdmFyIGYgPSBtLnN0YWNrLnRyaW0oKS5tYXRjaCgvXFxuKCAqKGF0ICk/KS8pO1xuICAgICAgICAgICAga2UgPSBmICYmIGZbMV0gfHwgXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBgXG5gICsga2UgKyB0O1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgeWUgPSAhMSwgc2U7XG4gICAge1xuICAgICAgdmFyICR0ID0gdHlwZW9mIFdlYWtNYXAgPT0gXCJmdW5jdGlvblwiID8gV2Vha01hcCA6IE1hcDtcbiAgICAgIHNlID0gbmV3ICR0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFdlKHQsIGwpIHtcbiAgICAgIGlmICghdCB8fCB5ZSlcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB7XG4gICAgICAgIHZhciB1ID0gc2UuZ2V0KHQpO1xuICAgICAgICBpZiAodSAhPT0gdm9pZCAwKVxuICAgICAgICAgIHJldHVybiB1O1xuICAgICAgfVxuICAgICAgdmFyIGY7XG4gICAgICB5ZSA9ICEwO1xuICAgICAgdmFyIG0gPSBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZTtcbiAgICAgIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gdm9pZCAwO1xuICAgICAgdmFyIEM7XG4gICAgICBDID0gbWUuY3VycmVudCwgbWUuY3VycmVudCA9IG51bGwsIFV0KCk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAobCkge1xuICAgICAgICAgIHZhciB2ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2LnByb3RvdHlwZSwgXCJwcm9wc1wiLCB7XG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLCB0eXBlb2YgUmVmbGVjdCA9PSBcIm9iamVjdFwiICYmIFJlZmxlY3QuY29uc3RydWN0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBSZWZsZWN0LmNvbnN0cnVjdCh2LCBbXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChWKSB7XG4gICAgICAgICAgICAgIGYgPSBWO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUmVmbGVjdC5jb25zdHJ1Y3QodCwgW10sIHYpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB2LmNhbGwoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKFYpIHtcbiAgICAgICAgICAgICAgZiA9IFY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0LmNhbGwodi5wcm90b3R5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcbiAgICAgICAgICB9IGNhdGNoIChWKSB7XG4gICAgICAgICAgICBmID0gVjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdCgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChWKSB7XG4gICAgICAgIGlmIChWICYmIGYgJiYgdHlwZW9mIFYuc3RhY2sgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGZvciAodmFyIGggPSBWLnN0YWNrLnNwbGl0KGBcbmApLCBJID0gZi5zdGFjay5zcGxpdChgXG5gKSwgTSA9IGgubGVuZ3RoIC0gMSwgRSA9IEkubGVuZ3RoIC0gMTsgTSA+PSAxICYmIEUgPj0gMCAmJiBoW01dICE9PSBJW0VdOyApXG4gICAgICAgICAgICBFLS07XG4gICAgICAgICAgZm9yICg7IE0gPj0gMSAmJiBFID49IDA7IE0tLSwgRS0tKVxuICAgICAgICAgICAgaWYgKGhbTV0gIT09IElbRV0pIHtcbiAgICAgICAgICAgICAgaWYgKE0gIT09IDEgfHwgRSAhPT0gMSlcbiAgICAgICAgICAgICAgICBkb1xuICAgICAgICAgICAgICAgICAgaWYgKE0tLSwgRS0tLCBFIDwgMCB8fCBoW01dICE9PSBJW0VdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfID0gYFxuYCArIGhbTV0ucmVwbGFjZShcIiBhdCBuZXcgXCIsIFwiIGF0IFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuZGlzcGxheU5hbWUgJiYgXy5pbmNsdWRlcyhcIjxhbm9ueW1vdXM+XCIpICYmIChfID0gXy5yZXBsYWNlKFwiPGFub255bW91cz5cIiwgdC5kaXNwbGF5TmFtZSkpLCB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgJiYgc2Uuc2V0KHQsIF8pLCBfO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdoaWxlIChNID49IDEgJiYgRSA+PSAwKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHllID0gITEsIG1lLmN1cnJlbnQgPSBDLCBOdCgpLCBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IG07XG4gICAgICB9XG4gICAgICB2YXIgWCA9IHQgPyB0LmRpc3BsYXlOYW1lIHx8IHQubmFtZSA6IFwiXCIsIG90ID0gWCA/IGNlKFgpIDogXCJcIjtcbiAgICAgIHJldHVybiB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgJiYgc2Uuc2V0KHQsIG90KSwgb3Q7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFd0KHQsIGwsIHUpIHtcbiAgICAgIHJldHVybiBXZSh0LCAhMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFl0KHQpIHtcbiAgICAgIHZhciBsID0gdC5wcm90b3R5cGU7XG4gICAgICByZXR1cm4gISEobCAmJiBsLmlzUmVhY3RDb21wb25lbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZSh0LCBsLCB1KSB7XG4gICAgICBpZiAodCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIGlmICh0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHJldHVybiBXZSh0LCBZdCh0KSk7XG4gICAgICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIGNlKHQpO1xuICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgeTpcbiAgICAgICAgICByZXR1cm4gY2UoXCJTdXNwZW5zZVwiKTtcbiAgICAgICAgY2FzZSB4OlxuICAgICAgICAgIHJldHVybiBjZShcIlN1c3BlbnNlTGlzdFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdCA9PSBcIm9iamVjdFwiKVxuICAgICAgICBzd2l0Y2ggKHQuJCR0eXBlb2YpIHtcbiAgICAgICAgICBjYXNlIGE6XG4gICAgICAgICAgICByZXR1cm4gV3QodC5yZW5kZXIpO1xuICAgICAgICAgIGNhc2UgcDpcbiAgICAgICAgICAgIHJldHVybiBkZSh0LnR5cGUsIGwsIHUpO1xuICAgICAgICAgIGNhc2UgUzoge1xuICAgICAgICAgICAgdmFyIGYgPSB0LCBtID0gZi5fcGF5bG9hZCwgQyA9IGYuX2luaXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gZGUoQyhtKSwgbCwgdSk7XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICB2YXIgdWUgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LCBZZSA9IHt9LCBxZSA9IEcuUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZTtcbiAgICBmdW5jdGlvbiBnZSh0KSB7XG4gICAgICBpZiAodCkge1xuICAgICAgICB2YXIgbCA9IHQuX293bmVyLCB1ID0gZGUodC50eXBlLCB0Ll9zb3VyY2UsIGwgPyBsLnR5cGUgOiBudWxsKTtcbiAgICAgICAgcWUuc2V0RXh0cmFTdGFja0ZyYW1lKHUpO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHFlLnNldEV4dHJhU3RhY2tGcmFtZShudWxsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcXQodCwgbCwgdSwgZiwgbSkge1xuICAgICAge1xuICAgICAgICB2YXIgQyA9IEZ1bmN0aW9uLmNhbGwuYmluZCh1ZSk7XG4gICAgICAgIGZvciAodmFyIHYgaW4gdClcbiAgICAgICAgICBpZiAoQyh0LCB2KSkge1xuICAgICAgICAgICAgdmFyIGggPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHRbdl0gIT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIEkgPSBFcnJvcigoZiB8fCBcIlJlYWN0IGNsYXNzXCIpICsgXCI6IFwiICsgdSArIFwiIHR5cGUgYFwiICsgdiArIFwiYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UsIGJ1dCByZWNlaXZlZCBgXCIgKyB0eXBlb2YgdFt2XSArIFwiYC5UaGlzIG9mdGVuIGhhcHBlbnMgYmVjYXVzZSBvZiB0eXBvcyBzdWNoIGFzIGBQcm9wVHlwZXMuZnVuY3Rpb25gIGluc3RlYWQgb2YgYFByb3BUeXBlcy5mdW5jYC5cIik7XG4gICAgICAgICAgICAgICAgdGhyb3cgSS5uYW1lID0gXCJJbnZhcmlhbnQgVmlvbGF0aW9uXCIsIEk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaCA9IHRbdl0obCwgdiwgZiwgdSwgbnVsbCwgXCJTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRFwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKE0pIHtcbiAgICAgICAgICAgICAgaCA9IE07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoICYmICEoaCBpbnN0YW5jZW9mIEVycm9yKSAmJiAoZ2UobSksIEgoXCIlczogdHlwZSBzcGVjaWZpY2F0aW9uIG9mICVzIGAlc2AgaXMgaW52YWxpZDsgdGhlIHR5cGUgY2hlY2tlciBmdW5jdGlvbiBtdXN0IHJldHVybiBgbnVsbGAgb3IgYW4gYEVycm9yYCBidXQgcmV0dXJuZWQgYSAlcy4gWW91IG1heSBoYXZlIGZvcmdvdHRlbiB0byBwYXNzIGFuIGFyZ3VtZW50IHRvIHRoZSB0eXBlIGNoZWNrZXIgY3JlYXRvciAoYXJyYXlPZiwgaW5zdGFuY2VPZiwgb2JqZWN0T2YsIG9uZU9mLCBvbmVPZlR5cGUsIGFuZCBzaGFwZSBhbGwgcmVxdWlyZSBhbiBhcmd1bWVudCkuXCIsIGYgfHwgXCJSZWFjdCBjbGFzc1wiLCB1LCB2LCB0eXBlb2YgaCksIGdlKG51bGwpKSwgaCBpbnN0YW5jZW9mIEVycm9yICYmICEoaC5tZXNzYWdlIGluIFllKSAmJiAoWWVbaC5tZXNzYWdlXSA9ICEwLCBnZShtKSwgSChcIkZhaWxlZCAlcyB0eXBlOiAlc1wiLCB1LCBoLm1lc3NhZ2UpLCBnZShudWxsKSk7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgS3QgPSBBcnJheS5pc0FycmF5O1xuICAgIGZ1bmN0aW9uIHBlKHQpIHtcbiAgICAgIHJldHVybiBLdCh0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gR3QodCkge1xuICAgICAge1xuICAgICAgICB2YXIgbCA9IHR5cGVvZiBTeW1ib2wgPT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC50b1N0cmluZ1RhZywgdSA9IGwgJiYgdFtTeW1ib2wudG9TdHJpbmdUYWddIHx8IHQuY29uc3RydWN0b3IubmFtZSB8fCBcIk9iamVjdFwiO1xuICAgICAgICByZXR1cm4gdTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gSnQodCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEtlKHQpLCAhMTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIEtlKHQpIHtcbiAgICAgIHJldHVybiBcIlwiICsgdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gR2UodCkge1xuICAgICAgaWYgKEp0KHQpKVxuICAgICAgICByZXR1cm4gSChcIlRoZSBwcm92aWRlZCBrZXkgaXMgYW4gdW5zdXBwb3J0ZWQgdHlwZSAlcy4gVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLCBHdCh0KSksIEtlKHQpO1xuICAgIH1cbiAgICB2YXIgdGUgPSBHLlJlYWN0Q3VycmVudE93bmVyLCBYdCA9IHtcbiAgICAgIGtleTogITAsXG4gICAgICByZWY6ICEwLFxuICAgICAgX19zZWxmOiAhMCxcbiAgICAgIF9fc291cmNlOiAhMFxuICAgIH0sIEplLCBYZSwgQ2U7XG4gICAgQ2UgPSB7fTtcbiAgICBmdW5jdGlvbiBadCh0KSB7XG4gICAgICBpZiAodWUuY2FsbCh0LCBcInJlZlwiKSkge1xuICAgICAgICB2YXIgbCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgXCJyZWZcIikuZ2V0O1xuICAgICAgICBpZiAobCAmJiBsLmlzUmVhY3RXYXJuaW5nKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0LnJlZiAhPT0gdm9pZCAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBRdCh0KSB7XG4gICAgICBpZiAodWUuY2FsbCh0LCBcImtleVwiKSkge1xuICAgICAgICB2YXIgbCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgXCJrZXlcIikuZ2V0O1xuICAgICAgICBpZiAobCAmJiBsLmlzUmVhY3RXYXJuaW5nKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0LmtleSAhPT0gdm9pZCAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlcih0LCBsKSB7XG4gICAgICBpZiAodHlwZW9mIHQucmVmID09IFwic3RyaW5nXCIgJiYgdGUuY3VycmVudCAmJiBsICYmIHRlLmN1cnJlbnQuc3RhdGVOb2RlICE9PSBsKSB7XG4gICAgICAgIHZhciB1ID0gTCh0ZS5jdXJyZW50LnR5cGUpO1xuICAgICAgICBDZVt1XSB8fCAoSCgnQ29tcG9uZW50IFwiJXNcIiBjb250YWlucyB0aGUgc3RyaW5nIHJlZiBcIiVzXCIuIFN1cHBvcnQgZm9yIHN0cmluZyByZWZzIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiBUaGlzIGNhc2UgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIGFuIGFycm93IGZ1bmN0aW9uLiBXZSBhc2sgeW91IHRvIG1hbnVhbGx5IGZpeCB0aGlzIGNhc2UgYnkgdXNpbmcgdXNlUmVmKCkgb3IgY3JlYXRlUmVmKCkgaW5zdGVhZC4gTGVhcm4gbW9yZSBhYm91dCB1c2luZyByZWZzIHNhZmVseSBoZXJlOiBodHRwczovL3JlYWN0anMub3JnL2xpbmsvc3RyaWN0LW1vZGUtc3RyaW5nLXJlZicsIEwodGUuY3VycmVudC50eXBlKSwgdC5yZWYpLCBDZVt1XSA9ICEwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdHIodCwgbCkge1xuICAgICAge1xuICAgICAgICB2YXIgdSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIEplIHx8IChKZSA9ICEwLCBIKFwiJXM6IGBrZXlgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSB2YWx1ZSB3aXRoaW4gdGhlIGNoaWxkIGNvbXBvbmVudCwgeW91IHNob3VsZCBwYXNzIGl0IGFzIGEgZGlmZmVyZW50IHByb3AuIChodHRwczovL3JlYWN0anMub3JnL2xpbmsvc3BlY2lhbC1wcm9wcylcIiwgbCkpO1xuICAgICAgICB9O1xuICAgICAgICB1LmlzUmVhY3RXYXJuaW5nID0gITAsIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcImtleVwiLCB7XG4gICAgICAgICAgZ2V0OiB1LFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJyKHQsIGwpIHtcbiAgICAgIHtcbiAgICAgICAgdmFyIHUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBYZSB8fCAoWGUgPSAhMCwgSChcIiVzOiBgcmVmYCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGJlaW5nIHJldHVybmVkLiBJZiB5b3UgbmVlZCB0byBhY2Nlc3MgdGhlIHNhbWUgdmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCBwcm9wLiAoaHR0cHM6Ly9yZWFjdGpzLm9yZy9saW5rL3NwZWNpYWwtcHJvcHMpXCIsIGwpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdS5pc1JlYWN0V2FybmluZyA9ICEwLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJyZWZcIiwge1xuICAgICAgICAgIGdldDogdSxcbiAgICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgbnIgPSBmdW5jdGlvbih0LCBsLCB1LCBmLCBtLCBDLCB2KSB7XG4gICAgICB2YXIgaCA9IHtcbiAgICAgICAgLy8gVGhpcyB0YWcgYWxsb3dzIHVzIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoaXMgYXMgYSBSZWFjdCBFbGVtZW50XG4gICAgICAgICQkdHlwZW9mOiBuLFxuICAgICAgICAvLyBCdWlsdC1pbiBwcm9wZXJ0aWVzIHRoYXQgYmVsb25nIG9uIHRoZSBlbGVtZW50XG4gICAgICAgIHR5cGU6IHQsXG4gICAgICAgIGtleTogbCxcbiAgICAgICAgcmVmOiB1LFxuICAgICAgICBwcm9wczogdixcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICAgICAgX293bmVyOiBDXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGguX3N0b3JlID0ge30sIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLl9zdG9yZSwgXCJ2YWxpZGF0ZWRcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogITFcbiAgICAgIH0pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwgXCJfc2VsZlwiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITEsXG4gICAgICAgIHZhbHVlOiBmXG4gICAgICB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsIFwiX3NvdXJjZVwiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITEsXG4gICAgICAgIHZhbHVlOiBtXG4gICAgICB9KSwgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZShoLnByb3BzKSwgT2JqZWN0LmZyZWV6ZShoKSksIGg7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBvcih0LCBsLCB1LCBmLCBtKSB7XG4gICAgICB7XG4gICAgICAgIHZhciBDLCB2ID0ge30sIGggPSBudWxsLCBJID0gbnVsbDtcbiAgICAgICAgdSAhPT0gdm9pZCAwICYmIChHZSh1KSwgaCA9IFwiXCIgKyB1KSwgUXQobCkgJiYgKEdlKGwua2V5KSwgaCA9IFwiXCIgKyBsLmtleSksIFp0KGwpICYmIChJID0gbC5yZWYsIGVyKGwsIG0pKTtcbiAgICAgICAgZm9yIChDIGluIGwpXG4gICAgICAgICAgdWUuY2FsbChsLCBDKSAmJiAhWHQuaGFzT3duUHJvcGVydHkoQykgJiYgKHZbQ10gPSBsW0NdKTtcbiAgICAgICAgaWYgKHQgJiYgdC5kZWZhdWx0UHJvcHMpIHtcbiAgICAgICAgICB2YXIgTSA9IHQuZGVmYXVsdFByb3BzO1xuICAgICAgICAgIGZvciAoQyBpbiBNKVxuICAgICAgICAgICAgdltDXSA9PT0gdm9pZCAwICYmICh2W0NdID0gTVtDXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGggfHwgSSkge1xuICAgICAgICAgIHZhciBFID0gdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gdC5kaXNwbGF5TmFtZSB8fCB0Lm5hbWUgfHwgXCJVbmtub3duXCIgOiB0O1xuICAgICAgICAgIGggJiYgdHIodiwgRSksIEkgJiYgcnIodiwgRSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5yKHQsIGgsIEksIG0sIGYsIHRlLmN1cnJlbnQsIHYpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgamUgPSBHLlJlYWN0Q3VycmVudE93bmVyLCBaZSA9IEcuUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZTtcbiAgICBmdW5jdGlvbiBKKHQpIHtcbiAgICAgIGlmICh0KSB7XG4gICAgICAgIHZhciBsID0gdC5fb3duZXIsIHUgPSBkZSh0LnR5cGUsIHQuX3NvdXJjZSwgbCA/IGwudHlwZSA6IG51bGwpO1xuICAgICAgICBaZS5zZXRFeHRyYVN0YWNrRnJhbWUodSk7XG4gICAgICB9IGVsc2VcbiAgICAgICAgWmUuc2V0RXh0cmFTdGFja0ZyYW1lKG51bGwpO1xuICAgIH1cbiAgICB2YXIgVGU7XG4gICAgVGUgPSAhMTtcbiAgICBmdW5jdGlvbiB3ZSh0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHQgPT0gXCJvYmplY3RcIiAmJiB0ICE9PSBudWxsICYmIHQuJCR0eXBlb2YgPT09IG47XG4gICAgfVxuICAgIGZ1bmN0aW9uIFFlKCkge1xuICAgICAge1xuICAgICAgICBpZiAoamUuY3VycmVudCkge1xuICAgICAgICAgIHZhciB0ID0gTChqZS5jdXJyZW50LnR5cGUpO1xuICAgICAgICAgIGlmICh0KVxuICAgICAgICAgICAgcmV0dXJuIGBcblxuQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgXFxgYCArIHQgKyBcImAuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlyKHQpIHtcbiAgICAgIHtcbiAgICAgICAgaWYgKHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHZhciBsID0gdC5maWxlTmFtZS5yZXBsYWNlKC9eLipbXFxcXFxcL10vLCBcIlwiKSwgdSA9IHQubGluZU51bWJlcjtcbiAgICAgICAgICByZXR1cm4gYFxuXG5DaGVjayB5b3VyIGNvZGUgYXQgYCArIGwgKyBcIjpcIiArIHUgKyBcIi5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGV0ID0ge307XG4gICAgZnVuY3Rpb24gYXIodCkge1xuICAgICAge1xuICAgICAgICB2YXIgbCA9IFFlKCk7XG4gICAgICAgIGlmICghbCkge1xuICAgICAgICAgIHZhciB1ID0gdHlwZW9mIHQgPT0gXCJzdHJpbmdcIiA/IHQgOiB0LmRpc3BsYXlOYW1lIHx8IHQubmFtZTtcbiAgICAgICAgICB1ICYmIChsID0gYFxuXG5DaGVjayB0aGUgdG9wLWxldmVsIHJlbmRlciBjYWxsIHVzaW5nIDxgICsgdSArIFwiPi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGw7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHR0KHQsIGwpIHtcbiAgICAgIHtcbiAgICAgICAgaWYgKCF0Ll9zdG9yZSB8fCB0Ll9zdG9yZS52YWxpZGF0ZWQgfHwgdC5rZXkgIT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHQuX3N0b3JlLnZhbGlkYXRlZCA9ICEwO1xuICAgICAgICB2YXIgdSA9IGFyKGwpO1xuICAgICAgICBpZiAoZXRbdV0pXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBldFt1XSA9ICEwO1xuICAgICAgICB2YXIgZiA9IFwiXCI7XG4gICAgICAgIHQgJiYgdC5fb3duZXIgJiYgdC5fb3duZXIgIT09IGplLmN1cnJlbnQgJiYgKGYgPSBcIiBJdCB3YXMgcGFzc2VkIGEgY2hpbGQgZnJvbSBcIiArIEwodC5fb3duZXIudHlwZSkgKyBcIi5cIiksIEoodCksIEgoJ0VhY2ggY2hpbGQgaW4gYSBsaXN0IHNob3VsZCBoYXZlIGEgdW5pcXVlIFwia2V5XCIgcHJvcC4lcyVzIFNlZSBodHRwczovL3JlYWN0anMub3JnL2xpbmsvd2FybmluZy1rZXlzIGZvciBtb3JlIGluZm9ybWF0aW9uLicsIHUsIGYpLCBKKG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBydCh0LCBsKSB7XG4gICAgICB7XG4gICAgICAgIGlmICh0eXBlb2YgdCAhPSBcIm9iamVjdFwiKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHBlKHQpKVxuICAgICAgICAgIGZvciAodmFyIHUgPSAwOyB1IDwgdC5sZW5ndGg7IHUrKykge1xuICAgICAgICAgICAgdmFyIGYgPSB0W3VdO1xuICAgICAgICAgICAgd2UoZikgJiYgdHQoZiwgbCk7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3ZSh0KSlcbiAgICAgICAgICB0Ll9zdG9yZSAmJiAodC5fc3RvcmUudmFsaWRhdGVkID0gITApO1xuICAgICAgICBlbHNlIGlmICh0KSB7XG4gICAgICAgICAgdmFyIG0gPSBCdCh0KTtcbiAgICAgICAgICBpZiAodHlwZW9mIG0gPT0gXCJmdW5jdGlvblwiICYmIG0gIT09IHQuZW50cmllcylcbiAgICAgICAgICAgIGZvciAodmFyIEMgPSBtLmNhbGwodCksIHY7ICEodiA9IEMubmV4dCgpKS5kb25lOyApXG4gICAgICAgICAgICAgIHdlKHYudmFsdWUpICYmIHR0KHYudmFsdWUsIGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxyKHQpIHtcbiAgICAgIHtcbiAgICAgICAgdmFyIGwgPSB0LnR5cGU7XG4gICAgICAgIGlmIChsID09IG51bGwgfHwgdHlwZW9mIGwgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciB1O1xuICAgICAgICBpZiAodHlwZW9mIGwgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgIHUgPSBsLnByb3BUeXBlcztcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGwgPT0gXCJvYmplY3RcIiAmJiAobC4kJHR5cGVvZiA9PT0gYSB8fCAvLyBOb3RlOiBNZW1vIG9ubHkgY2hlY2tzIG91dGVyIHByb3BzIGhlcmUuXG4gICAgICAgIC8vIElubmVyIHByb3BzIGFyZSBjaGVja2VkIGluIHRoZSByZWNvbmNpbGVyLlxuICAgICAgICBsLiQkdHlwZW9mID09PSBwKSlcbiAgICAgICAgICB1ID0gbC5wcm9wVHlwZXM7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh1KSB7XG4gICAgICAgICAgdmFyIGYgPSBMKGwpO1xuICAgICAgICAgIHF0KHUsIHQucHJvcHMsIFwicHJvcFwiLCBmLCB0KTtcbiAgICAgICAgfSBlbHNlIGlmIChsLlByb3BUeXBlcyAhPT0gdm9pZCAwICYmICFUZSkge1xuICAgICAgICAgIFRlID0gITA7XG4gICAgICAgICAgdmFyIG0gPSBMKGwpO1xuICAgICAgICAgIEgoXCJDb21wb25lbnQgJXMgZGVjbGFyZWQgYFByb3BUeXBlc2AgaW5zdGVhZCBvZiBgcHJvcFR5cGVzYC4gRGlkIHlvdSBtaXNzcGVsbCB0aGUgcHJvcGVydHkgYXNzaWdubWVudD9cIiwgbSB8fCBcIlVua25vd25cIik7XG4gICAgICAgIH1cbiAgICAgICAgdHlwZW9mIGwuZ2V0RGVmYXVsdFByb3BzID09IFwiZnVuY3Rpb25cIiAmJiAhbC5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQgJiYgSChcImdldERlZmF1bHRQcm9wcyBpcyBvbmx5IHVzZWQgb24gY2xhc3NpYyBSZWFjdC5jcmVhdGVDbGFzcyBkZWZpbml0aW9ucy4gVXNlIGEgc3RhdGljIHByb3BlcnR5IG5hbWVkIGBkZWZhdWx0UHJvcHNgIGluc3RlYWQuXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjcih0KSB7XG4gICAgICB7XG4gICAgICAgIGZvciAodmFyIGwgPSBPYmplY3Qua2V5cyh0LnByb3BzKSwgdSA9IDA7IHUgPCBsLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgdmFyIGYgPSBsW3VdO1xuICAgICAgICAgIGlmIChmICE9PSBcImNoaWxkcmVuXCIgJiYgZiAhPT0gXCJrZXlcIikge1xuICAgICAgICAgICAgSih0KSwgSChcIkludmFsaWQgcHJvcCBgJXNgIHN1cHBsaWVkIHRvIGBSZWFjdC5GcmFnbWVudGAuIFJlYWN0LkZyYWdtZW50IGNhbiBvbmx5IGhhdmUgYGtleWAgYW5kIGBjaGlsZHJlbmAgcHJvcHMuXCIsIGYpLCBKKG51bGwpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHQucmVmICE9PSBudWxsICYmIChKKHQpLCBIKFwiSW52YWxpZCBhdHRyaWJ1dGUgYHJlZmAgc3VwcGxpZWQgdG8gYFJlYWN0LkZyYWdtZW50YC5cIiksIEoobnVsbCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBudCh0LCBsLCB1LCBmLCBtLCBDKSB7XG4gICAgICB7XG4gICAgICAgIHZhciB2ID0gTHQodCk7XG4gICAgICAgIGlmICghdikge1xuICAgICAgICAgIHZhciBoID0gXCJcIjtcbiAgICAgICAgICAodCA9PT0gdm9pZCAwIHx8IHR5cGVvZiB0ID09IFwib2JqZWN0XCIgJiYgdCAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyh0KS5sZW5ndGggPT09IDApICYmIChoICs9IFwiIFlvdSBsaWtlbHkgZm9yZ290IHRvIGV4cG9ydCB5b3VyIGNvbXBvbmVudCBmcm9tIHRoZSBmaWxlIGl0J3MgZGVmaW5lZCBpbiwgb3IgeW91IG1pZ2h0IGhhdmUgbWl4ZWQgdXAgZGVmYXVsdCBhbmQgbmFtZWQgaW1wb3J0cy5cIik7XG4gICAgICAgICAgdmFyIEkgPSBpcihtKTtcbiAgICAgICAgICBJID8gaCArPSBJIDogaCArPSBRZSgpO1xuICAgICAgICAgIHZhciBNO1xuICAgICAgICAgIHQgPT09IG51bGwgPyBNID0gXCJudWxsXCIgOiBwZSh0KSA/IE0gPSBcImFycmF5XCIgOiB0ICE9PSB2b2lkIDAgJiYgdC4kJHR5cGVvZiA9PT0gbiA/IChNID0gXCI8XCIgKyAoTCh0LnR5cGUpIHx8IFwiVW5rbm93blwiKSArIFwiIC8+XCIsIGggPSBcIiBEaWQgeW91IGFjY2lkZW50YWxseSBleHBvcnQgYSBKU1ggbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY29tcG9uZW50P1wiKSA6IE0gPSB0eXBlb2YgdCwgSChcIlJlYWN0LmpzeDogdHlwZSBpcyBpbnZhbGlkIC0tIGV4cGVjdGVkIGEgc3RyaW5nIChmb3IgYnVpbHQtaW4gY29tcG9uZW50cykgb3IgYSBjbGFzcy9mdW5jdGlvbiAoZm9yIGNvbXBvc2l0ZSBjb21wb25lbnRzKSBidXQgZ290OiAlcy4lc1wiLCBNLCBoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgRSA9IG9yKHQsIGwsIHUsIG0sIEMpO1xuICAgICAgICBpZiAoRSA9PSBudWxsKVxuICAgICAgICAgIHJldHVybiBFO1xuICAgICAgICBpZiAodikge1xuICAgICAgICAgIHZhciBfID0gbC5jaGlsZHJlbjtcbiAgICAgICAgICBpZiAoXyAhPT0gdm9pZCAwKVxuICAgICAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICAgIGlmIChwZShfKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIFggPSAwOyBYIDwgXy5sZW5ndGg7IFgrKylcbiAgICAgICAgICAgICAgICAgIHJ0KF9bWF0sIHQpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUgJiYgT2JqZWN0LmZyZWV6ZShfKTtcbiAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgSChcIlJlYWN0LmpzeDogU3RhdGljIGNoaWxkcmVuIHNob3VsZCBhbHdheXMgYmUgYW4gYXJyYXkuIFlvdSBhcmUgbGlrZWx5IGV4cGxpY2l0bHkgY2FsbGluZyBSZWFjdC5qc3hzIG9yIFJlYWN0LmpzeERFVi4gVXNlIHRoZSBCYWJlbCB0cmFuc2Zvcm0gaW5zdGVhZC5cIik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIHJ0KF8sIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ID09PSBpID8gY3IoRSkgOiBscihFKSwgRTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3IodCwgbCwgdSkge1xuICAgICAgcmV0dXJuIG50KHQsIGwsIHUsICEwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZHIodCwgbCwgdSkge1xuICAgICAgcmV0dXJuIG50KHQsIGwsIHUsICExKTtcbiAgICB9XG4gICAgdmFyIHVyID0gZHIsIGdyID0gc3I7XG4gICAgbmUuRnJhZ21lbnQgPSBpLCBuZS5qc3ggPSB1ciwgbmUuanN4cyA9IGdyO1xuICB9KCkpLCBuZTtcbn1cbnByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IE1lLmV4cG9ydHMgPSBIcigpIDogTWUuZXhwb3J0cyA9IElyKCk7XG52YXIgciA9IE1lLmV4cG9ydHM7XG5jb25zdCBmZSA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSBgMCA0cHggMTJweCAke2UuY29sb3JzLnNoYWRvd31gLCBvID0gYDFweCBzb2xpZCAke2UuY29sb3JzLmJvcmRlcn1gLCBpID0ge1xuICAgIGRlZmF1bHQ6IGUuY29sb3JzLmVkaXRvci50ZXh0LFxuICAgIGdyYXk6IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy5ncmF5LnRleHQsXG4gICAgYnJvd246IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy5icm93bi50ZXh0LFxuICAgIHJlZDogZS5jb2xvcnMuaGlnaGxpZ2h0Q29sb3JzLnJlZC50ZXh0LFxuICAgIG9yYW5nZTogZS5jb2xvcnMuaGlnaGxpZ2h0Q29sb3JzLm9yYW5nZS50ZXh0LFxuICAgIHllbGxvdzogZS5jb2xvcnMuaGlnaGxpZ2h0Q29sb3JzLnllbGxvdy50ZXh0LFxuICAgIGdyZWVuOiBlLmNvbG9ycy5oaWdobGlnaHRDb2xvcnMuZ3JlZW4udGV4dCxcbiAgICBibHVlOiBlLmNvbG9ycy5oaWdobGlnaHRDb2xvcnMuYmx1ZS50ZXh0LFxuICAgIHB1cnBsZTogZS5jb2xvcnMuaGlnaGxpZ2h0Q29sb3JzLnB1cnBsZS50ZXh0LFxuICAgIHBpbms6IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy5waW5rLnRleHRcbiAgfSwgcyA9IHtcbiAgICBkZWZhdWx0OiBlLmNvbG9ycy5lZGl0b3IuYmFja2dyb3VuZCxcbiAgICBncmF5OiBlLmNvbG9ycy5oaWdobGlnaHRDb2xvcnMuZ3JheS5iYWNrZ3JvdW5kLFxuICAgIGJyb3duOiBlLmNvbG9ycy5oaWdobGlnaHRDb2xvcnMuYnJvd24uYmFja2dyb3VuZCxcbiAgICByZWQ6IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy5yZWQuYmFja2dyb3VuZCxcbiAgICBvcmFuZ2U6IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy5vcmFuZ2UuYmFja2dyb3VuZCxcbiAgICB5ZWxsb3c6IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy55ZWxsb3cuYmFja2dyb3VuZCxcbiAgICBncmVlbjogZS5jb2xvcnMuaGlnaGxpZ2h0Q29sb3JzLmdyZWVuLmJhY2tncm91bmQsXG4gICAgYmx1ZTogZS5jb2xvcnMuaGlnaGxpZ2h0Q29sb3JzLmJsdWUuYmFja2dyb3VuZCxcbiAgICBwdXJwbGU6IGUuY29sb3JzLmhpZ2hsaWdodENvbG9ycy5wdXJwbGUuYmFja2dyb3VuZCxcbiAgICBwaW5rOiBlLmNvbG9ycy5oaWdobGlnaHRDb2xvcnMucGluay5iYWNrZ3JvdW5kXG4gIH0sIGMgPSBgJHtNYXRoLm1heChlLmJvcmRlclJhZGl1cyArIDIsIDEpfXB4YCwgZCA9IGAke2UuYm9yZGVyUmFkaXVzfXB4YCwgZyA9IGAke01hdGgubWF4KGUuYm9yZGVyUmFkaXVzIC0gMiwgMSl9cHhgO1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZVN0eWxlczoge1xuICAgICAgLy8gUmVtb3ZlcyBidXR0b24gcHJlc3MgZWZmZWN0LlxuICAgICAgdHJhbnNmb3JtOiBcIm5vbmVcIlxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgLy8gU2xhc2ggTWVudSwgRm9ybWF0dGluZyBUb29sYmFyIGRyb3Bkb3duLCBjb2xvciBwaWNrZXIgZHJvcGRvd25cbiAgICAgIE1lbnU6IHtcbiAgICAgICAgc3R5bGVzOiAoKSA9PiB7XG4gICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRyb3Bkb3duOiBVLm1lcmdlKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5tZW51LmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgYm9yZGVyOiBvLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogZCxcbiAgICAgICAgICAgICAgICBib3hTaGFkb3c6IG4sXG4gICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLm1lbnUudGV4dCxcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjJweFwiLFxuICAgICAgICAgICAgICAgIG92ZXJmbG93WTogXCJzY3JvbGxcIixcbiAgICAgICAgICAgICAgICBcIi5tYW50aW5lLU1lbnUtbGFiZWxcIjoge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5tZW51LmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMubWVudS50ZXh0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIi5tYW50aW5lLU1lbnUtaXRlbVwiOiB7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuY29sb3JzLm1lbnUuYmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGcsXG4gICAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMubWVudS50ZXh0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIi5tYW50aW5lLU1lbnUtaXRlbVtkYXRhLWhvdmVyZWRdXCI6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMuaG92ZXJlZC5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5ob3ZlcmVkLnRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICgoYSA9IGUuY29tcG9uZW50U3R5bGVzKSA9PSBudWxsID8gdm9pZCAwIDogYS5jYWxsKGUsIGUpLk1lbnUpIHx8IHt9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFRhYnM6IHtcbiAgICAgICAgc3R5bGVzOiAoKSA9PiAoe1xuICAgICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMubWVudS5iYWNrZ3JvdW5kXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YWJzTGlzdDoge1xuICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGUuY29sb3JzLmhvdmVyZWQuYmFja2dyb3VuZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFiOiB7XG4gICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMubWVudS50ZXh0LFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGUuY29sb3JzLmhvdmVyZWQuYmFja2dyb3VuZCxcbiAgICAgICAgICAgIFwiJjpob3ZlclwiOiB7XG4gICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5ob3ZlcmVkLnRleHQsXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMuaG92ZXJlZC5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICBib3JkZXJDb2xvcjogZS5jb2xvcnMuaG92ZXJlZC5iYWNrZ3JvdW5kXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCImW2RhdGEtYWN0aXZlXSwgJltkYXRhLWFjdGl2ZV0mOmhvdmVyXCI6IHtcbiAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLm1lbnUudGV4dCxcbiAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGUuY29sb3JzLm1lbnUudGV4dFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFuZWw6IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IFwiOHB4XCIsXG4gICAgICAgICAgICBcIi5tYW50aW5lLVVuc3R5bGVkQnV0dG9uLXJvb3RcIjoge1xuICAgICAgICAgICAgICB3aWR0aDogXCI2MCVcIixcbiAgICAgICAgICAgICAgYm9yZGVyOiBgc29saWQgJHtlLmNvbG9ycy5ib3JkZXJ9IDFweGAsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCI0cHhcIixcbiAgICAgICAgICAgICAgaGVpZ2h0OiBcIjMycHhcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLm1hbnRpbmUtVW5zdHlsZWRCdXR0b24tcm9vdDpob3ZlclwiOiB7XG4gICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5ob3ZlcmVkLnRleHQsXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMuaG92ZXJlZC5iYWNrZ3JvdW5kXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIEZpbGVJbnB1dDoge1xuICAgICAgICBzdHlsZXM6ICgpID0+ICh7XG4gICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5tZW51LnRleHQsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuY29sb3JzLm1lbnUuYmFja2dyb3VuZCxcbiAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICAgICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IFwiNHB4XCIsXG4gICAgICAgICAgICBcIiY6aG92ZXJcIjoge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuY29sb3JzLmhvdmVyZWQuYmFja2dyb3VuZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgd3JhcHBlcjoge1xuICAgICAgICAgICAgYm9yZGVyOiBgc29saWQgJHtlLmNvbG9ycy5ib3JkZXJ9IDFweGAsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IFwiNHB4XCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiB7XG4gICAgICAgICAgICBjb2xvcjogYCR7ZS5jb2xvcnMubWVudS50ZXh0fSAhaW1wb3J0YW50YCxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IDYwMFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBUZXh0SW5wdXQ6IHtcbiAgICAgICAgc3R5bGVzOiAoKSA9PiAoe1xuICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMubWVudS50ZXh0LFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5tZW51LmJhY2tncm91bmQsXG4gICAgICAgICAgICBib3JkZXI6IGBzb2xpZCAke2UuY29sb3JzLmJvcmRlcn0gMXB4YCxcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCI0cHhcIixcbiAgICAgICAgICAgIGhlaWdodDogXCIzMnB4XCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgQ29sb3JJY29uOiB7XG4gICAgICAgIHN0eWxlczogKCkgPT4ge1xuICAgICAgICAgIHZhciBhO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb290OiBVLm1lcmdlKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBvLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogZ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAoKGEgPSBlLmNvbXBvbmVudFN0eWxlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGEuY2FsbChlLCBlKS5Db2xvckljb24pIHx8IHt9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIERyYWdIYW5kbGVNZW51OiB7XG4gICAgICAgIHN0eWxlczogKCkgPT4ge1xuICAgICAgICAgIHZhciBhO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb290OiBVLm1lcmdlKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCIubWFudGluZS1NZW51LWl0ZW1cIjoge1xuICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMTJweFwiLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjMwcHhcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKChhID0gZS5jb21wb25lbnRTdHlsZXMpID09IG51bGwgPyB2b2lkIDAgOiBhLmNhbGwoZSwgZSkuRHJhZ0hhbmRsZU1lbnUpIHx8IHt9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIEVkaXRvcjoge1xuICAgICAgICBzdHlsZXM6ICgpID0+IHtcbiAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vdDogVS5tZXJnZShcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiLlByb3NlTWlycm9yXCI6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMuZWRpdG9yLmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGMsXG4gICAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMuZWRpdG9yLnRleHQsXG4gICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBlLmZvbnRGYW1pbHlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIFBsYWNlaG9sZGVyc1xuICAgICAgICAgICAgICAgIFtgLiR7Ty5pc0VtcHR5fSAuJHtPLmlubGluZUNvbnRlbnR9OmJlZm9yZSwgLiR7Ty5pc0ZpbHRlcn0gLiR7Ty5pbmxpbmVDb250ZW50fTpiZWZvcmVgXToge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLnNpZGVNZW51XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBJbmRlbnQgbGluZXNcbiAgICAgICAgICAgICAgICBbYC4ke08uYmxvY2tHcm91cH1gXToge1xuICAgICAgICAgICAgICAgICAgW2AuJHtPLmJsb2NrR3JvdXB9YF06IHtcbiAgICAgICAgICAgICAgICAgICAgW2AuJHtPLmJsb2NrT3V0ZXJ9Om5vdChbZGF0YS1wcmV2LWRlcHRoLWNoYW5nZWRdKTo6YmVmb3JlYF06IHtcbiAgICAgICAgICAgICAgICAgICAgICBib3JkZXJMZWZ0OiBgMXB4IHNvbGlkICR7ZS5jb2xvcnMuc2lkZU1lbnV9YFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBIaWdobGlnaHQgdGV4dCBjb2xvcnNcbiAgICAgICAgICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhpKS5tYXAoKFt5LCB4XSkgPT4gW1xuICAgICAgICAgICAgICAgICAgICBgW2RhdGEtdGV4dC1jb2xvcj1cIiR7eX1cIl1gLFxuICAgICAgICAgICAgICAgICAgICB7IGNvbG9yOiB4IH1cbiAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAvLyBIaWdobGlnaHQgYmFja2dyb3VuZCBjb2xvcnNcbiAgICAgICAgICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhzKS5tYXAoKFt5LCB4XSkgPT4gW1xuICAgICAgICAgICAgICAgICAgICBgW2RhdGEtYmFja2dyb3VuZC1jb2xvcj1cIiR7eX1cIl1gLFxuICAgICAgICAgICAgICAgICAgICB7IGJhY2tncm91bmRDb2xvcjogeCB9XG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKChhID0gZS5jb21wb25lbnRTdHlsZXMpID09IG51bGwgPyB2b2lkIDAgOiBhLmNhbGwoZSwgZSkuRWRpdG9yKSB8fCB7fVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBUb29sYmFyOiB7XG4gICAgICAgIHN0eWxlczogKCkgPT4ge1xuICAgICAgICAgIHZhciBhO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb290OiBVLm1lcmdlKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5tZW51LmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgYm94U2hhZG93OiBuLFxuICAgICAgICAgICAgICAgIGJvcmRlcjogbyxcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGQsXG4gICAgICAgICAgICAgICAgZmxleFdyYXA6IFwibm93cmFwXCIsXG4gICAgICAgICAgICAgICAgZ2FwOiBcIjJweFwiLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMnB4XCIsXG4gICAgICAgICAgICAgICAgd2lkdGg6IFwiZml0LWNvbnRlbnRcIixcbiAgICAgICAgICAgICAgICAvLyBCdXR0b24gKGluY2x1ZGluZyBkcm9wZG93biB0YXJnZXQpXG4gICAgICAgICAgICAgICAgXCIubWFudGluZS1CdXR0b24tcm9vdCwgLm1hbnRpbmUtQWN0aW9uSWNvbi1yb290XCI6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMubWVudS5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogZyxcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5tZW51LnRleHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEhvdmVyZWQgYnV0dG9uXG4gICAgICAgICAgICAgICAgXCIubWFudGluZS1CdXR0b24tcm9vdDpob3ZlciwgLm1hbnRpbmUtQWN0aW9uSWNvbi1yb290OmhvdmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMuaG92ZXJlZC5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5ob3ZlcmVkLnRleHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIFNlbGVjdGVkIGJ1dHRvblxuICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtQnV0dG9uLXJvb3RbZGF0YS1zZWxlY3RlZF0sIC5tYW50aW5lLUFjdGlvbkljb24tcm9vdFtkYXRhLXNlbGVjdGVkXVwiOiB7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuY29sb3JzLnNlbGVjdGVkLmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLnNlbGVjdGVkLnRleHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIERpc2FibGVkIGJ1dHRvblxuICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtQnV0dG9uLXJvb3RbZGF0YS1kaXNhYmxlZF0sIC5tYW50aW5lLUFjdGlvbkljb24tcm9vdFtkYXRhLWRpc2FibGVkXVwiOiB7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuY29sb3JzLmRpc2FibGVkLmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLmRpc2FibGVkLnRleHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgXCIubWFudGluZS1NZW51LWRyb3Bkb3duXCI6IHtcbiAgICAgICAgICAgICAgICAgIC8vIERyb3Bkb3duIGl0ZW1cbiAgICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtTWVudS1pdGVtXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMTJweFwiLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiMzBweFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLU1lbnUtaXRlbVJpZ2h0U2VjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiNXB4XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtTWVudS1pdGVtOmhvdmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5ob3ZlcmVkLmJhY2tncm91bmRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICgoYSA9IGUuY29tcG9uZW50U3R5bGVzKSA9PSBudWxsID8gdm9pZCAwIDogYS5jYWxsKGUsIGUpLlRvb2xiYXIpIHx8IHt9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFRvb2xiYXJJbnB1dERyb3Bkb3duOiB7XG4gICAgICAgIHN0eWxlczogKCkgPT4ge1xuICAgICAgICAgIHZhciBhO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb290OiBVLm1lcmdlKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5tZW51LmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgYm9yZGVyOiBvLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogZCxcbiAgICAgICAgICAgICAgICBib3hTaGFkb3c6IG4sXG4gICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLm1lbnUudGV4dCxcbiAgICAgICAgICAgICAgICBnYXA6IFwiNHB4XCIsXG4gICAgICAgICAgICAgICAgbWluV2lkdGg6IFwiMTQ1cHhcIixcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjJweFwiLFxuICAgICAgICAgICAgICAgIC8vIFJvd1xuICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtR3JvdXAtcm9vdFwiOiB7XG4gICAgICAgICAgICAgICAgICBmbGV4V3JhcDogXCJub3dyYXBcIixcbiAgICAgICAgICAgICAgICAgIC8vIFJvdyBpbnB1dCBmaWVsZFxuICAgICAgICAgICAgICAgICAgXCIubWFudGluZS1UZXh0SW5wdXQtcm9vdCwgLm1hbnRpbmUtRmlsZUlucHV0LXJvb3RcIjoge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIzMDBweFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLVRleHRJbnB1dC13cmFwcGVyOmhvdmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuY29sb3JzLmhvdmVyZWQuYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLVRleHRJbnB1dC13cmFwcGVyLCAubWFudGluZS1GaWxlSW5wdXQtd3JhcHBlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IFwiNHB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCIubWFudGluZS1GaWxlSW5wdXQtaWNvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMubWVudS50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLVRleHRJbnB1dC1pbnB1dCwgLm1hbnRpbmUtRmlsZUlucHV0LWlucHV0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIxMnB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLUZpbGVJbnB1dC1wbGFjZWhvbGRlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy5tZW51LnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtRmlsZUlucHV0LWlucHV0OmhvdmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMuaG92ZXJlZC5iYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAoKGEgPSBlLmNvbXBvbmVudFN0eWxlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGEuY2FsbChlLCBlKS5FZGl0SHlwZXJsaW5rTWVudSkgfHwge31cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgVG9vbHRpcDoge1xuICAgICAgICBzdHlsZXM6ICgpID0+IHtcbiAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vdDogVS5tZXJnZShcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMudG9vbHRpcC5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgIGJvcmRlcjogbyxcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGQsXG4gICAgICAgICAgICAgICAgYm94U2hhZG93OiBuLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy50b29sdGlwLnRleHQsXG4gICAgICAgICAgICAgICAgcGFkZGluZzogXCI0cHggMTBweFwiLFxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICBcImRpdiB+IGRpdlwiOiB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvcnMudG9vbHRpcC50ZXh0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAoKGEgPSBlLmNvbXBvbmVudFN0eWxlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGEuY2FsbChlLCBlKS5Ub29sdGlwKSB8fCB7fVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBTbGFzaE1lbnU6IHtcbiAgICAgICAgc3R5bGVzOiAoKSA9PiB7XG4gICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb3Q6IFUubWVyZ2UoXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtTWVudS1pdGVtXCI6IHtcbiAgICAgICAgICAgICAgICAgIC8vIEljb25cbiAgICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtTWVudS1pdGVtSWNvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5jb2xvcnMudG9vbHRpcC5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGcsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9ycy50b29sdGlwLnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiOHB4XCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAvLyBUZXh0XG4gICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLU1lbnUtaXRlbUxhYmVsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIjE2cHhcIixcbiAgICAgICAgICAgICAgICAgICAgXCIubWFudGluZS1TdGFjay1yb290XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICBnYXA6IFwiMFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAvLyBCYWRnZSAoa2V5Ym9hcmQgc2hvcnRjdXQpXG4gICAgICAgICAgICAgICAgICBcIi5tYW50aW5lLU1lbnUtaXRlbVJpZ2h0U2VjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiLm1hbnRpbmUtQmFkZ2Utcm9vdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy50b29sdGlwLmJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLnRvb2x0aXAudGV4dFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAoKGEgPSBlLmNvbXBvbmVudFN0eWxlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGEuY2FsbChlLCBlKS5TbGFzaE1lbnUpIHx8IHt9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFNpZGVNZW51OiB7XG4gICAgICAgIHN0eWxlczogKCkgPT4ge1xuICAgICAgICAgIHZhciBhO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb290OiBVLm1lcmdlKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICAgICAgXCIubWFudGluZS1VbnN0eWxlZEJ1dHRvbi1yb290XCI6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3JzLnNpZGVNZW51XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIi5tYW50aW5lLVVuc3R5bGVkQnV0dG9uLXJvb3Q6aG92ZXJcIjoge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLmNvbG9ycy5ob3ZlcmVkLmJhY2tncm91bmRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICgoYSA9IGUuY29tcG9uZW50U3R5bGVzKSA9PSBudWxsID8gdm9pZCAwIDogYS5jYWxsKGUsIGUpLlNpZGVNZW51KSB8fCB7fVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGZvbnRGYW1pbHk6IGUuZm9udEZhbWlseSxcbiAgICBvdGhlcjoge1xuICAgICAgdGV4dENvbG9yczogaSxcbiAgICAgIGJhY2tncm91bmRDb2xvcnM6IHNcbiAgICB9XG4gIH07XG59LCBfZSA9IGFlKChlLCBuKSA9PiB7XG4gIGNvbnN0IHsgY2xhc3NlczogbyB9ID0gJCh7IHJvb3Q6IHt9IH0pKHZvaWQgMCwge1xuICAgIG5hbWU6IFwiVG9vbGJhclwiXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIEhlLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZS5jbGFzc05hbWUgPyBgJHtvLnJvb3R9ICR7ZS5jbGFzc05hbWV9YCA6IG8ucm9vdCxcbiAgICAgIHJlZjogbixcbiAgICAgIC4uLmUsXG4gICAgICBjaGlsZHJlbjogZS5jaGlsZHJlblxuICAgIH1cbiAgKTtcbn0pO1xudmFyIHh0ID0ge1xuICBjb2xvcjogdm9pZCAwLFxuICBzaXplOiB2b2lkIDAsXG4gIGNsYXNzTmFtZTogdm9pZCAwLFxuICBzdHlsZTogdm9pZCAwLFxuICBhdHRyOiB2b2lkIDBcbn0sIGN0ID0gTi5jcmVhdGVDb250ZXh0ICYmIE4uY3JlYXRlQ29udGV4dCh4dCksIFcgPSBnbG9iYWxUaGlzICYmIGdsb2JhbFRoaXMuX19hc3NpZ24gfHwgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBXID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbihlKSB7XG4gICAgZm9yICh2YXIgbiwgbyA9IDEsIGkgPSBhcmd1bWVudHMubGVuZ3RoOyBvIDwgaTsgbysrKSB7XG4gICAgICBuID0gYXJndW1lbnRzW29dO1xuICAgICAgZm9yICh2YXIgcyBpbiBuKVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgcykgJiYgKGVbc10gPSBuW3NdKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH0sIFcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0sIEJyID0gZ2xvYmFsVGhpcyAmJiBnbG9iYWxUaGlzLl9fcmVzdCB8fCBmdW5jdGlvbihlLCBuKSB7XG4gIHZhciBvID0ge307XG4gIGZvciAodmFyIGkgaW4gZSlcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgaSkgJiYgbi5pbmRleE9mKGkpIDwgMCAmJiAob1tpXSA9IGVbaV0pO1xuICBpZiAoZSAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09IFwiZnVuY3Rpb25cIilcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHMgPCBpLmxlbmd0aDsgcysrKVxuICAgICAgbi5pbmRleE9mKGlbc10pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSwgaVtzXSkgJiYgKG9baVtzXV0gPSBlW2lbc11dKTtcbiAgcmV0dXJuIG87XG59O1xuZnVuY3Rpb24gbXQoZSkge1xuICByZXR1cm4gZSAmJiBlLm1hcChmdW5jdGlvbihuLCBvKSB7XG4gICAgcmV0dXJuIE4uY3JlYXRlRWxlbWVudChuLnRhZywgVyh7XG4gICAgICBrZXk6IG9cbiAgICB9LCBuLmF0dHIpLCBtdChuLmNoaWxkKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaihlKSB7XG4gIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIE4uY3JlYXRlRWxlbWVudChfciwgVyh7XG4gICAgICBhdHRyOiBXKHt9LCBlLmF0dHIpXG4gICAgfSwgbiksIG10KGUuY2hpbGQpKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF9yKGUpIHtcbiAgdmFyIG4gPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGkgPSBlLmF0dHIsIHMgPSBlLnNpemUsIGMgPSBlLnRpdGxlLCBkID0gQnIoZSwgW1wiYXR0clwiLCBcInNpemVcIiwgXCJ0aXRsZVwiXSksIGcgPSBzIHx8IG8uc2l6ZSB8fCBcIjFlbVwiLCBhO1xuICAgIHJldHVybiBvLmNsYXNzTmFtZSAmJiAoYSA9IG8uY2xhc3NOYW1lKSwgZS5jbGFzc05hbWUgJiYgKGEgPSAoYSA/IGEgKyBcIiBcIiA6IFwiXCIpICsgZS5jbGFzc05hbWUpLCBOLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgVyh7XG4gICAgICBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsXG4gICAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgICAgc3Ryb2tlV2lkdGg6IFwiMFwiXG4gICAgfSwgby5hdHRyLCBpLCBkLCB7XG4gICAgICBjbGFzc05hbWU6IGEsXG4gICAgICBzdHlsZTogVyhXKHtcbiAgICAgICAgY29sb3I6IGUuY29sb3IgfHwgby5jb2xvclxuICAgICAgfSwgby5zdHlsZSksIGUuc3R5bGUpLFxuICAgICAgaGVpZ2h0OiBnLFxuICAgICAgd2lkdGg6IGcsXG4gICAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgfSksIGMgJiYgTi5jcmVhdGVFbGVtZW50KFwidGl0bGVcIiwgbnVsbCwgYyksIGUuY2hpbGRyZW4pO1xuICB9O1xuICByZXR1cm4gY3QgIT09IHZvaWQgMCA/IE4uY3JlYXRlRWxlbWVudChjdC5Db25zdW1lciwgbnVsbCwgZnVuY3Rpb24obykge1xuICAgIHJldHVybiBuKG8pO1xuICB9KSA6IG4oeHQpO1xufVxuZnVuY3Rpb24gRHIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTIzIDEybC03LjA3MSA3LjA3MS0xLjQxNC0xLjQxNEwyMC4xNzIgMTJsLTUuNjU3LTUuNjU3IDEuNDE0LTEuNDE0TDIzIDEyek0zLjgyOCAxMmw1LjY1NyA1LjY1Ny0xLjQxNCAxLjQxNEwxIDEybDcuMDcxLTcuMDcxIDEuNDE0IDEuNDE0TDMuODI4IDEyelwiIH0gfV0gfV0gfSkoZSk7XG59XG5mdW5jdGlvbiBQcihlKSB7XG4gIHJldHVybiBqKHsgdGFnOiBcInN2Z1wiLCBhdHRyOiB7IHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIgfSwgY2hpbGQ6IFt7IHRhZzogXCJnXCIsIGF0dHI6IHt9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsOiBcIm5vbmVcIiwgZDogXCJNMCAwaDI0djI0SDB6XCIgfSB9LCB7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZDogXCJNMyA0aDE4djJIM1Y0em0yIDE1aDE0djJINXYtMnptLTItNWgxOHYySDN2LTJ6bTItNWgxNHYySDVWOXpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gT3IoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTMgNGgxOHYySDNWNHptMCAxNWgxOHYySDN2LTJ6bTAtNWgxOHYySDN2LTJ6bTAtNWgxOHYySDNWOXpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gRnIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTMgNGgxOHYySDNWNHptMCAxNWgxNHYySDN2LTJ6bTAtNWgxOHYySDN2LTJ6bTAtNWgxNHYySDNWOXpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gQXIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTMgNGgxOHYySDNWNHptNCAxNWgxNHYySDd2LTJ6bS00LTVoMTh2Mkgzdi0yem00LTVoMTR2Mkg3Vjl6XCIgfSB9XSB9XSB9KShlKTtcbn1cbmZ1bmN0aW9uIExyKGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmlld0JveDogXCIwIDAgMjQgMjRcIiB9LCBjaGlsZDogW3sgdGFnOiBcImdcIiwgYXR0cjoge30sIGNoaWxkOiBbeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGZpbGw6IFwibm9uZVwiLCBkOiBcIk0wIDBoMjR2MjRIMHpcIiB9IH0sIHsgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBkOiBcIk04IDExaDQuNWEyLjUgMi41IDAgMSAwIDAtNUg4djV6bTEwIDQuNWE0LjUgNC41IDAgMCAxLTQuNSA0LjVINlY0aDYuNWE0LjUgNC41IDAgMCAxIDMuMjU2IDcuNjA2QTQuNDk4IDQuNDk4IDAgMCAxIDE4IDE1LjV6TTggMTN2NWg1LjVhMi41IDIuNSAwIDEgMCAwLTVIOHpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24ga3QoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMEgyNFYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTEzIDIwaC0ydi03SDR2N0gyVjRoMnY3aDdWNGgydjE2em04LTEydjEyaC0ydi05Ljc5NmwtMiAuNTM2VjguNjdMMTkuNSA4SDIxelwiIH0gfV0gfV0gfSkoZSk7XG59XG5mdW5jdGlvbiB5dChlKSB7XG4gIHJldHVybiBqKHsgdGFnOiBcInN2Z1wiLCBhdHRyOiB7IHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIgfSwgY2hpbGQ6IFt7IHRhZzogXCJnXCIsIGF0dHI6IHt9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsOiBcIm5vbmVcIiwgZDogXCJNMCAwSDI0VjI0SDB6XCIgfSB9LCB7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZDogXCJNNCA0djdoN1Y0aDJ2MTZoLTJ2LTdINHY3SDJWNGgyem0xNC41IDRjMi4wNzEgMCAzLjc1IDEuNjc5IDMuNzUgMy43NSAwIC44NTctLjI4OCAxLjY0OC0uNzcyIDIuMjhsLS4xNDguMThMMTguMDM0IDE4SDIydjJoLTd2LTEuNTU2bDQuODItNS41NDZjLjI2OC0uMzA3LjQzLS43MDkuNDMtMS4xNDggMC0uOTY2LS43ODQtMS43NS0xLjc1LTEuNzUtLjkxOCAwLTEuNjcxLjcwNy0xLjc0NCAxLjYwNmwtLjAwNi4xNDRoLTJDMTQuNzUgOS42NzkgMTYuNDI5IDggMTguNSA4elwiIH0gfV0gfV0gfSkoZSk7XG59XG5mdW5jdGlvbiBwdChlKSB7XG4gIHJldHVybiBqKHsgdGFnOiBcInN2Z1wiLCBhdHRyOiB7IHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIgfSwgY2hpbGQ6IFt7IHRhZzogXCJnXCIsIGF0dHI6IHt9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsOiBcIm5vbmVcIiwgZDogXCJNMCAwSDI0VjI0SDB6XCIgfSB9LCB7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZDogXCJNMjIgOGwtLjAwMiAyLTIuNTA1IDIuODgzYzEuNTkuNDM1IDIuNzU3IDEuODkgMi43NTcgMy42MTcgMCAyLjA3MS0xLjY3OSAzLjc1LTMuNzUgMy43NS0xLjgyNiAwLTMuMzQ3LTEuMzA1LTMuNjgyLTMuMDMzbDEuOTY0LS4zODJjLjE1Ni44MDYuODY2IDEuNDE1IDEuNzE4IDEuNDE1Ljk2NiAwIDEuNzUtLjc4NCAxLjc1LTEuNzVzLS43ODQtMS43NS0xLjc1LTEuNzVjLS4yODYgMC0uNTU2LjA2OS0uNzk0LjE5bC0xLjMwNy0xLjU0N0wxOS4zNSAxMEgxNVY4aDd6TTQgNHY3aDdWNGgydjE2aC0ydi03SDR2N0gyVjRoMnpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gVnIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTMgNGgxOHYySDNWNHptMCAxNWgxOHYySDN2LTJ6bTgtNWgxMHYySDExdi0yem0wLTVoMTB2MkgxMVY5em0tOCAzLjVMNyA5djdsLTQtMy41elwiIH0gfV0gfV0gfSkoZSk7XG59XG5mdW5jdGlvbiBVcihlKSB7XG4gIHJldHVybiBqKHsgdGFnOiBcInN2Z1wiLCBhdHRyOiB7IHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIgfSwgY2hpbGQ6IFt7IHRhZzogXCJnXCIsIGF0dHI6IHt9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsOiBcIm5vbmVcIiwgZDogXCJNMCAwaDI0djI0SDB6XCIgfSB9LCB7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZDogXCJNMyA0aDE4djJIM1Y0em0wIDE1aDE4djJIM3YtMnptOC01aDEwdjJIMTF2LTJ6bTAtNWgxMHYySDExVjl6bS00IDMuNUwzIDE2VjlsNCAzLjV6XCIgfSB9XSB9XSB9KShlKTtcbn1cbmZ1bmN0aW9uIE5yKGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmlld0JveDogXCIwIDAgMjQgMjRcIiB9LCBjaGlsZDogW3sgdGFnOiBcImdcIiwgYXR0cjoge30sIGNoaWxkOiBbeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGZpbGw6IFwibm9uZVwiLCBkOiBcIk0wIDBoMjR2MjRIMHpcIiB9IH0sIHsgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBkOiBcIk0xNSAyMEg3di0yaDIuOTI3bDIuMTE2LTEySDlWNGg4djJoLTIuOTI3bC0yLjExNiAxMkgxNXpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gJHIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTE3IDE3aDV2MmgtM3YzaC0ydi01ek03IDdIMlY1aDNWMmgydjV6bTExLjM2NCA4LjUzNkwxNi45NSAxNC4xMmwxLjQxNC0xLjQxNGE1IDUgMCAxIDAtNy4wNzEtNy4wNzFMOS44NzkgNy4wNSA4LjQ2NCA1LjYzNiA5Ljg4IDQuMjIyYTcgNyAwIDAgMSA5LjkgOS45bC0xLjQxNSAxLjQxNHptLTIuODI4IDIuODI4bC0xLjQxNSAxLjQxNGE3IDcgMCAwIDEtOS45LTkuOWwxLjQxNS0xLjQxNEw3LjA1IDkuODhsLTEuNDE0IDEuNDE0YTUgNSAwIDEgMCA3LjA3MSA3LjA3MWwxLjQxNC0xLjQxNCAxLjQxNSAxLjQxNHptLS43MDgtMTAuNjA3bDEuNDE1IDEuNDE1LTcuMDcxIDcuMDctMS40MTUtMS40MTQgNy4wNzEtNy4wN3pcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gQ3QoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTE4LjM2NCAxNS41MzZMMTYuOTUgMTQuMTJsMS40MTQtMS40MTRhNSA1IDAgMSAwLTcuMDcxLTcuMDcxTDkuODc5IDcuMDUgOC40NjQgNS42MzYgOS44OCA0LjIyMmE3IDcgMCAwIDEgOS45IDkuOWwtMS40MTUgMS40MTR6bS0yLjgyOCAyLjgyOGwtMS40MTUgMS40MTRhNyA3IDAgMCAxLTkuOS05LjlsMS40MTUtMS40MTRMNy4wNSA5Ljg4bC0xLjQxNCAxLjQxNGE1IDUgMCAxIDAgNy4wNzEgNy4wNzFsMS40MTQtMS40MTQgMS40MTUgMS40MTR6bS0uNzA4LTEwLjYwN2wxLjQxNSAxLjQxNS03LjA3MSA3LjA3LTEuNDE1LTEuNDE0IDcuMDcxLTcuMDd6XCIgfSB9XSB9XSB9KShlKTtcbn1cbmZ1bmN0aW9uIGp0KGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmlld0JveDogXCIwIDAgMjQgMjRcIiB9LCBjaGlsZDogW3sgdGFnOiBcImdcIiwgYXR0cjoge30sIGNoaWxkOiBbeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGZpbGw6IFwibm9uZVwiLCBkOiBcIk0wIDBoMjR2MjRIMHpcIiB9IH0sIHsgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBkOiBcIk04IDRoMTN2Mkg4VjR6TTUgM3YzaDF2MUgzVjZoMVY0SDNWM2gyek0zIDE0di0yLjVoMlYxMUgzdi0xaDN2Mi41SDR2LjVoMnYxSDN6bTIgNS41SDN2LTFoMlYxOEgzdi0xaDN2NEgzdi0xaDJ2LS41ek04IDExaDEzdjJIOHYtMnptMCA3aDEzdjJIOHYtMnpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gVHQoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTggNGgxM3YySDhWNHpNNC41IDYuNWExLjUgMS41IDAgMSAxIDAtMyAxLjUgMS41IDAgMCAxIDAgM3ptMCA3YTEuNSAxLjUgMCAxIDEgMC0zIDEuNSAxLjUgMCAwIDEgMCAzem0wIDYuOWExLjUgMS41IDAgMSAxIDAtMyAxLjUgMS41IDAgMCAxIDAgM3pNOCAxMWgxM3YySDh2LTJ6bTAgN2gxM3YySDh2LTJ6XCIgfSB9XSB9XSB9KShlKTtcbn1cbmZ1bmN0aW9uIFdyKGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmlld0JveDogXCIwIDAgMjQgMjRcIiB9LCBjaGlsZDogW3sgdGFnOiBcImdcIiwgYXR0cjoge30sIGNoaWxkOiBbeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGZpbGw6IFwibm9uZVwiLCBkOiBcIk0wIDBoMjR2MjRIMHpcIiB9IH0sIHsgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBkOiBcIk0xNy4xNTQgMTRjLjIzLjUxNi4zNDYgMS4wOS4zNDYgMS43MiAwIDEuMzQyLS41MjQgMi4zOTItMS41NzEgMy4xNDdDMTQuODggMTkuNjIyIDEzLjQzMyAyMCAxMS41ODYgMjBjLTEuNjQgMC0zLjI2My0uMzgxLTQuODctMS4xNDRWMTYuNmMxLjUyLjg3NyAzLjA3NSAxLjMxNiA0LjY2NiAxLjMxNiAyLjU1MSAwIDMuODMtLjczMiAzLjgzOS0yLjE5N2EyLjIxIDIuMjEgMCAwIDAtLjY0OC0xLjYwM2wtLjEyLS4xMTdIM3YtMmgxOHYyaC0zLjg0NnptLTQuMDc4LTNINy42MjlhNC4wODYgNC4wODYgMCAwIDEtLjQ4MS0uNTIyQzYuNzE2IDkuOTIgNi41IDkuMjQ2IDYuNSA4LjQ1MmMwLTEuMjM2LjQ2Ni0yLjI4NyAxLjM5Ny0zLjE1M0M4LjgzIDQuNDMzIDEwLjI3MSA0IDEyLjIyMiA0YzEuNDcxIDAgMi44NzkuMzI4IDQuMjIyLjk4NHYyLjE1MmMtMS4yLS42ODctMi41MTUtMS4wMy0zLjk0Ni0xLjAzLTIuNDggMC0zLjcxOS43ODItMy43MTkgMi4zNDYgMCAuNDIuMjE4Ljc4Ni42NTQgMS4wOTkuNDM2LjMxMy45NzQuNTYyIDEuNjEzLjc1LjYyLjE4IDEuMjk3LjQxNCAyLjAzLjY5OXpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gaWUoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTEzIDZ2MTVoLTJWNkg1VjRoMTR2MnpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gWXIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTggM3Y5YTQgNCAwIDEgMCA4IDBWM2gydjlhNiA2IDAgMSAxLTEyIDBWM2gyek00IDIwaDE2djJINHYtMnpcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gcXIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMGgyNHYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTUgMTEuMWwyLTIgNS41IDUuNSAzLjUtMy41IDMgM1Y1SDV2Ni4xek00IDNoMTZhMSAxIDAgMCAxIDEgMXYxNmExIDEgMCAwIDEtMSAxSDRhMSAxIDAgMCAxLTEtMVY0YTEgMSAwIDAgMSAxLTF6bTExLjUgN2ExLjUgMS41IDAgMSAxIDAtMyAxLjUgMS41IDAgMCAxIDAgM3pcIiB9IH1dIH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gS3IoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZ1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFt7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZmlsbDogXCJub25lXCIsIGQ6IFwiTTAgMEgyNFYyNEgwelwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTIwIDNjLjU1MiAwIDEgLjQ0OCAxIDF2MS43NTdsLTIgMlY1SDV2OC4xbDQtNCA0LjMyOCA0LjMyOS0xLjMyNyAxLjMyNy0uMDA2IDQuMjM5IDQuMjQ2LjAwNiAxLjMzLTEuMzNMMTguODk5IDE5SDE5di0yLjc1OGwyLTJWMjBjMCAuNTUyLS40NDggMS0xIDFINGMtLjU1MiAwLTEtLjQ0OC0xLTFWNGMwLS41NTIuNDQ4LTEgMS0xaDE2em0xLjc3OCA0LjgwOGwxLjQxNCAxLjQxNEwxNS40MTQgMTdsLTEuNDE2LS4wMDIuMDAyLTEuNDEyIDcuNzc4LTcuNzc4ek0xNS41IDdjLjgyOCAwIDEuNS42NzIgMS41IDEuNXMtLjY3MiAxLjUtMS41IDEuNVMxNCA5LjMyOCAxNCA4LjUgMTQuNjcyIDcgMTUuNSA3elwiIH0gfV0gfV0gfSkoZSk7XG59XG5mdW5jdGlvbiBHcihlKSB7XG4gIHJldHVybiBqKHsgdGFnOiBcInN2Z1wiLCBhdHRyOiB7IHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIgfSwgY2hpbGQ6IFt7IHRhZzogXCJnXCIsIGF0dHI6IHt9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsOiBcIm5vbmVcIiwgZDogXCJNMCAwaDI0djI0SDB6XCIgfSB9LCB7IHRhZzogXCJwYXRoXCIsIGF0dHI6IHsgZDogXCJNMTAgNnYySDV2MTFoMTF2LTVoMnY2YTEgMSAwIDAgMS0xIDFINGExIDEgMCAwIDEtMS0xVjdhMSAxIDAgMCAxIDEtMWg2em0xMS0zdjlsLTMuNzk0LTMuNzkzLTUuOTk5IDYtMS40MTQtMS40MTQgNS45OTktNkwxMiAzaDl6XCIgfSB9XSB9XSB9KShlKTtcbn1cbmZ1bmN0aW9uIFJlKGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmVyc2lvbjogXCIxLjJcIiwgYmFzZVByb2ZpbGU6IFwidGlueVwiLCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiIH0sIGNoaWxkOiBbeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTE2Ljk3MiA2LjI1MWMtLjk2Ny0uNTM4LTIuMTg1LS4xODgtMi43Mi43NzdsLTMuNzEzIDYuNjgyLTIuMTI1LTIuMTI1Yy0uNzgxLS43ODEtMi4wNDctLjc4MS0yLjgyOCAwLS43ODEuNzgxLS43ODEgMi4wNDcgMCAyLjgyOGw0IDRjLjM3OC4zNzkuODg4LjU4NyAxLjQxNC41ODdsLjI3Ny0uMDJjLjYyMS0uMDg3IDEuMTY2LS40NiAxLjQ3MS0xLjAwOWw1LTljLjUzNy0uOTY2LjE4OS0yLjE4My0uNzc2LTIuNzJ6XCIgfSB9XSB9KShlKTtcbn1cbmZ1bmN0aW9uIEpyKGUpIHtcbiAgY29uc3QgbiA9IGUuaWNvbjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICB3Lkl0ZW0sXG4gICAge1xuICAgICAgb25DbGljazogZS5vbkNsaWNrLFxuICAgICAgaWNvbjogbiAmJiAvKiBAX19QVVJFX18gKi8gci5qc3gobiwgeyBzaXplOiAxNiB9KSxcbiAgICAgIHJpZ2h0U2VjdGlvbjogZS5pc1NlbGVjdGVkID8gLyogQF9fUFVSRV9fICovIHIuanN4KFJlLCB7IHNpemU6IDE2IH0pIDogKFxuICAgICAgICAvLyBFbnN1cmVzIHNwYWNlIGZvciB0aWNrIGV2ZW4gaWYgaXRlbSBpc24ndCBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcImRpdlwiLCB7IHN0eWxlOiB7IHdpZHRoOiBcIjE2cHhcIiwgcGFkZGluZzogXCIwXCIgfSB9KVxuICAgICAgKSxcbiAgICAgIGRpc2FibGVkOiBlLmlzRGlzYWJsZWQsXG4gICAgICBjaGlsZHJlbjogZS50ZXh0XG4gICAgfSxcbiAgICBlLnRleHRcbiAgKTtcbn1cbmZ1bmN0aW9uIFhyKGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmlld0JveDogXCIwIDAgMjAgMjBcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiB9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsUnVsZTogXCJldmVub2RkXCIsIGQ6IFwiTTUuMjkzIDcuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCAxMC41ODZsMy4yOTMtMy4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNGwtNCA0YTEgMSAwIDAxLTEuNDE0IDBsLTQtNGExIDEgMCAwMTAtMS40MTR6XCIsIGNsaXBSdWxlOiBcImV2ZW5vZGRcIiB9IH1dIH0pKGUpO1xufVxuZnVuY3Rpb24gWnIoZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB2aWV3Qm94OiBcIjAgMCAyMCAyMFwiLCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiIH0sIGNoaWxkOiBbeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGZpbGxSdWxlOiBcImV2ZW5vZGRcIiwgZDogXCJNNy4yOTMgMTQuNzA3YTEgMSAwIDAxMC0xLjQxNEwxMC41ODYgMTAgNy4yOTMgNi43MDdhMSAxIDAgMDExLjQxNC0xLjQxNGw0IDRhMSAxIDAgMDEwIDEuNDE0bC00IDRhMSAxIDAgMDEtMS40MTQgMHpcIiwgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiIH0gfV0gfSkoZSk7XG59XG5jb25zdCBRciA9IGFlKChlLCBuKSA9PiB7XG4gIGNvbnN0IG8gPSBlLmljb247XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgSWUsXG4gICAge1xuICAgICAgbGVmdEljb246IG8gJiYgLyogQF9fUFVSRV9fICovIHIuanN4KG8sIHsgc2l6ZTogMTYgfSksXG4gICAgICByaWdodEljb246IC8qIEBfX1BVUkVfXyAqLyByLmpzeChYciwge30pLFxuICAgICAgc2l6ZTogXCJ4c1wiLFxuICAgICAgdmFyaWFudDogXCJzdWJ0bGVcIixcbiAgICAgIGRpc2FibGVkOiBlLmlzRGlzYWJsZWQsXG4gICAgICBvbkNsaWNrOiBlLm9uQ2xpY2ssXG4gICAgICByZWY6IG4sXG4gICAgICBjaGlsZHJlbjogZS50ZXh0XG4gICAgfVxuICApO1xufSk7XG5mdW5jdGlvbiB4ZSgpIHtcbiAgY29uc3QgZSA9IEEobnVsbCk7XG4gIHJldHVybiB7XG4gICAgcmVmOiBlLFxuICAgIHVwZGF0ZU1heEhlaWdodDogKCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChlLmN1cnJlbnQgJiYgZS5jdXJyZW50LmNoaWxkRWxlbWVudENvdW50ID4gMCkge1xuICAgICAgICAgIGUuY3VycmVudC5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZS5tYXhIZWlnaHQgPSBcIm5vbmVcIjtcbiAgICAgICAgICBjb25zdCBuID0gZS5jdXJyZW50LmZpcnN0RWxlbWVudENoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgIGUuY3VycmVudC5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZS5tYXhIZWlnaHQgPSBgJHtNYXRoLm1pbihcbiAgICAgICAgICAgIG4udG9wID49IDAgPyB3aW5kb3cuaW5uZXJIZWlnaHQgLSBuLnRvcCAtIDIwIDogbi5ib3R0b20gLSAyMFxuICAgICAgICAgICl9cHhgO1xuICAgICAgICB9XG4gICAgICB9LCAxMCk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZW4oZSkge1xuICBjb25zdCBuID0gZS5pdGVtcy5maWx0ZXIoKHMpID0+IHMuaXNTZWxlY3RlZClbMF0sIHsgcmVmOiBvLCB1cGRhdGVNYXhIZWlnaHQ6IGkgfSA9IHhlKCk7XG4gIHJldHVybiBuID8gLyogQF9fUFVSRV9fICovIHIuanN4cyhcbiAgICB3LFxuICAgIHtcbiAgICAgIGV4aXRUcmFuc2l0aW9uRHVyYXRpb246IDAsXG4gICAgICBkaXNhYmxlZDogZS5pc0Rpc2FibGVkLFxuICAgICAgb25PcGVuOiBpLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KHcuVGFyZ2V0LCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgICAgICAgUXIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGV4dDogbi50ZXh0LFxuICAgICAgICAgICAgaWNvbjogbi5pY29uLFxuICAgICAgICAgICAgaXNEaXNhYmxlZDogbi5pc0Rpc2FibGVkXG4gICAgICAgICAgfVxuICAgICAgICApIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8gci5qc3goXCJkaXZcIiwgeyByZWY6IG8sIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3gody5Ecm9wZG93biwgeyBjaGlsZHJlbjogZS5pdGVtcy5tYXAoKHMpID0+IC8qIEBfX1BVUkVfXyAqLyByLmpzeChKciwgeyAuLi5zIH0sIHMudGV4dCkpIH0pIH0pXG4gICAgICBdXG4gICAgfVxuICApIDogbnVsbDtcbn1cbmZ1bmN0aW9uIHRuKGUsIG4pIHtcbiAgQigoKSA9PiAoZS5fdGlwdGFwRWRpdG9yLm9uKFwidXBkYXRlXCIsIG4pLCAoKSA9PiB7XG4gICAgZS5fdGlwdGFwRWRpdG9yLm9mZihcInVwZGF0ZVwiLCBuKTtcbiAgfSksIFtuLCBlLl90aXB0YXBFZGl0b3JdKTtcbn1cbmZ1bmN0aW9uIHJuKGUsIG4pIHtcbiAgQigoKSA9PiAoZS5fdGlwdGFwRWRpdG9yLm9uKFwic2VsZWN0aW9uVXBkYXRlXCIsIG4pLCAoKSA9PiB7XG4gICAgZS5fdGlwdGFwRWRpdG9yLm9mZihcInNlbGVjdGlvblVwZGF0ZVwiLCBuKTtcbiAgfSksIFtuLCBlLl90aXB0YXBFZGl0b3JdKTtcbn1cbmZ1bmN0aW9uIHEoZSwgbikge1xuICB0bihlLCBuKSwgcm4oZSwgbik7XG59XG5jb25zdCBubiA9IFtcbiAge1xuICAgIG5hbWU6IFwiUGFyYWdyYXBoXCIsXG4gICAgdHlwZTogXCJwYXJhZ3JhcGhcIixcbiAgICBpY29uOiBpZSxcbiAgICBpc1NlbGVjdGVkOiAoZSkgPT4gZS50eXBlID09PSBcInBhcmFncmFwaFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkhlYWRpbmcgMVwiLFxuICAgIHR5cGU6IFwiaGVhZGluZ1wiLFxuICAgIHByb3BzOiB7IGxldmVsOiAxIH0sXG4gICAgaWNvbjoga3QsXG4gICAgaXNTZWxlY3RlZDogKGUpID0+IGUudHlwZSA9PT0gXCJoZWFkaW5nXCIgJiYgXCJsZXZlbFwiIGluIGUucHJvcHMgJiYgZS5wcm9wcy5sZXZlbCA9PT0gXCIxXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiSGVhZGluZyAyXCIsXG4gICAgdHlwZTogXCJoZWFkaW5nXCIsXG4gICAgcHJvcHM6IHsgbGV2ZWw6IDIgfSxcbiAgICBpY29uOiB5dCxcbiAgICBpc1NlbGVjdGVkOiAoZSkgPT4gZS50eXBlID09PSBcImhlYWRpbmdcIiAmJiBcImxldmVsXCIgaW4gZS5wcm9wcyAmJiBlLnByb3BzLmxldmVsID09PSBcIjJcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJIZWFkaW5nIDNcIixcbiAgICB0eXBlOiBcImhlYWRpbmdcIixcbiAgICBwcm9wczogeyBsZXZlbDogMyB9LFxuICAgIGljb246IHB0LFxuICAgIGlzU2VsZWN0ZWQ6IChlKSA9PiBlLnR5cGUgPT09IFwiaGVhZGluZ1wiICYmIFwibGV2ZWxcIiBpbiBlLnByb3BzICYmIGUucHJvcHMubGV2ZWwgPT09IFwiM1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJ1bGxldCBMaXN0XCIsXG4gICAgdHlwZTogXCJidWxsZXRMaXN0SXRlbVwiLFxuICAgIGljb246IFR0LFxuICAgIGlzU2VsZWN0ZWQ6IChlKSA9PiBlLnR5cGUgPT09IFwiYnVsbGV0TGlzdEl0ZW1cIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJOdW1iZXJlZCBMaXN0XCIsXG4gICAgdHlwZTogXCJudW1iZXJlZExpc3RJdGVtXCIsXG4gICAgaWNvbjoganQsXG4gICAgaXNTZWxlY3RlZDogKGUpID0+IGUudHlwZSA9PT0gXCJudW1iZXJlZExpc3RJdGVtXCJcbiAgfVxuXSwgb24gPSAoZSkgPT4ge1xuICBjb25zdCBbbiwgb10gPSBiKFxuICAgIGUuZWRpdG9yLmdldFRleHRDdXJzb3JQb3NpdGlvbigpLmJsb2NrXG4gICksIGkgPSBSKCgpID0+IChlLml0ZW1zIHx8IG5uKS5maWx0ZXIoKGQpID0+IHtcbiAgICBpZiAoIShkLnR5cGUgaW4gZS5lZGl0b3Iuc2NoZW1hKSlcbiAgICAgIHJldHVybiAhMTtcbiAgICBmb3IgKGNvbnN0IFtnLCBhXSBvZiBPYmplY3QuZW50cmllcyhkLnByb3BzIHx8IHt9KSkge1xuICAgICAgY29uc3QgeSA9IGUuZWRpdG9yLnNjaGVtYVtkLnR5cGVdLnByb3BTY2hlbWE7XG4gICAgICBpZiAoIShnIGluIHkpIHx8IHlbZ10udmFsdWVzICE9PSB2b2lkIDAgJiYgIXlbZ10udmFsdWVzLmluY2x1ZGVzKGEpKVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbiAgfSksIFtlLmVkaXRvciwgZS5pdGVtc10pLCBzID0gUihcbiAgICAoKSA9PiBpLmZpbmQoKGQpID0+IGQudHlwZSA9PT0gbi50eXBlKSAhPT0gdm9pZCAwLFxuICAgIFtuLnR5cGUsIGldXG4gICksIGMgPSBSKCgpID0+IHtcbiAgICBjb25zdCBkID0gKGcpID0+IHtcbiAgICAgIGUuZWRpdG9yLmZvY3VzKCksIGUuZWRpdG9yLnVwZGF0ZUJsb2NrKG4sIHtcbiAgICAgICAgdHlwZTogZy50eXBlLFxuICAgICAgICBwcm9wczogZy5wcm9wc1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gaS5tYXAoKGcpID0+ICh7XG4gICAgICB0ZXh0OiBnLm5hbWUsXG4gICAgICBpY29uOiBnLmljb24sXG4gICAgICBvbkNsaWNrOiAoKSA9PiBkKGcpLFxuICAgICAgaXNTZWxlY3RlZDogZy5pc1NlbGVjdGVkKG4pXG4gICAgfSkpO1xuICB9LCBbbiwgaSwgZS5lZGl0b3JdKTtcbiAgcmV0dXJuIHEoZS5lZGl0b3IsICgpID0+IHtcbiAgICBvKGUuZWRpdG9yLmdldFRleHRDdXJzb3JQb3NpdGlvbigpLmJsb2NrKTtcbiAgfSksIHMgPyAvKiBAX19QVVJFX18gKi8gci5qc3goZW4sIHsgaXRlbXM6IGMgfSkgOiBudWxsO1xufSwgYW4gPSAoZSkgPT4ge1xuICBjb25zdCB7IGNsYXNzZXM6IG4gfSA9ICQoeyByb290OiB7fSB9KSh2b2lkIDAsIHtcbiAgICBuYW1lOiBcIlRvb2x0aXBcIlxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoQmUsIHsgc3BhY2luZzogMCwgY2xhc3NOYW1lOiBuLnJvb3QsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KG9lLCB7IHNpemU6IFwic21cIiwgY2hpbGRyZW46IGUubWFpblRvb2x0aXAgfSksXG4gICAgZS5zZWNvbmRhcnlUb29sdGlwICYmIC8qIEBfX1BVUkVfXyAqLyByLmpzeChvZSwgeyBzaXplOiBcInhzXCIsIGNoaWxkcmVuOiBlLnNlY29uZGFyeVRvb2x0aXAgfSlcbiAgXSB9KTtcbn0sIFAgPSBhZShcbiAgKGUsIG4pID0+IHtcbiAgICBjb25zdCBvID0gZS5pY29uO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgICBZLFxuICAgICAge1xuICAgICAgICBjb250ZW50OiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgICAgICAgYW4sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWFpblRvb2x0aXA6IGUubWFpblRvb2x0aXAsXG4gICAgICAgICAgICBzZWNvbmRhcnlUb29sdGlwOiBlLnNlY29uZGFyeVRvb2x0aXBcbiAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIHRyaWdnZXI6IFwibW91c2VlbnRlclwiLFxuICAgICAgICBjaGlsZHJlbjogZS5jaGlsZHJlbiA/IC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoXG4gICAgICAgICAgSWUsXG4gICAgICAgICAge1xuICAgICAgICAgICAgb25DbGljazogZS5vbkNsaWNrLFxuICAgICAgICAgICAgXCJkYXRhLXNlbGVjdGVkXCI6IGUuaXNTZWxlY3RlZCA/IFwidHJ1ZVwiIDogdm9pZCAwLFxuICAgICAgICAgICAgXCJkYXRhLXRlc3RcIjogZS5tYWluVG9vbHRpcC5zbGljZSgwLCAxKS50b0xvd2VyQ2FzZSgpICsgZS5tYWluVG9vbHRpcC5yZXBsYWNlKC9cXHMrL2csIFwiXCIpLnNsaWNlKDEpLFxuICAgICAgICAgICAgc2l6ZTogXCJ4c1wiLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGUuaXNEaXNhYmxlZCB8fCAhMSxcbiAgICAgICAgICAgIHJlZjogbixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG8gJiYgLyogQF9fUFVSRV9fICovIHIuanN4KG8sIHt9KSxcbiAgICAgICAgICAgICAgZS5jaGlsZHJlblxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgKSA6IC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgICAgICBndCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBvbkNsaWNrOiBlLm9uQ2xpY2ssXG4gICAgICAgICAgICBcImRhdGEtc2VsZWN0ZWRcIjogZS5pc1NlbGVjdGVkID8gXCJ0cnVlXCIgOiB2b2lkIDAsXG4gICAgICAgICAgICBcImRhdGEtdGVzdFwiOiBlLm1haW5Ub29sdGlwLnNsaWNlKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBlLm1haW5Ub29sdGlwLnJlcGxhY2UoL1xccysvZywgXCJcIikuc2xpY2UoMSksXG4gICAgICAgICAgICBzaXplOiAzMCxcbiAgICAgICAgICAgIGRpc2FibGVkOiBlLmlzRGlzYWJsZWQgfHwgITEsXG4gICAgICAgICAgICByZWY6IG4sXG4gICAgICAgICAgICBjaGlsZHJlbjogbyAmJiAvKiBAX19QVVJFX18gKi8gci5qc3gobywge30pXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIFEoZSkge1xuICBjb25zdCBbbiwgb10gPSBiKFxuICAgICgpID0+IHtcbiAgICAgIHZhciBpO1xuICAgICAgcmV0dXJuICgoaSA9IGUuZ2V0U2VsZWN0aW9uKCkpID09IG51bGwgPyB2b2lkIDAgOiBpLmJsb2NrcykgfHwgW2UuZ2V0VGV4dEN1cnNvclBvc2l0aW9uKCkuYmxvY2tdO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIHEoXG4gICAgZSxcbiAgICAoKSA9PiB7XG4gICAgICB2YXIgaTtcbiAgICAgIHJldHVybiBvKFxuICAgICAgICAoKGkgPSBlLmdldFNlbGVjdGlvbigpKSA9PSBudWxsID8gdm9pZCAwIDogaS5ibG9ja3MpIHx8IFtlLmdldFRleHRDdXJzb3JQb3NpdGlvbigpLmJsb2NrXVxuICAgICAgKTtcbiAgICB9XG4gICksIG47XG59XG5jb25zdCBsbiA9ICgpID0+IHR5cGVvZiBuYXZpZ2F0b3IgPCBcInVcIiAmJiAoL01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pIHx8IC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAvTW9iaWxlXFwvXFx3Ky8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7XG5mdW5jdGlvbiBGKGUpIHtcbiAgcmV0dXJuIGxuKCkgPyBlLnJlcGxhY2UoXCJNb2RcIiwgXCLijJhcIikgOiBlLnJlcGxhY2UoXCJNb2RcIiwgXCJDdHJsXCIpO1xufVxuY29uc3QgY24gPSB7XG4gIGJvbGQ6IFwiTW9kK0JcIixcbiAgaXRhbGljOiBcIk1vZCtJXCIsXG4gIHVuZGVybGluZTogXCJNb2QrVVwiLFxuICBzdHJpa2U6IFwiTW9kK1NoaWZ0K1hcIixcbiAgY29kZTogXCJcIlxufSwgc24gPSB7XG4gIGJvbGQ6IExyLFxuICBpdGFsaWM6IE5yLFxuICB1bmRlcmxpbmU6IFlyLFxuICBzdHJpa2U6IFdyLFxuICBjb2RlOiBEclxufSwgaGUgPSAoZSkgPT4ge1xuICBjb25zdCBuID0gUShlLmVkaXRvciksIFtvLCBpXSA9IGIoXG4gICAgZS50b2dnbGVkU3R5bGUgaW4gZS5lZGl0b3IuZ2V0QWN0aXZlU3R5bGVzKClcbiAgKTtcbiAgcShlLmVkaXRvciwgKCkgPT4ge1xuICAgIGkoZS50b2dnbGVkU3R5bGUgaW4gZS5lZGl0b3IuZ2V0QWN0aXZlU3R5bGVzKCkpO1xuICB9KTtcbiAgY29uc3QgcyA9IChkKSA9PiB7XG4gICAgZS5lZGl0b3IuZm9jdXMoKSwgZS5lZGl0b3IudG9nZ2xlU3R5bGVzKHsgW2RdOiAhMCB9KTtcbiAgfTtcbiAgcmV0dXJuIFIoKCkgPT4gISFuLmZpbmQoKGQpID0+IGQuY29udGVudCAhPT0gdm9pZCAwKSwgW25dKSA/IC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBQLFxuICAgIHtcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHMoZS50b2dnbGVkU3R5bGUpLFxuICAgICAgaXNTZWxlY3RlZDogbyxcbiAgICAgIG1haW5Ub29sdGlwOiBlLnRvZ2dsZWRTdHlsZS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpICsgZS50b2dnbGVkU3R5bGUuc2xpY2UoMSksXG4gICAgICBzZWNvbmRhcnlUb29sdGlwOiBGKGNuW2UudG9nZ2xlZFN0eWxlXSksXG4gICAgICBpY29uOiBzbltlLnRvZ2dsZWRTdHlsZV1cbiAgICB9XG4gICkgOiBudWxsO1xufSwgZG4gPSB7XG4gIGxlZnQ6IEZyLFxuICBjZW50ZXI6IFByLFxuICByaWdodDogQXIsXG4gIGp1c3RpZnk6IE9yXG59LCBTZSA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSBRKGUuZWRpdG9yKSwgbyA9IFIoKCkgPT4ge1xuICAgIGNvbnN0IGMgPSBuWzBdO1xuICAgIGlmIChcInRleHRBbGlnbm1lbnRcIiBpbiBjLnByb3BzKVxuICAgICAgcmV0dXJuIGMucHJvcHMudGV4dEFsaWdubWVudDtcbiAgfSwgW25dKSwgaSA9IHooXG4gICAgKGMpID0+IHtcbiAgICAgIGUuZWRpdG9yLmZvY3VzKCk7XG4gICAgICBmb3IgKGNvbnN0IGQgb2YgbilcbiAgICAgICAgZS5lZGl0b3IudXBkYXRlQmxvY2soZCwge1xuICAgICAgICAgIHByb3BzOiB7IHRleHRBbGlnbm1lbnQ6IGMgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtlLmVkaXRvciwgbl1cbiAgKTtcbiAgcmV0dXJuIFIoKCkgPT4gISFuLmZpbmQoKGMpID0+IFwidGV4dEFsaWdubWVudFwiIGluIGMucHJvcHMpLCBbbl0pID8gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIFAsXG4gICAge1xuICAgICAgb25DbGljazogKCkgPT4gaShlLnRleHRBbGlnbm1lbnQpLFxuICAgICAgaXNTZWxlY3RlZDogbyA9PT0gZS50ZXh0QWxpZ25tZW50LFxuICAgICAgbWFpblRvb2x0aXA6IGUudGV4dEFsaWdubWVudCA9PT0gXCJqdXN0aWZ5XCIgPyBcIkp1c3RpZnkgVGV4dFwiIDogXCJBbGlnbiBUZXh0IFwiICsgZS50ZXh0QWxpZ25tZW50LnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBlLnRleHRBbGlnbm1lbnQuc2xpY2UoMSksXG4gICAgICBpY29uOiBkbltlLnRleHRBbGlnbm1lbnRdXG4gICAgfVxuICApIDogbnVsbDtcbn0sIEVlID0gKGUpID0+IHtcbiAgY29uc3QgeyBjbGFzc2VzOiBuIH0gPSAkKHsgcm9vdDoge30gfSkodm9pZCAwLCB7XG4gICAgbmFtZTogXCJDb2xvckljb25cIlxuICB9KSwgbyA9IGUudGV4dENvbG9yIHx8IFwiZGVmYXVsdFwiLCBpID0gZS5iYWNrZ3JvdW5kQ29sb3IgfHwgXCJkZWZhdWx0XCIsIHMgPSBlLnNpemUgfHwgMTY7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgZnQsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBuLnJvb3QsXG4gICAgICBzeDogKGMpID0+ICh7XG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGMub3RoZXIuYmFja2dyb3VuZENvbG9yc1tpXSxcbiAgICAgICAgY29sb3I6IGMub3RoZXIudGV4dENvbG9yc1tvXSxcbiAgICAgICAgZm9udFNpemU6IChzICogMC43NSkudG9TdHJpbmcoKSArIFwicHhcIixcbiAgICAgICAgaGVpZ2h0OiBzLnRvU3RyaW5nKCkgKyBcInB4XCIsXG4gICAgICAgIGxpbmVIZWlnaHQ6IHMudG9TdHJpbmcoKSArIFwicHhcIixcbiAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICB3aWR0aDogcy50b1N0cmluZygpICsgXCJweFwiXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiBcIkFcIlxuICAgIH1cbiAgKTtcbn0sIHd0ID0gKGUpID0+IHtcbiAgY29uc3QgbiA9ICgpID0+IGUudGV4dCA/IC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoci5GcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeCh3LkxhYmVsLCB7IGNoaWxkcmVuOiBcIlRleHRcIiB9KSxcbiAgICBbXG4gICAgICBcImRlZmF1bHRcIixcbiAgICAgIFwiZ3JheVwiLFxuICAgICAgXCJicm93blwiLFxuICAgICAgXCJyZWRcIixcbiAgICAgIFwib3JhbmdlXCIsXG4gICAgICBcInllbGxvd1wiLFxuICAgICAgXCJncmVlblwiLFxuICAgICAgXCJibHVlXCIsXG4gICAgICBcInB1cnBsZVwiLFxuICAgICAgXCJwaW5rXCJcbiAgICBdLm1hcCgoaSkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgdy5JdGVtLFxuICAgICAge1xuICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgZS5vbkNsaWNrICYmIGUub25DbGljaygpLCBlLnRleHQuc2V0Q29sb3IoaSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBvbmVudDogXCJkaXZcIixcbiAgICAgICAgXCJkYXRhLXRlc3RcIjogXCJ0ZXh0LWNvbG9yLVwiICsgaSxcbiAgICAgICAgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KEVlLCB7IHRleHRDb2xvcjogaSwgc2l6ZTogZS5pY29uU2l6ZSB9KSxcbiAgICAgICAgcmlnaHRTZWN0aW9uOiBlLnRleHQuY29sb3IgPT09IGkgPyAvKiBAX19QVVJFX18gKi8gci5qc3goUmUsIHsgc2l6ZTogMTYsIHN0eWxlOiB7IHBhZGRpbmdMZWZ0OiBcIjhweFwiIH0gfSkgOiAvKiBAX19QVVJFX18gKi8gci5qc3goXCJkaXZcIiwgeyBzdHlsZTogeyB3aWR0aDogXCIyNHB4XCIsIHBhZGRpbmc6IFwiMFwiIH0gfSksXG4gICAgICAgIGNoaWxkcmVuOiBpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaS5zbGljZSgxKVxuICAgICAgfSxcbiAgICAgIFwidGV4dC1jb2xvci1cIiArIGlcbiAgICApKVxuICBdIH0pIDogbnVsbCwgbyA9ICgpID0+IGUuYmFja2dyb3VuZCA/IC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoci5GcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeCh3LkxhYmVsLCB7IGNoaWxkcmVuOiBcIkJhY2tncm91bmRcIiB9KSxcbiAgICBbXG4gICAgICBcImRlZmF1bHRcIixcbiAgICAgIFwiZ3JheVwiLFxuICAgICAgXCJicm93blwiLFxuICAgICAgXCJyZWRcIixcbiAgICAgIFwib3JhbmdlXCIsXG4gICAgICBcInllbGxvd1wiLFxuICAgICAgXCJncmVlblwiLFxuICAgICAgXCJibHVlXCIsXG4gICAgICBcInB1cnBsZVwiLFxuICAgICAgXCJwaW5rXCJcbiAgICBdLm1hcCgoaSkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgdy5JdGVtLFxuICAgICAge1xuICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgZS5vbkNsaWNrICYmIGUub25DbGljaygpLCBlLmJhY2tncm91bmQuc2V0Q29sb3IoaSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBvbmVudDogXCJkaXZcIixcbiAgICAgICAgXCJkYXRhLXRlc3RcIjogXCJiYWNrZ3JvdW5kLWNvbG9yLVwiICsgaSxcbiAgICAgICAgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KEVlLCB7IGJhY2tncm91bmRDb2xvcjogaSwgc2l6ZTogZS5pY29uU2l6ZSB9KSxcbiAgICAgICAgcmlnaHRTZWN0aW9uOiBlLmJhY2tncm91bmQuY29sb3IgPT09IGkgPyAvKiBAX19QVVJFX18gKi8gci5qc3goUmUsIHsgc2l6ZTogMTYsIHN0eWxlOiB7IHBhZGRpbmdMZWZ0OiBcIjhweFwiIH0gfSkgOiAvKiBAX19QVVJFX18gKi8gci5qc3goXCJkaXZcIiwgeyBzdHlsZTogeyB3aWR0aDogXCIyNHB4XCIsIHBhZGRpbmc6IFwiMFwiIH0gfSksXG4gICAgICAgIGNoaWxkcmVuOiBpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaS5zbGljZSgxKVxuICAgICAgfSxcbiAgICAgIFwiYmFja2dyb3VuZC1jb2xvci1cIiArIGlcbiAgICApKVxuICBdIH0pIDogbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoci5GcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChuLCB7fSksXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KG8sIHt9KVxuICBdIH0pO1xufSwgdW4gPSAoZSkgPT4ge1xuICBjb25zdCBuID0gUShlLmVkaXRvciksIFtvLCBpXSA9IGIoXG4gICAgZS5lZGl0b3IuZ2V0QWN0aXZlU3R5bGVzKCkudGV4dENvbG9yIHx8IFwiZGVmYXVsdFwiXG4gICksIFtzLCBjXSA9IGIoXG4gICAgZS5lZGl0b3IuZ2V0QWN0aXZlU3R5bGVzKCkuYmFja2dyb3VuZENvbG9yIHx8IFwiZGVmYXVsdFwiXG4gICk7XG4gIHEoZS5lZGl0b3IsICgpID0+IHtcbiAgICBpKGUuZWRpdG9yLmdldEFjdGl2ZVN0eWxlcygpLnRleHRDb2xvciB8fCBcImRlZmF1bHRcIiksIGMoXG4gICAgICBlLmVkaXRvci5nZXRBY3RpdmVTdHlsZXMoKS5iYWNrZ3JvdW5kQ29sb3IgfHwgXCJkZWZhdWx0XCJcbiAgICApO1xuICB9KTtcbiAgY29uc3QgeyByZWY6IGQsIHVwZGF0ZU1heEhlaWdodDogZyB9ID0geGUoKSwgYSA9IHooXG4gICAgKHApID0+IHtcbiAgICAgIGUuZWRpdG9yLmZvY3VzKCksIHAgPT09IFwiZGVmYXVsdFwiID8gZS5lZGl0b3IucmVtb3ZlU3R5bGVzKHsgdGV4dENvbG9yOiBwIH0pIDogZS5lZGl0b3IuYWRkU3R5bGVzKHsgdGV4dENvbG9yOiBwIH0pO1xuICAgIH0sXG4gICAgW2UuZWRpdG9yXVxuICApLCB5ID0geihcbiAgICAocCkgPT4ge1xuICAgICAgZS5lZGl0b3IuZm9jdXMoKSwgcCA9PT0gXCJkZWZhdWx0XCIgPyBlLmVkaXRvci5yZW1vdmVTdHlsZXMoeyBiYWNrZ3JvdW5kQ29sb3I6IHAgfSkgOiBlLmVkaXRvci5hZGRTdHlsZXMoeyBiYWNrZ3JvdW5kQ29sb3I6IHAgfSk7XG4gICAgfSxcbiAgICBbZS5lZGl0b3JdXG4gICk7XG4gIHJldHVybiBSKCgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHAgb2YgbilcbiAgICAgIGlmIChwLmNvbnRlbnQgIT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIHJldHVybiAhMTtcbiAgfSwgW25dKSA/IC8qIEBfX1BVUkVfXyAqLyByLmpzeHModywgeyBvbk9wZW46IGcsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KHcuVGFyZ2V0LCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgICBQLFxuICAgICAge1xuICAgICAgICBtYWluVG9vbHRpcDogXCJDb2xvcnNcIixcbiAgICAgICAgaWNvbjogKCkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgIEVlLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRleHRDb2xvcjogbyxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogcyxcbiAgICAgICAgICAgIHNpemU6IDIwXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgKSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8gci5qc3goXCJkaXZcIiwgeyByZWY6IGQsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3gody5Ecm9wZG93biwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgd3QsXG4gICAgICB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICBjb2xvcjogbyxcbiAgICAgICAgICBzZXRDb2xvcjogYVxuICAgICAgICB9LFxuICAgICAgICBiYWNrZ3JvdW5kOiB7XG4gICAgICAgICAgY29sb3I6IHMsXG4gICAgICAgICAgc2V0Q29sb3I6IHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICkgfSkgfSlcbiAgXSB9KSA6IG51bGw7XG59LCBnbiA9IChlKSA9PiB7XG4gIGNvbnN0IFtuLCBvXSA9IGIoKTtcbiAgcShlLmVkaXRvciwgKCkgPT4ge1xuICAgIG8oZS5lZGl0b3IuY2FuTmVzdEJsb2NrKCkpO1xuICB9KTtcbiAgY29uc3QgaSA9IHooKCkgPT4ge1xuICAgIGUuZWRpdG9yLmZvY3VzKCksIGUuZWRpdG9yLm5lc3RCbG9jaygpO1xuICB9LCBbZS5lZGl0b3JdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBQLFxuICAgIHtcbiAgICAgIG9uQ2xpY2s6IGksXG4gICAgICBpc0Rpc2FibGVkOiAhbixcbiAgICAgIG1haW5Ub29sdGlwOiBcIk5lc3QgQmxvY2tcIixcbiAgICAgIHNlY29uZGFyeVRvb2x0aXA6IEYoXCJUYWJcIiksXG4gICAgICBpY29uOiBVclxuICAgIH1cbiAgKTtcbn0sIGZuID0gKGUpID0+IHtcbiAgY29uc3QgW24sIG9dID0gYigpO1xuICBxKGUuZWRpdG9yLCAoKSA9PiB7XG4gICAgbyhlLmVkaXRvci5jYW5Vbm5lc3RCbG9jaygpKTtcbiAgfSk7XG4gIGNvbnN0IGkgPSB6KCgpID0+IHtcbiAgICBlLmVkaXRvci5mb2N1cygpLCBlLmVkaXRvci51bm5lc3RCbG9jaygpO1xuICB9LCBbZV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIFAsXG4gICAge1xuICAgICAgb25DbGljazogaSxcbiAgICAgIGlzRGlzYWJsZWQ6ICFuLFxuICAgICAgbWFpblRvb2x0aXA6IFwiVW5uZXN0IEJsb2NrXCIsXG4gICAgICBzZWNvbmRhcnlUb29sdGlwOiBGKFwiU2hpZnQrVGFiXCIpLFxuICAgICAgaWNvbjogVnJcbiAgICB9XG4gICk7XG59LCBTdCA9IChlKSA9PiB7XG4gIGNvbnN0IFtuLCBvXSA9IGIoITEpLCBpID0geigoKSA9PiB7XG4gICAgbyghMSk7XG4gIH0sIFtdKSwgcyA9IHooKCkgPT4ge1xuICAgIG8oITApO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgWSxcbiAgICB7XG4gICAgICBvblNob3c6IChjKSA9PiB7XG4gICAgICAgIHZhciBkO1xuICAgICAgICBzKCksIChkID0gZS5vblNob3cpID09IG51bGwgfHwgZC5jYWxsKGUsIGMpO1xuICAgICAgfSxcbiAgICAgIG9uSGlkZGVuOiAoYykgPT4ge1xuICAgICAgICB2YXIgZDtcbiAgICAgICAgaSgpLCAoZCA9IGUub25TaG93KSA9PSBudWxsIHx8IGQuY2FsbChlLCBjKTtcbiAgICAgIH0sXG4gICAgICBjb250ZW50OiBuID8gZS5jaGlsZHJlblsxXSA6IG51bGwsXG4gICAgICB0cmlnZ2VyOiBlLnZpc2libGUgPT09IHZvaWQgMCA/IFwiY2xpY2tcIiA6IHZvaWQgMCxcbiAgICAgIGludGVyYWN0aXZlOiAhMCxcbiAgICAgIG1heFdpZHRoOiA1MDAsXG4gICAgICB6SW5kZXg6IDllMyxcbiAgICAgIC4uLmUsXG4gICAgICBjaGlsZHJlbjogZS5jaGlsZHJlblswXVxuICAgIH1cbiAgKTtcbn0sIE10ID0gYWUoKHsgY2xhc3NOYW1lOiBlLCAuLi5uIH0sIG8pID0+IHtcbiAgY29uc3QgeyBjbGFzc2VzOiBpIH0gPSAkKHsgcm9vdDoge30gfSkodm9pZCAwLCB7XG4gICAgbmFtZTogXCJUb29sYmFySW5wdXREcm9wZG93blwiXG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIEJlLFxuICAgIHtcbiAgICAgIC4uLm4sXG4gICAgICBjbGFzc05hbWU6IGJlKGkucm9vdCwgZSB8fCBcIlwiKSxcbiAgICAgIHJlZjogbyxcbiAgICAgIGNoaWxkcmVuOiBuLmNoaWxkcmVuXG4gICAgfVxuICApO1xufSksIGhuID0ge1xuICB0ZXh0OiBodCxcbiAgZmlsZTogdnRcbn0sIHplID0gKGUpID0+IHtcbiAgY29uc3QgbiA9IGUuaWNvbiwgbyA9IGhuW2UudHlwZV07XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goSGUsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyByLmpzeChvLCB7IHNpemU6IFwieHNcIiwgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KG4sIHt9KSwgLi4uZS5pbnB1dFByb3BzIH0pIH0pO1xufSwgUnQgPSBhZSgoeyB1cmw6IGUsIHRleHQ6IG4sIHVwZGF0ZTogbywgLi4uaSB9LCBzKSA9PiB7XG4gIGNvbnN0IFtjLCBkXSA9IGIoZSksIFtnLCBhXSA9IGIobik7XG4gIEIoKCkgPT4ge1xuICAgIGQoZSksIGEobik7XG4gIH0sIFtuLCBlXSk7XG4gIGNvbnN0IHkgPSB6KFxuICAgIChUKSA9PiB7XG4gICAgICBULmtleSA9PT0gXCJFbnRlclwiICYmIChULnByZXZlbnREZWZhdWx0KCksIG8oYywgZykpO1xuICAgIH0sXG4gICAgW28sIGMsIGddXG4gICksIHggPSB6KFxuICAgIChUKSA9PiBkKFQuY3VycmVudFRhcmdldC52YWx1ZSksXG4gICAgW11cbiAgKSwgcCA9IHooXG4gICAgKFQpID0+IGEoVC5jdXJyZW50VGFyZ2V0LnZhbHVlKSxcbiAgICBbXVxuICApLCBTID0geihcbiAgICAoKSA9PiBvKGMsIGcpLFxuICAgIFtvLCBjLCBnXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4cyhNdCwgeyAuLi5pLCByZWY6IHMsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgemUsXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICBpY29uOiBDdCxcbiAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgIGF1dG9Gb2N1czogITAsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiRWRpdCBVUkxcIixcbiAgICAgICAgICB2YWx1ZTogYyxcbiAgICAgICAgICBvbktleURvd246IHksXG4gICAgICAgICAgb25DaGFuZ2U6IHgsXG4gICAgICAgICAgb25TdWJtaXQ6IFNcbiAgICAgICAgfVxuICAgICAgfVxuICAgICksXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgemUsXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICBpY29uOiBpZSxcbiAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIkVkaXQgVGl0bGVcIixcbiAgICAgICAgICB2YWx1ZTogZyxcbiAgICAgICAgICBvbktleURvd246IHksXG4gICAgICAgICAgb25DaGFuZ2U6IHAsXG4gICAgICAgICAgb25TdWJtaXQ6IFNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgXSB9KTtcbn0pLCB2biA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSBRKGUuZWRpdG9yKSwgW28sIGldID0gYihcbiAgICBlLmVkaXRvci5nZXRTZWxlY3RlZExpbmtVcmwoKSB8fCBcIlwiXG4gICksIFtzLCBjXSA9IGIoZS5lZGl0b3IuZ2V0U2VsZWN0ZWRUZXh0KCkpO1xuICBxKGUuZWRpdG9yLCAoKSA9PiB7XG4gICAgYyhlLmVkaXRvci5nZXRTZWxlY3RlZFRleHQoKSB8fCBcIlwiKSwgaShlLmVkaXRvci5nZXRTZWxlY3RlZExpbmtVcmwoKSB8fCBcIlwiKTtcbiAgfSk7XG4gIGNvbnN0IGQgPSB6KFxuICAgIChhLCB5KSA9PiB7XG4gICAgICBlLmVkaXRvci5jcmVhdGVMaW5rKGEsIHkpLCBlLmVkaXRvci5mb2N1cygpO1xuICAgIH0sXG4gICAgW2UuZWRpdG9yXVxuICApO1xuICByZXR1cm4gUigoKSA9PiB7XG4gICAgZm9yIChjb25zdCBhIG9mIG4pXG4gICAgICBpZiAoYS5jb250ZW50ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG4gIH0sIFtuXSkgPyAvKiBAX19QVVJFX18gKi8gci5qc3hzKFN0LCB7IGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgUCxcbiAgICAgIHtcbiAgICAgICAgbWFpblRvb2x0aXA6IFwiQ3JlYXRlIExpbmtcIixcbiAgICAgICAgc2Vjb25kYXJ5VG9vbHRpcDogRihcIk1vZCtLXCIpLFxuICAgICAgICBpY29uOiBDdFxuICAgICAgfVxuICAgICksXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KFJ0LCB7IHVybDogbywgdGV4dDogcywgdXBkYXRlOiBkIH0pXG4gIF0gfSkgOiBudWxsO1xufSwgRXQgPSAoZSkgPT4ge1xuICBjb25zdCBbbiwgb10gPSBiKFxuICAgIGUuZWRpdG9yLnVwbG9hZEZpbGUgIT09IHZvaWQgMCA/IFwidXBsb2FkXCIgOiBcImVtYmVkXCJcbiAgKSwgW2ksIHNdID0gYighMSksIFtjLCBkXSA9IGIoITEpO1xuICBCKCgpID0+IHtcbiAgICBjICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZCghMSk7XG4gICAgfSwgM2UzKTtcbiAgfSwgW2NdKTtcbiAgY29uc3QgZyA9IHooXG4gICAgYXN5bmMgKFQpID0+IHtcbiAgICAgIGlmIChzKCEwKSwgZS5lZGl0b3IudXBsb2FkRmlsZSAhPT0gdm9pZCAwKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IEQgPSBhd2FpdCBlLmVkaXRvci51cGxvYWRGaWxlKFQpO1xuICAgICAgICAgIGUuZWRpdG9yLnVwZGF0ZUJsb2NrKGUuYmxvY2ssIHtcbiAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcbiAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgIHVybDogRFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBkKCEwKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBzKCExKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgW2UuYmxvY2ssIGUuZWRpdG9yXVxuICApLCBbYSwgeV0gPSBiKFwiXCIpLCB4ID0geihcbiAgICAoVCkgPT4ge1xuICAgICAgeShULmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgIH0sXG4gICAgW11cbiAgKSwgcCA9IHooXG4gICAgKFQpID0+IHtcbiAgICAgIFQua2V5ID09PSBcIkVudGVyXCIgJiYgKFQucHJldmVudERlZmF1bHQoKSwgZS5lZGl0b3IudXBkYXRlQmxvY2soZS5ibG9jaywge1xuICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgdXJsOiBhXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFthLCBlLmJsb2NrLCBlLmVkaXRvcl1cbiAgKSwgUyA9IHooKCkgPT4ge1xuICAgIGUuZWRpdG9yLnVwZGF0ZUJsb2NrKGUuYmxvY2ssIHtcbiAgICAgIHR5cGU6IFwiaW1hZ2VcIixcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIHVybDogYVxuICAgICAgfVxuICAgIH0pO1xuICB9LCBbYSwgZS5ibG9jaywgZS5lZGl0b3JdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBfZSxcbiAgICB7XG4gICAgICBzdHlsZToge1xuICAgICAgICB3aWR0aDogXCI1MDBweFwiXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoWiwgeyB2YWx1ZTogbiwgb25UYWJDaGFuZ2U6IG8sIGNoaWxkcmVuOiBbXG4gICAgICAgIGkgJiYgLyogQF9fUFVSRV9fICovIHIuanN4KENyLCB7IHZpc2libGU6IGkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoWi5MaXN0LCB7IGNoaWxkcmVuOiBbXG4gICAgICAgICAgZS5lZGl0b3IudXBsb2FkRmlsZSAhPT0gdm9pZCAwICYmIC8qIEBfX1BVUkVfXyAqLyByLmpzeChaLlRhYiwgeyB2YWx1ZTogXCJ1cGxvYWRcIiwgXCJkYXRhLXRlc3RcIjogXCJ1cGxvYWQtdGFiXCIsIGNoaWxkcmVuOiBcIlVwbG9hZFwiIH0pLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChaLlRhYiwgeyB2YWx1ZTogXCJlbWJlZFwiLCBcImRhdGEtdGVzdFwiOiBcImVtYmVkLXRhYlwiLCBjaGlsZHJlbjogXCJFbWJlZFwiIH0pXG4gICAgICAgIF0gfSksXG4gICAgICAgIGUuZWRpdG9yLnVwbG9hZEZpbGUgIT09IHZvaWQgMCAmJiAvKiBAX19QVVJFX18gKi8gci5qc3goWi5QYW5lbCwgeyB2YWx1ZTogXCJ1cGxvYWRcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogXCJzdHJldGNoXCIsXG4gICAgICAgICAgICAgIGdhcDogXCI4cHhcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgICAgICAgICAgICB2dCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJVcGxvYWQgSW1hZ2VcIixcbiAgICAgICAgICAgICAgICAgIHNpemU6IFwieHNcIixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGcsXG4gICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdFwiOiBcInVwbG9hZC1pbnB1dFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBjICYmIC8qIEBfX1BVUkVfXyAqLyByLmpzeChvZSwgeyBjb2xvcjogXCJyZWRcIiwgc2l6ZTogMTIsIHN0eWxlOiB7IHRleHRBbGlnbjogXCJjZW50ZXJcIiB9LCBjaGlsZHJlbjogXCJFcnJvcjogVXBsb2FkIGZhaWxlZFwiIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICApIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8gci5qc3goWi5QYW5lbCwgeyB2YWx1ZTogXCJlbWJlZFwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4cyhcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgIGdhcDogXCI4cHhcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgICAgICAgICAgICBodCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBzaXplOiBcInhzXCIsXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJFbnRlciBVUkxcIixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHgsXG4gICAgICAgICAgICAgICAgICBvbktleURvd246IHAsXG4gICAgICAgICAgICAgICAgICBzdHlsZTogeyB3aWR0aDogXCIxMDAlXCIgfSxcbiAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0XCI6IFwiZW1iZWQtaW5wdXRcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgICAgICAgIEllLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IFMsXG4gICAgICAgICAgICAgICAgICBzaXplOiBcInhzXCIsXG4gICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdFwiOiBcImVtYmVkLWlucHV0LWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiRW1iZWQgSW1hZ2VcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgKSB9KVxuICAgICAgXSB9KVxuICAgIH1cbiAgKTtcbn0sIGJuID0gKGUpID0+IHtcbiAgY29uc3QgbiA9IFEoZS5lZGl0b3IpLCBbbywgaV0gPSBiKCExKTtcbiAgcmV0dXJuIEIoKCkgPT4ge1xuICAgIGkoITEpO1xuICB9LCBbbl0pLCAvLyBDaGVja3MgaWYgb25seSBvbmUgYmxvY2sgaXMgc2VsZWN0ZWQuXG4gIG4ubGVuZ3RoID09PSAxICYmIC8vIENoZWNrcyBpZiB0aGUgc2VsZWN0ZWQgYmxvY2sgaXMgYW4gaW1hZ2UuXG4gIG5bMF0udHlwZSA9PT0gXCJpbWFnZVwiID8gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIFksXG4gICAge1xuICAgICAgdmlzaWJsZTogbyxcbiAgICAgIGludGVyYWN0aXZlOiAhMCxcbiAgICAgIGNvbnRlbnQ6IC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgICAgRXQsXG4gICAgICAgIHtcbiAgICAgICAgICBibG9jazogblswXSxcbiAgICAgICAgICBlZGl0b3I6IGUuZWRpdG9yXG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICBQLFxuICAgICAgICB7XG4gICAgICAgICAgb25DbGljazogKCkgPT4gaSghbyksXG4gICAgICAgICAgaXNTZWxlY3RlZDogbyxcbiAgICAgICAgICBtYWluVG9vbHRpcDogXCJSZXBsYWNlIEltYWdlXCIsXG4gICAgICAgICAgaWNvbjogS3JcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cbiAgKSA6IG51bGw7XG59LCB4biA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSBRKGUuZWRpdG9yKSwgbyA9IFIoXG4gICAgKCkgPT4gKFxuICAgICAgLy8gQ2hlY2tzIGlmIG9ubHkgb25lIGJsb2NrIGlzIHNlbGVjdGVkLlxuICAgICAgbi5sZW5ndGggPT09IDEgJiYgLy8gQ2hlY2tzIGlmIHRoZSBzZWxlY3RlZCBibG9jayBpcyBhbiBpbWFnZS5cbiAgICAgIG5bMF0udHlwZSA9PT0gXCJpbWFnZVwiICYmIC8vIENoZWNrcyBpZiB0aGUgYmxvY2sgaGFzIGEgYGNhcHRpb25gIHByb3Agd2hpY2ggY2FuIHRha2UgYW55IHN0cmluZ1xuICAgICAgLy8gdmFsdWUuXG4gICAgICBcImNhcHRpb25cIiBpbiBlLmVkaXRvci5zY2hlbWEuaW1hZ2UucHJvcFNjaGVtYSAmJiB0eXBlb2YgZS5lZGl0b3Iuc2NoZW1hLmltYWdlLnByb3BTY2hlbWEuY2FwdGlvbi5kZWZhdWx0ID09IFwic3RyaW5nXCIgJiYgZS5lZGl0b3Iuc2NoZW1hLmltYWdlLnByb3BTY2hlbWEuY2FwdGlvbi52YWx1ZXMgPT09IHZvaWQgMCAmJiAvLyBDaGVja3MgaWYgdGhlIGJsb2NrIGhhcyBhIGBzcmNgIHByb3Agd2hpY2ggY2FuIHRha2UgYW55IHN0cmluZyB2YWx1ZS5cbiAgICAgIFwic3JjXCIgaW4gZS5lZGl0b3Iuc2NoZW1hLmltYWdlLnByb3BTY2hlbWEgJiYgdHlwZW9mIGUuZWRpdG9yLnNjaGVtYS5pbWFnZS5wcm9wU2NoZW1hLnNyYy5kZWZhdWx0ID09IFwic3RyaW5nXCIgJiYgZS5lZGl0b3Iuc2NoZW1hLmltYWdlLnByb3BTY2hlbWEuc3JjLnZhbHVlcyA9PT0gdm9pZCAwICYmIC8vIENoZWNrcyBpZiB0aGUgYHNyY2AgcHJvcCBpcyBub3Qgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgIG5bMF0ucHJvcHMuc3JjICE9PSBcIlwiXG4gICAgKSxcbiAgICBbZS5lZGl0b3Iuc2NoZW1hLCBuXVxuICApLCBbaSwgc10gPSBiKFxuICAgIG8gPyBuWzBdLnByb3BzLmNhcHRpb24gOiBcIlwiXG4gICk7XG4gIEIoXG4gICAgKCkgPT4gcyhcbiAgICAgIG8gPyBuWzBdLnByb3BzLmNhcHRpb24gOiBcIlwiXG4gICAgKSxcbiAgICBbbiwgb11cbiAgKTtcbiAgY29uc3QgYyA9IHooXG4gICAgKGcpID0+IHtcbiAgICAgIGcua2V5ID09PSBcIkVudGVyXCIgJiYgKGcucHJldmVudERlZmF1bHQoKSwgZS5lZGl0b3IudXBkYXRlQmxvY2soblswXSwge1xuICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgY2FwdGlvbjogaVxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbaSwgZS5lZGl0b3IsIG5dXG4gICksIGQgPSB6KFxuICAgIChnKSA9PiBzKGcuY3VycmVudFRhcmdldC52YWx1ZSksXG4gICAgW11cbiAgKTtcbiAgcmV0dXJuIG8gPyAvKiBAX19QVVJFX18gKi8gci5qc3hzKFN0LCB7IGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgUCxcbiAgICAgIHtcbiAgICAgICAgbWFpblRvb2x0aXA6IFwiRWRpdCBDYXB0aW9uXCIsXG4gICAgICAgIGljb246IGllLFxuICAgICAgICBpc1NlbGVjdGVkOiBuWzBdLnByb3BzLmNhcHRpb24gIT09IFwiXCJcbiAgICAgIH1cbiAgICApLFxuICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChNdCwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgemUsXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICBpY29uOiBpZSxcbiAgICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICAgIGF1dG9Gb2N1czogITAsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiRWRpdCBDYXB0aW9uXCIsXG4gICAgICAgICAgdmFsdWU6IGksXG4gICAgICAgICAgb25LZXlEb3duOiBjLFxuICAgICAgICAgIG9uQ2hhbmdlOiBkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApIH0pXG4gIF0gfSkgOiBudWxsO1xufSwgbW4gPSAoZSkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4cyhfZSwgeyBjaGlsZHJlbjogW1xuICAvKiBAX19QVVJFX18gKi8gci5qc3gob24sIHsgLi4uZSwgaXRlbXM6IGUuYmxvY2tUeXBlRHJvcGRvd25JdGVtcyB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KHhuLCB7IGVkaXRvcjogZS5lZGl0b3IgfSksXG4gIC8qIEBfX1BVUkVfXyAqLyByLmpzeChibiwgeyBlZGl0b3I6IGUuZWRpdG9yIH0pLFxuICAvKiBAX19QVVJFX18gKi8gci5qc3goaGUsIHsgZWRpdG9yOiBlLmVkaXRvciwgdG9nZ2xlZFN0eWxlOiBcImJvbGRcIiB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KGhlLCB7IGVkaXRvcjogZS5lZGl0b3IsIHRvZ2dsZWRTdHlsZTogXCJpdGFsaWNcIiB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KGhlLCB7IGVkaXRvcjogZS5lZGl0b3IsIHRvZ2dsZWRTdHlsZTogXCJ1bmRlcmxpbmVcIiB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KGhlLCB7IGVkaXRvcjogZS5lZGl0b3IsIHRvZ2dsZWRTdHlsZTogXCJzdHJpa2VcIiB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KFNlLCB7IGVkaXRvcjogZS5lZGl0b3IsIHRleHRBbGlnbm1lbnQ6IFwibGVmdFwiIH0pLFxuICAvKiBAX19QVVJFX18gKi8gci5qc3goU2UsIHsgZWRpdG9yOiBlLmVkaXRvciwgdGV4dEFsaWdubWVudDogXCJjZW50ZXJcIiB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KFNlLCB7IGVkaXRvcjogZS5lZGl0b3IsIHRleHRBbGlnbm1lbnQ6IFwicmlnaHRcIiB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KHVuLCB7IGVkaXRvcjogZS5lZGl0b3IgfSksXG4gIC8qIEBfX1BVUkVfXyAqLyByLmpzeChnbiwgeyBlZGl0b3I6IGUuZWRpdG9yIH0pLFxuICAvKiBAX19QVVJFX18gKi8gci5qc3goZm4sIHsgZWRpdG9yOiBlLmVkaXRvciB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KHZuLCB7IGVkaXRvcjogZS5lZGl0b3IgfSlcbl0gfSksIHN0ID0gKGUpID0+IHtcbiAgc3dpdGNoIChlKSB7XG4gICAgY2FzZSBcImxlZnRcIjpcbiAgICAgIHJldHVybiBcInRvcC1zdGFydFwiO1xuICAgIGNhc2UgXCJjZW50ZXJcIjpcbiAgICAgIHJldHVybiBcInRvcFwiO1xuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgcmV0dXJuIFwidG9wLWVuZFwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJ0b3Atc3RhcnRcIjtcbiAgfVxufSwga24gPSAoZSkgPT4ge1xuICBjb25zdCBbbiwgb10gPSBiKCExKSwgW2ksIHNdID0gYihcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBhID0gZS5lZGl0b3IuZ2V0VGV4dEN1cnNvclBvc2l0aW9uKCkuYmxvY2s7XG4gICAgICByZXR1cm4gXCJ0ZXh0QWxpZ25tZW50XCIgaW4gYS5wcm9wcyA/IHN0KFxuICAgICAgICBhLnByb3BzLnRleHRBbGlnbm1lbnRcbiAgICAgICkgOiBcInRvcC1zdGFydFwiO1xuICAgIH1cbiAgKSwgYyA9IEEoKTtcbiAgQigoKSA9PiAoYnQuc2V0RGVmYXVsdFByb3BzKHsgbWF4V2lkdGg6IFwiXCIgfSksIGUuZWRpdG9yLmZvcm1hdHRpbmdUb29sYmFyLm9uVXBkYXRlKChhKSA9PiB7XG4gICAgbyhhLnNob3cpLCBjLmN1cnJlbnQgPSBhLnJlZmVyZW5jZVBvcztcbiAgfSkpLCBbZS5lZGl0b3JdKSwgcShlLmVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IGEgPSBlLmVkaXRvci5nZXRUZXh0Q3Vyc29yUG9zaXRpb24oKS5ibG9jaztcbiAgICBcInRleHRBbGlnbm1lbnRcIiBpbiBhLnByb3BzID8gcyhcbiAgICAgIHN0KFxuICAgICAgICBhLnByb3BzLnRleHRBbGlnbm1lbnRcbiAgICAgIClcbiAgICApIDogcyhcInRvcC1zdGFydFwiKTtcbiAgfSk7XG4gIGNvbnN0IGQgPSBSKFxuICAgICgpID0+IHtcbiAgICAgIGlmIChjKVxuICAgICAgICByZXR1cm4gKCkgPT4gYy5jdXJyZW50O1xuICAgIH0sXG4gICAgW2MuY3VycmVudF1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICksIGcgPSBSKCgpID0+IHtcbiAgICBjb25zdCBhID0gZS5mb3JtYXR0aW5nVG9vbGJhciB8fCBtbjtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KGEsIHsgZWRpdG9yOiBlLmVkaXRvciB9KTtcbiAgfSwgW2UuZWRpdG9yLCBlLmZvcm1hdHRpbmdUb29sYmFyXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgWSxcbiAgICB7XG4gICAgICBhcHBlbmRUbzogZS5lZGl0b3IuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LFxuICAgICAgY29udGVudDogZyxcbiAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6IGQsXG4gICAgICBpbnRlcmFjdGl2ZTogITAsXG4gICAgICB2aXNpYmxlOiBuLFxuICAgICAgYW5pbWF0aW9uOiBcImZhZGVcIixcbiAgICAgIHBsYWNlbWVudDogaSxcbiAgICAgIHN0aWNreTogITAsXG4gICAgICBwbHVnaW5zOiB5bixcbiAgICAgIHpJbmRleDogM2UzXG4gICAgfVxuICApO1xufSwgeW4gPSBbenJdLCBwbiA9IChlKSA9PiB7XG4gIGNvbnN0IFtuLCBvXSA9IGIoITEpLCBpID0gQShudWxsKTtcbiAgcmV0dXJuIG4gPyAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgUnQsXG4gICAge1xuICAgICAgdXJsOiBlLnVybCxcbiAgICAgIHRleHQ6IGUudGV4dCxcbiAgICAgIHVwZGF0ZTogZS5lZGl0SHlwZXJsaW5rLFxuICAgICAgb25CbHVyOiAocykgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHZhciBjO1xuICAgICAgICAoYyA9IGkuY3VycmVudCkgIT0gbnVsbCAmJiBjLmNvbnRhaW5zKHMucmVsYXRlZFRhcmdldCkgfHwgbyghMSk7XG4gICAgICB9LCA1MDApLFxuICAgICAgcmVmOiBpXG4gICAgfVxuICApIDogLyogQF9fUFVSRV9fICovIHIuanN4cyhcbiAgICBfZSxcbiAgICB7XG4gICAgICBvbk1vdXNlRW50ZXI6IGUuc3RvcEhpZGVUaW1lcixcbiAgICAgIG9uTW91c2VMZWF2ZTogZS5zdGFydEhpZGVUaW1lcixcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgICAgICBQLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1haW5Ub29sdGlwOiBcIkVkaXRcIixcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQ6ICExLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4gbyghMCksXG4gICAgICAgICAgICBjaGlsZHJlbjogXCJFZGl0IExpbmtcIlxuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgIFAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWFpblRvb2x0aXA6IFwiT3BlbiBpbiBuZXcgdGFiXCIsXG4gICAgICAgICAgICBpc1NlbGVjdGVkOiAhMSxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgd2luZG93Lm9wZW4oZS51cmwsIFwiX2JsYW5rXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGljb246IEdyXG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgICAgICAgUCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtYWluVG9vbHRpcDogXCJSZW1vdmUgbGlua1wiLFxuICAgICAgICAgICAgaXNTZWxlY3RlZDogITEsXG4gICAgICAgICAgICBvbkNsaWNrOiBlLmRlbGV0ZUh5cGVybGluayxcbiAgICAgICAgICAgIGljb246ICRyXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICBdXG4gICAgfVxuICApO1xufSwgQ24gPSAoZSkgPT4ge1xuICBjb25zdCBbbiwgb10gPSBiKCExKSwgW2ksIHNdID0gYigpLCBbYywgZF0gPSBiKCksIGcgPSBBKCk7XG4gIEIoKCkgPT4gZS5lZGl0b3IuaHlwZXJsaW5rVG9vbGJhci5vbihcbiAgICBcInVwZGF0ZVwiLFxuICAgICh4KSA9PiB7XG4gICAgICBvKHguc2hvdyksIHMoeC51cmwpLCBkKHgudGV4dCksIGcuY3VycmVudCA9IHgucmVmZXJlbmNlUG9zO1xuICAgIH1cbiAgKSwgW2UuZWRpdG9yXSk7XG4gIGNvbnN0IGEgPSBSKFxuICAgICgpID0+IHtcbiAgICAgIGlmIChnLmN1cnJlbnQpXG4gICAgICAgIHJldHVybiAoKSA9PiBnLmN1cnJlbnQ7XG4gICAgfSxcbiAgICBbZy5jdXJyZW50XVxuICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgKSwgeSA9IFIoKCkgPT4ge1xuICAgIGlmICghaSB8fCAhYylcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHggPSBlLmh5cGVybGlua1Rvb2xiYXIgfHwgcG47XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgIHgsXG4gICAgICB7XG4gICAgICAgIHVybDogaSxcbiAgICAgICAgdGV4dDogYyxcbiAgICAgICAgZWRpdEh5cGVybGluazogZS5lZGl0b3IuaHlwZXJsaW5rVG9vbGJhci5lZGl0SHlwZXJsaW5rLFxuICAgICAgICBkZWxldGVIeXBlcmxpbms6IGUuZWRpdG9yLmh5cGVybGlua1Rvb2xiYXIuZGVsZXRlSHlwZXJsaW5rLFxuICAgICAgICBzdGFydEhpZGVUaW1lcjogZS5lZGl0b3IuaHlwZXJsaW5rVG9vbGJhci5zdGFydEhpZGVUaW1lcixcbiAgICAgICAgc3RvcEhpZGVUaW1lcjogZS5lZGl0b3IuaHlwZXJsaW5rVG9vbGJhci5zdG9wSGlkZVRpbWVyXG4gICAgICB9XG4gICAgKTtcbiAgfSwgW2UuaHlwZXJsaW5rVG9vbGJhciwgZS5lZGl0b3IsIGMsIGldKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBZLFxuICAgIHtcbiAgICAgIGFwcGVuZFRvOiBlLmVkaXRvci5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQsXG4gICAgICBjb250ZW50OiB5LFxuICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogYSxcbiAgICAgIGludGVyYWN0aXZlOiAhMCxcbiAgICAgIHZpc2libGU6IG4sXG4gICAgICBhbmltYXRpb246IFwiZmFkZVwiLFxuICAgICAgcGxhY2VtZW50OiBcInRvcC1zdGFydFwiLFxuICAgICAgekluZGV4OiA0ZTNcbiAgICB9XG4gICk7XG59LCBqbiA9IChlKSA9PiB7XG4gIGNvbnN0IHsgY2xhc3NlczogbiB9ID0gJCh7IHJvb3Q6IHt9IH0pKHZvaWQgMCwge1xuICAgIG5hbWU6IFwiU2lkZU1lbnVcIlxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChIZSwgeyBjbGFzc05hbWU6IG4ucm9vdCwgc3BhY2luZzogMCwgY2hpbGRyZW46IGUuY2hpbGRyZW4gfSk7XG59O1xuZnVuY3Rpb24gVG4oZSkge1xuICByZXR1cm4gaih7IHRhZzogXCJzdmdcIiwgYXR0cjogeyB0OiBcIjE1NTEzMjIzMTIyOTRcIiwgc3R5bGU6IFwiXCIsIHZpZXdCb3g6IFwiMCAwIDEwMjQgMTAyNFwiLCB2ZXJzaW9uOiBcIjEuMVwiIH0sIGNoaWxkOiBbeyB0YWc6IFwiZGVmc1wiLCBhdHRyOiB7fSwgY2hpbGQ6IFtdIH0sIHsgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBkOiBcIk00NzQgMTUybTggMGw2MCAwcTggMCA4IDhsMCA3MDRxMCA4LTggOGwtNjAgMHEtOCAwLTgtOGwwLTcwNHEwLTggOC04WlwiIH0gfSwgeyB0YWc6IFwicGF0aFwiLCBhdHRyOiB7IGQ6IFwiTTE2OCA0NzRtOCAwbDY3MiAwcTggMCA4IDhsMCA2MHEwIDgtOCA4bC02NzIgMHEtOCAwLTgtOGwwLTYwcTAtOCA4LThaXCIgfSB9XSB9KShlKTtcbn1cbmNvbnN0IHp0ID0gKGUpID0+IC8qIEBfX1BVUkVfXyAqLyByLmpzeChndCwgeyBzaXplOiAyNCwgY2hpbGRyZW46IGUuY2hpbGRyZW4gfSksIHduID0gKGUpID0+IC8qIEBfX1BVUkVfXyAqLyByLmpzeCh6dCwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICBUbixcbiAge1xuICAgIHNpemU6IDI0LFxuICAgIG9uQ2xpY2s6IGUuYWRkQmxvY2ssXG4gICAgXCJkYXRhLXRlc3RcIjogXCJkcmFnSGFuZGxlQWRkXCJcbiAgfVxuKSB9KTtcbmZ1bmN0aW9uIFNuKGUpIHtcbiAgcmV0dXJuIGooeyB0YWc6IFwic3ZnXCIsIGF0dHI6IHsgdmlld0JveDogXCIwIDAgMjQgMjRcIiB9LCBjaGlsZDogW3sgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBmaWxsOiBcIm5vbmVcIiwgZDogXCJNMCAwaDI0djI0SDBWMHpcIiB9IH0sIHsgdGFnOiBcInBhdGhcIiwgYXR0cjogeyBkOiBcIk0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTIgLjktMiAyLTIgMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wLTZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem02IDRjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yelwiIH0gfV0gfSkoZSk7XG59XG5jb25zdCBNbiA9IChlKSA9PiB7XG4gIGNvbnN0IHsgY2xhc3NlczogbiB9ID0gJCh7IHJvb3Q6IHt9IH0pKHZvaWQgMCwge1xuICAgIG5hbWU6IFwiRHJhZ0hhbmRsZU1lbnVcIlxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeCh3LkRyb3Bkb3duLCB7IGNsYXNzTmFtZTogbi5yb290LCBzdHlsZTogeyBvdmVyZmxvdzogXCJ2aXNpYmxlXCIgfSwgY2hpbGRyZW46IGUuY2hpbGRyZW4gfSk7XG59LCBIdCA9IChlKSA9PiB7XG4gIGNvbnN0IHsgY2hpbGRyZW46IG4sIC4uLm8gfSA9IGU7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3gody5JdGVtLCB7IC4uLm8sIGNoaWxkcmVuOiBuIH0pO1xufSwgUm4gPSAoZSkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICBIdCxcbiAge1xuICAgIG9uQ2xpY2s6ICgpID0+IGUuZWRpdG9yLnJlbW92ZUJsb2NrcyhbZS5ibG9ja10pLFxuICAgIGNoaWxkcmVuOiBlLmNoaWxkcmVuXG4gIH1cbiksIEVuID0gKGUpID0+IHtcbiAgY29uc3QgW24sIG9dID0gYighMSksIHsgcmVmOiBpLCB1cGRhdGVNYXhIZWlnaHQ6IHMgfSA9IHhlKCksIGMgPSBBKCksIGQgPSB6KCgpID0+IHtcbiAgICBjLmN1cnJlbnQgJiYgY2xlYXJUaW1lb3V0KGMuY3VycmVudCksIGMuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbyghMSk7XG4gICAgfSwgMjUwKTtcbiAgfSwgW10pLCBnID0geigoKSA9PiB7XG4gICAgYy5jdXJyZW50ICYmIGNsZWFyVGltZW91dChjLmN1cnJlbnQpLCBuIHx8IHMoKSwgbyghMCk7XG4gIH0sIFtuLCBzXSk7XG4gIHJldHVybiAhKFwidGV4dENvbG9yXCIgaW4gZS5ibG9jay5wcm9wcykgJiYgIShcImJhY2tncm91bmRDb2xvclwiIGluIGUuYmxvY2sucHJvcHMpID8gbnVsbCA6IC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBIdCxcbiAgICB7XG4gICAgICBvbk1vdXNlTGVhdmU6IGQsXG4gICAgICBvbk1vdXNlT3ZlcjogZyxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3hzKHcsIHsgb3BlbmVkOiBuLCBwb3NpdGlvbjogXCJyaWdodFwiLCBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8gci5qc3gody5UYXJnZXQsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoXCJkaXZcIiwgeyBzdHlsZTogeyBkaXNwbGF5OiBcImZsZXhcIiwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiB9LCBjaGlsZHJlbjogW1xuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcImRpdlwiLCB7IHN0eWxlOiB7IGZsZXg6IDEgfSwgY2hpbGRyZW46IGUuY2hpbGRyZW4gfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KGZ0LCB7IHN0eWxlOiB7IGRpc3BsYXk6IFwiZmxleFwiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwiIH0sIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3goWnIsIHsgc2l6ZTogMTUgfSkgfSlcbiAgICAgICAgXSB9KSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KFwiZGl2XCIsIHsgcmVmOiBpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgIHcuRHJvcGRvd24sXG4gICAgICAgICAge1xuICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiBkLFxuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IGcsXG4gICAgICAgICAgICBzdHlsZTogeyBtYXJnaW5MZWZ0OiBcIjVweFwiIH0sXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgICAgICB3dCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb25TaXplOiAxOCxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcInRleHRDb2xvclwiIGluIGUuYmxvY2sucHJvcHMgJiYgdHlwZW9mIGUuYmxvY2sucHJvcHMudGV4dENvbG9yID09IFwic3RyaW5nXCIgPyB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogZS5ibG9jay5wcm9wcy50ZXh0Q29sb3IsXG4gICAgICAgICAgICAgICAgICBzZXRDb2xvcjogKGEpID0+IGUuZWRpdG9yLnVwZGF0ZUJsb2NrKGUuYmxvY2ssIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsgdGV4dENvbG9yOiBhIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcImJhY2tncm91bmRDb2xvclwiIGluIGUuYmxvY2sucHJvcHMgJiYgdHlwZW9mIGUuYmxvY2sucHJvcHMuYmFja2dyb3VuZENvbG9yID09IFwic3RyaW5nXCIgPyB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogZS5ibG9jay5wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICBzZXRDb2xvcjogKGEpID0+IGUuZWRpdG9yLnVwZGF0ZUJsb2NrKGUuYmxvY2ssIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsgYmFja2dyb3VuZENvbG9yOiBhIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSA6IHZvaWQgMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICApIH0pXG4gICAgICBdIH0pXG4gICAgfVxuICApO1xufSwgem4gPSAoZSkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4cyhNbiwgeyBjaGlsZHJlbjogW1xuICAvKiBAX19QVVJFX18gKi8gci5qc3goUm4sIHsgLi4uZSwgY2hpbGRyZW46IFwiRGVsZXRlXCIgfSksXG4gIC8qIEBfX1BVUkVfXyAqLyByLmpzeChFbiwgeyAuLi5lLCBjaGlsZHJlbjogXCJDb2xvcnNcIiB9KVxuXSB9KSwgSG4gPSAoZSkgPT4ge1xuICBjb25zdCBuID0gZS5kcmFnSGFuZGxlTWVudSB8fCB6bjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeHMoXG4gICAgdyxcbiAgICB7XG4gICAgICB0cmlnZ2VyOiBcImNsaWNrXCIsXG4gICAgICBvbk9wZW46IGUuZnJlZXplTWVudSxcbiAgICAgIG9uQ2xvc2U6IGUudW5mcmVlemVNZW51LFxuICAgICAgd2lkdGg6IDEwMCxcbiAgICAgIHBvc2l0aW9uOiBcImxlZnRcIixcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeCh3LlRhcmdldCwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZHJhZ2dhYmxlOiBcInRydWVcIixcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBlLmJsb2NrRHJhZ1N0YXJ0LFxuICAgICAgICAgICAgb25EcmFnRW5kOiBlLmJsb2NrRHJhZ0VuZCxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3goenQsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyByLmpzeChTbiwgeyBzaXplOiAyNCwgXCJkYXRhLXRlc3RcIjogXCJkcmFnSGFuZGxlXCIgfSkgfSlcbiAgICAgICAgICB9XG4gICAgICAgICkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChuLCB7IGVkaXRvcjogZS5lZGl0b3IsIGJsb2NrOiBlLmJsb2NrIH0pXG4gICAgICBdXG4gICAgfVxuICApO1xufSwgSW4gPSAoZSkgPT4gLyogQF9fUFVSRV9fICovIHIuanN4cyhqbiwgeyBjaGlsZHJlbjogW1xuICAvKiBAX19QVVJFX18gKi8gci5qc3god24sIHsgLi4uZSB9KSxcbiAgLyogQF9fUFVSRV9fICovIHIuanN4KEhuLCB7IC4uLmUgfSlcbl0gfSksIEJuID0gKGUpID0+IHtcbiAgY29uc3QgW24sIG9dID0gYighMSksIFtpLCBzXSA9IGIoKSwgYyA9IEEoKTtcbiAgQigoKSA9PiBlLmVkaXRvci5zaWRlTWVudS5vblVwZGF0ZSgoYSkgPT4ge1xuICAgIG8oYS5zaG93KSwgcyhhLmJsb2NrKSwgYy5jdXJyZW50ID0gYS5yZWZlcmVuY2VQb3M7XG4gIH0pLCBbZS5lZGl0b3JdKTtcbiAgY29uc3QgZCA9IFIoXG4gICAgKCkgPT4ge1xuICAgICAgaWYgKGMuY3VycmVudClcbiAgICAgICAgcmV0dXJuICgpID0+IGMuY3VycmVudDtcbiAgICB9LFxuICAgIFtjLmN1cnJlbnRdXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICApLCBnID0gUigoKSA9PiB7XG4gICAgaWYgKCFpKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYSA9IGUuc2lkZU1lbnUgfHwgSW47XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgIGEsXG4gICAgICB7XG4gICAgICAgIGJsb2NrOiBpLFxuICAgICAgICBlZGl0b3I6IGUuZWRpdG9yLFxuICAgICAgICBibG9ja0RyYWdTdGFydDogZS5lZGl0b3Iuc2lkZU1lbnUuYmxvY2tEcmFnU3RhcnQsXG4gICAgICAgIGJsb2NrRHJhZ0VuZDogZS5lZGl0b3Iuc2lkZU1lbnUuYmxvY2tEcmFnRW5kLFxuICAgICAgICBhZGRCbG9jazogZS5lZGl0b3Iuc2lkZU1lbnUuYWRkQmxvY2ssXG4gICAgICAgIGZyZWV6ZU1lbnU6IGUuZWRpdG9yLnNpZGVNZW51LmZyZWV6ZU1lbnUsXG4gICAgICAgIHVuZnJlZXplTWVudTogZS5lZGl0b3Iuc2lkZU1lbnUudW5mcmVlemVNZW51XG4gICAgICB9XG4gICAgKTtcbiAgfSwgW2ksIGUuZWRpdG9yLCBlLnNpZGVNZW51XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgWSxcbiAgICB7XG4gICAgICBhcHBlbmRUbzogZS5lZGl0b3IuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LFxuICAgICAgY29udGVudDogZyxcbiAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6IGQsXG4gICAgICBpbnRlcmFjdGl2ZTogITAsXG4gICAgICB2aXNpYmxlOiBuLFxuICAgICAgYW5pbWF0aW9uOiBcImZhZGVcIixcbiAgICAgIG9mZnNldDogX24sXG4gICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiLFxuICAgICAgcG9wcGVyT3B0aW9uczogRG4sXG4gICAgICB6SW5kZXg6IDFlM1xuICAgIH1cbiAgKTtcbn0sIF9uID0gWzAsIDBdLCBEbiA9IHtcbiAgbW9kaWZpZXJzOiBbXG4gICAge1xuICAgICAgbmFtZTogXCJmbGlwXCIsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGZhbGxiYWNrUGxhY2VtZW50czogW11cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwicHJldmVudE92ZXJmbG93XCIsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIG1haW5BeGlzOiAhMSxcbiAgICAgICAgYWx0QXhpczogITFcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0sIFBuID0gNTtcbmZ1bmN0aW9uIE9uKGUpIHtcbiAgY29uc3QgbiA9IEEobnVsbCksIHsgY2xhc3NlczogbyB9ID0gJCh7IHJvb3Q6IHt9IH0pKHZvaWQgMCwge1xuICAgIG5hbWU6IFwiU3VnZ2VzdGlvbkxpc3RJdGVtXCJcbiAgfSk7XG4gIGZ1bmN0aW9uIGkoKSB7XG4gICAgdmFyIGc7XG4gICAgY29uc3QgYyA9IGUuaXNTZWxlY3RlZCwgZCA9IChnID0gbi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogZy5tYXRjaGVzKFwiOmhvdmVyXCIpO1xuICAgIHJldHVybiBjIHx8IGQ7XG4gIH1cbiAgZnVuY3Rpb24gcygpIHtcbiAgICB2YXIgYywgZDtcbiAgICBpKCkgPyAoYyA9IG4uY3VycmVudCkgPT0gbnVsbCB8fCBjLnNldEF0dHJpYnV0ZShcImRhdGEtaG92ZXJlZFwiLCBcInRydWVcIikgOiAoZCA9IG4uY3VycmVudCkgPT0gbnVsbCB8fCBkLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtaG92ZXJlZFwiKTtcbiAgfVxuICByZXR1cm4gQigoKSA9PiB7XG4gICAgcygpLCBpKCkgJiYgbi5jdXJyZW50ICYmIG4uY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ID4gUG4gJiYgbi5jdXJyZW50LnNjcm9sbEludG9WaWV3KHtcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxuICAgICAgYmxvY2s6IFwibmVhcmVzdFwiXG4gICAgfSk7XG4gIH0pLCAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgdy5JdGVtLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogby5yb290LFxuICAgICAgaWNvbjogZS5pY29uLFxuICAgICAgb25DbGljazogZS5zZXQsXG4gICAgICBjbG9zZU1lbnVPbkNsaWNrOiAhMSxcbiAgICAgIG9uTW91c2VMZWF2ZTogKCkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzKCk7XG4gICAgICAgIH0sIDEpO1xuICAgICAgfSxcbiAgICAgIHJlZjogbixcbiAgICAgIHJpZ2h0U2VjdGlvbjogZS5zaG9ydGN1dCAmJiAvKiBAX19QVVJFX18gKi8gci5qc3goanIsIHsgc2l6ZTogXCJ4c1wiLCBjaGlsZHJlbjogZS5zaG9ydGN1dCB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3hzKEJlLCB7IGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChvZSwgeyBzaXplOiAxNCwgd2VpZ2h0OiA1MDAsIGNoaWxkcmVuOiBlLm5hbWUgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChvZSwgeyBzaXplOiAxMCwgY2hpbGRyZW46IGUuaGludCB9KVxuICAgICAgXSB9KVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIEZuKGUpIHtcbiAgY29uc3QgeyBjbGFzc2VzOiBuIH0gPSAkKHsgcm9vdDoge30gfSkodm9pZCAwLCB7XG4gICAgbmFtZTogXCJTbGFzaE1lbnVcIlxuICB9KSwgbyA9IFtdO1xuICBsZXQgaSA9IDA7XG4gIGNvbnN0IHMgPSBpdC5ncm91cEJ5KGUuZmlsdGVyZWRJdGVtcywgKGMpID0+IGMuZ3JvdXApO1xuICByZXR1cm4gaXQuZm9yRWFjaChzLCAoYykgPT4ge1xuICAgIG8ucHVzaChcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeCh3LkxhYmVsLCB7IGNoaWxkcmVuOiBjWzBdLmdyb3VwIH0sIGNbMF0uZ3JvdXApXG4gICAgKTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgYylcbiAgICAgIG8ucHVzaChcbiAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgIE9uLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IGQubmFtZSxcbiAgICAgICAgICAgIGljb246IGQuaWNvbixcbiAgICAgICAgICAgIGhpbnQ6IGQuaGludCxcbiAgICAgICAgICAgIHNob3J0Y3V0OiBkLnNob3J0Y3V0LFxuICAgICAgICAgICAgaXNTZWxlY3RlZDogZS5rZXlib2FyZEhvdmVyZWRJdGVtSW5kZXggPT09IGksXG4gICAgICAgICAgICBzZXQ6ICgpID0+IGUuaXRlbUNhbGxiYWNrKGQpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkLm5hbWVcbiAgICAgICAgKVxuICAgICAgKSwgaSsrO1xuICB9KSwgLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIHcsXG4gICAge1xuICAgICAgZGVmYXVsdE9wZW5lZDogITAsXG4gICAgICB0cmlnZ2VyOiBcImhvdmVyXCIsXG4gICAgICBjbG9zZURlbGF5OiAxZTcsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICB3LkRyb3Bkb3duLFxuICAgICAgICB7XG4gICAgICAgICAgb25Nb3VzZURvd246IChjKSA9PiBjLnByZXZlbnREZWZhdWx0KCksXG4gICAgICAgICAgY2xhc3NOYW1lOiBuLnJvb3QsXG4gICAgICAgICAgY2hpbGRyZW46IG8ubGVuZ3RoID4gMCA/IG8gOiAvKiBAX19QVVJFX18gKi8gci5qc3gody5JdGVtLCB7IGNoaWxkcmVuOiBcIk5vIG1hdGNoIGZvdW5kXCIgfSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cbiAgKTtcbn1cbmNvbnN0IEFuID0gKGUpID0+IHtcbiAgY29uc3QgW24sIG9dID0gYighMSksIFtpLCBzXSA9IGIoKSwgW2MsIGRdID0gYigpLCBnID0gQSgpO1xuICBCKCgpID0+IGUuZWRpdG9yLnNsYXNoTWVudS5vblVwZGF0ZSgoUykgPT4ge1xuICAgIG8oUy5zaG93KSwgcyhTLmZpbHRlcmVkSXRlbXMpLCBkKFMua2V5Ym9hcmRIb3ZlcmVkSXRlbUluZGV4KSwgZy5jdXJyZW50ID0gUy5yZWZlcmVuY2VQb3M7XG4gIH0pLCBbZS5lZGl0b3JdKTtcbiAgY29uc3QgYSA9IFIoXG4gICAgKCkgPT4ge1xuICAgICAgaWYgKGcuY3VycmVudClcbiAgICAgICAgcmV0dXJuICgpID0+IGcuY3VycmVudDtcbiAgICB9LFxuICAgIFtnLmN1cnJlbnRdXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICApLCB7IHJlZjogeSwgdXBkYXRlTWF4SGVpZ2h0OiB4IH0gPSB4ZSgpLCBwID0gUigoKSA9PiB7XG4gICAgaWYgKCFpIHx8IGMgPT09IHZvaWQgMClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IFMgPSBlLnNsYXNoTWVudSB8fCBGbjtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KFwiZGl2XCIsIHsgcmVmOiB5LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgUyxcbiAgICAgIHtcbiAgICAgICAgZmlsdGVyZWRJdGVtczogaSxcbiAgICAgICAgaXRlbUNhbGxiYWNrOiAoVCkgPT4gZS5lZGl0b3Iuc2xhc2hNZW51Lml0ZW1DYWxsYmFjayhUKSxcbiAgICAgICAga2V5Ym9hcmRIb3ZlcmVkSXRlbUluZGV4OiBjXG4gICAgICB9XG4gICAgKSB9KTtcbiAgfSwgW1xuICAgIGksXG4gICAgYyxcbiAgICBlLmVkaXRvci5zbGFzaE1lbnUsXG4gICAgZS5zbGFzaE1lbnUsXG4gICAgeVxuICBdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBZLFxuICAgIHtcbiAgICAgIG9uU2hvdzogeCxcbiAgICAgIGFwcGVuZFRvOiBlLmVkaXRvci5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQsXG4gICAgICBjb250ZW50OiBwLFxuICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogYSxcbiAgICAgIGludGVyYWN0aXZlOiAhMCxcbiAgICAgIHZpc2libGU6IG4sXG4gICAgICBhbmltYXRpb246IFwiZmFkZVwiLFxuICAgICAgcGxhY2VtZW50OiBcImJvdHRvbS1zdGFydFwiLFxuICAgICAgekluZGV4OiAyZTNcbiAgICB9XG4gICk7XG59LCBrID0gW1xuICBcIiNGRkZGRkZcIixcbiAgXCIjRUZFRkVGXCIsXG4gIFwiI0NGQ0ZDRlwiLFxuICBcIiNBRkFGQUZcIixcbiAgXCIjN0Y3RjdGXCIsXG4gIFwiIzNGM0YzRlwiLFxuICBcIiMxRjFGMUZcIixcbiAgXCIjMTYxNjE2XCIsXG4gIFwiIzBGMEYwRlwiLFxuICBcIiMwMDAwMDBcIlxuXSwgdmUgPSB7XG4gIGNvbG9yczoge1xuICAgIGVkaXRvcjoge1xuICAgICAgdGV4dDoga1s1XSxcbiAgICAgIGJhY2tncm91bmQ6IGtbMF1cbiAgICB9LFxuICAgIG1lbnU6IHtcbiAgICAgIHRleHQ6IGtbNV0sXG4gICAgICBiYWNrZ3JvdW5kOiBrWzBdXG4gICAgfSxcbiAgICB0b29sdGlwOiB7XG4gICAgICB0ZXh0OiBrWzVdLFxuICAgICAgYmFja2dyb3VuZDoga1sxXVxuICAgIH0sXG4gICAgaG92ZXJlZDoge1xuICAgICAgdGV4dDoga1s1XSxcbiAgICAgIGJhY2tncm91bmQ6IGtbMV1cbiAgICB9LFxuICAgIHNlbGVjdGVkOiB7XG4gICAgICB0ZXh0OiBrWzBdLFxuICAgICAgYmFja2dyb3VuZDoga1s1XVxuICAgIH0sXG4gICAgZGlzYWJsZWQ6IHtcbiAgICAgIHRleHQ6IGtbM10sXG4gICAgICBiYWNrZ3JvdW5kOiBrWzFdXG4gICAgfSxcbiAgICBzaGFkb3c6IGtbMl0sXG4gICAgYm9yZGVyOiBrWzFdLFxuICAgIHNpZGVNZW51OiBrWzJdLFxuICAgIGhpZ2hsaWdodENvbG9yczoge1xuICAgICAgZ3JheToge1xuICAgICAgICB0ZXh0OiBcIiM5YjlhOTdcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZWJlY2VkXCJcbiAgICAgIH0sXG4gICAgICBicm93bjoge1xuICAgICAgICB0ZXh0OiBcIiM2NDQ3M2FcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZTllNWUzXCJcbiAgICAgIH0sXG4gICAgICByZWQ6IHtcbiAgICAgICAgdGV4dDogXCIjZTAzZTNlXCIsXG4gICAgICAgIGJhY2tncm91bmQ6IFwiI2ZiZTRlNFwiXG4gICAgICB9LFxuICAgICAgb3JhbmdlOiB7XG4gICAgICAgIHRleHQ6IFwiI2Q5NzMwZFwiLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNmNmU5ZDlcIlxuICAgICAgfSxcbiAgICAgIHllbGxvdzoge1xuICAgICAgICB0ZXh0OiBcIiNkZmFiMDFcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZmJmM2RiXCJcbiAgICAgIH0sXG4gICAgICBncmVlbjoge1xuICAgICAgICB0ZXh0OiBcIiM0ZDY0NjFcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZGRlZGVhXCJcbiAgICAgIH0sXG4gICAgICBibHVlOiB7XG4gICAgICAgIHRleHQ6IFwiIzBiNmU5OVwiLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkZGViZjFcIlxuICAgICAgfSxcbiAgICAgIHB1cnBsZToge1xuICAgICAgICB0ZXh0OiBcIiM2OTQwYTVcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZWFlNGYyXCJcbiAgICAgIH0sXG4gICAgICBwaW5rOiB7XG4gICAgICAgIHRleHQ6IFwiI2FkMWE3MlwiLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNmNGRmZWJcIlxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYm9yZGVyUmFkaXVzOiA2LFxuICBmb250RmFtaWx5OiAnXCJJbnRlclwiLCBcIlNGIFBybyBEaXNwbGF5XCIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJPcGVuIFNhbnNcIiwgXCJTZWdvZSBVSVwiLCBcIlJvYm90b1wiLCBcIk94eWdlblwiLCBcIlVidW50dVwiLCBcIkNhbnRhcmVsbFwiLCBcIkZpcmEgU2Fuc1wiLCBcIkRyb2lkIFNhbnNcIiwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBzYW5zLXNlcmlmJ1xufSwgZHQgPSB7XG4gIGNvbG9yczoge1xuICAgIGVkaXRvcjoge1xuICAgICAgdGV4dDoga1syXSxcbiAgICAgIGJhY2tncm91bmQ6IGtbNl1cbiAgICB9LFxuICAgIG1lbnU6IHtcbiAgICAgIHRleHQ6IGtbMl0sXG4gICAgICBiYWNrZ3JvdW5kOiBrWzZdXG4gICAgfSxcbiAgICB0b29sdGlwOiB7XG4gICAgICB0ZXh0OiBrWzJdLFxuICAgICAgYmFja2dyb3VuZDoga1s3XVxuICAgIH0sXG4gICAgaG92ZXJlZDoge1xuICAgICAgdGV4dDoga1syXSxcbiAgICAgIGJhY2tncm91bmQ6IGtbN11cbiAgICB9LFxuICAgIHNlbGVjdGVkOiB7XG4gICAgICB0ZXh0OiBrWzJdLFxuICAgICAgYmFja2dyb3VuZDoga1s4XVxuICAgIH0sXG4gICAgZGlzYWJsZWQ6IHtcbiAgICAgIHRleHQ6IGtbNV0sXG4gICAgICBiYWNrZ3JvdW5kOiBrWzddXG4gICAgfSxcbiAgICBzaGFkb3c6IGtbOF0sXG4gICAgYm9yZGVyOiBrWzddLFxuICAgIHNpZGVNZW51OiBrWzRdLFxuICAgIGhpZ2hsaWdodENvbG9yczoge1xuICAgICAgZ3JheToge1xuICAgICAgICB0ZXh0OiBcIiNiZWJkYjhcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjOWI5YTk3XCJcbiAgICAgIH0sXG4gICAgICBicm93bjoge1xuICAgICAgICB0ZXh0OiBcIiM4ZTY1NTJcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjNjQ0NzNhXCJcbiAgICAgIH0sXG4gICAgICByZWQ6IHtcbiAgICAgICAgdGV4dDogXCIjZWM0MDQwXCIsXG4gICAgICAgIGJhY2tncm91bmQ6IFwiI2JlMzQzNFwiXG4gICAgICB9LFxuICAgICAgb3JhbmdlOiB7XG4gICAgICAgIHRleHQ6IFwiI2UzNzkwZFwiLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNiNzYwMGFcIlxuICAgICAgfSxcbiAgICAgIHllbGxvdzoge1xuICAgICAgICB0ZXh0OiBcIiNkZmFiMDFcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjYjU4YjAwXCJcbiAgICAgIH0sXG4gICAgICBncmVlbjoge1xuICAgICAgICB0ZXh0OiBcIiM2YjhiODdcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjNGQ2NDYxXCJcbiAgICAgIH0sXG4gICAgICBibHVlOiB7XG4gICAgICAgIHRleHQ6IFwiIzBlODdiY1wiLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMwYjZlOTlcIlxuICAgICAgfSxcbiAgICAgIHB1cnBsZToge1xuICAgICAgICB0ZXh0OiBcIiM4NTUyZDdcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIjNjk0MGE1XCJcbiAgICAgIH0sXG4gICAgICBwaW5rOiB7XG4gICAgICAgIHRleHQ6IFwiI2RhMjA4ZlwiLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNhZDFhNzJcIlxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYm9yZGVyUmFkaXVzOiB2ZS5ib3JkZXJSYWRpdXMsXG4gIGZvbnRGYW1pbHk6IHZlLmZvbnRGYW1pbHlcbn0sIExuID0gKGUpID0+IHtcbiAgY29uc3QgW24sIG9dID0gYighMSksIFtpLCBzXSA9IGIoKSwgYyA9IEEoKTtcbiAgQigoKSA9PiAoYnQuc2V0RGVmYXVsdFByb3BzKHsgbWF4V2lkdGg6IFwiXCIgfSksIGUuZWRpdG9yLmltYWdlVG9vbGJhci5vblVwZGF0ZSgoYSkgPT4ge1xuICAgIG8oYS5zaG93KSwgcyhhLmJsb2NrKSwgYy5jdXJyZW50ID0gYS5yZWZlcmVuY2VQb3M7XG4gIH0pKSwgW2UuZWRpdG9yXSk7XG4gIGNvbnN0IGQgPSBSKFxuICAgICgpID0+IHtcbiAgICAgIGlmIChjKVxuICAgICAgICByZXR1cm4gKCkgPT4gYy5jdXJyZW50O1xuICAgIH0sXG4gICAgW2MuY3VycmVudF1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICksIGcgPSBSKCgpID0+IHtcbiAgICBjb25zdCBhID0gZS5pbWFnZVRvb2xiYXIgfHwgRXQ7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChhLCB7IGVkaXRvcjogZS5lZGl0b3IsIGJsb2NrOiBpIH0pO1xuICB9LCBbaSwgZS5lZGl0b3IsIGUuaW1hZ2VUb29sYmFyXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goXG4gICAgWSxcbiAgICB7XG4gICAgICBhcHBlbmRUbzogZS5lZGl0b3IuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LFxuICAgICAgY29udGVudDogZyxcbiAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6IGQsXG4gICAgICBpbnRlcmFjdGl2ZTogITAsXG4gICAgICB2aXNpYmxlOiBuLFxuICAgICAgYW5pbWF0aW9uOiBcImZhZGVcIixcbiAgICAgIHBsYWNlbWVudDogXCJib3R0b21cIixcbiAgICAgIHpJbmRleDogNWUzXG4gICAgfVxuICApO1xufTtcbmZ1bmN0aW9uIFZuKGUpIHtcbiAgdmFyIGQ7XG4gIGNvbnN0IHsgY2xhc3NlczogbiB9ID0gJCh7IHJvb3Q6IHt9IH0pKHZvaWQgMCwge1xuICAgIG5hbWU6IFwiRWRpdG9yXCJcbiAgfSksIHsgZWRpdG9yOiBvLCBjaGlsZHJlbjogaSwgY2xhc3NOYW1lOiBzLCAuLi5jIH0gPSBlO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgIHdyLFxuICAgIHtcbiAgICAgIGVkaXRvcjogKGQgPSBlLmVkaXRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IGQuX3RpcHRhcEVkaXRvcixcbiAgICAgIGNsYXNzTmFtZTogYmUobi5yb290LCBlLmNsYXNzTmFtZSB8fCBcIlwiKSxcbiAgICAgIC4uLmMsXG4gICAgICBjaGlsZHJlbjogZS5jaGlsZHJlbiB8fCAvKiBAX19QVVJFX18gKi8gci5qc3hzKHIuRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KGtuLCB7IGVkaXRvcjogZS5lZGl0b3IgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChDbiwgeyBlZGl0b3I6IGUuZWRpdG9yIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8gci5qc3goQW4sIHsgZWRpdG9yOiBlLmVkaXRvciB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIHIuanN4KEJuLCB7IGVkaXRvcjogZS5lZGl0b3IgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyByLmpzeChMbiwgeyBlZGl0b3I6IGUuZWRpdG9yIH0pXG4gICAgICBdIH0pXG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gZW8oZSkge1xuICBjb25zdCB7XG4gICAgdGhlbWU6IG4gPSB7IGxpZ2h0OiB2ZSwgZGFyazogZHQgfSxcbiAgICAuLi5vXG4gIH0gPSBlLCBpID0gRXIoKSwgcyA9IFIoKCkgPT4gbiA9PT0gXCJsaWdodFwiID8gZmUodmUpIDogbiA9PT0gXCJkYXJrXCIgPyBmZShkdCkgOiBcImxpZ2h0XCIgaW4gbiAmJiBcImRhcmtcIiBpbiBuID8gZmUoXG4gICAgbltpID09PSBcImRhcmtcIiA/IFwiZGFya1wiIDogXCJsaWdodFwiXVxuICApIDogZmUobiksIFtpLCBuXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gci5qc3goVHIsIHsgdGhlbWU6IHMsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8gci5qc3goVm4sIHsgLi4ubyB9KSB9KTtcbn1cbmNvbnN0IFVuID0ge1xuICBIZWFkaW5nOiB7XG4gICAgZ3JvdXA6IFwiSGVhZGluZ3NcIixcbiAgICBpY29uOiAvKiBAX19QVVJFX18gKi8gci5qc3goa3QsIHsgc2l6ZTogMTggfSksXG4gICAgaGludDogXCJVc2VkIGZvciBhIHRvcC1sZXZlbCBoZWFkaW5nXCIsXG4gICAgc2hvcnRjdXQ6IEYoXCJNb2QtQWx0LTFcIilcbiAgfSxcbiAgXCJIZWFkaW5nIDJcIjoge1xuICAgIGdyb3VwOiBcIkhlYWRpbmdzXCIsXG4gICAgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KHl0LCB7IHNpemU6IDE4IH0pLFxuICAgIGhpbnQ6IFwiVXNlZCBmb3Iga2V5IHNlY3Rpb25zXCIsXG4gICAgc2hvcnRjdXQ6IEYoXCJNb2QtQWx0LTJcIilcbiAgfSxcbiAgXCJIZWFkaW5nIDNcIjoge1xuICAgIGdyb3VwOiBcIkhlYWRpbmdzXCIsXG4gICAgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KHB0LCB7IHNpemU6IDE4IH0pLFxuICAgIGhpbnQ6IFwiVXNlZCBmb3Igc3Vic2VjdGlvbnMgYW5kIGdyb3VwIGhlYWRpbmdzXCIsXG4gICAgc2hvcnRjdXQ6IEYoXCJNb2QtQWx0LTNcIilcbiAgfSxcbiAgXCJOdW1iZXJlZCBMaXN0XCI6IHtcbiAgICBncm91cDogXCJCYXNpYyBibG9ja3NcIixcbiAgICBpY29uOiAvKiBAX19QVVJFX18gKi8gci5qc3goanQsIHsgc2l6ZTogMTggfSksXG4gICAgaGludDogXCJVc2VkIHRvIGRpc3BsYXkgYSBudW1iZXJlZCBsaXN0XCIsXG4gICAgc2hvcnRjdXQ6IEYoXCJNb2QtQWx0LTdcIilcbiAgfSxcbiAgXCJCdWxsZXQgTGlzdFwiOiB7XG4gICAgZ3JvdXA6IFwiQmFzaWMgYmxvY2tzXCIsXG4gICAgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KFR0LCB7IHNpemU6IDE4IH0pLFxuICAgIGhpbnQ6IFwiVXNlZCB0byBkaXNwbGF5IGFuIHVub3JkZXJlZCBsaXN0XCIsXG4gICAgc2hvcnRjdXQ6IEYoXCJNb2QtQWx0LTlcIilcbiAgfSxcbiAgUGFyYWdyYXBoOiB7XG4gICAgZ3JvdXA6IFwiQmFzaWMgYmxvY2tzXCIsXG4gICAgaWNvbjogLyogQF9fUFVSRV9fICovIHIuanN4KGllLCB7IHNpemU6IDE4IH0pLFxuICAgIGhpbnQ6IFwiVXNlZCBmb3IgdGhlIGJvZHkgb2YgeW91ciBkb2N1bWVudFwiLFxuICAgIHNob3J0Y3V0OiBGKFwiTW9kLUFsdC0wXCIpXG4gIH0sXG4gIEltYWdlOiB7XG4gICAgZ3JvdXA6IFwiTWVkaWFcIixcbiAgICBpY29uOiAvKiBAX19QVVJFX18gKi8gci5qc3gocXIsIHt9KSxcbiAgICBoaW50OiBcIkluc2VydCBhbiBpbWFnZVwiXG4gIH1cbn07XG5mdW5jdGlvbiBObihlID0gdXQpIHtcbiAgcmV0dXJuIHZyKGUpLm1hcCgobykgPT4gKHtcbiAgICAuLi5vLFxuICAgIC4uLlVuW28ubmFtZV1cbiAgfSkpO1xufVxuY29uc3QgJG4gPSAoZSkgPT4gbmV3IGJyKHtcbiAgc2xhc2hNZW51SXRlbXM6IE5uKFxuICAgIGUuYmxvY2tTY2hlbWEgfHwgdXRcbiAgKSxcbiAgLi4uZVxufSksIHRvID0gKGUgPSB7fSwgbiA9IFtdKSA9PiB7XG4gIGNvbnN0IG8gPSBBKCk7XG4gIHJldHVybiBSKCgpID0+IChvLmN1cnJlbnQgJiYgby5jdXJyZW50Ll90aXB0YXBFZGl0b3IuZGVzdHJveSgpLCBvLmN1cnJlbnQgPSAkbihlKSwgby5jdXJyZW50KSwgbik7XG59O1xuZnVuY3Rpb24gV24oKSB7XG4gIGNvbnN0IFssIGVdID0gYigwKTtcbiAgcmV0dXJuICgpID0+IGUoKG4pID0+IG4gKyAxKTtcbn1cbmNvbnN0IHJvID0gKGUpID0+IHtcbiAgY29uc3QgbiA9IFduKCk7XG4gIEIoKCkgPT4ge1xuICAgIGNvbnN0IG8gPSAoKSA9PiB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIG4oKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBlLm9uKFwidHJhbnNhY3Rpb25cIiwgbyksICgpID0+IHtcbiAgICAgIGUub2ZmKFwidHJhbnNhY3Rpb25cIiwgbyk7XG4gICAgfTtcbiAgfSwgW2VdKTtcbn0sIEl0ID0gZnIoe30pLCBubyA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSBocihJdCkuaW5saW5lQ29udGVudCB8fCB7fSwgbyA9IGJlKFxuICAgIGUuY2xhc3NOYW1lIHx8IFwiXCIsXG4gICAgTy5pbmxpbmVDb250ZW50LFxuICAgIG4uY2xhc3NcbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICBTcixcbiAgICB7XG4gICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG4pLmZpbHRlcihcbiAgICAgICAgICAoW2ldKSA9PiBpICE9PSBcImNsYXNzXCJcbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgIC4uLmUsXG4gICAgICBjbGFzc05hbWU6IG9cbiAgICB9XG4gICk7XG59O1xuZnVuY3Rpb24gb28oZSkge1xuICByZXR1cm4ge1xuICAgIG5vZGU6IHhyKHtcbiAgICAgIG5hbWU6IGUudHlwZSxcbiAgICAgIGNvbnRlbnQ6IGUuY29udGFpbnNJbmxpbmVDb250ZW50ID8gXCJpbmxpbmUqXCIgOiBcIlwiLFxuICAgICAgc2VsZWN0YWJsZTogITAsXG4gICAgICBhZGRBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gbXIoZSk7XG4gICAgICB9LFxuICAgICAgcGFyc2VIVE1MKCkge1xuICAgICAgICByZXR1cm4ga3IoZSk7XG4gICAgICB9LFxuICAgICAgcmVuZGVySFRNTCh7IEhUTUxBdHRyaWJ1dGVzOiBvIH0pIHtcbiAgICAgICAgcmV0dXJuIHlyKGUsIG8pO1xuICAgICAgfSxcbiAgICAgIGFkZE5vZGVWaWV3KCkge1xuICAgICAgICByZXR1cm4gTXIoKGkpID0+IHtcbiAgICAgICAgICB2YXIgVDtcbiAgICAgICAgICBjb25zdCBzID0gZS5yZW5kZXIsIGMgPSAoKFQgPSB0aGlzLm9wdGlvbnMuZG9tQXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IFQuYmxvY2tDb250ZW50KSB8fCB7fSwgZCA9IHt9O1xuICAgICAgICAgIGZvciAoY29uc3QgW0QsIGxlXSBvZiBPYmplY3QuZW50cmllcyhpLm5vZGUuYXR0cnMpKVxuICAgICAgICAgICAgRCBpbiBlLnByb3BTY2hlbWEgJiYgbGUgIT09IGUucHJvcFNjaGVtYVtEXS5kZWZhdWx0ICYmIChkW3ByKEQpXSA9IGxlKTtcbiAgICAgICAgICBjb25zdCBnID0gdGhpcy5vcHRpb25zLmVkaXRvciwgYSA9IHR5cGVvZiBpLmdldFBvcyA9PSBcImZ1bmN0aW9uXCIgPyBpLmdldFBvcygpIDogdm9pZCAwLCBwID0gZy5fdGlwdGFwRWRpdG9yLnN0YXRlLmRvYy5yZXNvbHZlKGEpLm5vZGUoKS5hdHRycy5pZCwgUyA9IGcuZ2V0QmxvY2socCk7XG4gICAgICAgICAgaWYgKFMudHlwZSAhPT0gZS50eXBlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmxvY2sgdHlwZSBkb2VzIG5vdCBtYXRjaFwiKTtcbiAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIHIuanN4KFxuICAgICAgICAgICAgUnIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhjKS5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoW0RdKSA9PiBEICE9PSBcImNsYXNzXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogYmUoXG4gICAgICAgICAgICAgICAgTy5ibG9ja0NvbnRlbnQsXG4gICAgICAgICAgICAgICAgYy5jbGFzc1xuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBcImRhdGEtY29udGVudC10eXBlXCI6IGUudHlwZSxcbiAgICAgICAgICAgICAgLi4uZCxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyByLmpzeChcbiAgICAgICAgICAgICAgICBJdC5Qcm92aWRlcixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5vcHRpb25zLmRvbUF0dHJpYnV0ZXMgfHwge30sXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIHIuanN4KHMsIHsgYmxvY2s6IFMsIGVkaXRvcjogZyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBjbGFzc05hbWU6IE8ucmVhY3ROb2RlVmlld1JlbmRlcmVyXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLFxuICAgIHByb3BTY2hlbWE6IGUucHJvcFNjaGVtYVxuICB9O1xufVxuZXhwb3J0IHtcbiAgd24gYXMgQWRkQmxvY2tCdXR0b24sXG4gIEVuIGFzIEJsb2NrQ29sb3JzQnV0dG9uLFxuICBlbyBhcyBCbG9ja05vdGVWaWV3LFxuICBvbiBhcyBCbG9ja1R5cGVEcm9wZG93bixcbiAgdW4gYXMgQ29sb3JTdHlsZUJ1dHRvbixcbiAgdm4gYXMgQ3JlYXRlTGlua0J1dHRvbixcbiAgem4gYXMgRGVmYXVsdERyYWdIYW5kbGVNZW51LFxuICBtbiBhcyBEZWZhdWx0Rm9ybWF0dGluZ1Rvb2xiYXIsXG4gIEV0IGFzIERlZmF1bHRJbWFnZVRvb2xiYXIsXG4gIEluIGFzIERlZmF1bHRTaWRlTWVudSxcbiAgRm4gYXMgRGVmYXVsdFNsYXNoTWVudSxcbiAgSG4gYXMgRHJhZ0hhbmRsZSxcbiAgTW4gYXMgRHJhZ0hhbmRsZU1lbnUsXG4gIEh0IGFzIERyYWdIYW5kbGVNZW51SXRlbSxcbiAga24gYXMgRm9ybWF0dGluZ1Rvb2xiYXJQb3NpdGlvbmVyLFxuICBDbiBhcyBIeXBlcmxpbmtUb29sYmFyUG9zaXRpb25lcixcbiAgTG4gYXMgSW1hZ2VUb29sYmFyUG9zaXRpb25lcixcbiAgbm8gYXMgSW5saW5lQ29udGVudCxcbiAgZ24gYXMgTmVzdEJsb2NrQnV0dG9uLFxuICBSbiBhcyBSZW1vdmVCbG9ja0J1dHRvbixcbiAgam4gYXMgU2lkZU1lbnUsXG4gIHp0IGFzIFNpZGVNZW51QnV0dG9uLFxuICBCbiBhcyBTaWRlTWVudVBvc2l0aW9uZXIsXG4gIE9uIGFzIFNsYXNoTWVudUl0ZW0sXG4gIEFuIGFzIFNsYXNoTWVudVBvc2l0aW9uZXIsXG4gIFNlIGFzIFRleHRBbGlnbkJ1dHRvbixcbiAgaGUgYXMgVG9nZ2xlZFN0eWxlQnV0dG9uLFxuICBfZSBhcyBUb29sYmFyLFxuICBQIGFzIFRvb2xiYXJCdXR0b24sXG4gIGVuIGFzIFRvb2xiYXJEcm9wZG93bixcbiAgZm4gYXMgVW5uZXN0QmxvY2tCdXR0b24sXG4gIGZlIGFzIGJsb2NrTm90ZVRvTWFudGluZVRoZW1lLFxuICBvbyBhcyBjcmVhdGVSZWFjdEJsb2NrU3BlYyxcbiAgZHQgYXMgZGFya0RlZmF1bHRUaGVtZSxcbiAgbm4gYXMgZGVmYXVsdEJsb2NrVHlwZURyb3Bkb3duSXRlbXMsXG4gIGsgYXMgZGVmYXVsdENvbG9yU2NoZW1lLFxuICBObiBhcyBnZXREZWZhdWx0UmVhY3RTbGFzaE1lbnVJdGVtcyxcbiAgdmUgYXMgbGlnaHREZWZhdWx0VGhlbWUsXG4gIHRvIGFzIHVzZUJsb2NrTm90ZSxcbiAgcSBhcyB1c2VFZGl0b3JDaGFuZ2UsXG4gIHRuIGFzIHVzZUVkaXRvckNvbnRlbnRDaGFuZ2UsXG4gIHJvIGFzIHVzZUVkaXRvckZvcmNlVXBkYXRlLFxuICBybiBhcyB1c2VFZGl0b3JTZWxlY3Rpb25DaGFuZ2UsXG4gIFEgYXMgdXNlU2VsZWN0ZWRCbG9ja3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ibG9ja25vdGUtcmVhY3QuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@blocknote/react/dist/blocknote-react.js\n");

/***/ })

};
;